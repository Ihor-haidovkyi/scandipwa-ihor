{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import ReviewQuery from\"/home/marketihor/scandipwa/packages/scandipwa/src/query/Review.query\";import{showNotification}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";import{fetchMutation}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";/**\n * Product Review Dispatcher\n * @class WishlistDispatcher\n * @namespace Store/Review/Dispatcher\n */export var _ReviewDispatcher=/*#__PURE__*/function(_Extensible){_inherits(_ReviewDispatcher,_Extensible);var _super=_createSuper(_ReviewDispatcher);function _ReviewDispatcher(){_classCallCheck(this,_ReviewDispatcher);return _super.apply(this,arguments);}_createClass(_ReviewDispatcher,[{key:\"prepareReviewData\",value:function prepareReviewData(reviewItem){var rating_data=reviewItem.rating_data,product_sku=reviewItem.product_sku,detail=reviewItem.detail,title=reviewItem.title,nickname=reviewItem.nickname;return{nickname:nickname,sku:product_sku,summary:title,text:detail,ratings:Object.keys(rating_data).map(function(key){return{id:key,value_id:rating_data[key]};})};}},{key:\"submitProductReview\",value:function submitProductReview(dispatch,options){return fetchMutation(ReviewQuery.getAddProductReviewMutation(this.prepareReviewData(options))).then(/** @namespace Store/Review/Dispatcher/submitProductReviewFetchMutationThen */middleware(function(){return dispatch(showNotification('success','You submitted your review for moderation.'));},\"Store/Review/Dispatcher/submitProductReviewFetchMutationThen\"),/** @namespace Store/Review/Dispatcher/submitProductReviewFetchMutationError */middleware(function(){return dispatch(showNotification('error',__('Error submitting review!')));},\"Store/Review/Dispatcher/submitProductReviewFetchMutationError\"));}}]);return _ReviewDispatcher;}(Extensible());Object.defineProperty(_ReviewDispatcher,'name',{value:'ReviewDispatcher'});export var ReviewDispatcher=middleware(_ReviewDispatcher,\"Store/Review/Dispatcher\");export default new ReviewDispatcher();","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/store/Review/Review.dispatcher.js"],"names":["ReviewQuery","showNotification","fetchMutation","ReviewDispatcher","reviewItem","rating_data","product_sku","detail","title","nickname","sku","summary","text","ratings","Object","keys","map","key","id","value_id","dispatch","options","getAddProductReviewMutation","prepareReviewData","then","__","defineProperty","_ReviewDispatcher","value"],"mappings":"ojBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,MAAOA,CAAAA,WAAP,4EACA,OAASC,gBAAT,gGACA,OAASC,aAAT,sEAEA;AACA;AACA;AACA;AACA,GACA,UAAaC,CAAAA,iBAAb,iSACI,2BAAkBC,UAAlB,CAA8B,IAEtBC,CAAAA,WAFsB,CAOtBD,UAPsB,CAEtBC,WAFsB,CAGtBC,WAHsB,CAOtBF,UAPsB,CAGtBE,WAHsB,CAItBC,MAJsB,CAOtBH,UAPsB,CAItBG,MAJsB,CAKtBC,KALsB,CAOtBJ,UAPsB,CAKtBI,KALsB,CAMtBC,QANsB,CAOtBL,UAPsB,CAMtBK,QANsB,CAS1B,MAAO,CACHA,QAAQ,CAARA,QADG,CAEHC,GAAG,CAAEJ,WAFF,CAGHK,OAAO,CAAEH,KAHN,CAIHI,IAAI,CAAEL,MAJH,CAKHM,OAAO,CAAEC,MAAM,CAACC,IAAP,CAAYV,WAAZ,EAAyBW,GAAzB,CACL,SAACC,GAAD,QAAU,CACNC,EAAE,CAAED,GADE,CAENE,QAAQ,CAAEd,WAAW,CAACY,GAAD,CAFf,CAAV,EADK,CALN,CAAP,CAYH,CAtBL,mCAwBI,6BAAoBG,QAApB,CAA8BC,OAA9B,CAAuC,CACnC,MAAOnB,CAAAA,aAAa,CAACF,WAAW,CAACsB,2BAAZ,CACjB,KAAKC,iBAAL,CAAuBF,OAAvB,CADiB,CAAD,CAAb,CAEJG,IAFI,CAGH,8EAHG,WAIH,iBAAMJ,CAAAA,QAAQ,CAACnB,gBAAgB,CAAC,SAAD,CAAY,2CAAZ,CAAjB,CAAd,EAJG,iEAKH,+EALG,WAMH,iBAAMmB,CAAAA,QAAQ,CAACnB,gBAAgB,CAAC,OAAD,CAAUwB,EAAE,CAAC,0BAAD,CAAZ,CAAjB,CAAd,EANG,kEAAP,CAQH,CAjCL,6CApBAX,MAAM,CAACY,cAAP,CAAsBC,iBAAtB,CAAyC,MAAzC,CAAiD,CAAEC,KAAK,CAAE,kBAAT,CAAjD,E,oFAwDA,cAAe,IAAIzB,CAAAA,gBAAJ,EAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport ReviewQuery from 'Query/Review.query';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { fetchMutation } from 'Util/Request';\n\n/**\n * Product Review Dispatcher\n * @class WishlistDispatcher\n * @namespace Store/Review/Dispatcher\n */\nexport class ReviewDispatcher {\n    prepareReviewData(reviewItem) {\n        const {\n            rating_data,\n            product_sku,\n            detail,\n            title,\n            nickname\n        } = reviewItem;\n\n        return {\n            nickname,\n            sku: product_sku,\n            summary: title,\n            text: detail,\n            ratings: Object.keys(rating_data).map(\n                (key) => ({\n                    id: key,\n                    value_id: rating_data[key]\n                })\n            )\n        };\n    }\n\n    submitProductReview(dispatch, options) {\n        return fetchMutation(ReviewQuery.getAddProductReviewMutation(\n            this.prepareReviewData(options)\n        )).then(\n            /** @namespace Store/Review/Dispatcher/submitProductReviewFetchMutationThen */\n            () => dispatch(showNotification('success', 'You submitted your review for moderation.')),\n            /** @namespace Store/Review/Dispatcher/submitProductReviewFetchMutationError */\n            () => dispatch(showNotification('error', __('Error submitting review!')))\n        );\n    }\n}\n\nexport default new ReviewDispatcher();\n"]},"metadata":{},"sourceType":"module"}