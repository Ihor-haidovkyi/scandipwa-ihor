{"ast":null,"code":"/**\n * Module dependencies\n */var debug=require('debug')('jsonp');/**\n * Module exports.\n */module.exports=jsonp;/**\n * Callback index.\n */var count=0;/**\n * Noop function.\n */function noop(){}/**\n * JSONP handler\n *\n * Options:\n *  - param {String} qs parameter (`callback`)\n *  - prefix {String} qs parameter (`__jp`)\n *  - name {String} qs parameter (`prefix` + incr)\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\n *\n * @param {String} url\n * @param {Object|Function} optional options / callback\n * @param {Function} optional callback\n */function jsonp(url,opts,fn){if('function'==typeof opts){fn=opts;opts={};}if(!opts)opts={};var prefix=opts.prefix||'__jp';// use the callback name that was passed if one was provided.\n// otherwise generate a unique name by incrementing our counter.\nvar id=opts.name||prefix+count++;var param=opts.param||'callback';var timeout=null!=opts.timeout?opts.timeout:60000;var enc=encodeURIComponent;var target=document.getElementsByTagName('script')[0]||document.head;var script;var timer;if(timeout){timer=setTimeout(function(){cleanup();if(fn)fn(new Error('Timeout'));},timeout);}function cleanup(){if(script.parentNode)script.parentNode.removeChild(script);window[id]=noop;if(timer)clearTimeout(timer);}function cancel(){if(window[id]){cleanup();}}window[id]=function(data){debug('jsonp got',data);cleanup();if(fn)fn(null,data);};// add qs component\nurl+=(~url.indexOf('?')?'&':'?')+param+'='+enc(id);url=url.replace('?&','?');debug('jsonp req \"%s\"',url);// create script\nscript=document.createElement('script');script.src=url;target.parentNode.insertBefore(script,target);return cancel;}","map":{"version":3,"sources":["/home/marketihor/scandipwa/node_modules/jsonp/index.js"],"names":["debug","require","module","exports","jsonp","count","noop","url","opts","fn","prefix","id","name","param","timeout","enc","encodeURIComponent","target","document","getElementsByTagName","head","script","timer","setTimeout","cleanup","Error","parentNode","removeChild","window","clearTimeout","cancel","data","indexOf","replace","createElement","src","insertBefore"],"mappings":"AAAA;AACA;AACA,GAEA,GAAIA,CAAAA,KAAK,CAAGC,OAAO,CAAC,OAAD,CAAP,CAAiB,OAAjB,CAAZ,CAEA;AACA;AACA,GAEAC,MAAM,CAACC,OAAP,CAAiBC,KAAjB,CAEA;AACA;AACA,GAEA,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CAEA;AACA;AACA,GAEA,QAASC,CAAAA,IAAT,EAAe,CAAE,CAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,QAASF,CAAAA,KAAT,CAAeG,GAAf,CAAoBC,IAApB,CAA0BC,EAA1B,CAA6B,CAC3B,GAAI,YAAc,MAAOD,CAAAA,IAAzB,CAA+B,CAC7BC,EAAE,CAAGD,IAAL,CACAA,IAAI,CAAG,EAAP,CACD,CACD,GAAI,CAACA,IAAL,CAAWA,IAAI,CAAG,EAAP,CAEX,GAAIE,CAAAA,MAAM,CAAGF,IAAI,CAACE,MAAL,EAAe,MAA5B,CAEA;AACA;AACA,GAAIC,CAAAA,EAAE,CAAGH,IAAI,CAACI,IAAL,EAAcF,MAAM,CAAIL,KAAK,EAAtC,CAEA,GAAIQ,CAAAA,KAAK,CAAGL,IAAI,CAACK,KAAL,EAAc,UAA1B,CACA,GAAIC,CAAAA,OAAO,CAAG,MAAQN,IAAI,CAACM,OAAb,CAAuBN,IAAI,CAACM,OAA5B,CAAsC,KAApD,CACA,GAAIC,CAAAA,GAAG,CAAGC,kBAAV,CACA,GAAIC,CAAAA,MAAM,CAAGC,QAAQ,CAACC,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,GAA8CD,QAAQ,CAACE,IAApE,CACA,GAAIC,CAAAA,MAAJ,CACA,GAAIC,CAAAA,KAAJ,CAGA,GAAIR,OAAJ,CAAa,CACXQ,KAAK,CAAGC,UAAU,CAAC,UAAU,CAC3BC,OAAO,GACP,GAAIf,EAAJ,CAAQA,EAAE,CAAC,GAAIgB,CAAAA,KAAJ,CAAU,SAAV,CAAD,CAAF,CACT,CAHiB,CAGfX,OAHe,CAAlB,CAID,CAED,QAASU,CAAAA,OAAT,EAAkB,CAChB,GAAIH,MAAM,CAACK,UAAX,CAAuBL,MAAM,CAACK,UAAP,CAAkBC,WAAlB,CAA8BN,MAA9B,EACvBO,MAAM,CAACjB,EAAD,CAAN,CAAaL,IAAb,CACA,GAAIgB,KAAJ,CAAWO,YAAY,CAACP,KAAD,CAAZ,CACZ,CAED,QAASQ,CAAAA,MAAT,EAAiB,CACf,GAAIF,MAAM,CAACjB,EAAD,CAAV,CAAgB,CACda,OAAO,GACR,CACF,CAEDI,MAAM,CAACjB,EAAD,CAAN,CAAa,SAASoB,IAAT,CAAc,CACzB/B,KAAK,CAAC,WAAD,CAAc+B,IAAd,CAAL,CACAP,OAAO,GACP,GAAIf,EAAJ,CAAQA,EAAE,CAAC,IAAD,CAAOsB,IAAP,CAAF,CACT,CAJD,CAMA;AACAxB,GAAG,EAAI,CAAC,CAACA,GAAG,CAACyB,OAAJ,CAAY,GAAZ,CAAD,CAAoB,GAApB,CAA0B,GAA3B,EAAkCnB,KAAlC,CAA0C,GAA1C,CAAgDE,GAAG,CAACJ,EAAD,CAA1D,CACAJ,GAAG,CAAGA,GAAG,CAAC0B,OAAJ,CAAY,IAAZ,CAAkB,GAAlB,CAAN,CAEAjC,KAAK,CAAC,gBAAD,CAAmBO,GAAnB,CAAL,CAEA;AACAc,MAAM,CAAGH,QAAQ,CAACgB,aAAT,CAAuB,QAAvB,CAAT,CACAb,MAAM,CAACc,GAAP,CAAa5B,GAAb,CACAU,MAAM,CAACS,UAAP,CAAkBU,YAAlB,CAA+Bf,MAA/B,CAAuCJ,MAAvC,EAEA,MAAOa,CAAAA,MAAP,CACD","sourcesContent":["/**\n * Module dependencies\n */\n\nvar debug = require('debug')('jsonp');\n\n/**\n * Module exports.\n */\n\nmodule.exports = jsonp;\n\n/**\n * Callback index.\n */\n\nvar count = 0;\n\n/**\n * Noop function.\n */\n\nfunction noop(){}\n\n/**\n * JSONP handler\n *\n * Options:\n *  - param {String} qs parameter (`callback`)\n *  - prefix {String} qs parameter (`__jp`)\n *  - name {String} qs parameter (`prefix` + incr)\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\n *\n * @param {String} url\n * @param {Object|Function} optional options / callback\n * @param {Function} optional callback\n */\n\nfunction jsonp(url, opts, fn){\n  if ('function' == typeof opts) {\n    fn = opts;\n    opts = {};\n  }\n  if (!opts) opts = {};\n\n  var prefix = opts.prefix || '__jp';\n\n  // use the callback name that was passed if one was provided.\n  // otherwise generate a unique name by incrementing our counter.\n  var id = opts.name || (prefix + (count++));\n\n  var param = opts.param || 'callback';\n  var timeout = null != opts.timeout ? opts.timeout : 60000;\n  var enc = encodeURIComponent;\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script;\n  var timer;\n\n\n  if (timeout) {\n    timer = setTimeout(function(){\n      cleanup();\n      if (fn) fn(new Error('Timeout'));\n    }, timeout);\n  }\n\n  function cleanup(){\n    if (script.parentNode) script.parentNode.removeChild(script);\n    window[id] = noop;\n    if (timer) clearTimeout(timer);\n  }\n\n  function cancel(){\n    if (window[id]) {\n      cleanup();\n    }\n  }\n\n  window[id] = function(data){\n    debug('jsonp got', data);\n    cleanup();\n    if (fn) fn(null, data);\n  };\n\n  // add qs component\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\n  url = url.replace('?&', '?');\n\n  debug('jsonp req \"%s\"', url);\n\n  // create script\n  script = document.createElement('script');\n  script.src = url;\n  target.parentNode.insertBefore(script, target);\n\n  return cancel;\n}\n"]},"metadata":{},"sourceType":"module"}