{"ast":null,"code":"import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{UPDATE_INFO_LOAD_STATUS,UPDATE_PRODUCT_LIST_INFO}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductListInfo/ProductListInfo.action\";/** @namespace Store/ProductListInfo/Reducer/reduceFilters */export var reduceFilters=middleware(function(filters){return filters.reduce(function(co,item){var attribute_code=item.request_var,attribute_label=item.name,attribute_position=item.position,filter_items=item.filter_items,is_boolean=item.is_boolean;var _filter_items$reduce=filter_items.reduce(function(attribute,option){var value_string=option.value_string;var attribute_values=attribute.attribute_values,attribute_options=attribute.attribute_options;attribute_values.push(value_string);return _objectSpread(_objectSpread({},attribute),{},{attribute_options:_objectSpread(_objectSpread({},attribute_options),{},_defineProperty({},value_string,option))});},{attribute_values:[],attribute_options:{}}),attribute_values=_filter_items$reduce.attribute_values,attribute_options=_filter_items$reduce.attribute_options;return _objectSpread(_objectSpread({},co),{},_defineProperty({},attribute_code,{attribute_code:attribute_code,attribute_label:attribute_label,attribute_position:attribute_position,attribute_values:attribute_values,attribute_type:'select',attribute_options:attribute_options,is_boolean:is_boolean}));},{});},\"Store/ProductListInfo/Reducer/reduceFilters\");/** @namespace Store/ProductListInfo/Reducer/getInitialState */export var getInitialState=middleware(function(){return{minPrice:0,maxPrice:0,sortFields:{},filters:{},isLoading:true};},\"Store/ProductListInfo/Reducer/getInitialState\");/** @namespace Store/ProductListInfo/Reducer */export var ProductListReducer=middleware(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getInitialState();var action=arguments.length>1?arguments[1]:undefined;var type=action.type;switch(type){case UPDATE_PRODUCT_LIST_INFO:{var selectedFilter=action.selectedFilter,_action$products=action.products;_action$products=_action$products===void 0?{}:_action$products;var _action$products$filt=_action$products.filters,availableFilters=_action$products$filt===void 0?[]:_action$products$filt,min_price=_action$products.min_price,max_price=_action$products.max_price,sortFields=_action$products.sort_fields;return _objectSpread(_objectSpread({},state),{},{filters:reduceFilters(availableFilters),sortFields:sortFields,minPrice:Math.floor(min_price),maxPrice:Math.ceil(max_price),isLoading:false,selectedFilter:selectedFilter});}case UPDATE_INFO_LOAD_STATUS:{var isLoading=action.isLoading;return _objectSpread(_objectSpread({},state),{},{isLoading:isLoading});}default:return state;}},\"Store/ProductListInfo/Reducer\");export default ProductListReducer;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductListInfo/ProductListInfo.reducer.js"],"names":["UPDATE_INFO_LOAD_STATUS","UPDATE_PRODUCT_LIST_INFO","reduceFilters","filters","reduce","co","item","attribute_code","request_var","attribute_label","name","attribute_position","position","filter_items","is_boolean","attribute","option","value_string","attribute_values","attribute_options","push","attribute_type","getInitialState","minPrice","maxPrice","sortFields","isLoading","ProductListReducer","state","action","type","selectedFilter","products","availableFilters","min_price","max_price","sort_fields","Math","floor","ceil"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport {\n    UPDATE_INFO_LOAD_STATUS,\n    UPDATE_PRODUCT_LIST_INFO\n} from 'Store/ProductListInfo/ProductListInfo.action';\n\n/** @namespace Store/ProductListInfo/Reducer/reduceFilters */\nexport const reduceFilters = (filters) => filters.reduce((co, item) => {\n    const {\n        request_var: attribute_code,\n        name: attribute_label,\n        position: attribute_position,\n        filter_items,\n        is_boolean\n    } = item;\n\n    const { attribute_values, attribute_options } = filter_items.reduce((attribute, option) => {\n        const { value_string } = option;\n        const { attribute_values, attribute_options } = attribute;\n\n        attribute_values.push(value_string);\n\n        return {\n            ...attribute,\n            attribute_options: {\n                ...attribute_options,\n                [value_string]: option\n            }\n        };\n    }, { attribute_values: [], attribute_options: {} });\n\n    return {\n        ...co,\n        [attribute_code]: {\n            attribute_code,\n            attribute_label,\n            attribute_position,\n            attribute_values,\n            attribute_type: 'select',\n            attribute_options,\n            is_boolean\n        }\n    };\n}, {});\n\n/** @namespace Store/ProductListInfo/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    minPrice: 0,\n    maxPrice: 0,\n    sortFields: {},\n    filters: {},\n    isLoading: true\n});\n\n/** @namespace Store/ProductListInfo/Reducer */\nexport const ProductListReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const { type } = action;\n\n    switch (type) {\n    case UPDATE_PRODUCT_LIST_INFO: {\n        const {\n            selectedFilter,\n            products: {\n                filters: availableFilters = [],\n                min_price,\n                max_price,\n                sort_fields: sortFields\n            } = {}\n        } = action;\n\n        return {\n            ...state,\n            filters: reduceFilters(availableFilters),\n            sortFields,\n            minPrice: Math.floor(min_price),\n            maxPrice: Math.ceil(max_price),\n            isLoading: false,\n            selectedFilter\n        };\n    }\n\n    case UPDATE_INFO_LOAD_STATUS: {\n        const { isLoading } = action;\n\n        return {\n            ...state,\n            isLoading\n        };\n    }\n\n    default:\n        return state;\n    }\n};\n\nexport default ProductListReducer;\n"]},"metadata":{},"sourceType":"module"}