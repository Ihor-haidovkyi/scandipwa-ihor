{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import TextPlaceholder from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/TextPlaceholder\";import{MixType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";import{PriceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import\"./ProductPrice.style\";/**\n * Product price\n * @class ProductPrice\n * @namespace Component/ProductPrice/Component\n */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductPrice=/*#__PURE__*/function(_Extensible){_inherits(_ProductPrice,_Extensible);var _super=_createSuper(_ProductPrice);function _ProductPrice(){_classCallCheck(this,_ProductPrice);return _super.apply(this,arguments);}_createClass(_ProductPrice,[{key:\"renderPlaceholder\",value:function renderPlaceholder(){var mix=this.props.mix;return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"ProductPrice\",\"aria-label\":\"Product Price\",mix:mix},/*#__PURE__*/_checkBEM(React,TextPlaceholder,{mix:{block:'ProductPrice',elem:'Placeholder'},length:\"custom\"}));}},{key:\"getCurrencySchema\",value:function getCurrencySchema(){var _this$props=this.props,isSchemaRequired=_this$props.isSchemaRequired,priceCurrency=_this$props.priceCurrency;return isSchemaRequired?{itemProp:'priceCurrency',content:priceCurrency}:{};}},{key:\"getCurrentPriceSchema\",value:function getCurrentPriceSchema(){var _this$props2=this.props,isSchemaRequired=_this$props2.isSchemaRequired,variantsCount=_this$props2.variantsCount,price=_this$props2.price;var content_price=price.minimum_price.final_price?price.minimum_price.final_price.value:price.minimum_price.regular_price.value;if(variantsCount>1){return isSchemaRequired?{itemProp:'lowPrice',content:content_price}:{};}return isSchemaRequired?{itemProp:'price',content:content_price}:{};}},{key:\"renderCurrentPrice\",value:function renderCurrentPrice(){var _this$props3=this.props,discountPercentage=_this$props3.discountPercentage,formattedFinalPrice=_this$props3.formattedFinalPrice;var priceSchema=this.getCurrentPriceSchema();// Use <ins></ins> <del></del> to represent new price and the old (deleted) one\nvar PriceSemanticElementName=discountPercentage>0?'ins':'span';// force unequal comparatment - unsure of resulting type\n// eslint-disable-next-line eqeqeq\nif(formattedFinalPrice==0){return null;}return/*#__PURE__*/_checkBEM(React,PriceSemanticElementName,null,/*#__PURE__*/_checkBEM(React,\"span\",priceSchema,formattedFinalPrice));}},{key:\"renderSubPrice\",value:function renderSubPrice(){var formattedSubPrice=this.props.formattedSubPrice;if(!formattedSubPrice){return null;}return/*#__PURE__*/_checkBEM(React,\"span\",{\"aria-label\":__('Current product price excl. tax'),block:\"ProductPrice\",elem:\"SubPrice\"},\"\".concat(__('Excl. tax:'),\" \").concat(formattedSubPrice));}},{key:\"renderOldPrice\",value:function renderOldPrice(){var _this$props4=this.props,discountPercentage=_this$props4.discountPercentage,formattedDefaultFinalPriceExclTax=_this$props4.formattedDefaultFinalPriceExclTax,defaultFinalPriceExclTax=_this$props4.defaultFinalPriceExclTax,isSchemaRequired=_this$props4.isSchemaRequired,variantsCount=_this$props4.variantsCount;var schema=isSchemaRequired&&variantsCount>1?{itemProp:'highPrice'}:{};if(discountPercentage===0||defaultFinalPriceExclTax===0){return null;}return/*#__PURE__*/_checkBEM(React,\"del\",Object.assign({block:\"ProductPrice\",elem:\"HighPrice\",\"aria-label\":__('Old product price')},schema),formattedDefaultFinalPriceExclTax);}},{key:\"renderSchema\",value:function renderSchema(){var isSchemaRequired=this.props.isSchemaRequired;if(isSchemaRequired){var currencySchema=this.getCurrencySchema();return/*#__PURE__*/_checkBEM(React,\"meta\",currencySchema);}return null;}},{key:\"render\",value:function render(){var _this$props5=this.props,_this$props5$price=_this$props5.price;_this$props5$price=_this$props5$price===void 0?{}:_this$props5$price;var _this$props5$price$mi=_this$props5$price.minimum_price;_this$props5$price$mi=_this$props5$price$mi===void 0?{}:_this$props5$price$mi;var final_price=_this$props5$price$mi.final_price,regular_price=_this$props5$price$mi.regular_price,discountPercentage=_this$props5.discountPercentage,formattedFinalPrice=_this$props5.formattedFinalPrice,mix=_this$props5.mix;if(!final_price||!regular_price){return this.renderPlaceholder();}return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"ProductPrice\",mods:{hasDiscount:discountPercentage!==0},mix:mix,\"aria-label\":\"Product price: \".concat(formattedFinalPrice)},this.renderCurrentPrice(),this.renderOldPrice(),this.renderSubPrice(),this.renderSchema());}}]);return _ProductPrice;}(Extensible(PureComponent));_ProductPrice.defaultProps={isSchemaRequired:false,roundedRegularPrice:'0',priceCurrency:'USD',defaultFinalPriceExclTax:0,discountPercentage:0,formattedFinalPrice:'0',formattedSubPrice:null,variantsCount:0,formattedDefaultFinalPriceExclTax:0,mix:{},price:{}};Object.defineProperty(_ProductPrice,'name',{value:'ProductPrice'});export var ProductPrice=middleware(_ProductPrice,\"Component/ProductPrice/Component\");export default ProductPrice;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductPrice/ProductPrice.component.js"],"names":["PureComponent","TextPlaceholder","MixType","PriceType","ProductPrice","mix","props","block","elem","isSchemaRequired","priceCurrency","itemProp","content","variantsCount","price","content_price","minimum_price","final_price","value","regular_price","discountPercentage","formattedFinalPrice","priceSchema","getCurrentPriceSchema","PriceSemanticElementName","formattedSubPrice","__","formattedDefaultFinalPriceExclTax","defaultFinalPriceExclTax","schema","currencySchema","getCurrencySchema","renderPlaceholder","hasDiscount","renderCurrentPrice","renderOldPrice","renderSubPrice","renderSchema","defaultProps","roundedRegularPrice","Object","defineProperty","_ProductPrice"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport TextPlaceholder from 'Component/TextPlaceholder';\nimport { MixType } from 'Type/Common';\nimport { PriceType } from 'Type/ProductList';\n\nimport './ProductPrice.style';\n\n/**\n * Product price\n * @class ProductPrice\n * @namespace Component/ProductPrice/Component\n */\nexport class ProductPrice extends PureComponent {\n    static propTypes = {\n        isSchemaRequired: PropTypes.bool,\n        roundedRegularPrice: PropTypes.string,\n        priceCurrency: PropTypes.string,\n        discountPercentage: PropTypes.number,\n        formattedFinalPrice: PropTypes.string,\n        formattedSubPrice: PropTypes.string,\n        defaultFinalPriceExclTax: PropTypes.number,\n        variantsCount: PropTypes.number,\n        price: PriceType,\n        formattedDefaultFinalPriceExclTax: PropTypes.number,\n        mix: MixType\n    };\n\n    static defaultProps = {\n        isSchemaRequired: false,\n        roundedRegularPrice: '0',\n        priceCurrency: 'USD',\n        defaultFinalPriceExclTax: 0,\n        discountPercentage: 0,\n        formattedFinalPrice: '0',\n        formattedSubPrice: null,\n        variantsCount: 0,\n        formattedDefaultFinalPriceExclTax: 0,\n        mix: {},\n        price: {}\n    };\n\n    renderPlaceholder() {\n        const { mix } = this.props;\n\n        return (\n            <p block=\"ProductPrice\" aria-label=\"Product Price\" mix={ mix }>\n                <TextPlaceholder mix={ { block: 'ProductPrice', elem: 'Placeholder' } } length=\"custom\" />\n            </p>\n        );\n    }\n\n    getCurrencySchema() {\n        const { isSchemaRequired, priceCurrency } = this.props;\n        return isSchemaRequired ? { itemProp: 'priceCurrency', content: priceCurrency } : {};\n    }\n\n    getCurrentPriceSchema() {\n        const { isSchemaRequired, variantsCount, price } = this.props;\n        const content_price = price.minimum_price.final_price\n            ? price.minimum_price.final_price.value : price.minimum_price.regular_price.value;\n\n        if (variantsCount > 1) {\n            return isSchemaRequired ? { itemProp: 'lowPrice', content: content_price } : {};\n        }\n\n        return isSchemaRequired ? { itemProp: 'price', content: content_price } : {};\n    }\n\n    renderCurrentPrice() {\n        const {\n            discountPercentage,\n            formattedFinalPrice\n        } = this.props;\n\n        const priceSchema = this.getCurrentPriceSchema();\n\n        // Use <ins></ins> <del></del> to represent new price and the old (deleted) one\n        const PriceSemanticElementName = discountPercentage > 0 ? 'ins' : 'span';\n\n        // force unequal comparatment - unsure of resulting type\n        // eslint-disable-next-line eqeqeq\n        if (formattedFinalPrice == 0) {\n            return null;\n        }\n\n        return (\n            <PriceSemanticElementName>\n                <span { ...priceSchema }>{ formattedFinalPrice }</span>\n            </PriceSemanticElementName>\n        );\n    }\n\n    renderSubPrice() {\n        const { formattedSubPrice } = this.props;\n\n        if (!formattedSubPrice) {\n            return null;\n        }\n\n        return (\n            <span\n              aria-label={ __('Current product price excl. tax') }\n              block=\"ProductPrice\"\n              elem=\"SubPrice\"\n            >\n                { `${ __('Excl. tax:') } ${ formattedSubPrice }` }\n            </span>\n        );\n    }\n\n    renderOldPrice() {\n        const {\n            discountPercentage,\n            formattedDefaultFinalPriceExclTax,\n            defaultFinalPriceExclTax,\n            isSchemaRequired,\n            variantsCount\n        } = this.props;\n\n        const schema = isSchemaRequired && variantsCount > 1 ? { itemProp: 'highPrice' } : {};\n\n        if (discountPercentage === 0 || defaultFinalPriceExclTax === 0) {\n            return null;\n        }\n\n        return (\n            <del\n              block=\"ProductPrice\"\n              elem=\"HighPrice\"\n              aria-label={ __('Old product price') }\n              { ...schema }\n            >\n                { formattedDefaultFinalPriceExclTax }\n            </del>\n        );\n    }\n\n    renderSchema() {\n        const { isSchemaRequired } = this.props;\n\n        if (isSchemaRequired) {\n            const currencySchema = this.getCurrencySchema();\n            return (\n                <meta { ...currencySchema } />\n            );\n        }\n\n        return null;\n    }\n\n    render() {\n        const {\n            price: {\n                minimum_price: {\n                    final_price,\n                    regular_price\n                } = {}\n            } = {},\n            discountPercentage,\n            formattedFinalPrice,\n            mix\n        } = this.props;\n\n        if (!final_price || !regular_price) {\n            return this.renderPlaceholder();\n        }\n\n        return (\n            <p\n              block=\"ProductPrice\"\n              mods={ { hasDiscount: discountPercentage !== 0 } }\n              mix={ mix }\n              aria-label={ `Product price: ${formattedFinalPrice}` }\n            >\n                { this.renderCurrentPrice() }\n                { this.renderOldPrice() }\n                { this.renderSubPrice() }\n                { this.renderSchema() }\n            </p>\n        );\n    }\n}\n\nexport default ProductPrice;\n"]},"metadata":{},"sourceType":"module"}