{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CartCoupon from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CartCoupon\";import CartItem from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CartItem\";import CmsBlock from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CmsBlock\";import ContentWrapper from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ContentWrapper\";import ExpandableContent from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ExpandableContent\";import Link from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Link\";import ProductLinks from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductLinks\";import{CROSS_SELL}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/LinkedProducts/LinkedProducts.reducer\";import{TotalsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/MiniCart\";import{formatPrice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Price\";import\"./CartPage.style\";/** @namespace Route/CartPage/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CartPage=/*#__PURE__*/function(_Extensible){_inherits(_CartPage,_Extensible);var _super=_createSuper(_CartPage);function _CartPage(){_classCallCheck(this,_CartPage);return _super.apply(this,arguments);}_createClass(_CartPage,[{key:\"renderCartItems\",value:function renderCartItems(){var _this$props$totals=this.props.totals,items=_this$props$totals.items,quote_currency_code=_this$props$totals.quote_currency_code;if(!items||items.length<1){return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CartPage\",elem:\"Empty\"},__('There are no products in cart.'));}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CartPage\",elem:\"TableHead\",\"aria-hidden\":true},/*#__PURE__*/_checkBEM(React,\"span\",null,__('item')),/*#__PURE__*/_checkBEM(React,\"span\",null,__('qty')),/*#__PURE__*/_checkBEM(React,\"span\",null,__('subtotal'))),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartPage\",elem:\"Items\",\"aria-label\":\"List of items in cart\"},items.map(function(item){return/*#__PURE__*/_checkBEM(React,CartItem,{key:item.item_id,item:item,currency_code:quote_currency_code,isEditing:true,isLikeTable:true,updateCrossSellsOnRemove:true});})));}},{key:\"renderDiscountCode\",value:function renderDiscountCode(){var coupon_code=this.props.totals.coupon_code;return/*#__PURE__*/_checkBEM(React,ExpandableContent,{heading:__('Have a discount code?'),mix:{block:'CartPage',elem:'Discount'}},/*#__PURE__*/_checkBEM(React,CartCoupon,{couponCode:coupon_code}));}},{key:\"renderPriceLine\",value:function renderPriceLine(price){var quote_currency_code=this.props.totals.quote_currency_code;return formatPrice(price,quote_currency_code);}},{key:\"renderSubTotal\",value:function renderSubTotal(){var cartSubtotal=this.props.cartSubtotal;return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Subtotal:')),/*#__PURE__*/_checkBEM(React,\"dd\",null,this.renderPriceLine(cartSubtotal),this.renderSubTotalExlTax()));}},{key:\"renderSubTotalExlTax\",value:function renderSubTotalExlTax(){var cartSubtotalSubPrice=this.props.cartSubtotalSubPrice;if(!cartSubtotalSubPrice){return null;}return/*#__PURE__*/_checkBEM(React,\"span\",null,\"\".concat(__('Excl. tax:'),\" \").concat(this.renderPriceLine(cartSubtotalSubPrice)));}},{key:\"renderTaxFullSummary\",value:function renderTaxFullSummary(){var _this$props=this.props,_this$props$totals$ap=_this$props.totals.applied_taxes,applied_taxes=_this$props$totals$ap===void 0?[]:_this$props$totals$ap,_this$props$cartDispl=_this$props.cartDisplayConfig;_this$props$cartDispl=_this$props$cartDispl===void 0?{}:_this$props$cartDispl;var display_full_tax_summary=_this$props$cartDispl.display_full_tax_summary;if(!display_full_tax_summary||!applied_taxes.length){return null;}return applied_taxes.map(function(_ref){var rates=_ref.rates;return rates;}).reduce(function(rates,rate){return rates.concat(rate);},[]).map(function(_ref2,i){var percent=_ref2.percent,title=_ref2.title;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartPage\",elem:\"TaxRate\"// eslint-disable-next-line react/no-array-index-key\n,key:i},\"\".concat(title,\" (\").concat(percent,\"%)\"));});}},{key:\"renderTax\",value:function renderTax(){var _this$props2=this.props,_this$props2$totals$t=_this$props2.totals.tax_amount,tax_amount=_this$props2$totals$t===void 0?0:_this$props2$totals$t,_this$props2$cartDisp=_this$props2.cartDisplayConfig;_this$props2$cartDisp=_this$props2$cartDisp===void 0?{}:_this$props2$cartDisp;var display_zero_tax_subtotal=_this$props2$cartDisp.display_zero_tax_subtotal;if(!tax_amount&&!display_zero_tax_subtotal){return null;}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Tax:'),this.renderTaxFullSummary()),/*#__PURE__*/_checkBEM(React,\"dd\",null,this.renderPriceLine(tax_amount)));}},{key:\"renderEstimatedShippingSubPrice\",value:function renderEstimatedShippingSubPrice(){var cartShippingSubPrice=this.props.cartShippingSubPrice;if(!cartShippingSubPrice){return null;}return/*#__PURE__*/_checkBEM(React,\"span\",null,\"\".concat(__('Excl. tax:'),\" \").concat(this.renderPriceLine(cartShippingSubPrice)));}},{key:\"renderEstimatedShipping\",value:function renderEstimatedShipping(){var cartShippingPrice=this.props.cartShippingPrice;if(!cartShippingPrice){return null;}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Estimated Shipping:')),/*#__PURE__*/_checkBEM(React,\"dd\",null,this.renderPriceLine(cartShippingPrice),this.renderEstimatedShippingSubPrice()));}},{key:\"renderTotalDetails\",value:function renderTotalDetails(){var isMobile=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"CartPage\",elem:\"TotalDetails\",\"aria-label\":__('Order total details'),mods:{isMobile:isMobile}},this.renderSubTotal(),this.renderEstimatedShipping(),this.renderDiscount(),this.renderTax());}},{key:\"renderOrderTotalExlTax\",value:function renderOrderTotalExlTax(){var cartTotalSubPrice=this.props.cartTotalSubPrice;if(!cartTotalSubPrice){return null;}return/*#__PURE__*/_checkBEM(React,\"span\",null,\"\".concat(__('Excl. tax:'),\" \").concat(this.renderPriceLine(cartTotalSubPrice)));}},{key:\"renderTotal\",value:function renderTotal(){var _this$props$totals$gr=this.props.totals.grand_total,grand_total=_this$props$totals$gr===void 0?0:_this$props$totals$gr;return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"CartPage\",elem:\"Total\",\"aria-label\":\"Complete order total\"},/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Order total:')),/*#__PURE__*/_checkBEM(React,\"dd\",null,this.renderPriceLine(grand_total),this.renderOrderTotalExlTax()));}},{key:\"renderSecureCheckoutButton\",value:function renderSecureCheckoutButton(){var _this$props3=this.props,onCheckoutButtonClick=_this$props3.onCheckoutButtonClick,hasOutOfStockProductsInCart=_this$props3.hasOutOfStockProductsInCart;if(hasOutOfStockProductsInCart){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartPage\",elem:\"OutOfStockProductsWarning\"},__('Remove out of stock products from cart'));}return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"CartPage\",elem:\"CheckoutButton\",mix:{block:'Button'},onClick:onCheckoutButtonClick},/*#__PURE__*/_checkBEM(React,\"span\",null),__('Secure checkout'));}},{key:\"renderButtons\",value:function renderButtons(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartPage\",elem:\"CheckoutButtons\"},this.renderSecureCheckoutButton(),/*#__PURE__*/_checkBEM(React,Link,{block:\"CartPage\",elem:\"ContinueShopping\",to:\"/\"},__('Continue shopping')));}},{key:\"renderTotals\",value:function renderTotals(){return/*#__PURE__*/_checkBEM(React,\"article\",{block:\"CartPage\",elem:\"Summary\",mix:{block:'FixedElement',elem:'Bottom'}},/*#__PURE__*/_checkBEM(React,\"h3\",{block:\"CartPage\",elem:\"SummaryHeading\"},__('Summary')),this.renderTotalDetails(),this.renderTotal(),this.renderButtons());}},{key:\"renderDiscount\",value:function renderDiscount(){var _this$props$totals2=this.props.totals,applied_rule_ids=_this$props$totals2.applied_rule_ids,coupon_code=_this$props$totals2.coupon_code,_this$props$totals2$d=_this$props$totals2.discount_amount,discount_amount=_this$props$totals2$d===void 0?0:_this$props$totals2$d;if(!applied_rule_ids||!discount_amount){return null;}if(!coupon_code){return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Discount: ')),/*#__PURE__*/_checkBEM(React,\"dd\",null,\"-\".concat(this.renderPriceLine(Math.abs(discount_amount)))));}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Discount/Coupon '),/*#__PURE__*/_checkBEM(React,\"strong\",{block:\"CartPage\",elem:\"DiscountCoupon\"},coupon_code.toUpperCase())),/*#__PURE__*/_checkBEM(React,\"dd\",null,\"-\".concat(this.renderPriceLine(Math.abs(discount_amount)))));}},{key:\"renderCrossSellProducts\",value:function renderCrossSellProducts(){return/*#__PURE__*/_checkBEM(React,ProductLinks,{linkType:CROSS_SELL,title:__('Frequently bought together')});}},{key:\"renderPromoContent\",value:function renderPromoContent(){var _window$contentConfig=window.contentConfiguration.cart_content;_window$contentConfig=_window$contentConfig===void 0?{}:_window$contentConfig;var cart_cms=_window$contentConfig.cart_cms;if(cart_cms){return/*#__PURE__*/_checkBEM(React,CmsBlock,{identifier:cart_cms});}return/*#__PURE__*/_checkBEM(React,\"figure\",{block:\"CartPage\",elem:\"PromoBlock\"},/*#__PURE__*/_checkBEM(React,\"figcaption\",{block:\"CartPage\",elem:\"PromoText\"},__('Free shipping on order 49$ and more.')));}},{key:\"renderPromo\",value:function renderPromo(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartPage\",elem:\"Promo\"},this.renderPromoContent());}},{key:\"renderHeading\",value:function renderHeading(){return/*#__PURE__*/_checkBEM(React,\"h1\",{block:\"CartPage\",elem:\"Heading\"},__('Shopping cart'));}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,\"main\",{block:\"CartPage\",\"aria-label\":\"Cart Page\"},/*#__PURE__*/_checkBEM(React,ContentWrapper,{wrapperMix:{block:'CartPage',elem:'Wrapper'},label:\"Cart page details\"},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartPage\",elem:\"Static\"},this.renderHeading(),this.renderCartItems(),this.renderTotalDetails(true),this.renderDiscountCode(),this.renderCrossSellProducts()),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartPage\",elem:\"Floating\"},this.renderPromo(),this.renderTotals())));}}]);return _CartPage;}(Extensible(PureComponent));_CartPage.defaultProps={hasOutOfStockProductsInCart:false,cartSubtotal:0,cartSubtotalSubPrice:null,cartTotalSubPrice:null,cartShippingPrice:0,cartShippingSubPrice:null};Object.defineProperty(_CartPage,'name',{value:'CartPage'});export var CartPage=middleware(_CartPage,\"Route/CartPage/Component\");export default CartPage;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/route/CartPage/CartPage.component.js"],"names":["PureComponent","CartCoupon","CartItem","CmsBlock","ContentWrapper","ExpandableContent","Link","ProductLinks","CROSS_SELL","TotalsType","formatPrice","CartPage","props","totals","items","quote_currency_code","length","__","map","item","item_id","coupon_code","block","elem","price","cartSubtotal","renderPriceLine","renderSubTotalExlTax","cartSubtotalSubPrice","applied_taxes","cartDisplayConfig","display_full_tax_summary","rates","reduce","rate","concat","i","percent","title","tax_amount","display_zero_tax_subtotal","renderTaxFullSummary","cartShippingSubPrice","cartShippingPrice","renderEstimatedShippingSubPrice","isMobile","renderSubTotal","renderEstimatedShipping","renderDiscount","renderTax","cartTotalSubPrice","grand_total","renderOrderTotalExlTax","onCheckoutButtonClick","hasOutOfStockProductsInCart","renderSecureCheckoutButton","renderTotalDetails","renderTotal","renderButtons","applied_rule_ids","discount_amount","Math","abs","toUpperCase","window","contentConfiguration","cart_content","cart_cms","renderPromoContent","renderHeading","renderCartItems","renderDiscountCode","renderCrossSellProducts","renderPromo","renderTotals","defaultProps","Object","defineProperty","_CartPage","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CartCoupon from 'Component/CartCoupon';\nimport CartItem from 'Component/CartItem';\nimport CmsBlock from 'Component/CmsBlock';\nimport ContentWrapper from 'Component/ContentWrapper';\nimport ExpandableContent from 'Component/ExpandableContent';\nimport Link from 'Component/Link';\nimport ProductLinks from 'Component/ProductLinks';\nimport { CROSS_SELL } from 'Store/LinkedProducts/LinkedProducts.reducer';\nimport { TotalsType } from 'Type/MiniCart';\nimport { formatPrice } from 'Util/Price';\n\nimport './CartPage.style';\n\n/** @namespace Route/CartPage/Component */\nexport class CartPage extends PureComponent {\n    static propTypes = {\n        totals: TotalsType.isRequired,\n        onCheckoutButtonClick: PropTypes.func.isRequired,\n        hasOutOfStockProductsInCart: PropTypes.bool,\n        cartSubtotal: PropTypes.number,\n        cartSubtotalSubPrice: PropTypes.number,\n        cartTotalSubPrice: PropTypes.number,\n        cartShippingPrice: PropTypes.number,\n        cartShippingSubPrice: PropTypes.number,\n        cartDisplayConfig: PropTypes.object.isRequired\n    };\n\n    static defaultProps = {\n        hasOutOfStockProductsInCart: false,\n        cartSubtotal: 0,\n        cartSubtotalSubPrice: null,\n        cartTotalSubPrice: null,\n        cartShippingPrice: 0,\n        cartShippingSubPrice: null\n    };\n\n    renderCartItems() {\n        const { totals: { items, quote_currency_code } } = this.props;\n\n        if (!items || items.length < 1) {\n            return (\n                <p block=\"CartPage\" elem=\"Empty\">{ __('There are no products in cart.') }</p>\n            );\n        }\n\n        return (\n            <>\n                <p block=\"CartPage\" elem=\"TableHead\" aria-hidden>\n                    <span>{ __('item') }</span>\n                    <span>{ __('qty') }</span>\n                    <span>{ __('subtotal') }</span>\n                </p>\n                <div block=\"CartPage\" elem=\"Items\" aria-label=\"List of items in cart\">\n                    { items.map((item) => (\n                        <CartItem\n                          key={ item.item_id }\n                          item={ item }\n                          currency_code={ quote_currency_code }\n                          isEditing\n                          isLikeTable\n                          updateCrossSellsOnRemove\n                        />\n                    )) }\n                </div>\n            </>\n        );\n    }\n\n    renderDiscountCode() {\n        const {\n            totals: { coupon_code }\n        } = this.props;\n\n        return (\n            <ExpandableContent\n              heading={ __('Have a discount code?') }\n              mix={ { block: 'CartPage', elem: 'Discount' } }\n            >\n                <CartCoupon couponCode={ coupon_code } />\n            </ExpandableContent>\n        );\n    }\n\n    renderPriceLine(price) {\n        const { totals: { quote_currency_code } } = this.props;\n        return formatPrice(price, quote_currency_code);\n    }\n\n    renderSubTotal() {\n        const { cartSubtotal } = this.props;\n\n        return (\n            <>\n                <dt>{ __('Subtotal:') }</dt>\n                <dd>\n                    { this.renderPriceLine(cartSubtotal) }\n                    { this.renderSubTotalExlTax() }\n                </dd>\n            </>\n        );\n    }\n\n    renderSubTotalExlTax() {\n        const { cartSubtotalSubPrice } = this.props;\n\n        if (!cartSubtotalSubPrice) {\n            return null;\n        }\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ this.renderPriceLine(cartSubtotalSubPrice) }` }\n            </span>\n        );\n    }\n\n    renderTaxFullSummary() {\n        const {\n            totals: {\n                applied_taxes = []\n            },\n            cartDisplayConfig: {\n                display_full_tax_summary\n            } = {}\n        } = this.props;\n\n        if (!display_full_tax_summary || !applied_taxes.length) {\n            return null;\n        }\n\n        return applied_taxes\n            .map(({ rates }) => rates)\n            .reduce((rates, rate) => rates.concat(rate), [])\n            .map(({ percent, title }, i) => (\n                <div\n                  block=\"CartPage\"\n                  elem=\"TaxRate\"\n                  // eslint-disable-next-line react/no-array-index-key\n                  key={ i }\n                >\n                    { `${title} (${percent}%)` }\n                </div>\n            ));\n    }\n\n    renderTax() {\n        const {\n            totals: {\n                tax_amount = 0\n            },\n            cartDisplayConfig: {\n                display_zero_tax_subtotal\n            } = {}\n        } = this.props;\n\n        if (!tax_amount && !display_zero_tax_subtotal) {\n            return null;\n        }\n\n        return (\n            <>\n                <dt>\n                    { __('Tax:') }\n                    { this.renderTaxFullSummary() }\n                </dt>\n                <dd>{ this.renderPriceLine(tax_amount) }</dd>\n            </>\n        );\n    }\n\n    renderEstimatedShippingSubPrice() {\n        const {\n            cartShippingSubPrice\n        } = this.props;\n\n        if (!cartShippingSubPrice) {\n            return null;\n        }\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ this.renderPriceLine(cartShippingSubPrice) }` }\n            </span>\n        );\n    }\n\n    renderEstimatedShipping() {\n        const {\n            cartShippingPrice\n        } = this.props;\n\n        if (!cartShippingPrice) {\n            return null;\n        }\n\n        return (\n            <>\n                <dt>{ __('Estimated Shipping:') }</dt>\n                <dd>\n                    { this.renderPriceLine(cartShippingPrice) }\n                    { this.renderEstimatedShippingSubPrice() }\n                </dd>\n            </>\n        );\n    }\n\n    renderTotalDetails(isMobile = false) {\n        return (\n            <dl\n              block=\"CartPage\"\n              elem=\"TotalDetails\"\n              aria-label={ __('Order total details') }\n              mods={ { isMobile } }\n            >\n                { this.renderSubTotal() }\n                { this.renderEstimatedShipping() }\n                { this.renderDiscount() }\n                { this.renderTax() }\n            </dl>\n        );\n    }\n\n    renderOrderTotalExlTax() {\n        const { cartTotalSubPrice } = this.props;\n\n        if (!cartTotalSubPrice) {\n            return null;\n        }\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ this.renderPriceLine(cartTotalSubPrice) }` }\n            </span>\n        );\n    }\n\n    renderTotal() {\n        const {\n            totals: {\n                grand_total = 0\n            }\n        } = this.props;\n\n        return (\n            <dl block=\"CartPage\" elem=\"Total\" aria-label=\"Complete order total\">\n                <dt>{ __('Order total:') }</dt>\n                <dd>\n                    { this.renderPriceLine(grand_total) }\n                    { this.renderOrderTotalExlTax() }\n                </dd>\n            </dl>\n        );\n    }\n\n    renderSecureCheckoutButton() {\n        const { onCheckoutButtonClick, hasOutOfStockProductsInCart } = this.props;\n\n        if (hasOutOfStockProductsInCart) {\n            return (\n                <div block=\"CartPage\" elem=\"OutOfStockProductsWarning\">\n                    { __('Remove out of stock products from cart') }\n                </div>\n            );\n        }\n\n        return (\n            <button\n              block=\"CartPage\"\n              elem=\"CheckoutButton\"\n              mix={ { block: 'Button' } }\n              onClick={ onCheckoutButtonClick }\n            >\n                <span />\n                { __('Secure checkout') }\n            </button>\n        );\n    }\n\n    renderButtons() {\n        return (\n            <div block=\"CartPage\" elem=\"CheckoutButtons\">\n                { this.renderSecureCheckoutButton() }\n                <Link\n                  block=\"CartPage\"\n                  elem=\"ContinueShopping\"\n                  to=\"/\"\n                >\n                    { __('Continue shopping') }\n                </Link>\n            </div>\n        );\n    }\n\n    renderTotals() {\n        return (\n            <article\n              block=\"CartPage\"\n              elem=\"Summary\"\n              mix={ { block: 'FixedElement', elem: 'Bottom' } }\n            >\n                <h3 block=\"CartPage\" elem=\"SummaryHeading\">{ __('Summary') }</h3>\n                { this.renderTotalDetails() }\n                { this.renderTotal() }\n                { this.renderButtons() }\n            </article>\n        );\n    }\n\n    renderDiscount() {\n        const {\n            totals: {\n                applied_rule_ids,\n                coupon_code,\n                discount_amount = 0\n            }\n        } = this.props;\n\n        if (!applied_rule_ids || !discount_amount) {\n            return null;\n        }\n\n        if (!coupon_code) {\n            return (\n                <>\n                    <dt>\n                        { __('Discount: ') }\n                    </dt>\n                    <dd>{ `-${this.renderPriceLine(Math.abs(discount_amount))}` }</dd>\n                </>\n            );\n        }\n\n        return (\n            <>\n                <dt>\n                    { __('Discount/Coupon ') }\n                    <strong block=\"CartPage\" elem=\"DiscountCoupon\">{ coupon_code.toUpperCase() }</strong>\n                </dt>\n                <dd>{ `-${this.renderPriceLine(Math.abs(discount_amount))}` }</dd>\n            </>\n        );\n    }\n\n    renderCrossSellProducts() {\n        return (\n            <ProductLinks\n              linkType={ CROSS_SELL }\n              title={ __('Frequently bought together') }\n            />\n        );\n    }\n\n    renderPromoContent() {\n        const { cart_content: { cart_cms } = {} } = window.contentConfiguration;\n\n        if (cart_cms) {\n            return <CmsBlock identifier={ cart_cms } />;\n        }\n\n        return (\n            <figure\n              block=\"CartPage\"\n              elem=\"PromoBlock\"\n            >\n                <figcaption block=\"CartPage\" elem=\"PromoText\">\n                    { __('Free shipping on order 49$ and more.') }\n                </figcaption>\n            </figure>\n        );\n    }\n\n    renderPromo() {\n        return (\n            <div\n              block=\"CartPage\"\n              elem=\"Promo\"\n            >\n                { this.renderPromoContent() }\n            </div>\n        );\n    }\n\n    renderHeading() {\n        return (\n            <h1 block=\"CartPage\" elem=\"Heading\">\n                { __('Shopping cart') }\n            </h1>\n        );\n    }\n\n    render() {\n        return (\n            <main block=\"CartPage\" aria-label=\"Cart Page\">\n                <ContentWrapper\n                  wrapperMix={ { block: 'CartPage', elem: 'Wrapper' } }\n                  label=\"Cart page details\"\n                >\n                    <div block=\"CartPage\" elem=\"Static\">\n                        { this.renderHeading() }\n                        { this.renderCartItems() }\n                        { this.renderTotalDetails(true) }\n                        { this.renderDiscountCode() }\n                        { this.renderCrossSellProducts() }\n                    </div>\n                    <div block=\"CartPage\" elem=\"Floating\">\n                        { this.renderPromo() }\n                        { this.renderTotals() }\n                    </div>\n                </ContentWrapper>\n            </main>\n        );\n    }\n}\n\nexport default CartPage;\n"]},"metadata":{},"sourceType":"module"}