{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{showNotification}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";import NewsletterSubscription from\"./NewsletterSubscription.component\";export var NewsletterSubscriptionDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/NewsletterSubscription/NewsletterSubscription.dispatcher\");/** @namespace Component/NewsletterSubscribtion/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{allowGuestSubscribe:state.ConfigReducer.newsletter_subscription_allow_guest_subscribe,isSignedIn:state.MyAccountReducer.isSignedIn};},\"Component/NewsletterSubscribtion/Container/mapStateToProps\");/** @namespace Component/NewsletterSubscription/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{subscribeToNewsletter:function subscribeToNewsletter(email){return NewsletterSubscriptionDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.subscribeToNewsletter(dispatch,email);});},showErrorNotification:function showErrorNotification(message){return dispatch(showNotification('error',message));}};},\"Component/NewsletterSubscription/Container/mapDispatchToProps\");/** @namespace Component/NewsletterSubscription/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _NewsletterSubscriptionContainer=/*#__PURE__*/function(_Extensible){_inherits(_NewsletterSubscriptionContainer,_Extensible);var _super=_createSuper(_NewsletterSubscriptionContainer);function _NewsletterSubscriptionContainer(){var _this;_classCallCheck(this,_NewsletterSubscriptionContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.containerFunctions={onFormSubmit:_this.onFormSubmit.bind(_assertThisInitialized(_this))};_this.state={isLoading:false};_this.onFormSubmitDone=_this.onFormSubmitDone.bind(_assertThisInitialized(_this));return _this;}_createClass(_NewsletterSubscriptionContainer,[{key:\"onFormSubmit\",value:function onFormSubmit(fields){var _this$props=this.props,subscribeToNewsletter=_this$props.subscribeToNewsletter,allowGuestSubscribe=_this$props.allowGuestSubscribe,isSignedIn=_this$props.isSignedIn,showErrorNotification=_this$props.showErrorNotification;var email=fields.newsletterEmail;if(!allowGuestSubscribe&&!isSignedIn){showErrorNotification(__('Guests can not subscribe to the newsletter. You must create an account or login to subscribe.'));return;}this.setState({isLoading:true});subscribeToNewsletter(email).then(this.onFormSubmitDone).catch(this.onFormSubmitDone);}},{key:\"onFormSubmitDone\",value:function onFormSubmitDone(){this.setState({isLoading:false});}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,NewsletterSubscription,Object.assign({},this.props,this.state,this.containerFunctions));}}]);return _NewsletterSubscriptionContainer;}(Extensible(PureComponent));Object.defineProperty(_NewsletterSubscriptionContainer,'name',{value:'NewsletterSubscriptionContainer'});export var NewsletterSubscriptionContainer=middleware(_NewsletterSubscriptionContainer,\"Component/NewsletterSubscription/Container\");export default connect(mapStateToProps,mapDispatchToProps)(NewsletterSubscriptionContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/NewsletterSubscription/NewsletterSubscription.container.js"],"names":["PureComponent","connect","showNotification","NewsletterSubscription","NewsletterSubscriptionDispatcher","mapStateToProps","state","allowGuestSubscribe","ConfigReducer","newsletter_subscription_allow_guest_subscribe","isSignedIn","MyAccountReducer","mapDispatchToProps","dispatch","subscribeToNewsletter","email","then","dispatcher","default","showErrorNotification","message","NewsletterSubscriptionContainer","containerFunctions","onFormSubmit","bind","isLoading","onFormSubmitDone","fields","props","newsletterEmail","__","setState","catch","Object","defineProperty","_NewsletterSubscriptionContainer","value"],"mappings":"qtBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAGA,OAASA,aAAT,KAA8B,OAA9B,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,OAASC,gBAAT,gGAEA,MAAOC,CAAAA,sBAAP,0CAEA,MAAO,IAAMC,CAAAA,gCAAgC,CAAG,OAC5C,0DAD4C,mHAAzC,CAKP,4EACA,MAAO,IAAMC,CAAAA,eAAe,YAAG,SAACC,KAAD,QAAY,CACvCC,mBAAmB,CAAED,KAAK,CAACE,aAAN,CAAoBC,6CADF,CAEvCC,UAAU,CAAEJ,KAAK,CAACK,gBAAN,CAAuBD,UAFI,CAAZ,EAAH,8DAArB,CAKP,+EACA,MAAO,IAAME,CAAAA,kBAAkB,YAAG,SAACC,QAAD,QAAe,CAC7CC,qBAAqB,CAAE,+BAACC,KAAD,QAAWX,CAAAA,gCAAgC,CAACY,IAAjC,CAC9B,kBAAYC,CAAAA,UAAZ,MAAGC,OAAH,OAA6BD,CAAAA,UAAU,CAACH,qBAAX,CAAiCD,QAAjC,CAA2CE,KAA3C,CAA7B,EAD8B,CAAX,EADsB,CAI7CI,qBAAqB,CAAE,+BAACC,OAAD,QAAaP,CAAAA,QAAQ,CAACX,gBAAgB,CAAC,OAAD,CAAUkB,OAAV,CAAjB,CAArB,EAJsB,CAAf,EAAH,iEAAxB,CAOP,4D,wEACA,UAAaC,CAAAA,gCAAb,qaAQIC,kBARJ,CAQyB,CACjBC,YAAY,CAAE,MAAKA,YAAL,CAAkBC,IAAlB,+BADG,CARzB,OAYIlB,KAZJ,CAYY,CACJmB,SAAS,CAAE,KADP,CAZZ,OAgBIC,gBAhBJ,CAgBuB,MAAKA,gBAAL,CAAsBF,IAAtB,+BAhBvB,wFAkBI,sBAAaG,MAAb,CAAqB,iBAMb,KAAKC,KANQ,CAEbd,qBAFa,aAEbA,qBAFa,CAGbP,mBAHa,aAGbA,mBAHa,CAIbG,UAJa,aAIbA,UAJa,CAKbS,qBALa,aAKbA,qBALa,IAOQJ,CAAAA,KAPR,CAOkBY,MAPlB,CAOTE,eAPS,CASjB,GAAI,CAACtB,mBAAD,EAAwB,CAACG,UAA7B,CAAyC,CACrCS,qBAAqB,CACjBW,EAAE,CAAC,+FAAD,CADe,CAArB,CAIA,OACH,CAED,KAAKC,QAAL,CAAc,CAAEN,SAAS,CAAE,IAAb,CAAd,EAEAX,qBAAqB,CAACC,KAAD,CAArB,CACKC,IADL,CACU,KAAKU,gBADf,EAEKM,KAFL,CAEW,KAAKN,gBAFhB,EAGH,CAxCL,gCA0CI,2BAAmB,CACf,KAAKK,QAAL,CAAc,CAAEN,SAAS,CAAE,KAAb,CAAd,EACH,CA5CL,sBA8CI,iBAAS,CACL,mCACK,sBADL,kBAEW,KAAKG,KAFhB,CAGW,KAAKtB,KAHhB,CAIW,KAAKgB,kBAJhB,GAOH,CAtDL,yEAvCAW,MAAM,CAACC,cAAP,CAAsBC,gCAAtB,CAAwD,MAAxD,CAAgE,CAAEC,KAAK,CAAE,iCAAT,CAAhE,E,qIAgGA,cAAenC,CAAAA,OAAO,CAClBI,eADkB,CAElBO,kBAFkB,CAAP,CAGbS,+BAHa,CAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { showNotification } from 'Store/Notification/Notification.action';\n\nimport NewsletterSubscription from './NewsletterSubscription.component';\n\nexport const NewsletterSubscriptionDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/NewsletterSubscription/NewsletterSubscription.dispatcher'\n);\n\n/** @namespace Component/NewsletterSubscribtion/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    allowGuestSubscribe: state.ConfigReducer.newsletter_subscription_allow_guest_subscribe,\n    isSignedIn: state.MyAccountReducer.isSignedIn\n});\n\n/** @namespace Component/NewsletterSubscription/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    subscribeToNewsletter: (email) => NewsletterSubscriptionDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.subscribeToNewsletter(dispatch, email)\n    ),\n    showErrorNotification: (message) => dispatch(showNotification('error', message))\n});\n\n/** @namespace Component/NewsletterSubscription/Container */\nexport class NewsletterSubscriptionContainer extends PureComponent {\n    static propTypes = {\n        subscribeToNewsletter: PropTypes.func.isRequired,\n        showErrorNotification: PropTypes.func.isRequired,\n        allowGuestSubscribe: PropTypes.bool.isRequired,\n        isSignedIn: PropTypes.bool.isRequired\n    };\n\n    containerFunctions = {\n        onFormSubmit: this.onFormSubmit.bind(this)\n    };\n\n    state = {\n        isLoading: false\n    };\n\n    onFormSubmitDone = this.onFormSubmitDone.bind(this);\n\n    onFormSubmit(fields) {\n        const {\n            subscribeToNewsletter,\n            allowGuestSubscribe,\n            isSignedIn,\n            showErrorNotification\n        } = this.props;\n        const { newsletterEmail: email } = fields;\n\n        if (!allowGuestSubscribe && !isSignedIn) {\n            showErrorNotification(\n                __('Guests can not subscribe to the newsletter. You must create an account or login to subscribe.')\n            );\n\n            return;\n        }\n\n        this.setState({ isLoading: true });\n\n        subscribeToNewsletter(email)\n            .then(this.onFormSubmitDone)\n            .catch(this.onFormSubmitDone);\n    }\n\n    onFormSubmitDone() {\n        this.setState({ isLoading: false });\n    }\n\n    render() {\n        return (\n            <NewsletterSubscription\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(NewsletterSubscriptionContainer);\n"]},"metadata":{},"sourceType":"module"}