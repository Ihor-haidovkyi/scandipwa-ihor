{"ast":null,"code":"import{getBatch}from\"./batch\";// encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\nvar nullListeners={notify:function notify(){}};function createListenerCollection(){var batch=getBatch();var first=null;var last=null;return{clear:function clear(){first=null;last=null;},notify:function notify(){batch(function(){var listener=first;while(listener){listener.callback();listener=listener.next;}});},get:function get(){var listeners=[];var listener=first;while(listener){listeners.push(listener);listener=listener.next;}return listeners;},subscribe:function subscribe(callback){var isSubscribed=true;var listener=last={callback:callback,next:null,prev:last};if(listener.prev){listener.prev.next=listener;}else{first=listener;}return function unsubscribe(){if(!isSubscribed||first===null)return;isSubscribed=false;if(listener.next){listener.next.prev=listener.prev;}else{last=listener.prev;}if(listener.prev){listener.prev.next=listener.next;}else{first=listener.next;}};}};}var Subscription=/*#__PURE__*/function(){function Subscription(store,parentSub){this.store=store;this.parentSub=parentSub;this.unsubscribe=null;this.listeners=nullListeners;this.handleChangeWrapper=this.handleChangeWrapper.bind(this);}var _proto=Subscription.prototype;_proto.addNestedSub=function addNestedSub(listener){this.trySubscribe();return this.listeners.subscribe(listener);};_proto.notifyNestedSubs=function notifyNestedSubs(){this.listeners.notify();};_proto.handleChangeWrapper=function handleChangeWrapper(){if(this.onStateChange){this.onStateChange();}};_proto.isSubscribed=function isSubscribed(){return Boolean(this.unsubscribe);};_proto.trySubscribe=function trySubscribe(){if(!this.unsubscribe){this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper);this.listeners=createListenerCollection();}};_proto.tryUnsubscribe=function tryUnsubscribe(){if(this.unsubscribe){this.unsubscribe();this.unsubscribe=null;this.listeners.clear();this.listeners=nullListeners;}};return Subscription;}();export{Subscription as default};","map":{"version":3,"sources":["/home/marketihor/scandipwa/node_modules/react-redux/es/utils/Subscription.js"],"names":["getBatch","nullListeners","notify","createListenerCollection","batch","first","last","clear","listener","callback","next","get","listeners","push","subscribe","isSubscribed","prev","unsubscribe","Subscription","store","parentSub","handleChangeWrapper","bind","_proto","prototype","addNestedSub","trySubscribe","notifyNestedSubs","onStateChange","Boolean","tryUnsubscribe","default"],"mappings":"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","sourcesContent":["import { getBatch } from './batch'; // encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\n\nvar nullListeners = {\n  notify: function notify() {}\n};\n\nfunction createListenerCollection() {\n  var batch = getBatch();\n  var first = null;\n  var last = null;\n  return {\n    clear: function clear() {\n      first = null;\n      last = null;\n    },\n    notify: function notify() {\n      batch(function () {\n        var listener = first;\n\n        while (listener) {\n          listener.callback();\n          listener = listener.next;\n        }\n      });\n    },\n    get: function get() {\n      var listeners = [];\n      var listener = first;\n\n      while (listener) {\n        listeners.push(listener);\n        listener = listener.next;\n      }\n\n      return listeners;\n    },\n    subscribe: function subscribe(callback) {\n      var isSubscribed = true;\n      var listener = last = {\n        callback: callback,\n        next: null,\n        prev: last\n      };\n\n      if (listener.prev) {\n        listener.prev.next = listener;\n      } else {\n        first = listener;\n      }\n\n      return function unsubscribe() {\n        if (!isSubscribed || first === null) return;\n        isSubscribed = false;\n\n        if (listener.next) {\n          listener.next.prev = listener.prev;\n        } else {\n          last = listener.prev;\n        }\n\n        if (listener.prev) {\n          listener.prev.next = listener.next;\n        } else {\n          first = listener.next;\n        }\n      };\n    }\n  };\n}\n\nvar Subscription = /*#__PURE__*/function () {\n  function Subscription(store, parentSub) {\n    this.store = store;\n    this.parentSub = parentSub;\n    this.unsubscribe = null;\n    this.listeners = nullListeners;\n    this.handleChangeWrapper = this.handleChangeWrapper.bind(this);\n  }\n\n  var _proto = Subscription.prototype;\n\n  _proto.addNestedSub = function addNestedSub(listener) {\n    this.trySubscribe();\n    return this.listeners.subscribe(listener);\n  };\n\n  _proto.notifyNestedSubs = function notifyNestedSubs() {\n    this.listeners.notify();\n  };\n\n  _proto.handleChangeWrapper = function handleChangeWrapper() {\n    if (this.onStateChange) {\n      this.onStateChange();\n    }\n  };\n\n  _proto.isSubscribed = function isSubscribed() {\n    return Boolean(this.unsubscribe);\n  };\n\n  _proto.trySubscribe = function trySubscribe() {\n    if (!this.unsubscribe) {\n      this.unsubscribe = this.parentSub ? this.parentSub.addNestedSub(this.handleChangeWrapper) : this.store.subscribe(this.handleChangeWrapper);\n      this.listeners = createListenerCollection();\n    }\n  };\n\n  _proto.tryUnsubscribe = function tryUnsubscribe() {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n      this.unsubscribe = null;\n      this.listeners.clear();\n      this.listeners = nullListeners;\n    }\n  };\n\n  return Subscription;\n}();\n\nexport { Subscription as default };"]},"metadata":{},"sourceType":"module"}