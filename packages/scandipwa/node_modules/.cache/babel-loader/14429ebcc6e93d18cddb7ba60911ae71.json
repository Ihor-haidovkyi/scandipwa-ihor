{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\n/** @namespace Util/FormPortalCollector */\nexport class _FormPortalCollector extends Extensible() {\n  constructor(...args) {\n    super(...args);\n    this.portalsObservers = {};\n  }\n\n  subscribe(id, f, name) {\n    if (this.portalsObservers[id]) {\n      this.portalsObservers[id][name] = f;\n      return;\n    }\n\n    this.portalsObservers[id] = {\n      [name]: f\n    };\n  }\n\n  unsubscribe(id, name) {\n    if (!this.portalsObservers[id]) {\n      return;\n    } // eslint-disable-next-line fp/no-delete\n\n\n    delete this.portalsObservers[id][name];\n  }\n\n  collect(id) {\n    const portals = this.portalsObservers[id] || {};\n    return Object.values(portals).map(function (portal) {\n      return portal();\n    });\n  }\n\n}\nObject.defineProperty(_FormPortalCollector, 'name', {\n  value: 'FormPortalCollector'\n});\n\nexport const FormPortalCollector = middleware(_FormPortalCollector, \"Util/FormPortalCollector\");\nexport default FormPortalCollector;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/util/FormPortalCollector/index.js"],"names":["FormPortalCollector","portalsObservers","subscribe","id","f","name","unsubscribe","collect","portals","Object","values","map","portal","defineProperty","_FormPortalCollector","value"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO,MAAMA,oBAAN,sBAA0B;AAAA;AAAA;AAAA,SAC7BC,gBAD6B,GACV,EADU;AAAA;;AAG7BC,EAAAA,SAAS,CAACC,EAAD,EAAKC,CAAL,EAAQC,IAAR,EAAc;AACnB,QAAI,KAAKJ,gBAAL,CAAsBE,EAAtB,CAAJ,EAA+B;AAC3B,WAAKF,gBAAL,CAAsBE,EAAtB,EAA0BE,IAA1B,IAAkCD,CAAlC;AACA;AACH;;AAED,SAAKH,gBAAL,CAAsBE,EAAtB,IAA4B;AAAE,OAACE,IAAD,GAAQD;AAAV,KAA5B;AACH;;AAEDE,EAAAA,WAAW,CAACH,EAAD,EAAKE,IAAL,EAAW;AAClB,QAAI,CAAC,KAAKJ,gBAAL,CAAsBE,EAAtB,CAAL,EAAgC;AAC5B;AACH,KAHiB,CAIlB;;;AACA,WAAO,KAAKF,gBAAL,CAAsBE,EAAtB,EAA0BE,IAA1B,CAAP;AACH;;AAEDE,EAAAA,OAAO,CAACJ,EAAD,EAAK;AACR,UAAMK,OAAO,GAAG,KAAKP,gBAAL,CAAsBE,EAAtB,KAA6B,EAA7C;AACA,WAAOM,MAAM,CAACC,MAAP,CAAcF,OAAd,EAAuBG,GAAvB,CAA2B,UAACC,MAAD;AAAA,aAAYA,MAAM,EAAlB;AAAA,KAA3B,CAAP;AACH;;AAvB4B;AAZjCH,MAAM,CAACI,cAAP,CAAsBC,oBAAtB,EAA4C,MAA5C,EAAoD;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAApD;;;AAsCA,eAAef,mBAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\n/** @namespace Util/FormPortalCollector */\nexport class FormPortalCollector {\n    portalsObservers = {};\n\n    subscribe(id, f, name) {\n        if (this.portalsObservers[id]) {\n            this.portalsObservers[id][name] = f;\n            return;\n        }\n\n        this.portalsObservers[id] = { [name]: f };\n    }\n\n    unsubscribe(id, name) {\n        if (!this.portalsObservers[id]) {\n            return;\n        }\n        // eslint-disable-next-line fp/no-delete\n        delete this.portalsObservers[id][name];\n    }\n\n    collect(id) {\n        const portals = this.portalsObservers[id] || {};\n        return Object.values(portals).map((portal) => portal());\n    }\n}\n\nexport default FormPortalCollector;\n"]},"metadata":{},"sourceType":"module"}