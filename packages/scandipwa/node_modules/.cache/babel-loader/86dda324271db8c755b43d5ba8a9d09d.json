{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import Overlay from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Overlay\";import SearchItem from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/SearchItem\";import{ItemsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import{AMOUNT_OF_PLACEHOLDERS,SEARCH_TIMEOUT}from\"./SearchOverlay.config\";import\"./SearchOverlay.style\";/** @namespace Component/SearchOverlay/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _SearchOverlay=/*#__PURE__*/function(_Extensible){_inherits(_SearchOverlay,_Extensible);var _super=_createSuper(_SearchOverlay);function _SearchOverlay(){_classCallCheck(this,_SearchOverlay);return _super.apply(this,arguments);}_createClass(_SearchOverlay,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this=this;var prevSearchCriteria=prevProps.searchCriteria;var _this$props=this.props,searchCriteria=_this$props.searchCriteria,clearSearchResults=_this$props.clearSearchResults,makeSearchRequest=_this$props.makeSearchRequest;if(searchCriteria!==prevSearchCriteria){if(this.timeout){clearTimeout(this.timeout);}clearSearchResults();this.timeout=setTimeout(function(){_this.timeout=null;makeSearchRequest();},SEARCH_TIMEOUT);}}},{key:\"renderSearchItem\",value:function renderSearchItem(product,i){return/*#__PURE__*/_checkBEM(React,SearchItem,{product:product,key:i});}},{key:\"renderSearchCriteria\",value:function renderSearchCriteria(){var searchCriteria=this.props.searchCriteria;return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"SearchOverlay\",elem:\"Criteria\",mods:{isVisible:!!searchCriteria.trim()}},__('Results for:'),/*#__PURE__*/_checkBEM(React,\"strong\",null,searchCriteria));}},{key:\"renderNoSearchCriteria\",value:function renderNoSearchCriteria(){return/*#__PURE__*/_checkBEM(React,\"p\",null,__('Start typing to see search results!'));}},{key:\"renderNoResults\",value:function renderNoResults(){return/*#__PURE__*/_checkBEM(React,\"p\",null,__('No results found!'));}},{key:\"renderSearchResults\",value:function renderSearchResults(){var _this2=this;var _this$props2=this.props,searchCriteria=_this$props2.searchCriteria,searchResults=_this$props2.searchResults,isLoading=_this$props2.isLoading;if(!searchCriteria.trim()){return this.renderNoSearchCriteria();}if(!searchResults.length&&!isLoading&&!this.timeout){return this.renderNoResults();}var resultsToRender=isLoading||this.timeout?Array(AMOUNT_OF_PLACEHOLDERS).fill({}):searchResults;return/*#__PURE__*/_checkBEM(React,\"ul\",null,resultsToRender.map(function(item,i){return _this2.renderSearchItem(item,i);}));}},{key:\"render\",value:function render(){var isHideOverlay=this.props.isHideOverlay;if(isHideOverlay){return/*#__PURE__*/_checkBEM(React,\"article\",{block:\"SearchOverlay\",elem:\"Results\",\"aria-label\":\"Search results\"},this.renderSearchResults());}return/*#__PURE__*/_checkBEM(React,Overlay,{id:\"search\",mix:{block:'SearchOverlay'}},this.renderSearchCriteria(),/*#__PURE__*/_checkBEM(React,\"article\",{block:\"SearchOverlay\",elem:\"Results\",\"aria-label\":\"Search results\"},this.renderSearchResults()));}}]);return _SearchOverlay;}(Extensible(PureComponent));_SearchOverlay.defaultProps={searchCriteria:'',isHideOverlay:false};Object.defineProperty(_SearchOverlay,'name',{value:'SearchOverlay'});export var SearchOverlay=middleware(_SearchOverlay,\"Component/SearchOverlay/Component\");export default SearchOverlay;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/SearchOverlay/SearchOverlay.component.js"],"names":["PureComponent","Overlay","SearchItem","ItemsType","AMOUNT_OF_PLACEHOLDERS","SEARCH_TIMEOUT","SearchOverlay","prevProps","prevSearchCriteria","searchCriteria","props","clearSearchResults","makeSearchRequest","timeout","clearTimeout","setTimeout","product","i","isVisible","trim","__","searchResults","isLoading","renderNoSearchCriteria","length","renderNoResults","resultsToRender","Array","fill","map","item","renderSearchItem","isHideOverlay","renderSearchResults","block","renderSearchCriteria","defaultProps","Object","defineProperty","_SearchOverlay","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport Overlay from 'Component/Overlay';\nimport SearchItem from 'Component/SearchItem';\nimport { ItemsType } from 'Type/ProductList';\n\nimport {\n    AMOUNT_OF_PLACEHOLDERS,\n    SEARCH_TIMEOUT\n} from './SearchOverlay.config';\n\nimport './SearchOverlay.style';\n\n/** @namespace Component/SearchOverlay/Component */\nexport class SearchOverlay extends PureComponent {\n    static propTypes = {\n        searchCriteria: PropTypes.string,\n        searchResults: ItemsType.isRequired,\n        isLoading: PropTypes.bool.isRequired,\n        makeSearchRequest: PropTypes.func.isRequired,\n        clearSearchResults: PropTypes.func.isRequired,\n        isHideOverlay: PropTypes.bool\n    };\n\n    static defaultProps = {\n        searchCriteria: '',\n        isHideOverlay: false\n    };\n\n    componentDidUpdate(prevProps) {\n        const { searchCriteria: prevSearchCriteria } = prevProps;\n        const { searchCriteria, clearSearchResults, makeSearchRequest } = this.props;\n\n        if (searchCriteria !== prevSearchCriteria) {\n            if (this.timeout) {\n                clearTimeout(this.timeout);\n            }\n            clearSearchResults();\n            this.timeout = setTimeout(() => {\n                this.timeout = null;\n                makeSearchRequest();\n            }, SEARCH_TIMEOUT);\n        }\n    }\n\n    renderSearchItem(product, i) {\n        return (\n            <SearchItem\n              product={ product }\n              key={ i }\n            />\n        );\n    }\n\n    renderSearchCriteria() {\n        const { searchCriteria } = this.props;\n\n        return (\n            <p\n              block=\"SearchOverlay\"\n              elem=\"Criteria\"\n              mods={ { isVisible: !!searchCriteria.trim() } }\n            >\n                { __('Results for:') }\n                <strong>{ searchCriteria }</strong>\n            </p>\n        );\n    }\n\n    renderNoSearchCriteria() {\n        return <p>{ __('Start typing to see search results!') }</p>;\n    }\n\n    renderNoResults() {\n        return <p>{ __('No results found!') }</p>;\n    }\n\n    renderSearchResults() {\n        const { searchCriteria, searchResults, isLoading } = this.props;\n\n        if (!searchCriteria.trim()) {\n            return this.renderNoSearchCriteria();\n        }\n\n        if (!searchResults.length && !isLoading && !this.timeout) {\n            return this.renderNoResults();\n        }\n\n        const resultsToRender = (isLoading || this.timeout) ? Array(AMOUNT_OF_PLACEHOLDERS).fill({}) : searchResults;\n\n        return (\n            <ul>\n                { resultsToRender.map((item, i) => this.renderSearchItem(item, i)) }\n            </ul>\n        );\n    }\n\n    render() {\n        const { isHideOverlay } = this.props;\n\n        if (isHideOverlay) {\n            return (\n                <article\n                  block=\"SearchOverlay\"\n                  elem=\"Results\"\n                  aria-label=\"Search results\"\n                >\n                    { this.renderSearchResults() }\n                </article>\n            );\n        }\n\n        return (\n            <Overlay\n              id=\"search\"\n              mix={ { block: 'SearchOverlay' } }\n            >\n                { this.renderSearchCriteria() }\n                <article\n                  block=\"SearchOverlay\"\n                  elem=\"Results\"\n                  aria-label=\"Search results\"\n                >\n                    { this.renderSearchResults() }\n                </article>\n            </Overlay>\n        );\n    }\n}\n\nexport default SearchOverlay;\n"]},"metadata":{},"sourceType":"module"}