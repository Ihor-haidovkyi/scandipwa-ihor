{"ast":null,"code":"import _slicedToArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable react/jsx-one-expression-per-line */ /**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CartItemPrice from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CartItemPrice\";import Field from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Field\";import Image from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Image\";import Link from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Link\";import Loader from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Loader\";import{DeviceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Device\";import{CartItemType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/MiniCart\";import\"./CartItem.style\";/**\n * Cart and CartOverlay item\n * @class CartItem\n * @namespace Component/CartItem/Component\n */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CartItem=/*#__PURE__*/function(_Extensible){_inherits(_CartItem,_Extensible);var _super=_createSuper(_CartItem);function _CartItem(){var _this;_classCallCheck(this,_CartItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.renderProductConfigurationOption=function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],attribute=_ref2[1];var configurable_options=_this.props.item.product.configurable_options;var attribute_code=attribute.attribute_code,attribute_value=attribute.attribute_value;if(!Object.keys(configurable_options).includes(key)||attribute_value===null){return null;}var label=configurable_options[attribute_code].attribute_options[attribute_value].label;return/*#__PURE__*/_checkBEM(React,\"li\",{key:attribute_code,\"aria-label\":attribute_code,block:\"CartItem\",elem:\"Option\"},label);};_this.renderProductOptionValue=function(optionValue,i,array){var label=optionValue.label,value=optionValue.value;var isNextAvailable=Boolean(array[i+1]);return/*#__PURE__*/_checkBEM(React,\"span\",{block:\"CartItem\",elem:\"ItemOptionValue\",key:label},label||value,isNextAvailable&&', ');};_this.renderProductOptionContent=function(option){var label=option.label,values=option.values,id=option.id;if(!values){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"ItemOptionLabel\",key:\"label-\".concat(id)},label);}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"ItemOptionLabel\",key:\"label-\".concat(id)},\"\".concat(label,\":\")),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"ItemOptionValues\"},values.map(_this.renderProductOptionValue)));};_this.renderProductOption=function(option){var id=option.id;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"ItemOption\",key:id},_this.renderProductOptionContent(option));};return _this;}_createClass(_CartItem,[{key:\"renderProductConfigurations\",value:function renderProductConfigurations(){var _this$props=this.props,_this$props$item$prod=_this$props.item.product,configurable_options=_this$props$item$prod.configurable_options,variants=_this$props$item$prod.variants,isLikeTable=_this$props.isLikeTable,getCurrentProduct=_this$props.getCurrentProduct;if(!variants||!configurable_options){return null;}var _ref3=getCurrentProduct()||{},_ref3$attributes=_ref3.attributes,attributes=_ref3$attributes===void 0?[]:_ref3$attributes;if(!Object.entries(attributes).length){return null;}return/*#__PURE__*/_checkBEM(React,\"ul\",{block:\"CartItem\",elem:\"Options\",mods:{isLikeTable:isLikeTable}},Object.entries(attributes).map(this.renderProductConfigurationOption));}},{key:\"renderWrapperContent\",value:function renderWrapperContent(){return/*#__PURE__*/_checkBEM(React,\"figure\",{block:\"CartItem\",elem:\"Wrapper\"},this.renderImage(),this.renderContent());}},{key:\"renderWrapper\",value:function renderWrapper(){var _this$props2=this.props,linkTo=_this$props2.linkTo,isProductInStock=_this$props2.isProductInStock,device=_this$props2.device;// TODO: implement shared-transition here?\nif(!isProductInStock||Object.keys(linkTo).length===0){// If product is out of stock, or link is not set\nreturn/*#__PURE__*/_checkBEM(React,\"span\",{block:\"CartItem\",elem:\"Link\"},this.renderWrapperContent());}if(device.isMobile){return this.renderWrapperContent();}return/*#__PURE__*/_checkBEM(React,Link,{to:linkTo,block:\"CartItem\",elem:\"Link\"},this.renderWrapperContent());}},{key:\"renderProductOptions\",value:function renderProductOptions(){var itemOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var isLikeTable=this.props.isLikeTable;if(!itemOptions.length){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"ItemOptionsWrapper\",mods:{isLikeTable:isLikeTable}},itemOptions.map(this.renderProductOption));}},{key:\"renderProductLinks\",value:function renderProductLinks(){var itemOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var isLikeTable=this.props.isLikeTable;if(!itemOptions.length){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"ItemLinksWrapper\"},/*#__PURE__*/_checkBEM(React,\"span\",{block:\"CartItem\",elem:\"ItemLinks\"},__('Links:')),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"ItemOptionsWrapper\",mods:{isLikeTable:isLikeTable}},itemOptions.map(this.renderProductOption)));}},{key:\"renderProductName\",value:function renderProductName(){var name=this.props.item.product.name;return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CartItem\",elem:\"Heading\"},name);}},{key:\"renderProductPrice\",value:function renderProductPrice(){var _this$props3=this.props,isLikeTable=_this$props3.isLikeTable,currency_code=_this$props3.currency_code,_this$props3$item=_this$props3.item,row_total=_this$props3$item.row_total,row_total_incl_tax=_this$props3$item.row_total_incl_tax;return/*#__PURE__*/_checkBEM(React,CartItemPrice,{row_total:row_total,row_total_incl_tax:row_total_incl_tax,currency_code:currency_code,mix:{block:'CartItem',elem:'Price',mods:{isLikeTable:isLikeTable}}});}},{key:\"renderOutOfStockMessage\",value:function renderOutOfStockMessage(){var isProductInStock=this.props.isProductInStock;if(isProductInStock){return null;}return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CartItem\",elem:\"OutOfStock\"},__('Product is out of stock'));}},{key:\"renderContent\",value:function renderContent(){var _this$props4=this.props,isLikeTable=_this$props4.isLikeTable,_this$props4$item=_this$props4.item;_this$props4$item=_this$props4$item===void 0?{}:_this$props4$item;var customizable_options=_this$props4$item.customizable_options,bundle_options=_this$props4$item.bundle_options,downloadable_links=_this$props4$item.downloadable_links;return/*#__PURE__*/_checkBEM(React,\"figcaption\",{block:\"CartItem\",elem:\"Content\",mods:{isLikeTable:isLikeTable}},this.renderOutOfStockMessage(),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"HeadingWrapper\"},this.renderProductName(),this.renderDeleteButton(true)),this.renderProductOptions(customizable_options),this.renderProductOptions(bundle_options),this.renderProductLinks(downloadable_links),this.renderProductConfigurations(),this.renderQuantityChangeField(true),this.renderProductPrice());}},{key:\"renderQuantityChangeField\",value:function renderQuantityChangeField(){var isVisibleOnMobile=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var _this$props5=this.props,qty=_this$props5.item.qty,minSaleQuantity=_this$props5.minSaleQuantity,maxSaleQuantity=_this$props5.maxSaleQuantity,handleChangeQuantity=_this$props5.handleChangeQuantity,isProductInStock=_this$props5.isProductInStock,device=_this$props5.device;if(!isProductInStock){return null;}if(!isVisibleOnMobile&&device.isMobile){return null;}if(isVisibleOnMobile&&!device.isMobile){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"QuantityWrapper\"},/*#__PURE__*/_checkBEM(React,\"span\",{block:\"CartItem\",elem:\"QuantityText\"},__('Qty:')),/*#__PURE__*/_checkBEM(React,Field,{id:\"item_qty\",name:\"item_qty\",type:\"number\",isControlled:true,min:minSaleQuantity,max:maxSaleQuantity,mix:{block:'CartItem',elem:'Qty'},value:qty,onChange:handleChangeQuantity}));}},{key:\"renderActions\",value:function renderActions(){var _this$props6=this.props,isEditing=_this$props6.isEditing,isLikeTable=_this$props6.isLikeTable;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",elem:\"Actions\",mods:{isEditing:isEditing,isLikeTable:isLikeTable}},this.renderDeleteButton(),this.renderQuantityChangeField());}},{key:\"renderDeleteButton\",value:function renderDeleteButton(){var isVisibleOnMobile=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var _this$props7=this.props,handleRemoveItem=_this$props7.handleRemoveItem,device=_this$props7.device;if(!isVisibleOnMobile&&device.isMobile){return null;}if(isVisibleOnMobile&&!device.isMobile){return null;}return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"CartItem\",id:\"RemoveItem\",name:\"RemoveItem\",elem:\"Delete\",\"aria-label\":\"Remove item from cart\",onClick:handleRemoveItem},/*#__PURE__*/_checkBEM(React,\"span\",{block:\"CartItem\",elem:\"DeleteButtonText\"},__('Delete')));}},{key:\"renderImageElement\",value:function renderImageElement(){var _this$props8=this.props,name=_this$props8.item.product.name,thumbnail=_this$props8.thumbnail,isProductInStock=_this$props8.isProductInStock;var isNotAvailable=!isProductInStock;return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,Image,{src:thumbnail,mix:{block:'CartItem',elem:'Picture',mods:{isNotAvailable:isNotAvailable}},ratio:\"custom\",alt:\"Product \".concat(name,\" thumbnail.\")}),/*#__PURE__*/_checkBEM(React,\"img\",{style:{display:'none'},alt:name,src:thumbnail}));}},{key:\"renderImage\",value:function renderImage(){var _this$props9=this.props,linkTo=_this$props9.linkTo,device=_this$props9.device;if(device.isMobile){return/*#__PURE__*/_checkBEM(React,Link,{to:linkTo,block:\"CartItem\",elem:\"Link\"},this.renderImageElement());}return this.renderImageElement();}},{key:\"render\",value:function render(){var _this$props10=this.props,isLoading=_this$props10.isLoading,isEditing=_this$props10.isEditing;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartItem\",mods:{isEditing:isEditing}},/*#__PURE__*/_checkBEM(React,Loader,{isLoading:isLoading}),this.renderWrapper(),this.renderActions());}}]);return _CartItem;}(Extensible(PureComponent));_CartItem.defaultProps={isEditing:false,isLikeTable:false};Object.defineProperty(_CartItem,'name',{value:'CartItem'});export var CartItem=middleware(_CartItem,\"Component/CartItem/Component\");export default CartItem;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CartItem/CartItem.component.js"],"names":["PureComponent","CartItemPrice","Field","Image","Link","Loader","DeviceType","CartItemType","CartItem","renderProductConfigurationOption","key","attribute","configurable_options","props","item","product","attribute_code","attribute_value","Object","keys","includes","label","attribute_options","renderProductOptionValue","optionValue","i","array","value","isNextAvailable","Boolean","renderProductOptionContent","option","values","id","map","renderProductOption","variants","isLikeTable","getCurrentProduct","attributes","entries","length","renderImage","renderContent","linkTo","isProductInStock","device","renderWrapperContent","isMobile","itemOptions","__","name","currency_code","row_total","row_total_incl_tax","block","elem","mods","customizable_options","bundle_options","downloadable_links","renderOutOfStockMessage","renderProductName","renderDeleteButton","renderProductOptions","renderProductLinks","renderProductConfigurations","renderQuantityChangeField","renderProductPrice","isVisibleOnMobile","qty","minSaleQuantity","maxSaleQuantity","handleChangeQuantity","isEditing","handleRemoveItem","thumbnail","isNotAvailable","display","renderImageElement","isLoading","renderWrapper","renderActions","defaultProps","defineProperty","_CartItem"],"mappings":"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","sourcesContent":["/* eslint-disable react/jsx-one-expression-per-line */\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CartItemPrice from 'Component/CartItemPrice';\nimport Field from 'Component/Field';\nimport Image from 'Component/Image';\nimport Link from 'Component/Link';\nimport Loader from 'Component/Loader';\nimport { DeviceType } from 'Type/Device';\nimport { CartItemType } from 'Type/MiniCart';\n\nimport './CartItem.style';\n\n/**\n * Cart and CartOverlay item\n * @class CartItem\n * @namespace Component/CartItem/Component\n */\nexport class CartItem extends PureComponent {\n    static propTypes = {\n        isLoading: PropTypes.bool.isRequired,\n        item: CartItemType.isRequired,\n        currency_code: PropTypes.string.isRequired,\n        isEditing: PropTypes.bool,\n        isLikeTable: PropTypes.bool,\n        handleRemoveItem: PropTypes.func.isRequired,\n        minSaleQuantity: PropTypes.number.isRequired,\n        maxSaleQuantity: PropTypes.number.isRequired,\n        handleChangeQuantity: PropTypes.func.isRequired,\n        getCurrentProduct: PropTypes.func.isRequired,\n        linkTo: PropTypes.oneOfType([\n            PropTypes.shape({\n                pathname: PropTypes.string,\n                search: PropTypes.string\n            }),\n            PropTypes.string\n        ]).isRequired,\n        thumbnail: PropTypes.string.isRequired,\n        showNotification: PropTypes.func.isRequired,\n        getProductVariant: PropTypes.func.isRequired,\n        isProductInStock: PropTypes.bool.isRequired,\n        device: DeviceType.isRequired\n    };\n\n    static defaultProps = {\n        isEditing: false,\n        isLikeTable: false\n    };\n\n    renderProductConfigurationOption = ([key, attribute]) => {\n        const {\n            item: {\n                product: {\n                    configurable_options\n                }\n            }\n        } = this.props;\n\n        const { attribute_code, attribute_value } = attribute;\n\n        if (!Object.keys(configurable_options).includes(key) || attribute_value === null) {\n            return null;\n        }\n\n        const {\n            [attribute_code]: { // configurable option attribute\n                attribute_options: {\n                    [attribute_value]: { // attribute option value label\n                        label\n                    }\n                }\n            }\n        } = configurable_options;\n\n        return (\n            <li\n              key={ attribute_code }\n              aria-label={ attribute_code }\n              block=\"CartItem\"\n              elem=\"Option\"\n            >\n                { label }\n            </li>\n        );\n    };\n\n    renderProductConfigurations() {\n        const {\n            item: {\n                product: {\n                    configurable_options,\n                    variants\n                }\n            },\n            isLikeTable,\n            getCurrentProduct\n        } = this.props;\n\n        if (!variants || !configurable_options) {\n            return null;\n        }\n\n        const { attributes = [] } = getCurrentProduct() || {};\n\n        if (!Object.entries(attributes).length) {\n            return null;\n        }\n\n        return (\n            <ul\n              block=\"CartItem\"\n              elem=\"Options\"\n              mods={ { isLikeTable } }\n            >\n                { Object.entries(attributes).map(this.renderProductConfigurationOption) }\n            </ul>\n        );\n    }\n\n    renderWrapperContent() {\n        return (\n            <figure block=\"CartItem\" elem=\"Wrapper\">\n                { this.renderImage() }\n                { this.renderContent() }\n            </figure>\n        );\n    }\n\n    renderWrapper() {\n        const { linkTo, isProductInStock, device } = this.props;\n\n        // TODO: implement shared-transition here?\n\n        if (!isProductInStock || Object.keys(linkTo).length === 0) {\n            // If product is out of stock, or link is not set\n            return (\n                <span block=\"CartItem\" elem=\"Link\">\n                    { this.renderWrapperContent() }\n                </span>\n            );\n        }\n\n        if (device.isMobile) {\n            return (\n                this.renderWrapperContent()\n            );\n        }\n\n        return (\n            <Link to={ linkTo } block=\"CartItem\" elem=\"Link\">\n                { this.renderWrapperContent() }\n            </Link>\n        );\n    }\n\n    renderProductOptionValue = (optionValue, i, array) => {\n        const { label, value } = optionValue;\n        const isNextAvailable = Boolean(array[i + 1]);\n\n        return (\n            <span\n              block=\"CartItem\"\n              elem=\"ItemOptionValue\"\n              key={ label }\n            >\n                { label || value }{ isNextAvailable && ', ' }\n            </span>\n        );\n    };\n\n    renderProductOptionContent = (option) => {\n        const { label, values, id } = option;\n\n        if (!values) {\n            return (\n                <div\n                  block=\"CartItem\"\n                  elem=\"ItemOptionLabel\"\n                  key={ `label-${ id }` }\n                >\n                    { label }\n                </div>\n            );\n        }\n\n        return (\n            <>\n                <div\n                  block=\"CartItem\"\n                  elem=\"ItemOptionLabel\"\n                  key={ `label-${ id }` }\n                >\n                    { `${ label }:` }\n                </div>\n                <div block=\"CartItem\" elem=\"ItemOptionValues\">\n                    { values.map(this.renderProductOptionValue) }\n                </div>\n            </>\n        );\n    };\n\n    renderProductOption = (option) => {\n        const { id } = option;\n\n        return (\n            <div\n              block=\"CartItem\"\n              elem=\"ItemOption\"\n              key={ id }\n            >\n                  { this.renderProductOptionContent(option) }\n            </div>\n        );\n    };\n\n    renderProductOptions(itemOptions = []) {\n        const { isLikeTable } = this.props;\n\n        if (!itemOptions.length) {\n            return null;\n        }\n\n        return (\n            <div\n              block=\"CartItem\"\n              elem=\"ItemOptionsWrapper\"\n              mods={ { isLikeTable } }\n            >\n                { itemOptions.map(this.renderProductOption) }\n            </div>\n        );\n    }\n\n    renderProductLinks(itemOptions = []) {\n        const { isLikeTable } = this.props;\n\n        if (!itemOptions.length) {\n            return null;\n        }\n\n        return (\n            <div\n              block=\"CartItem\"\n              elem=\"ItemLinksWrapper\"\n            >\n                <span\n                  block=\"CartItem\"\n                  elem=\"ItemLinks\"\n                >\n                    { __('Links:') }\n                </span>\n                <div\n                  block=\"CartItem\"\n                  elem=\"ItemOptionsWrapper\"\n                  mods={ { isLikeTable } }\n                >\n                    { itemOptions.map(this.renderProductOption) }\n                </div>\n            </div>\n        );\n    }\n\n    renderProductName() {\n        const {\n            item: {\n                product: {\n                    name\n                }\n            }\n        } = this.props;\n\n        return (\n            <p\n              block=\"CartItem\"\n              elem=\"Heading\"\n            >\n                { name }\n            </p>\n        );\n    }\n\n    renderProductPrice() {\n        const {\n            isLikeTable,\n            currency_code,\n            item: {\n                row_total,\n                row_total_incl_tax\n            }\n        } = this.props;\n\n        return (\n            <CartItemPrice\n              row_total={ row_total }\n              row_total_incl_tax={ row_total_incl_tax }\n              currency_code={ currency_code }\n              mix={ {\n                  block: 'CartItem',\n                  elem: 'Price',\n                  mods: { isLikeTable }\n              } }\n            />\n        );\n    }\n\n    renderOutOfStockMessage() {\n        const { isProductInStock } = this.props;\n\n        if (isProductInStock) {\n            return null;\n        }\n\n        return (\n            <p block=\"CartItem\" elem=\"OutOfStock\">\n                { __('Product is out of stock') }\n            </p>\n        );\n    }\n\n    renderContent() {\n        const {\n            isLikeTable,\n            item: {\n                customizable_options,\n                bundle_options,\n                downloadable_links\n            } = {}\n        } = this.props;\n\n        return (\n                <figcaption\n                  block=\"CartItem\"\n                  elem=\"Content\"\n                  mods={ { isLikeTable } }\n                >\n                    { this.renderOutOfStockMessage() }\n                    <div block=\"CartItem\" elem=\"HeadingWrapper\">\n                        { this.renderProductName() }\n                        { this.renderDeleteButton(true) }\n                    </div>\n                    { this.renderProductOptions(customizable_options) }\n                    { this.renderProductOptions(bundle_options) }\n                    { this.renderProductLinks(downloadable_links) }\n                    { this.renderProductConfigurations() }\n                    { this.renderQuantityChangeField(true) }\n                    { this.renderProductPrice() }\n                </figcaption>\n        );\n    }\n\n    renderQuantityChangeField(isVisibleOnMobile = false) {\n        const {\n            item: { qty },\n            minSaleQuantity,\n            maxSaleQuantity,\n            handleChangeQuantity,\n            isProductInStock,\n            device\n        } = this.props;\n\n        if (!isProductInStock) {\n            return null;\n        }\n\n        if (!isVisibleOnMobile && device.isMobile) {\n            return null;\n        }\n\n        if (isVisibleOnMobile && !device.isMobile) {\n            return null;\n        }\n\n        return (\n            <div block=\"CartItem\" elem=\"QuantityWrapper\">\n                <span block=\"CartItem\" elem=\"QuantityText\">{ __('Qty:') }</span>\n                <Field\n                  id=\"item_qty\"\n                  name=\"item_qty\"\n                  type=\"number\"\n                  isControlled\n                  min={ minSaleQuantity }\n                  max={ maxSaleQuantity }\n                  mix={ { block: 'CartItem', elem: 'Qty' } }\n                  value={ qty }\n                  onChange={ handleChangeQuantity }\n                />\n            </div>\n        );\n    }\n\n    renderActions() {\n        const {\n            isEditing,\n            isLikeTable\n        } = this.props;\n\n        return (\n            <div\n              block=\"CartItem\"\n              elem=\"Actions\"\n              mods={ { isEditing, isLikeTable } }\n            >\n                { this.renderDeleteButton() }\n                { this.renderQuantityChangeField() }\n            </div>\n        );\n    }\n\n    renderDeleteButton(isVisibleOnMobile = false) {\n        const { handleRemoveItem, device } = this.props;\n\n        if (!isVisibleOnMobile && device.isMobile) {\n            return null;\n        }\n\n        if (isVisibleOnMobile && !device.isMobile) {\n            return null;\n        }\n\n        return (\n            <button\n              block=\"CartItem\"\n              id=\"RemoveItem\"\n              name=\"RemoveItem\"\n              elem=\"Delete\"\n              aria-label=\"Remove item from cart\"\n              onClick={ handleRemoveItem }\n            >\n                <span block=\"CartItem\" elem=\"DeleteButtonText\">{ __('Delete') }</span>\n            </button>\n        );\n    }\n\n    renderImageElement() {\n        const { item: { product: { name } }, thumbnail, isProductInStock } = this.props;\n        const isNotAvailable = !isProductInStock;\n        return (\n            <>\n            <Image\n              src={ thumbnail }\n              mix={ {\n                  block: 'CartItem',\n                  elem: 'Picture',\n                  mods: {\n                      isNotAvailable\n                  }\n              } }\n              ratio=\"custom\"\n              alt={ `Product ${name} thumbnail.` }\n            />\n                <img\n                  style={ { display: 'none' } }\n                  alt={ name }\n                  src={ thumbnail }\n                />\n            </>\n        );\n    }\n\n    renderImage() {\n        const { linkTo, device } = this.props;\n\n        if (device.isMobile) {\n            return (\n                <Link to={ linkTo } block=\"CartItem\" elem=\"Link\">\n                    { this.renderImageElement() }\n                </Link>\n            );\n        }\n\n        return this.renderImageElement();\n    }\n\n    render() {\n        const { isLoading, isEditing } = this.props;\n\n        return (\n            <div block=\"CartItem\" mods={ { isEditing } }>\n                <Loader isLoading={ isLoading } />\n                { this.renderWrapper() }\n                { this.renderActions() }\n            </div>\n        );\n    }\n}\n\nexport default CartItem;\n"]},"metadata":{},"sourceType":"module"}