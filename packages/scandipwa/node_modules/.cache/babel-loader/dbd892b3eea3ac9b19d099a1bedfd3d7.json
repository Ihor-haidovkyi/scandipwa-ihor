{"ast":null,"code":"import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _toPropertyKey from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toPropertyKey\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import BrowserDatabase from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/BrowserDatabase\";import{getIndexedParameteredProducts}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Product\";import{CLEAR_WISHLIST,REMOVE_ITEM_FROM_WISHLIST,UPDATE_ALL_PRODUCTS_IN_WISHLIST,UPDATE_IS_LOADING_IN_WISHLIST,UPDATE_ITEM_OPTIONS}from\"./Wishlist.action\";export var PRODUCTS_IN_WISHLIST='wishlist_products';/** @namespace Store/Wishlist/Reducer/getInitialState */export var getInitialState=middleware(function(){return{productsInWishlist:BrowserDatabase.getItem(PRODUCTS_IN_WISHLIST)||{},isLoading:true};},\"Store/Wishlist/Reducer/getInitialState\");/** @namespace Store/Wishlist/Reducer/deleteProperty */export var deleteProperty=middleware(function(key,_ref){var _=_ref[key],newObj=_objectWithoutProperties(_ref,[key].map(_toPropertyKey));return newObj;},\"Store/Wishlist/Reducer/deleteProperty\");/** @namespace Store/Wishlist/Reducer/removeItemFromWishlist */export var removeItemFromWishlist=middleware(function(_ref2,_ref3){var item_id=_ref2.item_id;var initialProducts=_ref3.productsInWishlist;var productsInWishlist=deleteProperty(item_id,initialProducts)||{};BrowserDatabase.setItem(productsInWishlist,PRODUCTS_IN_WISHLIST);return{productsInWishlist:productsInWishlist};},\"Store/Wishlist/Reducer/removeItemFromWishlist\");/** @namespace Store/Wishlist/Reducer/clearWishlist */export var clearWishlist=middleware(function(){var productsInWishlist={};BrowserDatabase.setItem(productsInWishlist,PRODUCTS_IN_WISHLIST);return{productsInWishlist:productsInWishlist};},\"Store/Wishlist/Reducer/clearWishlist\");/** @namespace Store/Wishlist/Reducer/updateAllProductsInWishlist */export var updateAllProductsInWishlist=middleware(function(action){var initialProducts=action.products;var products=getIndexedParameteredProducts(initialProducts);BrowserDatabase.setItem(products,PRODUCTS_IN_WISHLIST);return{productsInWishlist:products,isLoading:false};},\"Store/Wishlist/Reducer/updateAllProductsInWishlist\");/** @namespace Store/Wishlist/Reducer/updateItemOptions */export var updateItemOptions=middleware(function(options,_ref4){var productsInWishlist=_ref4.productsInWishlist;var item_id=options.item_id;var cleanedOptions=deleteProperty('item_id',options)||{};var products=_objectSpread(_objectSpread({},productsInWishlist),{},_defineProperty({},item_id,_objectSpread(_objectSpread({},productsInWishlist[item_id]),{},{wishlist:_objectSpread(_objectSpread({},productsInWishlist[item_id].wishlist),cleanedOptions)})));BrowserDatabase.setItem(products,PRODUCTS_IN_WISHLIST);return{productsInWishlist:products};},\"Store/Wishlist/Reducer/updateItemOptions\");/** @namespace Store/Wishlist/Reducer */export var WishlistReducer=middleware(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getInitialState();var action=arguments.length>1?arguments[1]:undefined;var type=action.type,options=action.options;switch(type){case REMOVE_ITEM_FROM_WISHLIST:return _objectSpread(_objectSpread({},state),{},{isLoading:false},removeItemFromWishlist(action,state));case CLEAR_WISHLIST:return _objectSpread(_objectSpread({},state),clearWishlist());case UPDATE_ALL_PRODUCTS_IN_WISHLIST:return _objectSpread(_objectSpread({},state),{},{isLoading:false},updateAllProductsInWishlist(action));case UPDATE_ITEM_OPTIONS:return _objectSpread(_objectSpread({},state),updateItemOptions(options,state));case UPDATE_IS_LOADING_IN_WISHLIST:var isLoading=action.isLoading;return _objectSpread(_objectSpread({},state),{},{isLoading:isLoading});default:return state;}},\"Store/Wishlist/Reducer\");export default WishlistReducer;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/store/Wishlist/Wishlist.reducer.js"],"names":["BrowserDatabase","getIndexedParameteredProducts","CLEAR_WISHLIST","REMOVE_ITEM_FROM_WISHLIST","UPDATE_ALL_PRODUCTS_IN_WISHLIST","UPDATE_IS_LOADING_IN_WISHLIST","UPDATE_ITEM_OPTIONS","PRODUCTS_IN_WISHLIST","getInitialState","productsInWishlist","getItem","isLoading","deleteProperty","key","_","newObj","removeItemFromWishlist","item_id","initialProducts","setItem","clearWishlist","updateAllProductsInWishlist","action","products","updateItemOptions","options","cleanedOptions","wishlist","WishlistReducer","state","type"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport BrowserDatabase from 'Util/BrowserDatabase';\nimport { getIndexedParameteredProducts } from 'Util/Product';\n\nimport {\n    CLEAR_WISHLIST,\n    REMOVE_ITEM_FROM_WISHLIST,\n    UPDATE_ALL_PRODUCTS_IN_WISHLIST,\n    UPDATE_IS_LOADING_IN_WISHLIST,\n    UPDATE_ITEM_OPTIONS\n} from './Wishlist.action';\n\nexport const PRODUCTS_IN_WISHLIST = 'wishlist_products';\n\n/** @namespace Store/Wishlist/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    productsInWishlist: BrowserDatabase.getItem(PRODUCTS_IN_WISHLIST) || {},\n    isLoading: true\n});\n\n/** @namespace Store/Wishlist/Reducer/deleteProperty */\nexport const deleteProperty = (key, { [key]: _, ...newObj }) => newObj;\n\n/** @namespace Store/Wishlist/Reducer/removeItemFromWishlist */\nexport const removeItemFromWishlist = ({ item_id }, { productsInWishlist: initialProducts }) => {\n    const productsInWishlist = deleteProperty(item_id, initialProducts) || {};\n\n    BrowserDatabase.setItem(\n        productsInWishlist,\n        PRODUCTS_IN_WISHLIST\n    );\n\n    return { productsInWishlist };\n};\n\n/** @namespace Store/Wishlist/Reducer/clearWishlist */\nexport const clearWishlist = () => {\n    const productsInWishlist = {};\n\n    BrowserDatabase.setItem(productsInWishlist, PRODUCTS_IN_WISHLIST);\n    return { productsInWishlist };\n};\n\n/** @namespace Store/Wishlist/Reducer/updateAllProductsInWishlist */\nexport const updateAllProductsInWishlist = (action) => {\n    const { products: initialProducts } = action;\n\n    const products = getIndexedParameteredProducts(initialProducts);\n\n    BrowserDatabase.setItem(\n        products,\n        PRODUCTS_IN_WISHLIST\n    );\n\n    return { productsInWishlist: products, isLoading: false };\n};\n\n/** @namespace Store/Wishlist/Reducer/updateItemOptions */\nexport const updateItemOptions = (options, { productsInWishlist }) => {\n    const { item_id } = options;\n    const cleanedOptions = deleteProperty('item_id', options) || {};\n\n    const products = {\n        ...productsInWishlist,\n        [item_id]: {\n            ...productsInWishlist[item_id],\n            wishlist: {\n                ...productsInWishlist[item_id].wishlist,\n                ...cleanedOptions\n            }\n        }\n    };\n\n    BrowserDatabase.setItem(\n        products,\n        PRODUCTS_IN_WISHLIST\n    );\n\n    return { productsInWishlist: products };\n};\n\n/** @namespace Store/Wishlist/Reducer */\nexport const WishlistReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const { type, options } = action;\n\n    switch (type) {\n    case REMOVE_ITEM_FROM_WISHLIST:\n        return {\n            ...state,\n            isLoading: false,\n            ...removeItemFromWishlist(action, state)\n        };\n\n    case CLEAR_WISHLIST:\n        return {\n            ...state,\n            ...clearWishlist()\n        };\n\n    case UPDATE_ALL_PRODUCTS_IN_WISHLIST:\n        return {\n            ...state,\n            isLoading: false,\n            ...updateAllProductsInWishlist(action)\n        };\n\n    case UPDATE_ITEM_OPTIONS:\n        return {\n            ...state,\n            ...updateItemOptions(options, state)\n        };\n\n    case UPDATE_IS_LOADING_IN_WISHLIST:\n        const { isLoading } = action;\n\n        return {\n            ...state,\n            isLoading\n        };\n\n    default:\n        return state;\n    }\n};\n\nexport default WishlistReducer;\n"]},"metadata":{},"sourceType":"module"}