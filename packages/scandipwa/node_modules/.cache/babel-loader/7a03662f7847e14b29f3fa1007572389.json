{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{ProductType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import{formatPrice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Price\";import\"./TierPrices.style\";/** @namespace Component/TierPrices/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _TierPrices=/*#__PURE__*/function(_Extensible){_inherits(_TierPrices,_Extensible);var _super=_createSuper(_TierPrices);function _TierPrices(){var _this;_classCallCheck(this,_TierPrices);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.renderDetailedTierPrice=function(_ref){var percent_off=_ref.discount.percent_off,_ref$final_price=_ref.final_price,value=_ref$final_price.value,currency=_ref$final_price.currency,quantity=_ref.quantity;var minPriceForOneUnit=_this.props.product.price_range.minimum_price.final_price.value;// Don't show offers that make no sense\nif(value>=minPriceForOneUnit){return null;}var formattedPrice=formatPrice(value,currency);return/*#__PURE__*/_checkBEM(React,\"li\",{block:\"TierPrices\",elem:\"Item\",key:quantity},__('Buy %s for %s each and ',quantity,formattedPrice),/*#__PURE__*/_checkBEM(React,\"strong\",null,__('save %s%',Math.round(percent_off))));};return _this;}_createClass(_TierPrices,[{key:\"renderLowestTierPrice\",value:function renderLowestTierPrice(){var _this$props$product=this.props.product,price_tiers=_this$props$product.price_tiers,currency=_this$props$product.price_range.minimum_price.final_price.currency;var lowestValue=price_tiers.reduce(function(acc,_ref2){var value=_ref2.final_price.value;return acc<value?acc:value;},price_tiers[0].final_price.value);var formattedPrice=formatPrice(lowestValue,currency);return/*#__PURE__*/_checkBEM(React,\"span\",{block:\"TierPrices\",elem:\"Item\",mods:{isLowest:true}},__('As low as '),/*#__PURE__*/_checkBEM(React,\"span\",{block:\"TierPrices\",elem:\"ItemPrice\"},\"\".concat(formattedPrice)));}},{key:\"renderDetailedTierPriceList\",value:function renderDetailedTierPriceList(){var price_tiers=this.props.product.price_tiers;return price_tiers.map(this.renderDetailedTierPrice);}},{key:\"renderTierPrice\",value:function renderTierPrice(){var isLowestPrice=this.props.isLowestPrice;if(isLowestPrice){return this.renderLowestTierPrice();}return this.renderDetailedTierPriceList();}},{key:\"render\",value:function render(){var _this$props=this.props,product=_this$props.product,_this$props$product$p=_this$props.product.price_tiers,price_tiers=_this$props$product$p===void 0?[]:_this$props$product$p;if(!price_tiers||Object.keys(product).length<=0||!price_tiers.length){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"TierPrices\"},this.renderTierPrice());}}]);return _TierPrices;}(Extensible(PureComponent));_TierPrices.defaultProps={isLowestPrice:false};Object.defineProperty(_TierPrices,'name',{value:'TierPrices'});export var TierPrices=middleware(_TierPrices,\"Component/TierPrices/Component\");export default TierPrices;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/TierPrices/TierPrices.component.js"],"names":["PureComponent","ProductType","formatPrice","TierPrices","renderDetailedTierPrice","percent_off","discount","final_price","value","currency","quantity","minPriceForOneUnit","props","product","price_range","minimum_price","formattedPrice","__","Math","round","price_tiers","lowestValue","reduce","acc","isLowest","map","isLowestPrice","renderLowestTierPrice","renderDetailedTierPriceList","Object","keys","length","renderTierPrice","defaultProps","defineProperty","_TierPrices"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { ProductType } from 'Type/ProductList';\nimport { formatPrice } from 'Util/Price';\n\nimport './TierPrices.style';\n\n/** @namespace Component/TierPrices/Component */\nexport class TierPrices extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        isLowestPrice: PropTypes.bool\n    };\n\n    static defaultProps = {\n        isLowestPrice: false\n    };\n\n    renderDetailedTierPrice = ({\n        discount: {\n            percent_off\n        },\n        final_price: {\n            value,\n            currency\n        },\n        quantity\n    }) => {\n        const {\n            product: {\n                price_range: {\n                    minimum_price: {\n                        final_price: {\n                            value: minPriceForOneUnit\n                        }\n                    }\n                }\n            }\n        } = this.props;\n\n        // Don't show offers that make no sense\n        if (value >= minPriceForOneUnit) {\n            return null;\n        }\n\n        const formattedPrice = formatPrice(value, currency);\n\n        return (\n            <li block=\"TierPrices\" elem=\"Item\" key={ quantity }>\n                { __(\n                    'Buy %s for %s each and ',\n                    quantity,\n                    formattedPrice\n                ) }\n                <strong>\n                    { __(\n                        'save %s%',\n                        Math.round(percent_off)\n                    ) }\n                </strong>\n            </li>\n        );\n    };\n\n    renderLowestTierPrice() {\n        const {\n            product: {\n                price_tiers,\n                price_range: {\n                    minimum_price: {\n                        final_price: {\n                            currency\n                        }\n                    }\n                }\n            }\n        } = this.props;\n\n        const lowestValue = price_tiers\n            .reduce((acc, { final_price: { value } }) => (acc < value ? acc : value), price_tiers[0].final_price.value);\n\n        const formattedPrice = formatPrice(lowestValue, currency);\n        return (\n            <span block=\"TierPrices\" elem=\"Item\" mods={ { isLowest: true } }>\n                { __('As low as ') }\n                <span block=\"TierPrices\" elem=\"ItemPrice\">\n                    { `${ formattedPrice }` }\n                </span>\n            </span>\n        );\n    }\n\n    renderDetailedTierPriceList() {\n        const { product: { price_tiers } } = this.props;\n\n        return price_tiers.map(this.renderDetailedTierPrice);\n    }\n\n    renderTierPrice() {\n        const { isLowestPrice } = this.props;\n\n        if (isLowestPrice) {\n            return this.renderLowestTierPrice();\n        }\n\n        return this.renderDetailedTierPriceList();\n    }\n\n    render() {\n        const { product, product: { price_tiers = [] } } = this.props;\n\n        if (!price_tiers || Object.keys(product).length <= 0 || !price_tiers.length) {\n            return null;\n        }\n\n        return (\n            <div block=\"TierPrices\">\n                { this.renderTierPrice() }\n            </div>\n        );\n    }\n}\n\nexport default TierPrices;\n"]},"metadata":{},"sourceType":"module"}