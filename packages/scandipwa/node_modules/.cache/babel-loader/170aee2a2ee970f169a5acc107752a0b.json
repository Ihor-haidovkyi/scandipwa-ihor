{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */ /* eslint-disable prefer-promise-reject-errors */ // Disabled due promise being reject with custom error (isCanceled)\n/**\n * Promise wrapper to make it cancelable\n * @static\n * @param  {Promise} promise promise which has to be cancelable\n * @return {Promise} Cancelable promise\n * @namespace Util/Promise/makeCancelable\n */export var makeCancelable=middleware(function(promise){// eslint-disable-next-line fp/no-let\nvar hasCanceled_=false;var wrappedPromise=new Promise(function(resolve,reject){promise.then(/** @namespace Util/Promise/MakeCancelable/promiseThen */middleware(function(val){return!hasCanceled_&&resolve(val);},\"Util/Promise/MakeCancelable/promiseThen\"),/** @namespace Util/Promise/MakeCancelable/promiseError */middleware(function(error){return!hasCanceled_&&reject(error);},\"Util/Promise/MakeCancelable/promiseError\"));});return{promise:wrappedPromise,cancel:function cancel(){hasCanceled_=true;}};},\"Util/Promise/makeCancelable\\n\");export default makeCancelable;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/util/Promise/MakeCancelable.js"],"names":["makeCancelable","promise","hasCanceled_","wrappedPromise","Promise","resolve","reject","then","val","error","cancel"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G,CAEA,iD,CACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,IAAMA,CAAAA,cAAc,YAAG,SAACC,OAAD,CAAa,CACvC;AACA,GAAIC,CAAAA,YAAY,CAAG,KAAnB,CAEA,GAAMC,CAAAA,cAAc,CAAG,GAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACpDL,OAAO,CAACM,IAAR,CACI,yDADJ,WAEI,SAACC,GAAD,QAAU,CAACN,YAAD,EAAiBG,OAAO,CAACG,GAAD,CAAlC,EAFJ,4CAGI,0DAHJ,WAII,SAACC,KAAD,QAAY,CAACP,YAAD,EAAiBI,MAAM,CAACG,KAAD,CAAnC,EAJJ,8CAMH,CAPsB,CAAvB,CASA,MAAO,CACHR,OAAO,CAAEE,cADN,CAEHO,MAFG,kBAEM,CACLR,YAAY,CAAG,IAAf,CACH,CAJE,CAAP,CAMH,CAnB0B,iCAApB,CAqBP,cAAeF,CAAAA,cAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\n/* eslint-disable prefer-promise-reject-errors */\n// Disabled due promise being reject with custom error (isCanceled)\n\n/**\n * Promise wrapper to make it cancelable\n * @static\n * @param  {Promise} promise promise which has to be cancelable\n * @return {Promise} Cancelable promise\n * @namespace Util/Promise/makeCancelable\n */\nexport const makeCancelable = (promise) => {\n    // eslint-disable-next-line fp/no-let\n    let hasCanceled_ = false;\n\n    const wrappedPromise = new Promise((resolve, reject) => {\n        promise.then(\n            /** @namespace Util/Promise/MakeCancelable/promiseThen */\n            (val) => (!hasCanceled_ && resolve(val)),\n            /** @namespace Util/Promise/MakeCancelable/promiseError */\n            (error) => (!hasCanceled_ && reject(error))\n        );\n    });\n\n    return {\n        promise: wrappedPromise,\n        cancel() {\n            hasCanceled_ = true;\n        }\n    };\n};\n\nexport default makeCancelable;\n"]},"metadata":{},"sourceType":"module"}