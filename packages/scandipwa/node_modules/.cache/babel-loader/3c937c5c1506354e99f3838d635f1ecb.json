{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{isSignedIn}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Auth\";import{Field}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Query\";/** @namespace Query/Checkout */export var _CheckoutQuery=/*#__PURE__*/function(_Extensible){_inherits(_CheckoutQuery,_Extensible);var _super=_createSuper(_CheckoutQuery);function _CheckoutQuery(){_classCallCheck(this,_CheckoutQuery);return _super.apply(this,arguments);}_createClass(_CheckoutQuery,[{key:\"getPaymentMethodsQuery\",value:function getPaymentMethodsQuery(guestCartId){var query=new Field('getPaymentMethods').addFieldList(this._getPaymentMethodFields());this._addGuestCartId(guestCartId,query);return query;}},{key:\"getSaveGuestEmailMutation\",value:function getSaveGuestEmailMutation(email,cart_id){var input={email:email,cart_id:cart_id};var mutation=new Field('setGuestEmailOnCart').addArgument('input','SetGuestEmailOnCartInput',input).addField(new Field('cart').addField('email'));return mutation;}},{key:\"getEstimateShippingCosts\",value:function getEstimateShippingCosts(address,guestCartId){var mutation=new Field('estimateShippingCosts').addArgument('address','EstimateShippingCostsAddress!',address).addFieldList(this._getEstimatedShippingFields());this._addGuestCartId(guestCartId,mutation);return mutation;}},{key:\"getSaveAddressInformation\",value:function getSaveAddressInformation(addressInformation,guestCartId){var mutation=new Field('saveAddressInformation').addArgument('addressInformation','SaveAddressInformation!',addressInformation).addFieldList(this._getSaveAddressInformationFields());this._addGuestCartId(guestCartId,mutation);return mutation;}},{key:\"getSetBillingAddressOnCart\",value:function getSetBillingAddressOnCart(input){return new Field('s_setBillingAddressOnCart').addArgument('input','S_SetBillingAddressOnCartInput!',input).addField(this._getCartField()).setAlias('billingAddress');}},{key:\"getSetPaymentMethodOnCartMutation\",value:function getSetPaymentMethodOnCartMutation(input){return new Field('s_setPaymentMethodOnCart').addArgument('input','S_SetPaymentMethodOnCartInput!',input).addField(this._getCartField()).setAlias('paymentMethod');}},{key:\"getPlaceOrderMutation\",value:function getPlaceOrderMutation(guestCartId){var mutation=new Field('s_placeOrder').setAlias('placeOrder').addField(this._getOrderField());if(!isSignedIn()){mutation.addArgument('guestCartId','String',guestCartId);}return mutation;}},{key:\"_addGuestCartId\",value:function _addGuestCartId(guestCartId,mutation){if(guestCartId&&!isSignedIn()){mutation.addArgument('guestCartId','String!',guestCartId);}}},{key:\"_getOrderField\",value:function _getOrderField(){return new Field('order').addFieldList(['order_id']);}},{key:\"_getSaveAddressInformationFields\",value:function _getSaveAddressInformationFields(){return[this._getPaymentMethodsField(),this._getTotalsField()];}},{key:\"_getEstimatedShippingFields\",value:function _getEstimatedShippingFields(){return['amount','available','base_amount','method_code','carrier_code','method_title','carrier_title','error_message','price_excl_tax','price_incl_tax'];}},{key:\"_getPaymentMethodsField\",value:function _getPaymentMethodsField(){return new Field('payment_methods').addFieldList(this._getPaymentMethodFields());}},{key:\"_getPaymentMethodFields\",value:function _getPaymentMethodFields(){return['code','title'];}},{key:\"_getTotalItemFields\",value:function _getTotalItemFields(){return['qty','name','price','item_id','options','tax_amount','tax_percent','price_incl_tax','discount_amount','discount_percent'];}},{key:\"_getTotalItemField\",value:function _getTotalItemField(){return new Field('items').addFieldList(this._getTotalItemFields());}},{key:\"_getTotalsFields\",value:function _getTotalsFields(){return['subtotal','tax_amount','base_grand_total','grand_total','discount_amount','shipping_amount','subtotal_incl_tax','shipping_incl_tax','quote_currency_code','shipping_tax_amount','subtotal_with_discount','shipping_discount_amount',this._getTotalItemField()];}},{key:\"_getTotalsField\",value:function _getTotalsField(){return new Field('totals').addFieldList(this._getTotalsFields());}},{key:\"_getCartField\",value:function _getCartField(){return new Field('cart').addFieldList(this._getCartFieldList());}},{key:\"_getCartFieldList\",value:function _getCartFieldList(){return['id'];}}]);return _CheckoutQuery;}(Extensible());Object.defineProperty(_CheckoutQuery,'name',{value:'CheckoutQuery'});export var CheckoutQuery=middleware(_CheckoutQuery,\"Query/Checkout\");export default new CheckoutQuery();","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/query/Checkout.query.js"],"names":["isSignedIn","Field","CheckoutQuery","guestCartId","query","addFieldList","_getPaymentMethodFields","_addGuestCartId","email","cart_id","input","mutation","addArgument","addField","address","_getEstimatedShippingFields","addressInformation","_getSaveAddressInformationFields","_getCartField","setAlias","_getOrderField","_getPaymentMethodsField","_getTotalsField","_getTotalItemFields","_getTotalItemField","_getTotalsFields","_getCartFieldList","Object","defineProperty","_CheckoutQuery","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { isSignedIn } from 'Util/Auth';\nimport { Field } from 'Util/Query';\n\n/** @namespace Query/Checkout */\nexport class CheckoutQuery {\n    getPaymentMethodsQuery(guestCartId) {\n        const query = new Field('getPaymentMethods')\n            .addFieldList(this._getPaymentMethodFields());\n\n        this._addGuestCartId(guestCartId, query);\n\n        return query;\n    }\n\n    getSaveGuestEmailMutation(email, cart_id) {\n        const input = { email, cart_id };\n        const mutation = new Field('setGuestEmailOnCart')\n            .addArgument('input', 'SetGuestEmailOnCartInput', input)\n            .addField(((new Field('cart')).addField('email')));\n\n        return mutation;\n    }\n\n    getEstimateShippingCosts(address, guestCartId) {\n        const mutation = new Field('estimateShippingCosts')\n            .addArgument('address', 'EstimateShippingCostsAddress!', address)\n            .addFieldList(this._getEstimatedShippingFields());\n\n        this._addGuestCartId(guestCartId, mutation);\n\n        return mutation;\n    }\n\n    getSaveAddressInformation(addressInformation, guestCartId) {\n        const mutation = new Field('saveAddressInformation')\n            .addArgument('addressInformation', 'SaveAddressInformation!', addressInformation)\n            .addFieldList(this._getSaveAddressInformationFields());\n\n        this._addGuestCartId(guestCartId, mutation);\n\n        return mutation;\n    }\n\n    getSetBillingAddressOnCart(input) {\n        return new Field('s_setBillingAddressOnCart')\n            .addArgument('input', 'S_SetBillingAddressOnCartInput!', input)\n            .addField(this._getCartField())\n            .setAlias('billingAddress');\n    }\n\n    getSetPaymentMethodOnCartMutation(input) {\n        return new Field('s_setPaymentMethodOnCart')\n            .addArgument('input', 'S_SetPaymentMethodOnCartInput!', input)\n            .addField(this._getCartField())\n            .setAlias('paymentMethod');\n    }\n\n    getPlaceOrderMutation(guestCartId) {\n        const mutation = new Field('s_placeOrder')\n            .setAlias('placeOrder')\n            .addField(this._getOrderField());\n\n        if (!isSignedIn()) {\n            mutation.addArgument('guestCartId', 'String', guestCartId);\n        }\n\n        return mutation;\n    }\n\n    _addGuestCartId(guestCartId, mutation) {\n        if (guestCartId && !isSignedIn()) {\n            mutation.addArgument('guestCartId', 'String!', guestCartId);\n        }\n    }\n\n    _getOrderField() {\n        return new Field('order')\n            .addFieldList(['order_id']);\n    }\n\n    _getSaveAddressInformationFields() {\n        return [\n            this._getPaymentMethodsField(),\n            this._getTotalsField()\n        ];\n    }\n\n    _getEstimatedShippingFields() {\n        return [\n            'amount',\n            'available',\n            'base_amount',\n            'method_code',\n            'carrier_code',\n            'method_title',\n            'carrier_title',\n            'error_message',\n            'price_excl_tax',\n            'price_incl_tax'\n        ];\n    }\n\n    _getPaymentMethodsField() {\n        return new Field('payment_methods')\n            .addFieldList(this._getPaymentMethodFields());\n    }\n\n    _getPaymentMethodFields() {\n        return ['code', 'title'];\n    }\n\n    _getTotalItemFields() {\n        return [\n            'qty',\n            'name',\n            'price',\n            'item_id',\n            'options',\n            'tax_amount',\n            'tax_percent',\n            'price_incl_tax',\n            'discount_amount',\n            'discount_percent'\n        ];\n    }\n\n    _getTotalItemField() {\n        return new Field('items')\n            .addFieldList(this._getTotalItemFields());\n    }\n\n    _getTotalsFields() {\n        return [\n            'subtotal',\n            'tax_amount',\n            'base_grand_total',\n            'grand_total',\n            'discount_amount',\n            'shipping_amount',\n            'subtotal_incl_tax',\n            'shipping_incl_tax',\n            'quote_currency_code',\n            'shipping_tax_amount',\n            'subtotal_with_discount',\n            'shipping_discount_amount',\n            this._getTotalItemField()\n        ];\n    }\n\n    _getTotalsField() {\n        return new Field('totals')\n            .addFieldList(this._getTotalsFields());\n    }\n\n    _getCartField() {\n        return new Field('cart')\n            .addFieldList(this._getCartFieldList());\n    }\n\n    _getCartFieldList() {\n        return [\n            'id'\n        ];\n    }\n}\n\nexport default new CheckoutQuery();\n"]},"metadata":{},"sourceType":"module"}