{"ast":null,"code":"import _toConsumableArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{ENTER_KEY_CODE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Field/Field.config\";import FieldSelect from\"./FieldSelect.component\";import{A_KEY_CODE,a_KEY_CODE,Z_KEY_CODE,z_KEY_CODE}from\"./FieldSelect.config\";/** @namespace Component/FieldSelect/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _FieldSelectContainer=/*#__PURE__*/function(_Extensible){_inherits(_FieldSelectContainer,_Extensible);var _super=_createSuper(_FieldSelectContainer);function _FieldSelectContainer(){var _this;_classCallCheck(this,_FieldSelectContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={valueIndex:-1,searchString:'a',isSelectExpanded:false};_this.containerFunctions={handleSelectExpand:_this.handleSelectExpand.bind(_assertThisInitialized(_this)),handleSelectExpandedExpand:_this.handleSelectExpandedExpand.bind(_assertThisInitialized(_this)),handleSelectListOptionClick:_this.handleSelectListOptionClick.bind(_assertThisInitialized(_this)),handleSelectListKeyPress:_this.handleSelectListKeyPress.bind(_assertThisInitialized(_this))};_this.containerProps=function(){var _this$state=_this.state,valueIndex=_this$state.valueIndex,searchString=_this$state.searchString,isSelectExpanded=_this$state.isSelectExpanded;return{selectOptions:_this.sortSelectOptions(),isDisabled:_this.isSelectDisabled(),valueIndex:valueIndex,searchString:searchString,isSelectExpanded:isSelectExpanded};};return _this;}_createClass(_FieldSelectContainer,[{key:\"sortSelectOptions\",value:function sortSelectOptions(){var selectOptions=this.props.selectOptions;/**\n         * Trim all null label values, sort alphabetically\n         */var sortedOptions=selectOptions.reduce(function(acc,a){return a.label?[].concat(_toConsumableArray(acc),[a]):acc;},[]).sort(function(a,b){var textA=a.label.toUpperCase();var textB=b.label.toUpperCase();// eslint-disable-next-line no-nested-ternary\nreturn textA<textB?-1:textA>textB?1:0;});return sortedOptions;}},{key:\"isSelectDisabled\",value:function isSelectDisabled(){var selectOptions=this.props.selectOptions;return selectOptions.length===0;}},{key:\"handleSelectExpand\",value:function handleSelectExpand(){if(!this.isSelectDisabled()){this.setState(function(_ref){var isSelectExpanded=_ref.isSelectExpanded;return{isSelectExpanded:!isSelectExpanded};});}}},{key:\"handleSelectExpandedExpand\",value:function handleSelectExpandedExpand(){var isSelectExpanded=this.state.isSelectExpanded;if(isSelectExpanded){this.handleSelectExpand();}}},{key:\"handleSelectListOptionClick\",value:function handleSelectListOptionClick(_ref2){var value=_ref2.value;var _this$props=this.props,formRef=_this$props.formRef,onChange=_this$props.onChange;if(typeof formRef!=='function'){formRef.current.value=value;// TODO: investigate why this is required\nvar event=new Event('change',{bubbles:true});formRef.current.dispatchEvent(event);}else{onChange(value);}}},{key:\"_getSelectedValueIndex\",value:function _getSelectedValueIndex(keyCode){var selectOptions=this.props.selectOptions;var _this$state2=this.state,prevSearchString=_this$state2.searchString,prevValueIndex=_this$state2.valueIndex;var pressedKeyValue=String.fromCharCode(keyCode).toLowerCase();var searchString=prevSearchString[prevSearchString.length-1]!==pressedKeyValue?\"\".concat(prevSearchString).concat(pressedKeyValue):pressedKeyValue;var nextValueIndex=selectOptions.findIndex(function(_ref3,i){var label=_ref3.label;return label&&label.toLowerCase().startsWith(searchString)&&(i>prevValueIndex||prevSearchString!==searchString);});if(nextValueIndex!==-1){return{searchString:searchString,valueIndex:nextValueIndex};}// if no items were found, take only the latest letter of the search string\nvar newSearchString=searchString[searchString.length-1];var newValueIndex=selectOptions.findIndex(function(_ref4){var label=_ref4.label;return label&&label.toLowerCase().startsWith(newSearchString);});if(newValueIndex!==-1){return{searchString:newSearchString,valueIndex:newValueIndex};}// if there are no items starting with this letter\nreturn{};}},{key:\"handleSelectListKeyPress\",value:function handleSelectListKeyPress(event){var isSelectExpanded=this.state.isSelectExpanded;var _this$props2=this.props,selectOptions=_this$props2.selectOptions,onChange=_this$props2.onChange,selectId=_this$props2.id;var keyCode=event.which||event.keycode;// on Enter pressed\nif(keyCode===ENTER_KEY_CODE){this.handleSelectExpand();return;}if(!isSelectExpanded||!keyCode||keyCode<A_KEY_CODE||keyCode>z_KEY_CODE||keyCode>Z_KEY_CODE&&keyCode<a_KEY_CODE){return;}var _this$_getSelectedVal=this._getSelectedValueIndex(keyCode),searchString=_this$_getSelectedVal.searchString,valueIndex=_this$_getSelectedVal.valueIndex;// valueIndex can be 0, so !valueIndex === true\nif(!searchString||valueIndex===null){return;}this.setState({searchString:searchString,valueIndex:valueIndex},function(){var _selectOptions$valueI=selectOptions[valueIndex],id=_selectOptions$valueI.id,value=_selectOptions$valueI.value;// converting to string for avoiding the error with the first select option\nonChange(value.toString());var selectedElement=document.querySelector(\"#\".concat(selectId,\" + ul #o\").concat(id));selectedElement.focus();});}},{key:\"render\",value:function render(){var _this$containerProps=this.containerProps(),selectOptions=_this$containerProps.selectOptions;if(!selectOptions){throw new Error('Prop `selectOptions` is required for Field type `select`');}return/*#__PURE__*/_checkBEM(React,FieldSelect,Object.assign({},this.props,this.containerFunctions,this.containerProps()));}}]);return _FieldSelectContainer;}(Extensible(PureComponent));_FieldSelectContainer.defaultProps={selectOptions:[],formRef:function formRef(){},onChange:function onChange(){}};Object.defineProperty(_FieldSelectContainer,'name',{value:'FieldSelectContainer'});export var FieldSelectContainer=middleware(_FieldSelectContainer,\"Component/FieldSelect/Container\");export default FieldSelectContainer;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/FieldSelect/FieldSelect.container.js"],"names":["PureComponent","ENTER_KEY_CODE","FieldSelect","A_KEY_CODE","a_KEY_CODE","Z_KEY_CODE","z_KEY_CODE","FieldSelectContainer","state","valueIndex","searchString","isSelectExpanded","containerFunctions","handleSelectExpand","bind","handleSelectExpandedExpand","handleSelectListOptionClick","handleSelectListKeyPress","containerProps","selectOptions","sortSelectOptions","isDisabled","isSelectDisabled","props","sortedOptions","reduce","acc","a","label","sort","b","textA","toUpperCase","textB","length","setState","value","formRef","onChange","current","event","Event","bubbles","dispatchEvent","keyCode","prevSearchString","prevValueIndex","pressedKeyValue","String","fromCharCode","toLowerCase","nextValueIndex","findIndex","i","startsWith","newSearchString","newValueIndex","selectId","id","which","keycode","_getSelectedValueIndex","toString","selectedElement","document","querySelector","focus","Error","defaultProps","Object","defineProperty","_FieldSelectContainer"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { ENTER_KEY_CODE } from 'Component/Field/Field.config';\n\nimport FieldSelect from './FieldSelect.component';\nimport {\n    A_KEY_CODE,\n    a_KEY_CODE,\n    Z_KEY_CODE,\n    z_KEY_CODE\n} from './FieldSelect.config';\n\n/** @namespace Component/FieldSelect/Container */\nexport class FieldSelectContainer extends PureComponent {\n    static propTypes = {\n        id: PropTypes.string.isRequired,\n        selectOptions: PropTypes.arrayOf(PropTypes.shape({\n            id: PropTypes.oneOfType([\n                PropTypes.string,\n                PropTypes.number\n            ]),\n            value: PropTypes.oneOfType([\n                PropTypes.string,\n                PropTypes.number\n            ]),\n            disabled: PropTypes.bool,\n            label: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n        })),\n        formRef: PropTypes.oneOfType([\n            PropTypes.func,\n            PropTypes.shape({ current: PropTypes.instanceOf(Element) })\n        ]),\n        onChange: PropTypes.func\n    };\n\n    static defaultProps = {\n        selectOptions: [],\n        formRef: () => {},\n        onChange: () => {}\n    };\n\n    state = {\n        valueIndex: -1,\n        searchString: 'a',\n        isSelectExpanded: false\n    };\n\n    containerFunctions = {\n        handleSelectExpand: this.handleSelectExpand.bind(this),\n        handleSelectExpandedExpand: this.handleSelectExpandedExpand.bind(this),\n        handleSelectListOptionClick: this.handleSelectListOptionClick.bind(this),\n        handleSelectListKeyPress: this.handleSelectListKeyPress.bind(this)\n    };\n\n    containerProps = () => {\n        const {\n            valueIndex,\n            searchString,\n            isSelectExpanded\n        } = this.state;\n\n        return {\n            selectOptions: this.sortSelectOptions(),\n            isDisabled: this.isSelectDisabled(),\n            valueIndex,\n            searchString,\n            isSelectExpanded\n        };\n    };\n\n    sortSelectOptions() {\n        const { selectOptions } = this.props;\n\n        /**\n         * Trim all null label values, sort alphabetically\n         */\n        const sortedOptions = selectOptions.reduce(\n            (acc, a) => (a.label ? [...acc, a] : acc), []\n        ).sort((a, b) => {\n            const textA = a.label.toUpperCase();\n            const textB = b.label.toUpperCase();\n            // eslint-disable-next-line no-nested-ternary\n            return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;\n        });\n\n        return sortedOptions;\n    }\n\n    isSelectDisabled() {\n        const { selectOptions } = this.props;\n        return selectOptions.length === 0;\n    }\n\n    handleSelectExpand() {\n        if (!this.isSelectDisabled()) {\n            this.setState(({ isSelectExpanded }) => ({ isSelectExpanded: !isSelectExpanded }));\n        }\n    }\n\n    handleSelectExpandedExpand() {\n        const { isSelectExpanded } = this.state;\n\n        if (isSelectExpanded) {\n            this.handleSelectExpand();\n        }\n    }\n\n    handleSelectListOptionClick({ value }) {\n        const { formRef, onChange } = this.props;\n\n        if (typeof formRef !== 'function') {\n            formRef.current.value = value;\n\n            // TODO: investigate why this is required\n            const event = new Event('change', { bubbles: true });\n            formRef.current.dispatchEvent(event);\n        } else {\n            onChange(value);\n        }\n    }\n\n    _getSelectedValueIndex(keyCode) {\n        const { selectOptions } = this.props;\n        const {\n            searchString: prevSearchString,\n            valueIndex: prevValueIndex\n        } = this.state;\n\n        const pressedKeyValue = String.fromCharCode(keyCode).toLowerCase();\n\n        const searchString = (prevSearchString[prevSearchString.length - 1] !== pressedKeyValue)\n            ? `${prevSearchString}${pressedKeyValue}`\n            : pressedKeyValue;\n\n        const nextValueIndex = selectOptions.findIndex(({ label }, i) => (\n            label && label.toLowerCase().startsWith(searchString) && (\n                i > prevValueIndex || prevSearchString !== searchString\n            )\n        ));\n\n        if (nextValueIndex !== -1) {\n            return { searchString, valueIndex: nextValueIndex };\n        }\n\n        // if no items were found, take only the latest letter of the search string\n        const newSearchString = searchString[searchString.length - 1];\n\n        const newValueIndex = selectOptions.findIndex(({ label }) => (\n            label && label.toLowerCase().startsWith(newSearchString)\n        ));\n\n        if (newValueIndex !== -1) {\n            return { searchString: newSearchString, valueIndex: newValueIndex };\n        }\n\n        // if there are no items starting with this letter\n        return {};\n    }\n\n    handleSelectListKeyPress(event) {\n        const { isSelectExpanded } = this.state;\n        const { selectOptions, onChange, id: selectId } = this.props;\n        const keyCode = event.which || event.keycode;\n\n        // on Enter pressed\n        if (keyCode === ENTER_KEY_CODE) {\n            this.handleSelectExpand();\n            return;\n        }\n\n        if (!isSelectExpanded\n            || !keyCode\n            || keyCode < A_KEY_CODE\n            || keyCode > z_KEY_CODE\n            || (keyCode > Z_KEY_CODE && keyCode < a_KEY_CODE)\n        ) {\n            return;\n        }\n\n        const { searchString, valueIndex } = this._getSelectedValueIndex(keyCode);\n\n        // valueIndex can be 0, so !valueIndex === true\n        if (!searchString || valueIndex === null) {\n            return;\n        }\n\n        this.setState({ searchString, valueIndex }, () => {\n            const { id, value } = selectOptions[valueIndex];\n            // converting to string for avoiding the error with the first select option\n            onChange(value.toString());\n            const selectedElement = document.querySelector(`#${selectId} + ul #o${id}`);\n            selectedElement.focus();\n        });\n    }\n\n    render() {\n        const { selectOptions } = this.containerProps();\n\n        if (!selectOptions) {\n            throw new Error('Prop `selectOptions` is required for Field type `select`');\n        }\n\n        return (\n            <FieldSelect\n              { ...this.props }\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default FieldSelectContainer;\n"]},"metadata":{},"sourceType":"module"}