{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{ProductItemsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import ProductCompare from\"./ProductCompare.component\";export var ProductCompareDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductCompare/ProductCompare.dispatcher\");/** @namespace Component/ProductCompare/Container/mapStateToProps  */export var mapStateToProps=middleware(function(state){return{products:state.ProductCompareReducer.products,items:state.ProductCompareReducer.items,attributes:state.ProductCompareReducer.attributes,isLoading:state.ProductCompareReducer.isLoading,device:state.ConfigReducer.device};},\"Component/ProductCompare/Container/mapStateToProps\");/** @namespace Component/ProductCompare/Container/mapDispatchToProps  */export var mapDispatchToProps=middleware(function(dispatch){return{fetchCompareList:function fetchCompareList(){return ProductCompareDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.getCompareList(dispatch);});},clearCompareList:function clearCompareList(){return ProductCompareDispatcher.then(function(_ref2){var dispatcher=_ref2.default;return dispatcher.clearComparedProducts(dispatch);});}};},\"Component/ProductCompare/Container/mapDispatchToProps\");/** @namespace Component/ProductCompare/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductCompareContainer=/*#__PURE__*/function(_Extensible){_inherits(_ProductCompareContainer,_Extensible);var _super=_createSuper(_ProductCompareContainer);function _ProductCompareContainer(){var _this;_classCallCheck(this,_ProductCompareContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.containerFunctions={getAttributes:_this.getAttributes.bind(_assertThisInitialized(_this)),clearCompareList:_this.clearCompareList.bind(_assertThisInitialized(_this))};return _this;}_createClass(_ProductCompareContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchCompareList();}},{key:\"fetchCompareList\",value:function fetchCompareList(){var fetchCompareList=this.props.fetchCompareList;fetchCompareList();}},{key:\"clearCompareList\",value:function clearCompareList(){var clearCompareList=this.props.clearCompareList;clearCompareList();}},{key:\"getAttributes\",value:function getAttributes(){var _this$props=this.props,attributes=_this$props.attributes,items=_this$props.items;if(!items.length||!attributes.length){return[];}return attributes.map(function(_ref3){var code=_ref3.code,label=_ref3.label;return{attribute_id:code,attribute_code:code,attribute_label:label,attribute_values:items.map(function(_ref4){var attributes=_ref4.attributes;return attributes.find(function(attribute){return attribute.code===code;}).value;})};});}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,ProductCompare,Object.assign({},this.props,this.containerFunctions));}}]);return _ProductCompareContainer;}(Extensible(PureComponent));_ProductCompareContainer.defaultProps={isLoading:false,products:[],items:[],attributes:[]};Object.defineProperty(_ProductCompareContainer,'name',{value:'ProductCompareContainer'});export var ProductCompareContainer=middleware(_ProductCompareContainer,\"Component/ProductCompare/Container\");export default connect(mapStateToProps,mapDispatchToProps)(ProductCompareContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCompare/ProductCompare.container.js"],"names":["PureComponent","connect","ProductItemsType","ProductCompare","ProductCompareDispatcher","mapStateToProps","state","products","ProductCompareReducer","items","attributes","isLoading","device","ConfigReducer","mapDispatchToProps","dispatch","fetchCompareList","then","dispatcher","default","getCompareList","clearCompareList","clearComparedProducts","ProductCompareContainer","containerFunctions","getAttributes","bind","props","length","map","code","label","attribute_id","attribute_code","attribute_label","attribute_values","find","attribute","value","defaultProps","Object","defineProperty","_ProductCompareContainer"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { ProductItemsType } from 'Type/ProductList';\n\nimport ProductCompare from './ProductCompare.component';\n\nexport const ProductCompareDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/ProductCompare/ProductCompare.dispatcher'\n);\n\n/** @namespace Component/ProductCompare/Container/mapStateToProps  */\nexport const mapStateToProps = (state) => ({\n    products: state.ProductCompareReducer.products,\n    items: state.ProductCompareReducer.items,\n    attributes: state.ProductCompareReducer.attributes,\n    isLoading: state.ProductCompareReducer.isLoading,\n    device: state.ConfigReducer.device\n});\n\n/** @namespace Component/ProductCompare/Container/mapDispatchToProps  */\nexport const mapDispatchToProps = (dispatch) => ({\n    fetchCompareList: () => ProductCompareDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.getCompareList(dispatch)\n    ),\n    clearCompareList: () => ProductCompareDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.clearComparedProducts(dispatch)\n    )\n});\n\n/** @namespace Component/ProductCompare/Container */\nexport class ProductCompareContainer extends PureComponent {\n    static propTypes = {\n        fetchCompareList: PropTypes.func.isRequired,\n        clearCompareList: PropTypes.func.isRequired,\n        isLoading: PropTypes.bool,\n        products: ProductItemsType,\n        items: PropTypes.object,\n        attributes: PropTypes.object\n    };\n\n    static defaultProps = {\n        isLoading: false,\n        products: [],\n        items: [],\n        attributes: []\n    };\n\n    containerFunctions = {\n        getAttributes: this.getAttributes.bind(this),\n        clearCompareList: this.clearCompareList.bind(this)\n    };\n\n    componentDidMount() {\n        this.fetchCompareList();\n    }\n\n    fetchCompareList() {\n        const { fetchCompareList } = this.props;\n\n        fetchCompareList();\n    }\n\n    clearCompareList() {\n        const { clearCompareList } = this.props;\n\n        clearCompareList();\n    }\n\n    getAttributes() {\n        const { attributes, items } = this.props;\n\n        if (!items.length || !attributes.length) {\n            return [];\n        }\n\n        return attributes.map(({ code, label }) => ({\n            attribute_id: code,\n            attribute_code: code,\n            attribute_label: label,\n            attribute_values: items.map(\n                ({ attributes }) => attributes.find((attribute) => attribute.code === code).value\n            )\n        }));\n    }\n\n    render() {\n        return (\n            <ProductCompare\n              { ...this.props }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCompareContainer);\n"]},"metadata":{},"sourceType":"module"}