{"ast":null,"code":"import _toConsumableArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _get from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{createRef,PureComponent}from'react';import{connect}from'react-redux';import{Subscribe}from'unstated';import ImageZoomPopup from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ImageZoomPopup\";import SharedTransitionContainer from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/SharedTransition/SharedTransition.unstated\";import{ProductType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import ProductGallery from\"./ProductGallery.component\";import{AMOUNT_OF_PLACEHOLDERS,IMAGE_TYPE,PRODUCT_GALERY_POPUP_ID,THUMBNAIL_KEY}from\"./ProductGallery.config\";/** @namespace Component/ProductGallery/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{isMobile:state.ConfigReducer.device.isMobile};},\"Component/ProductGallery/Container/mapStateToProps\");/** @namespace Component/ProductGallery/Container/mapDispatchToProps */ // eslint-disable-next-line no-unused-vars\nexport var mapDispatchToProps=middleware(function(dispatch){return{};},\"Component/ProductGallery/Container/mapDispatchToProps\");/** @namespace Component/ProductGallery/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductGalleryContainer=/*#__PURE__*/function(_Extensible){_inherits(_ProductGalleryContainer,_Extensible);var _super=_createSuper(_ProductGalleryContainer);function _ProductGalleryContainer(){var _this;_classCallCheck(this,_ProductGalleryContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.sliderRef=/*#__PURE__*/createRef();_this.containerFunctions={onActiveImageChange:_this.onActiveImageChange.bind(_assertThisInitialized(_this)),handleZoomChange:_this.handleZoomChange.bind(_assertThisInitialized(_this)),disableZoom:_this.disableZoom.bind(_assertThisInitialized(_this)),handleImageZoomPopupActiveChange:_this.handleImageZoomPopupActiveChange.bind(_assertThisInitialized(_this))};_this.containerProps=function(){var _this$state=_this.state,activeImage=_this$state.activeImage,isZoomEnabled=_this$state.isZoomEnabled,isImageZoomPopupActive=_this$state.isImageZoomPopupActive;var _this$props=_this.props,id=_this$props.product.id,isMobile=_this$props.isMobile;return{gallery:_this.getGalleryPictures(),productName:_this._getProductName(),activeImage:activeImage,isZoomEnabled:isZoomEnabled,productId:id,isMobile:isMobile,isImageZoomPopupActive:isImageZoomPopupActive,sliderRef:_this.sliderRef};};_this.handleImageZoomPopupClose=function(){_this.handleImageZoomPopupActiveChange(false);};return _this;}_createClass(_ProductGalleryContainer,[{key:\"__construct\",value:function __construct(props){_get(_getPrototypeOf(_ProductGalleryContainer.prototype),\"__construct\",this).call(this,props);var id=props.product.id;this.state={activeImage:0,isZoomEnabled:false,prevProdId:id,isImageZoomPopupActive:false};}},{key:\"handleImageZoomPopupActiveChange\",value:function handleImageZoomPopupActiveChange(isImageZoomPopupActive){var isMobile=this.props.isMobile;if(isMobile){return;}this.setState({isImageZoomPopupActive:isImageZoomPopupActive});}},{key:\"onActiveImageChange\",value:function onActiveImageChange(activeImage){this.setState({activeImage:activeImage,isZoomEnabled:false});}},{key:\"getGalleryPictures\",value:function getGalleryPictures(){var _this$props2=this.props,areDetailsLoaded=_this$props2.areDetailsLoaded,_this$props2$product=_this$props2.product,_this$props2$product$=_this$props2$product.media_gallery_entries,mediaGallery=_this$props2$product$===void 0?[]:_this$props2$product$,_this$props2$product$2=_this$props2$product[THUMBNAIL_KEY];_this$props2$product$2=_this$props2$product$2===void 0?{}:_this$props2$product$2;var thumbnailUrl=_this$props2$product$2.url,_this$props2$product$3=_this$props2$product[IMAGE_TYPE];_this$props2$product$3=_this$props2$product$3===void 0?{}:_this$props2$product$3;var imageTypeUrl=_this$props2$product$3.url,name=_this$props2$product.name;var url=imageTypeUrl||thumbnailUrl;if(mediaGallery.length){return mediaGallery.filter(function(_ref){var disabled=_ref.disabled;return!disabled;}).sort(function(a,b){var aThumbnail=a.types.includes(THUMBNAIL_KEY);var bThumbnail=b.types.includes(THUMBNAIL_KEY);var sortResult=a.position-b.position;if(aThumbnail&&bThumbnail){return sortResult;}if(aThumbnail){return-1;}if(bThumbnail){return 1;}return sortResult;});}if(!url){return Array(AMOUNT_OF_PLACEHOLDERS+1).fill({media_type:'placeholder'});}var placeholders=!areDetailsLoaded?Array(AMOUNT_OF_PLACEHOLDERS).fill({media_type:'placeholder'}):[];return[{thumbnail:{url:url},base:{url:url},id:THUMBNAIL_KEY,label:name,media_type:IMAGE_TYPE}].concat(_toConsumableArray(placeholders));}},{key:\"_getProductName\",value:/**\n     * Returns the name of the product this gallery if for\n     * @private\n     */function _getProductName(){var name=this.props.product.name;return name;}},{key:\"disableZoom\",value:function disableZoom(){document.documentElement.classList.remove('overscrollPrevented');this.setState({isZoomEnabled:false});}},{key:\"handleZoomChange\",value:function handleZoomChange(args){var isZoomEnabled=this.state.isZoomEnabled;if(args.scale!==1){if(isZoomEnabled){return;}document.documentElement.classList.add('overscrollPrevented');this.setState({isZoomEnabled:true});}}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,isImageZoomPopupActive=_this$state2.isImageZoomPopupActive,activeImage=_this$state2.activeImage;return/*#__PURE__*/_checkBEM(React,ImageZoomPopup,{isActive:isImageZoomPopupActive,onClose:this.handleImageZoomPopupClose,activeImageId:activeImage,popupId:PRODUCT_GALERY_POPUP_ID},/*#__PURE__*/_checkBEM(React,Subscribe,{to:[SharedTransitionContainer]},function(_ref2){var registerSharedElementDestination=_ref2.registerSharedElementDestination;return/*#__PURE__*/_checkBEM(React,ProductGallery,Object.assign({registerSharedElementDestination:registerSharedElementDestination},_this2.containerProps(),_this2.containerFunctions));}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var id=props.product.id;var prevProdId=state.prevProdId;if(prevProdId===id){return null;}return{prevProdId:id,activeImage:0};}}]);return _ProductGalleryContainer;}(Extensible(PureComponent));_ProductGalleryContainer.defaultProps={areDetailsLoaded:false};Object.defineProperty(_ProductGalleryContainer,'name',{value:'ProductGalleryContainer'});export var ProductGalleryContainer=middleware(_ProductGalleryContainer,\"Component/ProductGallery/Container\");export default connect(mapStateToProps,mapDispatchToProps)(ProductGalleryContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductGallery/ProductGallery.container.js"],"names":["createRef","PureComponent","connect","Subscribe","ImageZoomPopup","SharedTransitionContainer","ProductType","ProductGallery","AMOUNT_OF_PLACEHOLDERS","IMAGE_TYPE","PRODUCT_GALERY_POPUP_ID","THUMBNAIL_KEY","mapStateToProps","state","isMobile","ConfigReducer","device","mapDispatchToProps","dispatch","ProductGalleryContainer","sliderRef","containerFunctions","onActiveImageChange","bind","handleZoomChange","disableZoom","handleImageZoomPopupActiveChange","containerProps","activeImage","isZoomEnabled","isImageZoomPopupActive","props","id","product","gallery","getGalleryPictures","productName","_getProductName","productId","handleImageZoomPopupClose","prevProdId","setState","areDetailsLoaded","media_gallery_entries","mediaGallery","thumbnailUrl","url","imageTypeUrl","name","length","filter","disabled","sort","a","b","aThumbnail","types","includes","bThumbnail","sortResult","position","Array","fill","media_type","placeholders","thumbnail","base","label","document","documentElement","classList","remove","args","scale","add","registerSharedElementDestination","defaultProps","Object","defineProperty","_ProductGalleryContainer","value"],"mappings":"8nCAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAGA,OAASA,SAAT,CAAoBC,aAApB,KAAyC,OAAzC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,SAAT,KAA0B,UAA1B,CAEA,MAAOC,CAAAA,cAAP,kFACA,MAAOC,CAAAA,yBAAP,8GACA,OAASC,WAAT,0EAEA,MAAOC,CAAAA,cAAP,kCACA,OACIC,sBADJ,CAEIC,UAFJ,CAGIC,uBAHJ,CAIIC,aAJJ,+BAOA,oEACA,MAAO,IAAMC,CAAAA,eAAe,YAAG,SAACC,KAAD,QAAY,CACvCC,QAAQ,CAAED,KAAK,CAACE,aAAN,CAAoBC,MAApB,CAA2BF,QADE,CAAZ,EAAH,sDAArB,CAIP,uE,CACA;AACA,MAAO,IAAMG,CAAAA,kBAAkB,YAAG,SAACC,QAAD,QAAe,EAAf,EAAH,yDAAxB,CAEP,oD,wEACA,UAAaC,CAAAA,wBAAb,qYAWIC,SAXJ,cAWgBpB,SAAS,EAXzB,OAaIqB,kBAbJ,CAayB,CACjBC,mBAAmB,CAAE,MAAKA,mBAAL,CAAyBC,IAAzB,+BADJ,CAEjBC,gBAAgB,CAAE,MAAKA,gBAAL,CAAsBD,IAAtB,+BAFD,CAGjBE,WAAW,CAAE,MAAKA,WAAL,CAAiBF,IAAjB,+BAHI,CAIjBG,gCAAgC,CAAE,MAAKA,gCAAL,CAAsCH,IAAtC,+BAJjB,CAbzB,OAoHII,cApHJ,CAoHqB,UAAM,iBAC4C,MAAKd,KADjD,CACXe,WADW,aACXA,WADW,CACEC,aADF,aACEA,aADF,CACiBC,sBADjB,aACiBA,sBADjB,iBAEmB,MAAKC,KAFxB,CAEAC,EAFA,aAEXC,OAFW,CAEAD,EAFA,CAEMlB,QAFN,aAEMA,QAFN,CAInB,MAAO,CACHoB,OAAO,CAAE,MAAKC,kBAAL,EADN,CAEHC,WAAW,CAAE,MAAKC,eAAL,EAFV,CAGHT,WAAW,CAAXA,WAHG,CAIHC,aAAa,CAAbA,aAJG,CAKHS,SAAS,CAAEN,EALR,CAMHlB,QAAQ,CAARA,QANG,CAOHgB,sBAAsB,CAAtBA,sBAPG,CAQHV,SAAS,CAAE,MAAKA,SARb,CAAP,CAUH,CAlIL,OA8JImB,yBA9JJ,CA8JgC,UAAM,CAC9B,MAAKb,gCAAL,CAAsC,KAAtC,EACH,CAhKL,+EAoBI,qBAAYK,KAAZ,CAAmB,CACf,uFAAkBA,KAAlB,EADe,GAGIC,CAAAA,EAHJ,CAGaD,KAHb,CAGPE,OAHO,CAGID,EAHJ,CAKf,KAAKnB,KAAL,CAAa,CACTe,WAAW,CAAE,CADJ,CAETC,aAAa,CAAE,KAFN,CAGTW,UAAU,CAAER,EAHH,CAITF,sBAAsB,CAAE,KAJf,CAAb,CAMH,CA/BL,gDA2CI,0CAAiCA,sBAAjC,CAAyD,IAC7ChB,CAAAA,QAD6C,CAChC,KAAKiB,KAD2B,CAC7CjB,QAD6C,CAGrD,GAAIA,QAAJ,CAAc,CACV,OACH,CAED,KAAK2B,QAAL,CAAc,CAAEX,sBAAsB,CAAtBA,sBAAF,CAAd,EACH,CAnDL,mCAqDI,6BAAoBF,WAApB,CAAiC,CAC7B,KAAKa,QAAL,CAAc,CACVb,WAAW,CAAXA,WADU,CAEVC,aAAa,CAAE,KAFL,CAAd,EAIH,CA1DL,kCA4DI,6BAAqB,kBASb,KAAKE,KATQ,CAEbW,gBAFa,cAEbA,gBAFa,mCAGbT,OAHa,4CAITU,qBAJS,CAIcC,YAJd,gCAI6B,EAJ7B,mEAKRjC,aALQ,yDAKgC,EALhC,2BAKekC,CAAAA,YALf,wBAKUC,GALV,6CAMRrC,UANQ,yDAM6B,EAN7B,2BAMYsC,CAAAA,YANZ,wBAMOD,GANP,CAOTE,IAPS,sBAOTA,IAPS,CAWjB,GAAMF,CAAAA,GAAG,CAAGC,YAAY,EAAIF,YAA5B,CAEA,GAAID,YAAY,CAACK,MAAjB,CAAyB,CACrB,MAAOL,CAAAA,YAAY,CACdM,MADE,CACK,kBAAGC,CAAAA,QAAH,MAAGA,QAAH,OAAkB,CAACA,QAAnB,EADL,EAEFC,IAFE,CAEG,SAACC,CAAD,CAAIC,CAAJ,CAAU,CACZ,GAAMC,CAAAA,UAAU,CAAGF,CAAC,CAACG,KAAF,CAAQC,QAAR,CAAiB9C,aAAjB,CAAnB,CACA,GAAM+C,CAAAA,UAAU,CAAGJ,CAAC,CAACE,KAAF,CAAQC,QAAR,CAAiB9C,aAAjB,CAAnB,CACA,GAAMgD,CAAAA,UAAU,CAAGN,CAAC,CAACO,QAAF,CAAaN,CAAC,CAACM,QAAlC,CAEA,GAAIL,UAAU,EAAIG,UAAlB,CAA8B,CAC1B,MAAOC,CAAAA,UAAP,CACH,CAED,GAAIJ,UAAJ,CAAgB,CACZ,MAAO,CAAC,CAAR,CACH,CAED,GAAIG,UAAJ,CAAgB,CACZ,MAAO,EAAP,CACH,CAED,MAAOC,CAAAA,UAAP,CACH,CApBE,CAAP,CAqBH,CAED,GAAI,CAACb,GAAL,CAAU,CACN,MAAOe,CAAAA,KAAK,CAACrD,sBAAsB,CAAG,CAA1B,CAAL,CAAkCsD,IAAlC,CAAuC,CAAEC,UAAU,CAAE,aAAd,CAAvC,CAAP,CACH,CAED,GAAMC,CAAAA,YAAY,CAAG,CAACtB,gBAAD,CACfmB,KAAK,CAACrD,sBAAD,CAAL,CAA8BsD,IAA9B,CAAmC,CAAEC,UAAU,CAAE,aAAd,CAAnC,CADe,CACqD,EAD1E,CAGA,OACI,CACIE,SAAS,CAAE,CAAEnB,GAAG,CAAHA,GAAF,CADf,CAEIoB,IAAI,CAAE,CAAEpB,GAAG,CAAHA,GAAF,CAFV,CAGId,EAAE,CAAErB,aAHR,CAIIwD,KAAK,CAAEnB,IAJX,CAKIe,UAAU,CAAEtD,UALhB,CADJ,4BAQOuD,YARP,GAUH,CAlHL,+BAoII;AACJ;AACA;AACA,OACI,0BAAkB,IACKhB,CAAAA,IADL,CACgB,KAAKjB,KADrB,CACNE,OADM,CACKe,IADL,CAEd,MAAOA,CAAAA,IAAP,CACH,CA3IL,2BA6II,sBAAc,CACVoB,QAAQ,CAACC,eAAT,CAAyBC,SAAzB,CAAmCC,MAAnC,CAA0C,qBAA1C,EACA,KAAK9B,QAAL,CAAc,CAAEZ,aAAa,CAAE,KAAjB,CAAd,EACH,CAhJL,gCAkJI,0BAAiB2C,IAAjB,CAAuB,IACX3C,CAAAA,aADW,CACO,KAAKhB,KADZ,CACXgB,aADW,CAGnB,GAAI2C,IAAI,CAACC,KAAL,GAAe,CAAnB,CAAsB,CAClB,GAAI5C,aAAJ,CAAmB,CACf,OACH,CACDuC,QAAQ,CAACC,eAAT,CAAyBC,SAAzB,CAAmCI,GAAnC,CAAuC,qBAAvC,EACA,KAAKjC,QAAL,CAAc,CAAEZ,aAAa,CAAE,IAAjB,CAAd,EACH,CACJ,CA5JL,sBAkKI,iBAAS,kCAC2C,KAAKhB,KADhD,CACGiB,sBADH,cACGA,sBADH,CAC2BF,WAD3B,cAC2BA,WAD3B,CAGL,mCACK,cADL,EAEM,QAAQ,CAAGE,sBAFjB,CAGM,OAAO,CAAG,KAAKS,yBAHrB,CAIM,aAAa,CAAGX,WAJtB,CAKM,OAAO,CAAGlB,uBALhB,+BAOS,SAPT,EAOmB,EAAE,CAAG,CAACL,yBAAD,CAPxB,EAQc,mBAAGsE,CAAAA,gCAAH,OAAGA,gCAAH,oCACG,cADH,gBAEI,gCAAgC,CAAGA,gCAFvC,EAGS,MAAI,CAAChD,cAAL,EAHT,CAIS,MAAI,CAACN,kBAJd,IARd,GAkBH,CAvLL,0CAiCI,kCAAgCU,KAAhC,CAAuClB,KAAvC,CAA8C,IACvBmB,CAAAA,EADuB,CACdD,KADc,CAClCE,OADkC,CACvBD,EADuB,IAElCQ,CAAAA,UAFkC,CAEnB3B,KAFmB,CAElC2B,UAFkC,CAG1C,GAAIA,UAAU,GAAKR,EAAnB,CAAuB,CACnB,MAAO,KAAP,CACH,CAED,MAAO,CAAEQ,UAAU,CAAER,EAAd,CAAkBJ,WAAW,CAAE,CAA/B,CAAP,CACH,CAzCL,iEAAaT,wB,CAOFyD,Y,CAAe,CAClBlC,gBAAgB,CAAE,KADA,C,CA7C1BmC,MAAM,CAACC,cAAP,CAAsBC,wBAAtB,CAAgD,MAAhD,CAAwD,CAAEC,KAAK,CAAE,yBAAT,CAAxD,E,6GAgOA,cAAe9E,CAAAA,OAAO,CAACU,eAAD,CAAkBK,kBAAlB,CAAP,CAA6CE,uBAA7C,CAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Subscribe } from 'unstated';\n\nimport ImageZoomPopup from 'Component/ImageZoomPopup';\nimport SharedTransitionContainer from 'Component/SharedTransition/SharedTransition.unstated';\nimport { ProductType } from 'Type/ProductList';\n\nimport ProductGallery from './ProductGallery.component';\nimport {\n    AMOUNT_OF_PLACEHOLDERS,\n    IMAGE_TYPE,\n    PRODUCT_GALERY_POPUP_ID,\n    THUMBNAIL_KEY\n} from './ProductGallery.config';\n\n/** @namespace Component/ProductGallery/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isMobile: state.ConfigReducer.device.isMobile\n});\n\n/** @namespace Component/ProductGallery/Container/mapDispatchToProps */\n// eslint-disable-next-line no-unused-vars\nexport const mapDispatchToProps = (dispatch) => ({});\n\n/** @namespace Component/ProductGallery/Container */\nexport class ProductGalleryContainer extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        areDetailsLoaded: PropTypes.bool,\n        isMobile: PropTypes.bool.isRequired\n    };\n\n    static defaultProps = {\n        areDetailsLoaded: false\n    };\n\n    sliderRef = createRef();\n\n    containerFunctions = {\n        onActiveImageChange: this.onActiveImageChange.bind(this),\n        handleZoomChange: this.handleZoomChange.bind(this),\n        disableZoom: this.disableZoom.bind(this),\n        handleImageZoomPopupActiveChange: this.handleImageZoomPopupActiveChange.bind(this)\n    };\n\n    __construct(props) {\n        super.__construct(props);\n\n        const { product: { id } } = props;\n\n        this.state = {\n            activeImage: 0,\n            isZoomEnabled: false,\n            prevProdId: id,\n            isImageZoomPopupActive: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { product: { id } } = props;\n        const { prevProdId } = state;\n        if (prevProdId === id) {\n            return null;\n        }\n\n        return { prevProdId: id, activeImage: 0 };\n    }\n\n    handleImageZoomPopupActiveChange(isImageZoomPopupActive) {\n        const { isMobile } = this.props;\n\n        if (isMobile) {\n            return;\n        }\n\n        this.setState({ isImageZoomPopupActive });\n    }\n\n    onActiveImageChange(activeImage) {\n        this.setState({\n            activeImage,\n            isZoomEnabled: false\n        });\n    }\n\n    getGalleryPictures() {\n        const {\n            areDetailsLoaded,\n            product: {\n                media_gallery_entries: mediaGallery = [],\n                [THUMBNAIL_KEY]: { url: thumbnailUrl } = {},\n                [IMAGE_TYPE]: { url: imageTypeUrl } = {},\n                name\n            }\n        } = this.props;\n\n        const url = imageTypeUrl || thumbnailUrl;\n\n        if (mediaGallery.length) {\n            return mediaGallery\n                .filter(({ disabled }) => !disabled)\n                .sort((a, b) => {\n                    const aThumbnail = a.types.includes(THUMBNAIL_KEY);\n                    const bThumbnail = b.types.includes(THUMBNAIL_KEY);\n                    const sortResult = a.position - b.position;\n\n                    if (aThumbnail && bThumbnail) {\n                        return sortResult;\n                    }\n\n                    if (aThumbnail) {\n                        return -1;\n                    }\n\n                    if (bThumbnail) {\n                        return 1;\n                    }\n\n                    return sortResult;\n                });\n        }\n\n        if (!url) {\n            return Array(AMOUNT_OF_PLACEHOLDERS + 1).fill({ media_type: 'placeholder' });\n        }\n\n        const placeholders = !areDetailsLoaded\n            ? Array(AMOUNT_OF_PLACEHOLDERS).fill({ media_type: 'placeholder' }) : [];\n\n        return [\n            {\n                thumbnail: { url },\n                base: { url },\n                id: THUMBNAIL_KEY,\n                label: name,\n                media_type: IMAGE_TYPE\n            },\n            ...placeholders\n        ];\n    }\n\n    containerProps = () => {\n        const { activeImage, isZoomEnabled, isImageZoomPopupActive } = this.state;\n        const { product: { id }, isMobile } = this.props;\n\n        return {\n            gallery: this.getGalleryPictures(),\n            productName: this._getProductName(),\n            activeImage,\n            isZoomEnabled,\n            productId: id,\n            isMobile,\n            isImageZoomPopupActive,\n            sliderRef: this.sliderRef\n        };\n    };\n\n    /**\n     * Returns the name of the product this gallery if for\n     * @private\n     */\n    _getProductName() {\n        const { product: { name } } = this.props;\n        return name;\n    }\n\n    disableZoom() {\n        document.documentElement.classList.remove('overscrollPrevented');\n        this.setState({ isZoomEnabled: false });\n    }\n\n    handleZoomChange(args) {\n        const { isZoomEnabled } = this.state;\n\n        if (args.scale !== 1) {\n            if (isZoomEnabled) {\n                return;\n            }\n            document.documentElement.classList.add('overscrollPrevented');\n            this.setState({ isZoomEnabled: true });\n        }\n    }\n\n    handleImageZoomPopupClose = () => {\n        this.handleImageZoomPopupActiveChange(false);\n    };\n\n    render() {\n        const { isImageZoomPopupActive, activeImage } = this.state;\n\n        return (\n            <ImageZoomPopup\n              isActive={ isImageZoomPopupActive }\n              onClose={ this.handleImageZoomPopupClose }\n              activeImageId={ activeImage }\n              popupId={ PRODUCT_GALERY_POPUP_ID }\n            >\n                <Subscribe to={ [SharedTransitionContainer] }>\n                    { ({ registerSharedElementDestination }) => (\n                        <ProductGallery\n                          registerSharedElementDestination={ registerSharedElementDestination }\n                          { ...this.containerProps() }\n                          { ...this.containerFunctions }\n                        />\n                    ) }\n                </Subscribe>\n            </ImageZoomPopup>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductGalleryContainer);\n"]},"metadata":{},"sourceType":"module"}