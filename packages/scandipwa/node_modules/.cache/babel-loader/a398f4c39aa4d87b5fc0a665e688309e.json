{"ast":null,"code":"var _jsxFileName = \"D:\\\\task\\\\magento2\\\\ScandiPWA\\\\packages\\\\scandipwa\\\\src\\\\component\\\\ProductGalleryBaseImage\\\\ProductGalleryBaseImage.container.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { LocationType } from \"D:\\\\task\\\\magento2\\\\ScandiPWA\\\\packages\\\\scandipwa\\\\src\\\\type/Common\";\nimport media, { PRODUCT_MEDIA } from \"D:\\\\task\\\\magento2\\\\ScandiPWA\\\\packages\\\\scandipwa\\\\src\\\\util/Media/Media\";\nimport ProductGallery from \"./ProductGalleryBaseImage.component\";\nimport { INITIAL_SCALE, TRANSFORMATION_DELAY, TRANSFORMATION_SPEED } from \"./ProductGalleryBaseImage.config\";\n/** @namespace Component/ProductGalleryBaseImage/Container */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport class _ProductGalleryBaseImageContainer extends Extensible(Component) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n\n    this.containerProps = function () {\n      return {\n        alt: _this._getAlt(),\n        src: _this._getSrc()\n      };\n    };\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const {\n      scale,\n      mediaData: {\n        id\n      }\n    } = this.props;\n    const {\n      scale: nextScale,\n      mediaData: {\n        id: nextId\n      }\n    } = nextProps;\n\n    if (scale !== nextScale || id !== nextId) {\n      return true;\n    }\n\n    return false;\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      scale,\n      previousScale,\n      disableZoom,\n      location: {\n        pathname\n      },\n      setTransform\n    } = this.props;\n    const {\n      location: {\n        pathname: prevPathname\n      }\n    } = prevProps;\n\n    if (pathname !== prevPathname && scale !== INITIAL_SCALE) {\n      setTimeout(function () {\n        return setTransform(null, null, INITIAL_SCALE, TRANSFORMATION_SPEED);\n      }, TRANSFORMATION_DELAY);\n    }\n\n    if (scale === 1 && previousScale !== 1) {\n      disableZoom();\n    }\n  }\n\n  _getAlt() {\n    const {\n      mediaData: {\n        label\n      } = {}\n    } = this.props;\n    return label || '';\n  }\n\n  _getSrc() {\n    const {\n      mediaData: {\n        file,\n        base: {\n          url: baseUrl\n        } = {}\n      },\n      isZoomEnabled\n    } = this.props;\n\n    if (!isZoomEnabled) {\n      return baseUrl || media(file, PRODUCT_MEDIA);\n    }\n\n    return file ? media(file, PRODUCT_MEDIA) : baseUrl;\n  }\n\n  render() {\n    return /*#__PURE__*/_checkBEM(React, ProductGallery, Object.assign({}, this.containerProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n_ProductGalleryBaseImageContainer.propTypes = {\n  disableZoom: PropTypes.func.isRequired,\n  scale: PropTypes.number.isRequired,\n  previousScale: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n  mediaData: PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    label: PropTypes.string,\n    file: PropTypes.string,\n    base: PropTypes.shape({\n      url: PropTypes.string\n    })\n  }).isRequired,\n  isZoomEnabled: PropTypes.bool.isRequired,\n  setTransform: PropTypes.func.isRequired,\n  location: LocationType.isRequired\n};\nObject.defineProperty(_ProductGalleryBaseImageContainer, 'name', {\n  value: 'ProductGalleryBaseImageContainer'\n});\n\nexport const ProductGalleryBaseImageContainer = middleware(_ProductGalleryBaseImageContainer, \"Component/ProductGalleryBaseImage/Container\");\nexport default _c = withRouter(ProductGalleryBaseImageContainer);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/task/magento2/ScandiPWA/packages/scandipwa/src/component/ProductGalleryBaseImage/ProductGalleryBaseImage.container.js"],"names":["PropTypes","Component","withRouter","LocationType","media","PRODUCT_MEDIA","ProductGallery","INITIAL_SCALE","TRANSFORMATION_DELAY","TRANSFORMATION_SPEED","ProductGalleryBaseImageContainer","containerProps","alt","_getAlt","src","_getSrc","shouldComponentUpdate","nextProps","scale","mediaData","id","props","nextScale","nextId","componentDidUpdate","prevProps","previousScale","disableZoom","location","pathname","setTransform","prevPathname","setTimeout","label","file","base","url","baseUrl","isZoomEnabled","render","propTypes","func","isRequired","number","index","shape","oneOfType","string","bool","Object","defineProperty","_ProductGalleryBaseImageContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport { withRouter } from 'react-router';\n\nimport { LocationType } from 'Type/Common';\nimport media, { PRODUCT_MEDIA } from 'Util/Media/Media';\n\nimport ProductGallery from './ProductGalleryBaseImage.component';\nimport { INITIAL_SCALE, TRANSFORMATION_DELAY, TRANSFORMATION_SPEED } from './ProductGalleryBaseImage.config';\n\n/** @namespace Component/ProductGalleryBaseImage/Container */\nexport class ProductGalleryBaseImageContainer extends Component {\n    static propTypes = {\n        disableZoom: PropTypes.func.isRequired,\n        scale: PropTypes.number.isRequired,\n        previousScale: PropTypes.number.isRequired,\n        index: PropTypes.number.isRequired,\n        mediaData: PropTypes.shape({\n            id: PropTypes.oneOfType([\n                PropTypes.string,\n                PropTypes.number\n            ]),\n            label: PropTypes.string,\n            file: PropTypes.string,\n            base: PropTypes.shape({\n                url: PropTypes.string\n            })\n        }).isRequired,\n        isZoomEnabled: PropTypes.bool.isRequired,\n        setTransform: PropTypes.func.isRequired,\n        location: LocationType.isRequired\n    };\n\n    shouldComponentUpdate(nextProps) {\n        const { scale, mediaData: { id } } = this.props;\n        const { scale: nextScale, mediaData: { id: nextId } } = nextProps;\n\n        if (scale !== nextScale || id !== nextId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            scale,\n            previousScale,\n            disableZoom,\n            location: { pathname },\n            setTransform\n        } = this.props;\n        const { location: { pathname: prevPathname } } = prevProps;\n\n        if (pathname !== prevPathname && scale !== INITIAL_SCALE) {\n            setTimeout(\n                () => setTransform(null, null, INITIAL_SCALE, TRANSFORMATION_SPEED),\n                TRANSFORMATION_DELAY\n            );\n        }\n\n        if (scale === 1 && previousScale !== 1) {\n            disableZoom();\n        }\n    }\n\n    containerProps = () => ({\n        alt: this._getAlt(),\n        src: this._getSrc()\n    });\n\n    _getAlt() {\n        const { mediaData: { label } = {} } = this.props;\n        return label || '';\n    }\n\n    _getSrc() {\n        const {\n            mediaData: { file, base: { url: baseUrl } = {} },\n            isZoomEnabled\n        } = this.props;\n\n        if (!isZoomEnabled) {\n            return baseUrl || media(file, PRODUCT_MEDIA);\n        }\n\n        return file ? media(file, PRODUCT_MEDIA) : baseUrl;\n    }\n\n    render() {\n        return (\n            <ProductGallery\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default withRouter(\n    ProductGalleryBaseImageContainer\n);\n"]},"metadata":{},"sourceType":"module"}