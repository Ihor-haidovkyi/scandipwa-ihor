{"ast":null,"code":"import _slicedToArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _get from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{Provider}from'react-redux';import{Provider as UnstatedProvider}from'unstated';import Router from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Router\";import SharedTransition from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/SharedTransition\";import SomethingWentWrong from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/SomethingWentWrong\";import injectStaticReducers from\"/home/marketihor/scandipwa/packages/scandipwa/src/store\";import getStore from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Store\";/** @namespace Component/App/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _App=/*#__PURE__*/function(_Extensible){_inherits(_App,_Extensible);var _super=_createSuper(_App);function _App(){var _this;_classCallCheck(this,_App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.productionFunctions=[_this.disableReactDevTools.bind(_assertThisInitialized(_this)),_this.injectComment.bind(_assertThisInitialized(_this))];_this.developmentFunctions=[_this.enableHotReload.bind(_assertThisInitialized(_this))];_this.commonFunctions=[_this.configureStore.bind(_assertThisInitialized(_this))];_this.rootComponents=[_this.renderRouter.bind(_assertThisInitialized(_this)),_this.renderSharedTransition.bind(_assertThisInitialized(_this))];_this.contextProviders=[_this.renderRedux.bind(_assertThisInitialized(_this)),_this.renderUnStated.bind(_assertThisInitialized(_this))];_this.state={isSomethingWentWrong:false,errorDetails:{}};_this.handleErrorReset=function(){_this.setState({isSomethingWentWrong:false});};_this.renderRootComponents=function(){return _this.rootComponents.map(function(render){return render();});};_this.renderSomethingWentWrong=function(){var errorDetails=_this.state.errorDetails;return/*#__PURE__*/_checkBEM(React,SomethingWentWrong,{onClick:_this.handleErrorReset,errorDetails:errorDetails});};return _this;}_createClass(_App,[{key:\"__construct\",value:function __construct(props){_get(_getPrototypeOf(_App.prototype),\"__construct\",this).call(this,props);this.configureAppBasedOnEnvironment();this.configureApp();}},{key:\"componentDidCatch\",value:function componentDidCatch(err,info){this.setState({isSomethingWentWrong:true,errorDetails:{err:err,info:info}});}},{key:\"configureStore\",value:function configureStore(){var store=getStore();injectStaticReducers(store);this.reduxStore=store;}},{key:\"renderRedux\",value:function renderRedux(children){return/*#__PURE__*/_checkBEM(React,Provider,{store:this.reduxStore,key:\"redux\"},children);}},{key:\"renderUnStated\",value:function renderUnStated(children){return/*#__PURE__*/_checkBEM(React,UnstatedProvider,{key:\"unstated\"},children);}},{key:\"enableHotReload\",value:function enableHotReload(){if(module.hot){module.hot.accept();}}},{key:\"injectComment\",value:function injectComment(){var comment=document.createComment('Powered by ScandiPWA (scandipwa.com)');document.querySelector('html').appendChild(comment);}/**\n     * Disable react-dev-tools\n     * @link https://github.com/facebook/react-devtools/issues/191#issuecomment-367905536\n     */},{key:\"disableReactDevTools\",value:function disableReactDevTools(){if(typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__==='object'){// eslint-disable-next-line no-restricted-syntax, fp/no-loops, no-unused-vars\nfor(var _i=0,_Object$entries=Object.entries(window.__REACT_DEVTOOLS_GLOBAL_HOOK__);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];window.__REACT_DEVTOOLS_GLOBAL_HOOK__[key]=typeof value==='function'?function(){}:null;}}}},{key:\"configureAppBasedOnEnvironment\",value:function configureAppBasedOnEnvironment(){var functionsToRun=process.env.NODE_ENV==='production'?this.productionFunctions:this.developmentFunctions;functionsToRun.forEach(function(func){return func();});}},{key:\"configureApp\",value:function configureApp(){this.commonFunctions.forEach(function(func){return func();});}},{key:\"renderSharedTransition\",value:function renderSharedTransition(){return/*#__PURE__*/_checkBEM(React,SharedTransition,{key:\"transition\"});}},{key:\"renderRouter\",value:function renderRouter(){return/*#__PURE__*/_checkBEM(React,Router,{key:\"router\"});}},{key:\"renderContextProviders\",value:function renderContextProviders(){var isSomethingWentWrong=this.state.isSomethingWentWrong;var child=isSomethingWentWrong?this.renderSomethingWentWrong:this.renderRootComponents;return this.contextProviders.reduce(function(acc,render){return render(acc);},[child()]);}},{key:\"render\",value:function render(){return this.renderContextProviders();}}]);return _App;}(Extensible(PureComponent));Object.defineProperty(_App,'name',{value:'App'});export var App=middleware(_App,\"Component/App/Component\");export default App;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/App/App.component.js"],"names":["PureComponent","Provider","UnstatedProvider","Router","SharedTransition","SomethingWentWrong","injectStaticReducers","getStore","App","productionFunctions","disableReactDevTools","bind","injectComment","developmentFunctions","enableHotReload","commonFunctions","configureStore","rootComponents","renderRouter","renderSharedTransition","contextProviders","renderRedux","renderUnStated","state","isSomethingWentWrong","errorDetails","handleErrorReset","setState","renderRootComponents","map","render","renderSomethingWentWrong","props","configureAppBasedOnEnvironment","configureApp","err","info","store","reduxStore","children","module","hot","accept","comment","document","createComment","querySelector","appendChild","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","Object","entries","key","value","functionsToRun","process","env","NODE_ENV","forEach","func","child","reduce","acc","renderContextProviders","defineProperty","_App"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { PureComponent } from 'react';\nimport { Provider } from 'react-redux';\nimport { Provider as UnstatedProvider } from 'unstated';\n\nimport Router from 'Component/Router';\nimport SharedTransition from 'Component/SharedTransition';\nimport SomethingWentWrong from 'Route/SomethingWentWrong';\nimport injectStaticReducers from 'Store';\nimport getStore from 'Util/Store';\n\n/** @namespace Component/App/Component */\nexport class App extends PureComponent {\n    productionFunctions = [\n        this.disableReactDevTools.bind(this),\n        this.injectComment.bind(this)\n    ];\n\n    developmentFunctions = [\n        this.enableHotReload.bind(this)\n    ];\n\n    commonFunctions = [\n        this.configureStore.bind(this)\n    ];\n\n    rootComponents = [\n        this.renderRouter.bind(this),\n        this.renderSharedTransition.bind(this)\n    ];\n\n    contextProviders = [\n        this.renderRedux.bind(this),\n        this.renderUnStated.bind(this)\n    ];\n\n    state = {\n        isSomethingWentWrong: false,\n        errorDetails: {}\n    };\n\n    __construct(props) {\n        super.__construct(props);\n\n        this.configureAppBasedOnEnvironment();\n        this.configureApp();\n    }\n\n    componentDidCatch(err, info) {\n        this.setState({\n            isSomethingWentWrong: true,\n            errorDetails: { err, info }\n        });\n    }\n\n    configureStore() {\n        const store = getStore();\n        injectStaticReducers(store);\n\n        this.reduxStore = store;\n    }\n\n    renderRedux(children) {\n        return (\n            <Provider store={ this.reduxStore } key=\"redux\">\n                { children }\n            </Provider>\n        );\n    }\n\n    renderUnStated(children) {\n        return (\n            <UnstatedProvider key=\"unstated\">\n                { children }\n            </UnstatedProvider>\n        );\n    }\n\n    enableHotReload() {\n        if (module.hot) {\n            module.hot.accept();\n        }\n    }\n\n    injectComment() {\n        const comment = document.createComment('Powered by ScandiPWA (scandipwa.com)');\n        document.querySelector('html').appendChild(comment);\n    }\n\n    /**\n     * Disable react-dev-tools\n     * @link https://github.com/facebook/react-devtools/issues/191#issuecomment-367905536\n     */\n    disableReactDevTools() {\n        if (typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__ === 'object') {\n            // eslint-disable-next-line no-restricted-syntax, fp/no-loops, no-unused-vars\n            for (const [key, value] of Object.entries(window.__REACT_DEVTOOLS_GLOBAL_HOOK__)) {\n                window.__REACT_DEVTOOLS_GLOBAL_HOOK__[key] = typeof value === 'function' ? () => {} : null;\n            }\n        }\n    }\n\n    configureAppBasedOnEnvironment() {\n        const functionsToRun = process.env.NODE_ENV === 'production'\n            ? this.productionFunctions\n            : this.developmentFunctions;\n\n        functionsToRun.forEach((func) => func());\n    }\n\n    configureApp() {\n        this.commonFunctions.forEach((func) => func());\n    }\n\n    handleErrorReset = () => {\n        this.setState({ isSomethingWentWrong: false });\n    };\n\n    renderSharedTransition() {\n        return (\n            <SharedTransition key=\"transition\" />\n        );\n    }\n\n    renderRouter() {\n        return (\n            <Router key=\"router\" />\n        );\n    }\n\n    renderRootComponents = () => this.rootComponents.map((render) => render());\n\n    renderContextProviders() {\n        const { isSomethingWentWrong } = this.state;\n\n        const child = isSomethingWentWrong\n            ? this.renderSomethingWentWrong\n            : this.renderRootComponents;\n\n        return this.contextProviders.reduce(\n            (acc, render) => render(acc),\n            [child()]\n        );\n    }\n\n    renderSomethingWentWrong = () => {\n        const { errorDetails } = this.state;\n\n        return (\n            <SomethingWentWrong\n              onClick={ this.handleErrorReset }\n              errorDetails={ errorDetails }\n            />\n        );\n    };\n\n    render() {\n        return this.renderContextProviders();\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}