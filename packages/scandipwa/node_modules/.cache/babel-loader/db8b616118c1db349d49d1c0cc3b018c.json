{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import Field from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Field\";import{getCurrency}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Currency\";import\"./CurrencySwitcher.style\";/** @namespace Component/CurrencySwitcher/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CurrencySwitcher=/*#__PURE__*/function(_Extensible){_inherits(_CurrencySwitcher,_Extensible);var _super=_createSuper(_CurrencySwitcher);function _CurrencySwitcher(){_classCallCheck(this,_CurrencySwitcher);return _super.apply(this,arguments);}_createClass(_CurrencySwitcher,[{key:\"getCurrencyValue\",value:function getCurrencyValue(){var _this$props$currencyD=this.props.currencyData;_this$props$currencyD=_this$props$currencyD===void 0?{}:_this$props$currencyD;var availableCurrencies=_this$props$currencyD.available_currencies_data,currentCurrencyCode=_this$props$currencyD.current_currency_code;// check whether user’s selected currency is among available currencies for current store,\n// otherwise use default currency for current store.\nvar currency=getCurrency();var value=availableCurrencies.some(function(e){return e.id===currency;})?currency:currentCurrencyCode;return value;}},{key:\"render\",value:function render(){var _this$props=this.props,handleCurrencySelect=_this$props.handleCurrencySelect,_this$props$currencyD2=_this$props.currencyData;_this$props$currencyD2=_this$props$currencyD2===void 0?{}:_this$props$currencyD2;var availableCurrencies=_this$props$currencyD2.available_currencies_data;if(availableCurrencies&&availableCurrencies.length>1){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CurrencySwitcher\"},/*#__PURE__*/_checkBEM(React,Field,{id:\"CurrencySwitcherList\",name:\"CurrencySwitcherList\",type:\"select\",selectOptions:availableCurrencies,value:this.getCurrencyValue(),onChange:handleCurrencySelect}));}return null;}}]);return _CurrencySwitcher;}(Extensible(PureComponent));Object.defineProperty(_CurrencySwitcher,'name',{value:'CurrencySwitcher'});export var CurrencySwitcher=middleware(_CurrencySwitcher,\"Component/CurrencySwitcher/Component\");export default CurrencySwitcher;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CurrencySwitcher/CurrencySwitcher.component.js"],"names":["PureComponent","Field","getCurrency","CurrencySwitcher","props","currencyData","availableCurrencies","available_currencies_data","currentCurrencyCode","current_currency_code","currency","value","some","e","id","handleCurrencySelect","length","getCurrencyValue","Object","defineProperty","_CurrencySwitcher"],"mappings":"ojBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAGA,OAASA,aAAT,KAA8B,OAA9B,CAEA,MAAOC,CAAAA,KAAP,yEACA,OAASC,WAAT,uEAEA,iCAEA,sD,wEACA,UAAaC,CAAAA,iBAAb,gSAaI,2BAAmB,2BAMX,KAAKC,KANM,CAEXC,YAFW,sDAKP,EALO,0BAGoBC,CAAAA,mBAHpB,uBAGPC,yBAHO,CAIgBC,mBAJhB,uBAIPC,qBAJO,CAQf;AACA;AACA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,GAAMS,CAAAA,KAAK,CAAGL,mBAAmB,CAACM,IAApB,CAAyB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,EAAF,GAASJ,QAAhB,EAAzB,EAAqDA,QAArD,CAAgEF,mBAA9E,CAEA,MAAOG,CAAAA,KAAP,CACH,CA3BL,sBA6BI,iBAAS,iBAMD,KAAKP,KANJ,CAEDW,oBAFC,aAEDA,oBAFC,oCAGDV,YAHC,wDAKG,EALH,2BAI8BC,CAAAA,mBAJ9B,wBAIGC,yBAJH,CAQL,GAAID,mBAAmB,EAAIA,mBAAmB,CAACU,MAApB,CAA6B,CAAxD,CAA2D,CACvD,0CACS,KAAK,CAAC,kBADf,+BAES,KAFT,EAGU,EAAE,CAAC,sBAHb,CAIU,IAAI,CAAC,sBAJf,CAKU,IAAI,CAAC,QALf,CAMU,aAAa,CAAGV,mBAN1B,CAOU,KAAK,CAAG,KAAKW,gBAAL,EAPlB,CAQU,QAAQ,CAAGF,oBARrB,IAYH,CAED,MAAO,KAAP,CACH,CArDL,0DApBAG,MAAM,CAACC,cAAP,CAAsBC,iBAAtB,CAAyC,MAAzC,CAAiD,CAAET,KAAK,CAAE,kBAAT,CAAjD,E,iGA4EA,cAAeR,CAAAA,gBAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport Field from 'Component/Field';\nimport { getCurrency } from 'Util/Currency';\n\nimport './CurrencySwitcher.style';\n\n/** @namespace Component/CurrencySwitcher/Component */\nexport class CurrencySwitcher extends PureComponent {\n    static propTypes = {\n        currencyData: PropTypes.shape({\n            available_currencies_data: PropTypes.arrayOf(\n                PropTypes.objectOf(\n                    PropTypes.string\n                )\n            ),\n            current_currency_code: PropTypes.string\n        }).isRequired,\n        handleCurrencySelect: PropTypes.func.isRequired\n    };\n\n    getCurrencyValue() {\n        const {\n            currencyData: {\n                available_currencies_data: availableCurrencies,\n                current_currency_code: currentCurrencyCode\n            } = {}\n        } = this.props;\n\n        // check whether user’s selected currency is among available currencies for current store,\n        // otherwise use default currency for current store.\n        const currency = getCurrency();\n        const value = availableCurrencies.some((e) => e.id === currency) ? currency : currentCurrencyCode;\n\n        return value;\n    }\n\n    render() {\n        const {\n            handleCurrencySelect,\n            currencyData: {\n                available_currencies_data: availableCurrencies\n            } = {}\n        } = this.props;\n\n        if (availableCurrencies && availableCurrencies.length > 1) {\n            return (\n                <div block=\"CurrencySwitcher\">\n                    <Field\n                      id=\"CurrencySwitcherList\"\n                      name=\"CurrencySwitcherList\"\n                      type=\"select\"\n                      selectOptions={ availableCurrencies }\n                      value={ this.getCurrencyValue() }\n                      onChange={ handleCurrencySelect }\n                    />\n                </div>\n            );\n        }\n\n        return null;\n    }\n}\n\nexport default CurrencySwitcher;\n"]},"metadata":{},"sourceType":"module"}