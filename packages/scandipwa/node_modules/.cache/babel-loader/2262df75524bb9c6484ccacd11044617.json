{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CheckoutAddressForm from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutAddressForm\";import CheckoutAddressTable from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutAddressTable\";import Link from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Link\";import Loader from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Loader\";import{BILLING_STEP,SHIPPING_STEP}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/Checkout/Checkout.config\";import{MY_ACCOUNT_URL}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/MyAccount/MyAccount.config\";import{ADDRESS_BOOK,customerType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Account\";import{isSignedIn}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Auth\";import\"./CheckoutAddressBook.style\";/** @namespace Component/CheckoutAddressBook/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CheckoutAddressBook=/*#__PURE__*/function(_Extensible){_inherits(_CheckoutAddressBook,_Extensible);var _super=_createSuper(_CheckoutAddressBook);function _CheckoutAddressBook(){var _this;_classCallCheck(this,_CheckoutAddressBook);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isCustomAddressExpanded:false};_this.expandCustomAddress=function(){var onAddressSelect=_this.props.onAddressSelect;_this.setState({isCustomAddressExpanded:true});onAddressSelect({});};_this.renderAddress=function(address){var _this$props=_this.props,onAddressSelect=_this$props.onAddressSelect,selectedAddressId=_this$props.selectedAddressId;var id=address.id;return/*#__PURE__*/_checkBEM(React,CheckoutAddressTable,{onClick:onAddressSelect,isSelected:selectedAddressId===id,title:__('Address #%s',id),address:address,key:id});};return _this;}_createClass(_CheckoutAddressBook,[{key:\"renderNoAddresses\",value:function renderNoAddresses(){return/*#__PURE__*/_checkBEM(React,\"div\",null,/*#__PURE__*/_checkBEM(React,\"p\",null,__('You have no configured addresses.')),/*#__PURE__*/_checkBEM(React,\"p\",null,/*#__PURE__*/_checkBEM(React,Link,{to:\"\".concat(MY_ACCOUNT_URL,\"/\").concat(ADDRESS_BOOK)},__('Go to Address Book to configure them!'))));}},{key:\"renderLoading\",value:function renderLoading(){return/*#__PURE__*/_checkBEM(React,Loader,{isLoading:true});}},{key:\"renderAddressList\",value:function renderAddressList(){var addresses=this.props.customer.addresses;if(!addresses){return this.renderLoading();}if(!addresses.length){return this.renderNoAddresses();}return addresses.map(this.renderAddress);}},{key:\"renderHeading\",value:function renderHeading(){var isBilling=this.props.isBilling;var addressName=isBilling?__('Select billing address'):__('Select shipping address');return/*#__PURE__*/_checkBEM(React,\"h2\",{block:\"Checkout\",elem:\"Heading\"},addressName);}},{key:\"renderCustomAddress\",value:function renderCustomAddress(){var _this$props2=this.props,isBilling=_this$props2.isBilling,onShippingEstimationFieldsChange=_this$props2.onShippingEstimationFieldsChange,isSubmitted=_this$props2.isSubmitted;var formPortalId=isBilling?BILLING_STEP:SHIPPING_STEP;return/*#__PURE__*/_checkBEM(React,CheckoutAddressForm,{onShippingEstimationFieldsChange:onShippingEstimationFieldsChange,address:{},id:formPortalId,isSubmitted:isSubmitted});}},{key:\"renderOptionalCustomAddress\",value:function renderOptionalCustomAddress(){var isCustomAddressExpanded=this.state.isCustomAddressExpanded;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutAddressBook\",elem:\"CustomAddressWrapper\"},/*#__PURE__*/_checkBEM(React,\"button\",{block:\"CheckoutAddressBook\",elem:\"Button\",mods:{isCustomAddressExpanded:isCustomAddressExpanded},mix:{block:'Button',mods:{isHollow:true}},type:\"button\",onClick:this.expandCustomAddress},__('Use custom address')),isCustomAddressExpanded&&this.renderCustomAddress());}},{key:\"renderSignedInContent\",value:function renderSignedInContent(){return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutAddressBook\",elem:\"Wrapper\"},this.renderAddressList()),this.renderOptionalCustomAddress());}},{key:\"renderGuestContent\",value:function renderGuestContent(){return this.renderCustomAddress();}},{key:\"renderContent\",value:function renderContent(){if(isSignedIn()){return this.renderSignedInContent();}return this.renderGuestContent();}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutAddressBook\"},this.renderHeading(),this.renderContent());}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props){var selectedAddressId=props.selectedAddressId;if(selectedAddressId===0){return null;}return{isCustomAddressExpanded:false};}}]);return _CheckoutAddressBook;}(Extensible(PureComponent));_CheckoutAddressBook.defaultProps={isSubmitted:false};Object.defineProperty(_CheckoutAddressBook,'name',{value:'CheckoutAddressBook'});export var CheckoutAddressBook=middleware(_CheckoutAddressBook,\"Component/CheckoutAddressBook/Component\");export default CheckoutAddressBook;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutAddressBook/CheckoutAddressBook.component.js"],"names":["PureComponent","CheckoutAddressForm","CheckoutAddressTable","Link","Loader","BILLING_STEP","SHIPPING_STEP","MY_ACCOUNT_URL","ADDRESS_BOOK","customerType","isSignedIn","CheckoutAddressBook","state","isCustomAddressExpanded","expandCustomAddress","onAddressSelect","props","setState","renderAddress","address","selectedAddressId","id","__","addresses","customer","renderLoading","length","renderNoAddresses","map","isBilling","addressName","onShippingEstimationFieldsChange","isSubmitted","formPortalId","block","mods","isHollow","renderCustomAddress","renderAddressList","renderOptionalCustomAddress","renderSignedInContent","renderGuestContent","renderHeading","renderContent","defaultProps","Object","defineProperty","_CheckoutAddressBook","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CheckoutAddressForm from 'Component/CheckoutAddressForm';\nimport CheckoutAddressTable from 'Component/CheckoutAddressTable';\nimport Link from 'Component/Link';\nimport Loader from 'Component/Loader';\nimport { BILLING_STEP, SHIPPING_STEP } from 'Route/Checkout/Checkout.config';\nimport { MY_ACCOUNT_URL } from 'Route/MyAccount/MyAccount.config';\nimport { ADDRESS_BOOK, customerType } from 'Type/Account';\nimport { isSignedIn } from 'Util/Auth';\n\nimport './CheckoutAddressBook.style';\n\n/** @namespace Component/CheckoutAddressBook/Component */\nexport class CheckoutAddressBook extends PureComponent {\n    static propTypes = {\n        customer: customerType.isRequired,\n        onAddressSelect: PropTypes.func.isRequired,\n        onShippingEstimationFieldsChange: PropTypes.func.isRequired,\n        selectedAddressId: PropTypes.number.isRequired,\n        isBilling: PropTypes.bool.isRequired,\n        isSubmitted: PropTypes.bool\n    };\n\n    static defaultProps = {\n        isSubmitted: false\n    };\n\n    state = {\n        isCustomAddressExpanded: false\n    };\n\n    static getDerivedStateFromProps(props) {\n        const { selectedAddressId } = props;\n        if (selectedAddressId === 0) {\n            return null;\n        }\n\n        return { isCustomAddressExpanded: false };\n    }\n\n    expandCustomAddress = () => {\n        const { onAddressSelect } = this.props;\n        this.setState({ isCustomAddressExpanded: true });\n        onAddressSelect({});\n    };\n\n    renderNoAddresses() {\n        return (\n            <div>\n                <p>{ __('You have no configured addresses.') }</p>\n                <p>\n                    <Link to={ `${ MY_ACCOUNT_URL }/${ ADDRESS_BOOK }` }>\n                        { __('Go to Address Book to configure them!') }\n                    </Link>\n                </p>\n            </div>\n        );\n    }\n\n    renderLoading() {\n        return (\n            <Loader isLoading />\n        );\n    }\n\n    renderAddress = (address) => {\n        const { onAddressSelect, selectedAddressId } = this.props;\n        const { id } = address;\n\n        return (\n            <CheckoutAddressTable\n              onClick={ onAddressSelect }\n              isSelected={ selectedAddressId === id }\n              title={ __('Address #%s', id) }\n              address={ address }\n              key={ id }\n            />\n        );\n    };\n\n    renderAddressList() {\n        const { customer: { addresses } } = this.props;\n        if (!addresses) {\n            return this.renderLoading();\n        }\n        if (!addresses.length) {\n            return this.renderNoAddresses();\n        }\n\n        return addresses.map(this.renderAddress);\n    }\n\n    renderHeading() {\n        const { isBilling } = this.props;\n        const addressName = isBilling ? __('Select billing address') : __('Select shipping address');\n\n        return (\n            <h2 block=\"Checkout\" elem=\"Heading\">\n                { addressName }\n            </h2>\n        );\n    }\n\n    renderCustomAddress() {\n        const { isBilling, onShippingEstimationFieldsChange, isSubmitted } = this.props;\n        const formPortalId = isBilling ? BILLING_STEP : SHIPPING_STEP;\n\n        return (\n            <CheckoutAddressForm\n              onShippingEstimationFieldsChange={ onShippingEstimationFieldsChange }\n              address={ {} }\n              id={ formPortalId }\n              isSubmitted={ isSubmitted }\n            />\n        );\n    }\n\n    renderOptionalCustomAddress() {\n        const { isCustomAddressExpanded } = this.state;\n\n        return (\n            <div\n              block=\"CheckoutAddressBook\"\n              elem=\"CustomAddressWrapper\"\n            >\n                <button\n                  block=\"CheckoutAddressBook\"\n                  elem=\"Button\"\n                  mods={ { isCustomAddressExpanded } }\n                  mix={ { block: 'Button', mods: { isHollow: true } } }\n                  type=\"button\"\n                  onClick={ this.expandCustomAddress }\n                >\n                    { __('Use custom address') }\n                </button>\n                { isCustomAddressExpanded && this.renderCustomAddress() }\n            </div>\n        );\n    }\n\n    renderSignedInContent() {\n        return (\n            <>\n                <div block=\"CheckoutAddressBook\" elem=\"Wrapper\">\n                    { this.renderAddressList() }\n                </div>\n                { this.renderOptionalCustomAddress() }\n            </>\n        );\n    }\n\n    renderGuestContent() {\n        return this.renderCustomAddress();\n    }\n\n    renderContent() {\n        if (isSignedIn()) {\n            return this.renderSignedInContent();\n        }\n\n        return this.renderGuestContent();\n    }\n\n    render() {\n        return (\n            <div block=\"CheckoutAddressBook\">\n                { this.renderHeading() }\n                { this.renderContent() }\n            </div>\n        );\n    }\n}\n\nexport default CheckoutAddressBook;\n"]},"metadata":{},"sourceType":"module"}