{"ast":null,"code":"import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{PRODUCT_OUT_OF_STOCK}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CartItem/CartItem.config\";import{ProductType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import{BUNDLE,CONFIGURABLE,DOWNLOADABLE,GROUPED}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Product\";import ProductActions from\"./ProductActions.component\";import{DEFAULT_MAX_PRODUCTS,ONE_HUNDRED_PERCENT}from\"./ProductActions.config\";/** @namespace Component/ProductActions/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{groupedProductQuantity:state.ProductReducer.groupedProductQuantity,device:state.ConfigReducer.device,displayProductStockStatus:state.ConfigReducer.display_product_stock_status,isWishlistEnabled:state.ConfigReducer.wishlist_general_active};},\"Component/ProductActions/Container/mapStateToProps\");/** @namespace Component/ProductActions/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductActionsContainer=/*#__PURE__*/function(_Extensible){_inherits(_ProductActionsContainer,_Extensible);var _super=_createSuper(_ProductActionsContainer);function _ProductActionsContainer(){var _this;_classCallCheck(this,_ProductActionsContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={quantity:1,groupedProductQuantity:{}};_this.containerFunctions={showOnlyIfLoaded:_this.showOnlyIfLoaded.bind(_assertThisInitialized(_this)),onProductValidationError:_this.onProductValidationError.bind(_assertThisInitialized(_this)),getIsOptionInCurrentVariant:_this.getIsOptionInCurrentVariant.bind(_assertThisInitialized(_this)),setQuantity:_this.setQuantity.bind(_assertThisInitialized(_this)),setGroupedProductQuantity:_this._setGroupedProductQuantity.bind(_assertThisInitialized(_this)),clearGroupedProductQuantity:_this._clearGroupedProductQuantity.bind(_assertThisInitialized(_this)),getIsConfigurableAttributeAvailable:_this.getIsConfigurableAttributeAvailable.bind(_assertThisInitialized(_this))};_this.onConfigurableProductError=_this.onProductError.bind(_assertThisInitialized(_this),_this.configurableOptionsRef);_this.onGroupedProductError=_this.onProductError.bind(_assertThisInitialized(_this),_this.groupedProductsRef);_this.containerProps=function(){return{minQuantity:ProductActionsContainer.getMinQuantity(_this.props),maxQuantity:ProductActionsContainer.getMaxQuantity(_this.props),groupedProductQuantity:_this._getGroupedProductQuantity(),productPrice:_this.getProductPrice(),productName:_this.getProductName(),offerCount:_this.getOfferCount(),offerType:_this.getOfferType(),stockMeta:_this.getStockMeta(),metaLink:_this.getMetaLink()};};return _this;}_createClass(_ProductActionsContainer,[{key:\"onProductError\",value:function onProductError(ref){if(!ref){return;}var current=ref.current;current.scrollIntoView({behavior:'smooth',block:'center'});current.classList.remove('animate');// eslint-disable-next-line no-unused-expressions\ncurrent.offsetWidth;// trigger a DOM reflow\ncurrent.classList.add('animate');}},{key:\"onProductValidationError\",value:function onProductValidationError(type){switch(type){case CONFIGURABLE:this.onConfigurableProductError();break;case GROUPED:this.onGroupedProductError();break;default:break;}}},{key:\"setQuantity\",value:function setQuantity(value){this.setState({quantity:+value});}// TODO: make key=>value based\n},{key:\"getIsOptionInCurrentVariant\",value:function getIsOptionInCurrentVariant(attribute,value){var _this$props=this.props,configurableVariantIndex=_this$props.configurableVariantIndex,variants=_this$props.product.variants;if(!variants){return false;}return variants[configurableVariantIndex].product[attribute]===value;}},{key:\"getIsConfigurableAttributeAvailable\",value:function getIsConfigurableAttributeAvailable(_ref){var attribute_code=_ref.attribute_code,attribute_value=_ref.attribute_value;var _this$props2=this.props,parameters=_this$props2.parameters,variants=_this$props2.product.variants;var isAttributeSelected=Object.hasOwnProperty.call(parameters,attribute_code);// If value matches current attribute_value, option should be enabled\nif(isAttributeSelected&&parameters[attribute_code]===attribute_value){return true;}var parameterPairs=Object.entries(parameters);var selectedAttributes=isAttributeSelected// Need to exclude itself, otherwise different attribute_values of the same attribute_code will always be disabled\n?parameterPairs.filter(function(_ref2){var _ref3=_slicedToArray(_ref2,1),key=_ref3[0];return key!==attribute_code;}):parameterPairs;return variants.some(function(_ref4){var stock_status=_ref4.stock_status,attributes=_ref4.attributes;var _ref5=attributes[attribute_code]||{},foundValue=_ref5.attribute_value;return stock_status==='IN_STOCK'// Variant must have currently checked attribute_code and attribute_value\n&&foundValue===attribute_value// Variant must have all currently selected attributes\n&&selectedAttributes.every(function(_ref6){var _ref7=_slicedToArray(_ref6,2),key=_ref7[0],value=_ref7[1];return attributes[key].attribute_value===value;});});}},{key:\"getProductName\",value:function getProductName(){var _this$props3=this.props,product=_this$props3.product,_this$props3$product$=_this$props3.product.variants,variants=_this$props3$product$===void 0?[]:_this$props3$product$,configurableVariantIndex=_this$props3.configurableVariantIndex;var _ref8=variants[configurableVariantIndex]||product,name=_ref8.name;return name;}},{key:\"getMetaLink\",value:function getMetaLink(){var getLink=this.props.getLink;return window.location.origin+getLink().replace(/\\?.*/,'');}},{key:\"getStockMeta\",value:function getStockMeta(){var _this$props4=this.props,product=_this$props4.product,_this$props4$product$=_this$props4.product.variants,variants=_this$props4$product$===void 0?[]:_this$props4$product$,configurableVariantIndex=_this$props4.configurableVariantIndex;var _ref9=variants[configurableVariantIndex]||product,stock_status=_ref9.stock_status;if(stock_status===PRODUCT_OUT_OF_STOCK){return'https://schema.org/OutOfStock';}return'https://schema.org/InStock';}},{key:\"getOfferType\",value:function getOfferType(){var variants=this.props.product.variants;if(variants&&variants.length>=1){return'https://schema.org/AggregateOffer';}return'https://schema.org/Offer';}},{key:\"getOfferCount\",value:function getOfferCount(){var variants=this.props.product.variants;if(variants&&variants.length){return variants.length;}return 0;}},{key:\"getSelectedOptions\",value:function getSelectedOptions(){var _this$props$productOp=this.props.productOptionsData;_this$props$productOp=_this$props$productOp===void 0?{}:_this$props$productOp;var _this$props$productOp2=_this$props$productOp.productOptionsMulti,productOptionsMulti=_this$props$productOp2===void 0?[]:_this$props$productOp2,_this$props$productOp3=_this$props$productOp.productOptions,productOptions=_this$props$productOp3===void 0?[]:_this$props$productOp3;return[].concat(_toConsumableArray(productOptionsMulti),_toConsumableArray(productOptions)).map(function(productOption){var option_value=productOption.option_value;return parseInt(option_value,10);});}},{key:\"getSelectedOptionsMulti\",value:function getSelectedOptionsMulti(){var _this$props$productOp4=this.props.productOptionsData;_this$props$productOp4=_this$props$productOp4===void 0?{}:_this$props$productOp4;var _this$props$productOp5=_this$props$productOp4.productOptionsMulti,productOptionsMulti=_this$props$productOp5===void 0?[]:_this$props$productOp5,_this$props$productOp6=_this$props$productOp4.productOptions,productOptions=_this$props$productOp6===void 0?[]:_this$props$productOp6;return[].concat(_toConsumableArray(productOptionsMulti),_toConsumableArray(productOptions)).map(function(productOption){var option_id=productOption.option_id;return parseInt(option_id,10);});}},{key:\"getCustomizablePrice\",value:function getCustomizablePrice(){var _this$props$product=this.props.product;_this$props$product=_this$props$product===void 0?{}:_this$props$product;var _this$props$product$o=_this$props$product.options,options=_this$props$product$o===void 0?[]:_this$props$product$o,_this$props$product$p=_this$props$product.price_range;_this$props$product$p=_this$props$product$p===void 0?{}:_this$props$product$p;var _this$props$product$p2=_this$props$product$p.minimum_price;_this$props$product$p2=_this$props$product$p2===void 0?{}:_this$props$product$p2;var _this$props$product$p3=_this$props$product$p2.regular_price;_this$props$product$p3=_this$props$product$p3===void 0?{}:_this$props$product$p3;var _this$props$product$p4=_this$props$product$p3.value,regularPrice=_this$props$product$p4===void 0?0:_this$props$product$p4,_this$props$product$p5=_this$props$product$p2.regular_price_excl_tax;_this$props$product$p5=_this$props$product$p5===void 0?{}:_this$props$product$p5;var currency=_this$props$product$p5.currency,_this$props$product$p6=_this$props$product$p5.value,regularPriceExclTax=_this$props$product$p6===void 0?0:_this$props$product$p6,_this$props$product$p7=_this$props$product$p2.default_final_price_excl_tax;_this$props$product$p7=_this$props$product$p7===void 0?{}:_this$props$product$p7;var _this$props$product$p8=_this$props$product$p7.value,defaultFinalPriceExclTax=_this$props$product$p8===void 0?0:_this$props$product$p8,_this$props$product$p9=_this$props$product$p2.discount;_this$props$product$p9=_this$props$product$p9===void 0?{}:_this$props$product$p9;var _this$props$product$p10=_this$props$product$p9.percent_off,percent_off=_this$props$product$p10===void 0?0:_this$props$product$p10;var customPrice=this._getCustomPrice(regularPrice,regularPriceExclTax,false);var _customPrice$minimum_=customPrice.minimum_price;_customPrice$minimum_=_customPrice$minimum_===void 0?{}:_customPrice$minimum_;var _customPrice$minimum_2=_customPrice$minimum_.final_price;_customPrice$minimum_2=_customPrice$minimum_2===void 0?{}:_customPrice$minimum_2;var _customPrice$minimum_3=_customPrice$minimum_2.value,finalCustomPrice=_customPrice$minimum_3===void 0?0:_customPrice$minimum_3,_customPrice$minimum_4=_customPrice$minimum_.final_price_excl_tax;_customPrice$minimum_4=_customPrice$minimum_4===void 0?{}:_customPrice$minimum_4;var _customPrice$minimum_5=_customPrice$minimum_4.value,finalCustomPriceExclTax=_customPrice$minimum_5===void 0?0:_customPrice$minimum_5,_customPrice$minimum_6=_customPrice$minimum_.regular_price;_customPrice$minimum_6=_customPrice$minimum_6===void 0?{}:_customPrice$minimum_6;var _customPrice$minimum_7=_customPrice$minimum_6.value,regularCustomPrice=_customPrice$minimum_7===void 0?0:_customPrice$minimum_7,_customPrice$minimum_8=_customPrice$minimum_.regular_price_excl_tax;_customPrice$minimum_8=_customPrice$minimum_8===void 0?{}:_customPrice$minimum_8;var _customPrice$minimum_9=_customPrice$minimum_8.value,regularCustomPriceExclTax=_customPrice$minimum_9===void 0?0:_customPrice$minimum_9;var selectedOptions=this.getSelectedOptions();var selectedOptionsMulti=this.getSelectedOptionsMulti();var prices=options.reduce(function(acc,_ref10){var _ref10$data=_ref10.data,data=_ref10$data===void 0?[]:_ref10$data,option_id=_ref10.option_id,type=_ref10.type;/*\n            * Such types contain a single item within data\n            * as those are looked up on the option_id\n            */if(['area','field','file'].includes(type)){if(selectedOptionsMulti.includes(option_id)){/*\n                    * Since such types only have a single value\n                    * we can get the price_type directly\n                    */var _data=_slicedToArray(data,1),price_type=_data[0].price_type;if(price_type==='PERCENT'){var price=data[0].price*finalCustomPrice/ONE_HUNDRED_PERCENT;acc.push(price);}else{acc.push(data[0].price);}}return acc;}data.forEach(function(_ref11){var option_type_id=_ref11.option_type_id,price=_ref11.price,price_type=_ref11.price_type;if(selectedOptions.includes(option_type_id)){if(price_type==='PERCENT'){var finalPrice=price*finalCustomPrice/ONE_HUNDRED_PERCENT;acc.push(finalPrice);}else{acc.push(price);}}});return acc;},[]);var selectedOptionsTotal=prices.reduce(function(a,b){return a+b;},0);return{minimum_price:{final_price:{currency:currency,value:selectedOptionsTotal+finalCustomPrice},discount:{percent_off:percent_off},default_final_price_excl_tax:{value:defaultFinalPriceExclTax},regular_price:{value:selectedOptionsTotal+finalCustomPriceExclTax},final_price_excl_tax:{value:selectedOptionsTotal+regularCustomPrice},regular_price_excl_tax:{value:selectedOptionsTotal+regularCustomPriceExclTax}}};}},{key:\"getProductPrice\",value:function getProductPrice(){var _this$props5=this.props,product=_this$props5.product,_this$props5$product=_this$props5.product,_this$props5$product$=_this$props5$product.variants,variants=_this$props5$product$===void 0?[]:_this$props5$product$,type_id=_this$props5$product.type_id,links_purchased_separately=_this$props5$product.links_purchased_separately,configurableVariantIndex=_this$props5.configurableVariantIndex,selectedLinkPrice=_this$props5.selectedLinkPrice;var _product$options=product.options,options=_product$options===void 0?{}:_product$options;var _ref12=variants[configurableVariantIndex]||product,price_range=_ref12.price_range;if(type_id===BUNDLE){var _this$props6=this.props,selectedBundlePrice=_this$props6.selectedBundlePrice,selectedBundlePriceExclTax=_this$props6.selectedBundlePriceExclTax,selectedInitialBundlePrice=_this$props6.selectedInitialBundlePrice,dynamic_price=_this$props6.product.dynamic_price;return this._getBundleCustomPrice(selectedBundlePrice,selectedBundlePriceExclTax,selectedInitialBundlePrice,dynamic_price);}if(type_id===DOWNLOADABLE&&links_purchased_separately){return this._getCustomPrice(selectedLinkPrice,selectedLinkPrice,true);}if(Object.keys(options).length!==0){return this.getCustomizablePrice();}return price_range;}},{key:\"_getCustomPrice\",value:function _getCustomPrice(price,withoutTax){var addBase=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var _this$props$product2=this.props.product;_this$props$product2=_this$props$product2===void 0?{}:_this$props$product2;var _this$props$product2$=_this$props$product2.price_range;_this$props$product2$=_this$props$product2$===void 0?{}:_this$props$product2$;var _this$props$product2$2=_this$props$product2$.minimum_price;_this$props$product2$2=_this$props$product2$2===void 0?{}:_this$props$product2$2;var _this$props$product2$3=_this$props$product2$2.regular_price;_this$props$product2$3=_this$props$product2$3===void 0?{}:_this$props$product2$3;var _this$props$product2$4=_this$props$product2$3.currency,currency=_this$props$product2$4===void 0?'':_this$props$product2$4,_this$props$product2$5=_this$props$product2$3.value,value=_this$props$product2$5===void 0?0:_this$props$product2$5,_this$props$product2$6=_this$props$product2$2.regular_price_excl_tax;_this$props$product2$6=_this$props$product2$6===void 0?{}:_this$props$product2$6;var _this$props$product2$7=_this$props$product2$6.value,value_excl_tax=_this$props$product2$7===void 0?0:_this$props$product2$7,_this$props$product2$8=_this$props$product2$2.discount;_this$props$product2$8=_this$props$product2$8===void 0?{}:_this$props$product2$8;var _this$props$product2$9=_this$props$product2$8.percent_off,percent_off=_this$props$product2$9===void 0?0:_this$props$product2$9;var discount=1-percent_off/ONE_HUNDRED_PERCENT;var basePrice=addBase?value:0;var basePriceExclTax=addBase?value_excl_tax:0;var finalPrice=(basePrice+price)*discount;var finalPriceExclTax=(basePriceExclTax+withoutTax)*discount;var priceValue={value:finalPrice,currency:currency};var priceValueExclTax={value:finalPriceExclTax,currency:currency};return{minimum_price:{final_price:priceValue,regular_price:priceValue,final_price_excl_tax:priceValueExclTax,regular_price_excl_tax:priceValueExclTax}};}},{key:\"_getBundleCustomPrice\",value:function _getBundleCustomPrice(price,withoutTax,initial,isDynamicPrice){var _this$props$product$p11=this.props.product.price_range.minimum_price,_this$props$product$p12=_this$props$product$p11.default_price,currency=_this$props$product$p12.currency,defaultPrice=_this$props$product$p12.value,defaultFinalPrice=_this$props$product$p11.default_final_price.value,defaultFinalPriceExclTax=_this$props$product$p11.default_final_price_excl_tax.value,discountData=_this$props$product$p11.discount,percent_off=_this$props$product$p11.discount.percent_off;// If bundle product has dynamic price, it's own base price is always 0. For fix priced bundles price it's configurable\nvar addBase=!isDynamicPrice;// Adjusting `discount` for bundle products for discount to be displayed on PDP\nvar priceBeforeDiscount=addBase?defaultPrice:initial;var priceAfterDiscount=addBase?defaultFinalPrice:price;var finalDiscount=!percent_off&&defaultPrice!==defaultFinalPrice?{percent_off:ONE_HUNDRED_PERCENT*(priceBeforeDiscount-priceAfterDiscount)/priceBeforeDiscount,amount_off:priceBeforeDiscount-priceAfterDiscount}:discountData;// Set initial price different from 0 for specific product types, i.e. downloadable, bundles with fixed price\nvar baseInitialPrice=addBase?defaultPrice:0;var baseFinalPrice=addBase?defaultFinalPrice:0;var basePriceExclTax=addBase?defaultFinalPriceExclTax:0;var initialPrice=baseInitialPrice+initial;var finalPrice=baseFinalPrice+price;var finalPriceExclTax=basePriceExclTax+withoutTax;var initialPriceValue={value:initialPrice,currency:currency};var priceValue={value:finalPrice,currency:currency};var priceValueExclTax={value:finalPriceExclTax,currency:currency};return{minimum_price:{final_price:priceValue,regular_price:initialPriceValue,final_price_excl_tax:priceValueExclTax,regular_price_excl_tax:initialPriceValue,discount:finalDiscount}};}},{key:\"_getGroupedProductQuantity\",value:function _getGroupedProductQuantity(){var groupedProductQuantity=this.state.groupedProductQuantity;return groupedProductQuantity;}},{key:\"_setGroupedProductQuantity\",value:function _setGroupedProductQuantity(id,value){this.setState(function(_ref13){var groupedProductQuantity=_ref13.groupedProductQuantity;return{groupedProductQuantity:_objectSpread(_objectSpread({},groupedProductQuantity),{},_defineProperty({},id,value))};});}},{key:\"_clearGroupedProductQuantity\",value:function _clearGroupedProductQuantity(){this.setState({groupedProductQuantity:{}});}},{key:\"showOnlyIfLoaded\",value:function showOnlyIfLoaded(expression,content){var placeholder=arguments.length>2&&arguments[2]!==undefined?arguments[2]:content;var areDetailsLoaded=this.props.areDetailsLoaded;if(!areDetailsLoaded){return placeholder;}if(areDetailsLoaded&&!expression){return null;}return content;}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,ProductActions,Object.assign({},this.props,this.state,this.containerProps(),this.containerFunctions));}}],[{key:\"getMinQuantity\",value:function getMinQuantity(props){var _props$product=props.product;_props$product=_props$product===void 0?{}:_props$product;var _props$product$stock_=_props$product.stock_item;_props$product$stock_=_props$product$stock_===void 0?{}:_props$product$stock_;var min_sale_qty=_props$product$stock_.min_sale_qty,variants=_props$product.variants,configurableVariantIndex=props.configurableVariantIndex;if(!min_sale_qty){return 1;}if(!configurableVariantIndex&&!variants){return min_sale_qty;}var _ref14=variants[configurableVariantIndex]||{},_ref14$stock_item=_ref14.stock_item;_ref14$stock_item=_ref14$stock_item===void 0?{}:_ref14$stock_item;var minVariantQty=_ref14$stock_item.min_sale_qty;return minVariantQty||min_sale_qty;}},{key:\"getMaxQuantity\",value:function getMaxQuantity(props){var _props$product2=props.product;_props$product2=_props$product2===void 0?{}:_props$product2;var _props$product2$stock=_props$product2.stock_item;_props$product2$stock=_props$product2$stock===void 0?{}:_props$product2$stock;var max_sale_qty=_props$product2$stock.max_sale_qty,variants=_props$product2.variants,configurableVariantIndex=props.configurableVariantIndex;if(!max_sale_qty){return DEFAULT_MAX_PRODUCTS;}if(configurableVariantIndex===-1||!Object.keys(variants).length){return max_sale_qty;}var _ref15=variants[configurableVariantIndex]||{},_ref15$stock_item=_ref15.stock_item;_ref15$stock_item=_ref15$stock_item===void 0?{}:_ref15$stock_item;var maxVariantQty=_ref15$stock_item.max_sale_qty;return maxVariantQty||max_sale_qty;}},{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var quantity=state.quantity;var minQty=ProductActionsContainer.getMinQuantity(props);var maxQty=ProductActionsContainer.getMaxQuantity(props);if(quantity<minQty){return{quantity:minQty};}if(quantity>maxQty){return{quantity:maxQty};}return null;}}]);return _ProductActionsContainer;}(Extensible(PureComponent));/** @namespace Component/ProductActions/Container/mapDispatchToProps */ // eslint-disable-next-line no-unused-vars\nObject.defineProperty(_ProductActionsContainer,'name',{value:'ProductActionsContainer'});export var ProductActionsContainer=middleware(_ProductActionsContainer,\"Component/ProductActions/Container\");export var mapDispatchToProps=middleware(function(dispatch){return{};},\"Component/ProductActions/Container/mapDispatchToProps\");export default connect(mapStateToProps,mapDispatchToProps)(ProductActionsContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductActions/ProductActions.container.js"],"names":["PureComponent","connect","PRODUCT_OUT_OF_STOCK","ProductType","BUNDLE","CONFIGURABLE","DOWNLOADABLE","GROUPED","ProductActions","DEFAULT_MAX_PRODUCTS","ONE_HUNDRED_PERCENT","mapStateToProps","state","groupedProductQuantity","ProductReducer","device","ConfigReducer","displayProductStockStatus","display_product_stock_status","isWishlistEnabled","wishlist_general_active","ProductActionsContainer","quantity","containerFunctions","showOnlyIfLoaded","bind","onProductValidationError","getIsOptionInCurrentVariant","setQuantity","setGroupedProductQuantity","_setGroupedProductQuantity","clearGroupedProductQuantity","_clearGroupedProductQuantity","getIsConfigurableAttributeAvailable","onConfigurableProductError","onProductError","configurableOptionsRef","onGroupedProductError","groupedProductsRef","containerProps","minQuantity","getMinQuantity","props","maxQuantity","getMaxQuantity","_getGroupedProductQuantity","productPrice","getProductPrice","productName","getProductName","offerCount","getOfferCount","offerType","getOfferType","stockMeta","getStockMeta","metaLink","getMetaLink","ref","current","scrollIntoView","behavior","block","classList","remove","offsetWidth","add","type","value","setState","attribute","configurableVariantIndex","variants","product","attribute_code","attribute_value","parameters","isAttributeSelected","Object","hasOwnProperty","call","parameterPairs","entries","selectedAttributes","filter","key","some","stock_status","attributes","foundValue","every","name","getLink","window","location","origin","replace","length","productOptionsData","productOptionsMulti","productOptions","map","productOption","option_value","parseInt","option_id","options","price_range","minimum_price","regular_price","regularPrice","regular_price_excl_tax","currency","regularPriceExclTax","default_final_price_excl_tax","defaultFinalPriceExclTax","discount","percent_off","customPrice","_getCustomPrice","final_price","finalCustomPrice","final_price_excl_tax","finalCustomPriceExclTax","regularCustomPrice","regularCustomPriceExclTax","selectedOptions","getSelectedOptions","selectedOptionsMulti","getSelectedOptionsMulti","prices","reduce","acc","data","includes","price_type","price","push","forEach","option_type_id","finalPrice","selectedOptionsTotal","a","b","type_id","links_purchased_separately","selectedLinkPrice","selectedBundlePrice","selectedBundlePriceExclTax","selectedInitialBundlePrice","dynamic_price","_getBundleCustomPrice","keys","getCustomizablePrice","withoutTax","addBase","value_excl_tax","basePrice","basePriceExclTax","finalPriceExclTax","priceValue","priceValueExclTax","initial","isDynamicPrice","default_price","defaultPrice","defaultFinalPrice","default_final_price","discountData","priceBeforeDiscount","priceAfterDiscount","finalDiscount","amount_off","baseInitialPrice","baseFinalPrice","initialPrice","initialPriceValue","id","expression","content","placeholder","areDetailsLoaded","stock_item","min_sale_qty","minVariantQty","max_sale_qty","maxVariantQty","minQty","maxQty","defineProperty","_ProductActionsContainer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { PRODUCT_OUT_OF_STOCK } from 'Component/CartItem/CartItem.config';\nimport { ProductType } from 'Type/ProductList';\nimport {\n    BUNDLE,\n    CONFIGURABLE,\n    DOWNLOADABLE,\n    GROUPED\n} from 'Util/Product';\n\nimport ProductActions from './ProductActions.component';\nimport { DEFAULT_MAX_PRODUCTS, ONE_HUNDRED_PERCENT } from './ProductActions.config';\n\n/** @namespace Component/ProductActions/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    groupedProductQuantity: state.ProductReducer.groupedProductQuantity,\n    device: state.ConfigReducer.device,\n    displayProductStockStatus: state.ConfigReducer.display_product_stock_status,\n    isWishlistEnabled: state.ConfigReducer.wishlist_general_active\n});\n\n/** @namespace Component/ProductActions/Container */\nexport class ProductActionsContainer extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        productOrVariant: PropTypes.object.isRequired,\n        configurableVariantIndex: PropTypes.number.isRequired,\n        areDetailsLoaded: PropTypes.bool.isRequired,\n        productOptionsData: PropTypes.objectOf(PropTypes.array).isRequired,\n        parameters: PropTypes.objectOf(PropTypes.string).isRequired,\n        selectedInitialBundlePrice: PropTypes.number.isRequired,\n        selectedBundlePrice: PropTypes.number.isRequired,\n        selectedBundlePriceExclTax: PropTypes.number.isRequired,\n        selectedLinkPrice: PropTypes.number.isRequired,\n        getLink: PropTypes.func.isRequired,\n        isWishlistEnabled: PropTypes.bool.isRequired\n    };\n\n    static getMinQuantity(props) {\n        const {\n            product: { stock_item: { min_sale_qty } = {}, variants } = {},\n            configurableVariantIndex\n        } = props;\n\n        if (!min_sale_qty) {\n            return 1;\n        }\n        if (!configurableVariantIndex && !variants) {\n            return min_sale_qty;\n        }\n\n        const { stock_item: { min_sale_qty: minVariantQty } = {} } = variants[configurableVariantIndex] || {};\n\n        return minVariantQty || min_sale_qty;\n    }\n\n    static getMaxQuantity(props) {\n        const {\n            product: {\n                stock_item: {\n                    max_sale_qty\n                } = {},\n                variants\n            } = {},\n            configurableVariantIndex\n        } = props;\n\n        if (!max_sale_qty) {\n            return DEFAULT_MAX_PRODUCTS;\n        }\n\n        if (configurableVariantIndex === -1 || !Object.keys(variants).length) {\n            return max_sale_qty;\n        }\n\n        const {\n            stock_item: {\n                max_sale_qty: maxVariantQty\n            } = {}\n        } = variants[configurableVariantIndex] || {};\n\n        return maxVariantQty || max_sale_qty;\n    }\n\n    state = {\n        quantity: 1,\n        groupedProductQuantity: {}\n    };\n\n    containerFunctions = {\n        showOnlyIfLoaded: this.showOnlyIfLoaded.bind(this),\n        onProductValidationError: this.onProductValidationError.bind(this),\n        getIsOptionInCurrentVariant: this.getIsOptionInCurrentVariant.bind(this),\n        setQuantity: this.setQuantity.bind(this),\n        setGroupedProductQuantity: this._setGroupedProductQuantity.bind(this),\n        clearGroupedProductQuantity: this._clearGroupedProductQuantity.bind(this),\n        getIsConfigurableAttributeAvailable: this.getIsConfigurableAttributeAvailable.bind(this)\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        const { quantity } = state;\n        const minQty = ProductActionsContainer.getMinQuantity(props);\n        const maxQty = ProductActionsContainer.getMaxQuantity(props);\n\n        if (quantity < minQty) {\n            return { quantity: minQty };\n        }\n        if (quantity > maxQty) {\n            return { quantity: maxQty };\n        }\n\n        return null;\n    }\n\n    onConfigurableProductError = this.onProductError.bind(this, this.configurableOptionsRef);\n\n    onGroupedProductError = this.onProductError.bind(this, this.groupedProductsRef);\n\n    onProductError(ref) {\n        if (!ref) {\n            return;\n        }\n        const { current } = ref;\n\n        current.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center'\n        });\n\n        current.classList.remove('animate');\n        // eslint-disable-next-line no-unused-expressions\n        current.offsetWidth; // trigger a DOM reflow\n        current.classList.add('animate');\n    }\n\n    onProductValidationError(type) {\n        switch (type) {\n        case CONFIGURABLE:\n            this.onConfigurableProductError();\n            break;\n        case GROUPED:\n            this.onGroupedProductError();\n            break;\n        default:\n            break;\n        }\n    }\n\n    setQuantity(value) {\n        this.setState({ quantity: +value });\n    }\n\n    // TODO: make key=>value based\n    getIsOptionInCurrentVariant(attribute, value) {\n        const { configurableVariantIndex, product: { variants } } = this.props;\n        if (!variants) {\n            return false;\n        }\n\n        return variants[configurableVariantIndex].product[attribute] === value;\n    }\n\n    getIsConfigurableAttributeAvailable({ attribute_code, attribute_value }) {\n        const { parameters, product: { variants } } = this.props;\n\n        const isAttributeSelected = Object.hasOwnProperty.call(parameters, attribute_code);\n\n        // If value matches current attribute_value, option should be enabled\n        if (isAttributeSelected && parameters[attribute_code] === attribute_value) {\n            return true;\n        }\n\n        const parameterPairs = Object.entries(parameters);\n\n        const selectedAttributes = isAttributeSelected\n            // Need to exclude itself, otherwise different attribute_values of the same attribute_code will always be disabled\n            ? parameterPairs.filter(([key]) => key !== attribute_code)\n            : parameterPairs;\n\n        return variants\n            .some(({ stock_status, attributes }) => {\n                const { attribute_value: foundValue } = attributes[attribute_code] || {};\n\n                return (\n                    stock_status === 'IN_STOCK'\n                    // Variant must have currently checked attribute_code and attribute_value\n                    && foundValue === attribute_value\n                    // Variant must have all currently selected attributes\n                    && selectedAttributes.every(([key, value]) => attributes[key].attribute_value === value)\n                );\n            });\n    }\n\n    containerProps = () => ({\n        minQuantity: ProductActionsContainer.getMinQuantity(this.props),\n        maxQuantity: ProductActionsContainer.getMaxQuantity(this.props),\n        groupedProductQuantity: this._getGroupedProductQuantity(),\n        productPrice: this.getProductPrice(),\n        productName: this.getProductName(),\n        offerCount: this.getOfferCount(),\n        offerType: this.getOfferType(),\n        stockMeta: this.getStockMeta(),\n        metaLink: this.getMetaLink()\n    });\n\n    getProductName() {\n        const {\n            product,\n            product: { variants = [] },\n            configurableVariantIndex\n        } = this.props;\n\n        const {\n            name\n        } = variants[configurableVariantIndex] || product;\n\n        return name;\n    }\n\n    getMetaLink() {\n        const { getLink } = this.props;\n        return window.location.origin + getLink().replace(/\\?.*/, '');\n    }\n\n    getStockMeta() {\n        const {\n            product,\n            product: { variants = [] },\n            configurableVariantIndex\n        } = this.props;\n\n        const {\n            stock_status\n        } = variants[configurableVariantIndex] || product;\n\n        if (stock_status === PRODUCT_OUT_OF_STOCK) {\n            return 'https://schema.org/OutOfStock';\n        }\n\n        return 'https://schema.org/InStock';\n    }\n\n    getOfferType() {\n        const { product: { variants } } = this.props;\n\n        if (variants && variants.length >= 1) {\n            return 'https://schema.org/AggregateOffer';\n        }\n\n        return 'https://schema.org/Offer';\n    }\n\n    getOfferCount() {\n        const { product: { variants } } = this.props;\n\n        if (variants && variants.length) {\n            return variants.length;\n        }\n\n        return 0;\n    }\n\n    getSelectedOptions() {\n        const {\n            productOptionsData: {\n                productOptionsMulti = [],\n                productOptions = []\n            } = {}\n        } = this.props;\n\n        return [...productOptionsMulti, ...productOptions].map((productOption) => {\n            const { option_value } = productOption;\n\n            return parseInt(option_value, 10);\n        });\n    }\n\n    getSelectedOptionsMulti() {\n        const {\n            productOptionsData: {\n                productOptionsMulti = [],\n                productOptions = []\n            } = {}\n        } = this.props;\n\n        return [...productOptionsMulti, ...productOptions].map((productOption) => {\n            const { option_id } = productOption;\n\n            return parseInt(option_id, 10);\n        });\n    }\n\n    getCustomizablePrice() {\n        const {\n            product: {\n                options = [],\n                price_range: {\n                    minimum_price: {\n                        regular_price: {\n                            value: regularPrice = 0\n                        } = {},\n                        regular_price_excl_tax: {\n                            currency,\n                            value: regularPriceExclTax = 0\n                        } = {},\n                        default_final_price_excl_tax: {\n                            value: defaultFinalPriceExclTax = 0\n                        } = {},\n                        discount: {\n                            percent_off = 0\n                        } = {}\n                    } = {}\n                } = {}\n            } = {}\n        } = this.props;\n\n        const customPrice = this._getCustomPrice(regularPrice, regularPriceExclTax, false);\n\n        const {\n            minimum_price: {\n                final_price: {\n                    value: finalCustomPrice = 0\n                } = {},\n                final_price_excl_tax: {\n                    value: finalCustomPriceExclTax = 0\n                } = {},\n                regular_price: {\n                    value: regularCustomPrice = 0\n                } = {},\n                regular_price_excl_tax: {\n                    value: regularCustomPriceExclTax = 0\n                } = {}\n            } = {}\n        } = customPrice;\n\n        const selectedOptions = this.getSelectedOptions();\n        const selectedOptionsMulti = this.getSelectedOptionsMulti();\n\n        const prices = options.reduce((acc, { data = [], option_id, type }) => {\n            /*\n            * Such types contain a single item within data\n            * as those are looked up on the option_id\n            */\n            if (['area', 'field', 'file'].includes(type)) {\n                if (selectedOptionsMulti.includes(option_id)) {\n                    /*\n                    * Since such types only have a single value\n                    * we can get the price_type directly\n                    */\n                    const [{ price_type }] = data;\n\n                    if (price_type === 'PERCENT') {\n                        const price = (data[0].price * finalCustomPrice) / ONE_HUNDRED_PERCENT;\n                        acc.push(price);\n                    } else {\n                        acc.push(data[0].price);\n                    }\n                }\n\n                return acc;\n            }\n\n            data.forEach(({ option_type_id, price, price_type }) => {\n                if (selectedOptions.includes(option_type_id)) {\n                    if (price_type === 'PERCENT') {\n                        const finalPrice = (price * finalCustomPrice) / ONE_HUNDRED_PERCENT;\n                        acc.push(finalPrice);\n                    } else {\n                        acc.push(price);\n                    }\n                }\n            });\n\n            return acc;\n        }, []);\n\n        const selectedOptionsTotal = prices.reduce((a, b) => a + b, 0);\n        return {\n            minimum_price: {\n                final_price: {\n                    currency,\n                    value: selectedOptionsTotal + finalCustomPrice\n                },\n                discount: { percent_off },\n                default_final_price_excl_tax: { value: defaultFinalPriceExclTax },\n                regular_price: { value: selectedOptionsTotal + finalCustomPriceExclTax },\n                final_price_excl_tax: { value: selectedOptionsTotal + regularCustomPrice },\n                regular_price_excl_tax: { value: selectedOptionsTotal + regularCustomPriceExclTax }\n            }\n        };\n    }\n\n    getProductPrice() {\n        const {\n            product,\n            product: { variants = [], type_id, links_purchased_separately },\n            configurableVariantIndex,\n            selectedLinkPrice\n        } = this.props;\n\n        const { options = {} } = product;\n\n        const {\n            price_range\n        } = variants[configurableVariantIndex] || product;\n\n        if (type_id === BUNDLE) {\n            const {\n                selectedBundlePrice,\n                selectedBundlePriceExclTax,\n                selectedInitialBundlePrice,\n                product: { dynamic_price }\n            } = this.props;\n\n            return this._getBundleCustomPrice(\n                selectedBundlePrice,\n                selectedBundlePriceExclTax,\n                selectedInitialBundlePrice,\n                dynamic_price\n            );\n        }\n\n        if (type_id === DOWNLOADABLE && links_purchased_separately) {\n            return this._getCustomPrice(selectedLinkPrice, selectedLinkPrice, true);\n        }\n\n        if (Object.keys(options).length !== 0) {\n            return this.getCustomizablePrice();\n        }\n\n        return price_range;\n    }\n\n    _getCustomPrice(price, withoutTax, addBase = false) {\n        const {\n            product: {\n                price_range: {\n                    minimum_price: {\n                        regular_price: { currency = '', value = 0 } = {},\n                        regular_price_excl_tax: { value: value_excl_tax = 0 } = {},\n                        discount: { percent_off = 0 } = {}\n                    } = {}\n                } = {}\n            } = {}\n        } = this.props;\n\n        const discount = (1 - percent_off / ONE_HUNDRED_PERCENT);\n\n        const basePrice = addBase ? value : 0;\n        const basePriceExclTax = addBase ? value_excl_tax : 0;\n\n        const finalPrice = (basePrice + price) * discount;\n        const finalPriceExclTax = (basePriceExclTax + withoutTax) * discount;\n\n        const priceValue = { value: finalPrice, currency };\n        const priceValueExclTax = { value: finalPriceExclTax, currency };\n\n        return {\n            minimum_price: {\n                final_price: priceValue,\n                regular_price: priceValue,\n                final_price_excl_tax: priceValueExclTax,\n                regular_price_excl_tax: priceValueExclTax\n            }\n        };\n    }\n\n    _getBundleCustomPrice(price, withoutTax, initial, isDynamicPrice) {\n        const {\n            product: {\n                price_range: {\n                    minimum_price: {\n                        default_price: { currency, value: defaultPrice },\n                        default_final_price: { value: defaultFinalPrice },\n                        default_final_price_excl_tax: { value: defaultFinalPriceExclTax },\n                        discount: discountData,\n                        discount: { percent_off }\n                    }\n                }\n            }\n        } = this.props;\n\n        // If bundle product has dynamic price, it's own base price is always 0. For fix priced bundles price it's configurable\n        const addBase = !isDynamicPrice;\n\n        // Adjusting `discount` for bundle products for discount to be displayed on PDP\n        const priceBeforeDiscount = addBase ? defaultPrice : initial;\n        const priceAfterDiscount = addBase ? defaultFinalPrice : price;\n        const finalDiscount = !percent_off && defaultPrice !== defaultFinalPrice\n            ? {\n                percent_off: (ONE_HUNDRED_PERCENT * (priceBeforeDiscount - priceAfterDiscount)) / priceBeforeDiscount,\n                amount_off: priceBeforeDiscount - priceAfterDiscount\n            }\n            : discountData;\n\n        // Set initial price different from 0 for specific product types, i.e. downloadable, bundles with fixed price\n        const baseInitialPrice = addBase ? defaultPrice : 0;\n        const baseFinalPrice = addBase ? defaultFinalPrice : 0;\n        const basePriceExclTax = addBase ? defaultFinalPriceExclTax : 0;\n\n        const initialPrice = baseInitialPrice + initial;\n        const finalPrice = baseFinalPrice + price;\n        const finalPriceExclTax = basePriceExclTax + withoutTax;\n\n        const initialPriceValue = { value: initialPrice, currency };\n        const priceValue = { value: finalPrice, currency };\n        const priceValueExclTax = { value: finalPriceExclTax, currency };\n\n        return {\n            minimum_price: {\n                final_price: priceValue,\n                regular_price: initialPriceValue,\n                final_price_excl_tax: priceValueExclTax,\n                regular_price_excl_tax: initialPriceValue,\n                discount: finalDiscount\n            }\n        };\n    }\n\n    _getGroupedProductQuantity() {\n        const { groupedProductQuantity } = this.state;\n        return groupedProductQuantity;\n    }\n\n    _setGroupedProductQuantity(id, value) {\n        this.setState(({ groupedProductQuantity }) => ({\n            groupedProductQuantity: {\n                ...groupedProductQuantity,\n                [id]: value\n            }\n        }));\n    }\n\n    _clearGroupedProductQuantity() {\n        this.setState({ groupedProductQuantity: {} });\n    }\n\n    showOnlyIfLoaded(expression, content, placeholder = content) {\n        const { areDetailsLoaded } = this.props;\n\n        if (!areDetailsLoaded) {\n            return placeholder;\n        }\n        if (areDetailsLoaded && !expression) {\n            return null;\n        }\n\n        return content;\n    }\n\n    render() {\n        return (\n            <ProductActions\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerProps() }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\n/** @namespace Component/ProductActions/Container/mapDispatchToProps */\n// eslint-disable-next-line no-unused-vars\nexport const mapDispatchToProps = (dispatch) => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductActionsContainer);\n"]},"metadata":{},"sourceType":"module"}