{"ast":null,"code":"import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _get from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{createRef,PureComponent}from'react';import TextPlaceholder from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/TextPlaceholder\";import{ChildrenType,MixType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";import{getFixedElementHeight}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/CSS\";import\"./ExpandableContent.style\";/** @namespace Component/ExpandableContent/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ExpandableContent=/*#__PURE__*/function(_Extensible){_inherits(_ExpandableContent,_Extensible);var _super=_createSuper(_ExpandableContent);function _ExpandableContent(){var _this;_classCallCheck(this,_ExpandableContent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.expandableContentRef=/*#__PURE__*/createRef();_this.toggleExpand=function(){var onClick=_this.props.onClick;if(onClick){onClick();return;}_this.setState(function(_ref){var isContentExpanded=_ref.isContentExpanded;return{isContentExpanded:!isContentExpanded};},function(){return _this.scrollToExpandedContent();});};return _this;}_createClass(_ExpandableContent,[{key:\"__construct\",value:function __construct(props){_get(_getPrototypeOf(_ExpandableContent.prototype),\"__construct\",this).call(this,props);var isContentExpanded=this.props.isContentExpanded;this.state={isContentExpanded:isContentExpanded,// eslint-disable-next-line react/no-unused-state\nprevIsContentExpanded:isContentExpanded};}},{key:\"scrollToExpandedContent\",value:function scrollToExpandedContent(){var isContentExpanded=this.state.isContentExpanded;var elem=this.expandableContentRef&&this.expandableContentRef.current;if(isContentExpanded&&!elem){return;}var elemToWindowTopDist=elem.getBoundingClientRect().top;var windowToPageTopDist=document.body.getBoundingClientRect().top;var topToElemDistance=elemToWindowTopDist-windowToPageTopDist;var _getFixedElementHeigh=getFixedElementHeight(),totalFixedElementHeight=_getFixedElementHeigh.total,bottomFixedElementHeight=_getFixedElementHeigh.bottom;var elemMaxOffsetHeight=screen.height>elem.offsetHeight+bottomFixedElementHeight?elem.offsetHeight:screen.height-totalFixedElementHeight;var scrollTo=topToElemDistance-(screen.height-bottomFixedElementHeight-elemMaxOffsetHeight);// checking if button is in a view-port\nif(-windowToPageTopDist>=scrollTo){return;}window.scrollTo({behavior:'smooth',top:scrollTo});}},{key:\"renderButton\",value:function renderButton(){var isContentExpanded=this.state.isContentExpanded;var _this$props=this.props,heading=_this$props.heading,subHeading=_this$props.subHeading,mix=_this$props.mix;return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"ExpandableContent\",elem:\"Button\",mods:{isContentExpanded:isContentExpanded},mix:_objectSpread(_objectSpread({},mix),{},{elem:'ExpandableContentButton'}),onClick:this.toggleExpand},/*#__PURE__*/_checkBEM(React,\"span\",{block:\"ExpandableContent\",elem:\"Heading\",mix:_objectSpread(_objectSpread({},mix),{},{elem:'ExpandableContentHeading'})},typeof heading==='string'?/*#__PURE__*/_checkBEM(React,TextPlaceholder,{content:heading,length:\"medium\"}):heading),/*#__PURE__*/_checkBEM(React,\"span\",{block:\"ExpandableContent\",elem:\"SubHeading\",mix:_objectSpread(_objectSpread({},mix),{},{elem:'ExpandableContentSubHeading'})},subHeading));}},{key:\"renderContent\",value:function renderContent(){var _this$props2=this.props,children=_this$props2.children,mix=_this$props2.mix;var isContentExpanded=this.state.isContentExpanded;var mods={isContentExpanded:isContentExpanded};return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ExpandableContent\",elem:\"Content\",mods:mods,mix:_objectSpread(_objectSpread({},mix),{},{elem:'ExpandableContentContent',mods:mods})},children);}},{key:\"render\",value:function render(){var mix=this.props.mix;return/*#__PURE__*/_checkBEM(React,\"article\",{block:\"ExpandableContent\",mix:mix,ref:this.expandableContentRef},this.renderButton(),this.renderContent());}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(_ref2,_ref3){var isContentExpanded=_ref2.isContentExpanded;var prevIsContentExpanded=_ref3.prevIsContentExpanded;if(isContentExpanded!==prevIsContentExpanded){return{prevIsContentExpanded:isContentExpanded,isContentExpanded:isContentExpanded};}return null;}}]);return _ExpandableContent;}(Extensible(PureComponent));_ExpandableContent.defaultProps={subHeading:'',heading:'',isContentExpanded:false,onClick:null};Object.defineProperty(_ExpandableContent,'name',{value:'ExpandableContent'});export var ExpandableContent=middleware(_ExpandableContent,\"Component/ExpandableContent/Component\");export default ExpandableContent;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ExpandableContent/ExpandableContent.component.js"],"names":["createRef","PureComponent","TextPlaceholder","ChildrenType","MixType","getFixedElementHeight","ExpandableContent","expandableContentRef","toggleExpand","onClick","props","setState","isContentExpanded","scrollToExpandedContent","state","prevIsContentExpanded","elem","current","elemToWindowTopDist","getBoundingClientRect","top","windowToPageTopDist","document","body","topToElemDistance","totalFixedElementHeight","total","bottomFixedElementHeight","bottom","elemMaxOffsetHeight","screen","height","offsetHeight","scrollTo","window","behavior","heading","subHeading","mix","children","mods","renderButton","renderContent","defaultProps","Object","defineProperty","_ExpandableContent","value"],"mappings":"o9BAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,OAASA,SAAT,CAAoBC,aAApB,KAAyC,OAAzC,CAEA,MAAOC,CAAAA,eAAP,mFACA,OAASC,YAAT,CAAuBC,OAAvB,qEACA,OAASC,qBAAT,kEAEA,kCACA,uD,wEACA,UAAaC,CAAAA,kBAAb,6WA0BIC,oBA1BJ,cA0B2BP,SAAS,EA1BpC,OA8EIQ,YA9EJ,CA8EmB,UAAM,IACTC,CAAAA,OADS,CACG,MAAKC,KADR,CACTD,OADS,CAEjB,GAAIA,OAAJ,CAAa,CACTA,OAAO,GACP,OACH,CACD,MAAKE,QAAL,CACI,kBAAGC,CAAAA,iBAAH,MAAGA,iBAAH,OAA4B,CAAEA,iBAAiB,CAAE,CAACA,iBAAtB,CAA5B,EADJ,CAEI,iBAAM,OAAKC,uBAAL,EAAN,EAFJ,EAIH,CAxFL,yEA4BI,qBAAYH,KAAZ,CAAmB,CACf,iFAAkBA,KAAlB,EADe,GAEPE,CAAAA,iBAFO,CAEe,KAAKF,KAFpB,CAEPE,iBAFO,CAGf,KAAKE,KAAL,CAAa,CACTF,iBAAiB,CAAjBA,iBADS,CAET;AACAG,qBAAqB,CAAEH,iBAHd,CAAb,CAKH,CApCL,uCAiDI,kCAA0B,IACdA,CAAAA,iBADc,CACQ,KAAKE,KADb,CACdF,iBADc,CAEtB,GAAMI,CAAAA,IAAI,CAAG,KAAKT,oBAAL,EAA6B,KAAKA,oBAAL,CAA0BU,OAApE,CAEA,GAAIL,iBAAiB,EAAI,CAACI,IAA1B,CAAgC,CAC5B,OACH,CAED,GAAME,CAAAA,mBAAmB,CAAGF,IAAI,CAACG,qBAAL,GAA6BC,GAAzD,CACA,GAAMC,CAAAA,mBAAmB,CAAGC,QAAQ,CAACC,IAAT,CAAcJ,qBAAd,GAAsCC,GAAlE,CACA,GAAMI,CAAAA,iBAAiB,CAAGN,mBAAmB,CAAGG,mBAAhD,CAVsB,0BAclBhB,qBAAqB,EAdH,CAYXoB,uBAZW,uBAYlBC,KAZkB,CAaVC,wBAbU,uBAalBC,MAbkB,CAgBtB,GAAMC,CAAAA,mBAAmB,CAAGC,MAAM,CAACC,MAAP,CAAgBf,IAAI,CAACgB,YAAL,CAAoBL,wBAApC,CACtBX,IAAI,CAACgB,YADiB,CAEtBF,MAAM,CAACC,MAAP,CAAgBN,uBAFtB,CAGA,GAAMQ,CAAAA,QAAQ,CAAGT,iBAAiB,EAAIM,MAAM,CAACC,MAAP,CAAgBJ,wBAAhB,CAA2CE,mBAA/C,CAAlC,CAEA;AACA,GAAI,CAACR,mBAAD,EAAwBY,QAA5B,CAAsC,CAClC,OACH,CAEDC,MAAM,CAACD,QAAP,CAAgB,CAAEE,QAAQ,CAAE,QAAZ,CAAsBf,GAAG,CAAEa,QAA3B,CAAhB,EACH,CA5EL,4BA0FI,uBAAe,IACHrB,CAAAA,iBADG,CACmB,KAAKE,KADxB,CACHF,iBADG,iBAMP,KAAKF,KANE,CAGP0B,OAHO,aAGPA,OAHO,CAIPC,UAJO,aAIPA,UAJO,CAKPC,GALO,aAKPA,GALO,CAQX,6CAEM,KAAK,CAAC,mBAFZ,CAGM,IAAI,CAAC,QAHX,CAIM,IAAI,CAAG,CAAE1B,iBAAiB,CAAjBA,iBAAF,CAJb,CAKM,GAAG,gCAAQ0B,GAAR,MAAatB,IAAI,CAAE,yBAAnB,EALT,CAMM,OAAO,CAAG,KAAKR,YANrB,uCASU,KAAK,CAAC,mBAThB,CAUU,IAAI,CAAC,SAVf,CAWU,GAAG,gCAAQ8B,GAAR,MAAatB,IAAI,CAAE,0BAAnB,EAXb,EAac,MAAOoB,CAAAA,OAAP,GAAmB,QAAnB,8BACG,eADH,EACmB,OAAO,CAAGA,OAD7B,CACuC,MAAM,CAAC,QAD9C,GAGEA,OAhBhB,uCAoBU,KAAK,CAAC,mBApBhB,CAqBU,IAAI,CAAC,YArBf,CAsBU,GAAG,gCAAQE,GAAR,MAAatB,IAAI,CAAE,6BAAnB,EAtBb,EAwBcqB,UAxBd,GA4BH,CA9HL,6BAgII,wBAAgB,kBACc,KAAK3B,KADnB,CACJ6B,QADI,cACJA,QADI,CACMD,GADN,cACMA,GADN,IAEJ1B,CAAAA,iBAFI,CAEkB,KAAKE,KAFvB,CAEJF,iBAFI,CAGZ,GAAM4B,CAAAA,IAAI,CAAG,CAAE5B,iBAAiB,CAAjBA,iBAAF,CAAb,CACA,0CAEM,KAAK,CAAC,mBAFZ,CAGM,IAAI,CAAC,SAHX,CAIM,IAAI,CAAG4B,IAJb,CAKM,GAAG,gCAAQF,GAAR,MAAatB,IAAI,CAAE,0BAAnB,CAA+CwB,IAAI,CAAJA,IAA/C,EALT,EAOUD,QAPV,EAUH,CA9IL,sBAgJI,iBAAS,IACGD,CAAAA,GADH,CACW,KAAK5B,KADhB,CACG4B,GADH,CAEL,8CAEM,KAAK,CAAC,mBAFZ,CAGM,GAAG,CAAGA,GAHZ,CAIM,GAAG,CAAG,KAAK/B,oBAJjB,EAMU,KAAKkC,YAAL,EANV,CAOU,KAAKC,aAAL,EAPV,EAUH,CA5JL,0CAsCI,8CAAkF,IAAhD9B,CAAAA,iBAAgD,OAAhDA,iBAAgD,IAAzBG,CAAAA,qBAAyB,OAAzBA,qBAAyB,CAC9E,GAAIH,iBAAiB,GAAKG,qBAA1B,CAAiD,CAC7C,MAAO,CACHA,qBAAqB,CAAEH,iBADpB,CAEHA,iBAAiB,CAAjBA,iBAFG,CAAP,CAIH,CAED,MAAO,KAAP,CACH,CA/CL,2DAAaN,kB,CAmBFqC,Y,CAAe,CAClBN,UAAU,CAAE,EADM,CAElBD,OAAO,CAAE,EAFS,CAGlBxB,iBAAiB,CAAE,KAHD,CAIlBH,OAAO,CAAE,IAJS,C,CAtC1BmC,MAAM,CAACC,cAAP,CAAsBC,kBAAtB,CAA0C,MAA1C,CAAkD,CAAEC,KAAK,CAAE,mBAAT,CAAlD,E,oGAiLA,cAAezC,CAAAA,iBAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\n\nimport TextPlaceholder from 'Component/TextPlaceholder';\nimport { ChildrenType, MixType } from 'Type/Common';\nimport { getFixedElementHeight } from 'Util/CSS';\n\nimport './ExpandableContent.style';\n/** @namespace Component/ExpandableContent/Component */\nexport class ExpandableContent extends PureComponent {\n    static propTypes = {\n        isContentExpanded: PropTypes.bool,\n        heading: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n        subHeading: PropTypes.string,\n        children: ChildrenType.isRequired,\n        mix: MixType.isRequired,\n        onClick: (props, propName, componentName) => {\n            const propValue = props[propName];\n            if (propValue === null) {\n                return;\n            }\n            if (typeof propValue === 'function') {\n                return;\n            }\n            throw new Error(`${componentName} only accepts null or string`);\n        }\n    };\n\n    static defaultProps = {\n        subHeading: '',\n        heading: '',\n        isContentExpanded: false,\n        onClick: null\n    };\n\n    expandableContentRef = createRef();\n\n    __construct(props) {\n        super.__construct(props);\n        const { isContentExpanded } = this.props;\n        this.state = {\n            isContentExpanded,\n            // eslint-disable-next-line react/no-unused-state\n            prevIsContentExpanded: isContentExpanded\n        };\n    }\n\n    static getDerivedStateFromProps({ isContentExpanded }, { prevIsContentExpanded }) {\n        if (isContentExpanded !== prevIsContentExpanded) {\n            return {\n                prevIsContentExpanded: isContentExpanded,\n                isContentExpanded\n            };\n        }\n\n        return null;\n    }\n\n    scrollToExpandedContent() {\n        const { isContentExpanded } = this.state;\n        const elem = this.expandableContentRef && this.expandableContentRef.current;\n\n        if (isContentExpanded && !elem) {\n            return;\n        }\n\n        const elemToWindowTopDist = elem.getBoundingClientRect().top;\n        const windowToPageTopDist = document.body.getBoundingClientRect().top;\n        const topToElemDistance = elemToWindowTopDist - windowToPageTopDist;\n        const {\n            total: totalFixedElementHeight,\n            bottom: bottomFixedElementHeight\n        } = getFixedElementHeight();\n\n        const elemMaxOffsetHeight = screen.height > elem.offsetHeight + bottomFixedElementHeight\n            ? elem.offsetHeight\n            : screen.height - totalFixedElementHeight;\n        const scrollTo = topToElemDistance - (screen.height - bottomFixedElementHeight - elemMaxOffsetHeight);\n\n        // checking if button is in a view-port\n        if (-windowToPageTopDist >= scrollTo) {\n            return;\n        }\n\n        window.scrollTo({ behavior: 'smooth', top: scrollTo });\n    }\n\n    toggleExpand = () => {\n        const { onClick } = this.props;\n        if (onClick) {\n            onClick();\n            return;\n        }\n        this.setState(\n            ({ isContentExpanded }) => ({ isContentExpanded: !isContentExpanded }),\n            () => this.scrollToExpandedContent()\n        );\n    };\n\n    renderButton() {\n        const { isContentExpanded } = this.state;\n        const {\n            heading,\n            subHeading,\n            mix\n        } = this.props;\n\n        return (\n            <button\n              block=\"ExpandableContent\"\n              elem=\"Button\"\n              mods={ { isContentExpanded } }\n              mix={ { ...mix, elem: 'ExpandableContentButton' } }\n              onClick={ this.toggleExpand }\n            >\n                <span\n                  block=\"ExpandableContent\"\n                  elem=\"Heading\"\n                  mix={ { ...mix, elem: 'ExpandableContentHeading' } }\n                >\n                    { typeof heading === 'string' ? (\n                        <TextPlaceholder content={ heading } length=\"medium\" />\n                    ) : (\n                        heading\n                    ) }\n                </span>\n                <span\n                  block=\"ExpandableContent\"\n                  elem=\"SubHeading\"\n                  mix={ { ...mix, elem: 'ExpandableContentSubHeading' } }\n                >\n                    { subHeading }\n                </span>\n            </button>\n        );\n    }\n\n    renderContent() {\n        const { children, mix } = this.props;\n        const { isContentExpanded } = this.state;\n        const mods = { isContentExpanded };\n        return (\n            <div\n              block=\"ExpandableContent\"\n              elem=\"Content\"\n              mods={ mods }\n              mix={ { ...mix, elem: 'ExpandableContentContent', mods } }\n            >\n                { children }\n            </div>\n        );\n    }\n\n    render() {\n        const { mix } = this.props;\n        return (\n            <article\n              block=\"ExpandableContent\"\n              mix={ mix }\n              ref={ this.expandableContentRef }\n            >\n                { this.renderButton() }\n                { this.renderContent() }\n            </article>\n        );\n    }\n}\nexport default ExpandableContent;\n"]},"metadata":{},"sourceType":"module"}