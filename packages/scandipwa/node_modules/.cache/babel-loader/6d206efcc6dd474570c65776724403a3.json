{"ast":null,"code":"import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{DEFAULT_STATE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/NavigationAbstract/NavigationAbstract.container\";import{CHANGE_NAVIGATION_STATE,GOTO_PREVIOUS_NAVIGATION_STATE}from\"./Navigation.action\";export var TOP_NAVIGATION_TYPE='TOP_NAVIGATION_TYPE';export var BOTTOM_NAVIGATION_TYPE='BOTTOM_NAVIGATION_TYPE';/** @namespace Store/Navigation/Reducer/getInitialState */export var getInitialState=middleware(function(){var _ref;return _ref={},_defineProperty(_ref,TOP_NAVIGATION_TYPE,{navigationState:DEFAULT_STATE,navigationStateHistory:[DEFAULT_STATE]}),_defineProperty(_ref,BOTTOM_NAVIGATION_TYPE,{navigationState:DEFAULT_STATE,navigationStateHistory:[DEFAULT_STATE]}),_ref;},\"Store/Navigation/Reducer/getInitialState\");/** @namespace Store/Navigation/Reducer */export var NavigationReducer=middleware(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getInitialState();var action=arguments.length>1?arguments[1]:undefined;var navigationType=action.navigationType,navigationState=action.navigationState;var _state$navigationType=state[navigationType];_state$navigationType=_state$navigationType===void 0?{}:_state$navigationType;var navigationStateHistory=_state$navigationType.navigationStateHistory,prevNavigationState=_state$navigationType.navigationState;switch(action.type){case CHANGE_NAVIGATION_STATE:var nextName=navigationState.name,_navigationState$forc=navigationState.force,force=_navigationState$forc===void 0?false:_navigationState$forc;var prevName=prevNavigationState.name;if(nextName===prevName&&!force){navigationStateHistory[navigationStateHistory.length-1]=navigationState;}else{navigationStateHistory.push(navigationState);}return _objectSpread(_objectSpread({},state),{},_defineProperty({},navigationType,{navigationStateHistory:navigationStateHistory,navigationState:navigationState}));case GOTO_PREVIOUS_NAVIGATION_STATE:navigationStateHistory.pop();var newNavigationState=navigationStateHistory.slice(-1)[0];if(!newNavigationState){return state;}return _objectSpread(_objectSpread({},state),{},_defineProperty({},navigationType,{navigationStateHistory:navigationStateHistory,navigationState:newNavigationState}));default:return state;}},\"Store/Navigation/Reducer\");export default NavigationReducer;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/store/Navigation/Navigation.reducer.js"],"names":["DEFAULT_STATE","CHANGE_NAVIGATION_STATE","GOTO_PREVIOUS_NAVIGATION_STATE","TOP_NAVIGATION_TYPE","BOTTOM_NAVIGATION_TYPE","getInitialState","navigationState","navigationStateHistory","NavigationReducer","state","action","navigationType","prevNavigationState","type","nextName","name","force","prevName","length","push","pop","newNavigationState","slice"],"mappings":"mSAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,OACIA,aADJ,mHAIA,OACIC,uBADJ,CAEIC,8BAFJ,2BAKA,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,qBAA5B,CACP,MAAO,IAAMC,CAAAA,sBAAsB,CAAG,wBAA/B,CAEP,0DACA,MAAO,IAAMC,CAAAA,eAAe,YAAG,wDAC1BF,mBAD0B,CACJ,CACnBG,eAAe,CAAEN,aADE,CAEnBO,sBAAsB,CAAE,CAACP,aAAD,CAFL,CADI,uBAK1BI,sBAL0B,CAKD,CACtBE,eAAe,CAAEN,aADK,CAEtBO,sBAAsB,CAAE,CAACP,aAAD,CAFF,CALC,QAAH,4CAArB,CAWP,0CACA,MAAO,IAAMQ,CAAAA,iBAAiB,YAAG,UAG5B,IAFDC,CAAAA,KAEC,2DAFOJ,eAAe,EAEtB,IADDK,CAAAA,MACC,8CACOC,CAAAA,cADP,CAC2CD,MAD3C,CACOC,cADP,CACuBL,eADvB,CAC2CI,MAD3C,CACuBJ,eADvB,2BAQGG,KARH,CAIIE,cAJJ,uDAOO,EAPP,0BAKOJ,CAAAA,sBALP,uBAKOA,sBALP,CAMwBK,mBANxB,uBAMON,eANP,CAUD,OAAQI,MAAM,CAACG,IAAf,EACA,IAAKZ,CAAAA,uBAAL,IACkBa,CAAAA,QADlB,CAC8CR,eAD9C,CACYS,IADZ,uBAC8CT,eAD9C,CAC4BU,KAD5B,CAC4BA,KAD5B,gCACoC,KADpC,0BAEkBC,CAAAA,QAFlB,CAE+BL,mBAF/B,CAEYG,IAFZ,CAII,GAAID,QAAQ,GAAKG,QAAb,EAAyB,CAACD,KAA9B,CAAqC,CACjCT,sBAAsB,CAACA,sBAAsB,CAACW,MAAvB,CAAgC,CAAjC,CAAtB,CAA4DZ,eAA5D,CACH,CAFD,IAEO,CACHC,sBAAsB,CAACY,IAAvB,CAA4Bb,eAA5B,EACH,CAED,sCACOG,KADP,wBAEKE,cAFL,CAEsB,CACdJ,sBAAsB,CAAtBA,sBADc,CAEdD,eAAe,CAAfA,eAFc,CAFtB,GAQJ,IAAKJ,CAAAA,8BAAL,CACIK,sBAAsB,CAACa,GAAvB,GACA,GAAMC,CAAAA,kBAAkB,CAAGd,sBAAsB,CAACe,KAAvB,CAA6B,CAAC,CAA9B,EAAiC,CAAjC,CAA3B,CAEA,GAAI,CAACD,kBAAL,CAAyB,CACrB,MAAOZ,CAAAA,KAAP,CACH,CAED,sCACOA,KADP,wBAEKE,cAFL,CAEsB,CACdJ,sBAAsB,CAAtBA,sBADc,CAEdD,eAAe,CAAEe,kBAFH,CAFtB,GAQJ,QACI,MAAOZ,CAAAA,KAAP,CApCJ,CAsCH,CAnD6B,4BAAvB,CAqDP,cAAeD,CAAAA,iBAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport {\n    DEFAULT_STATE\n} from 'Component/NavigationAbstract/NavigationAbstract.container';\n\nimport {\n    CHANGE_NAVIGATION_STATE,\n    GOTO_PREVIOUS_NAVIGATION_STATE\n} from './Navigation.action';\n\nexport const TOP_NAVIGATION_TYPE = 'TOP_NAVIGATION_TYPE';\nexport const BOTTOM_NAVIGATION_TYPE = 'BOTTOM_NAVIGATION_TYPE';\n\n/** @namespace Store/Navigation/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    [TOP_NAVIGATION_TYPE]: {\n        navigationState: DEFAULT_STATE,\n        navigationStateHistory: [DEFAULT_STATE]\n    },\n    [BOTTOM_NAVIGATION_TYPE]: {\n        navigationState: DEFAULT_STATE,\n        navigationStateHistory: [DEFAULT_STATE]\n    }\n});\n\n/** @namespace Store/Navigation/Reducer */\nexport const NavigationReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const { navigationType, navigationState } = action;\n\n    const {\n        [navigationType]: {\n            navigationStateHistory,\n            navigationState: prevNavigationState\n        } = {}\n    } = state;\n\n    switch (action.type) {\n    case CHANGE_NAVIGATION_STATE:\n        const { name: nextName, force = false } = navigationState;\n        const { name: prevName } = prevNavigationState;\n\n        if (nextName === prevName && !force) {\n            navigationStateHistory[navigationStateHistory.length - 1] = navigationState;\n        } else {\n            navigationStateHistory.push(navigationState);\n        }\n\n        return {\n            ...state,\n            [navigationType]: {\n                navigationStateHistory,\n                navigationState\n            }\n        };\n\n    case GOTO_PREVIOUS_NAVIGATION_STATE:\n        navigationStateHistory.pop();\n        const newNavigationState = navigationStateHistory.slice(-1)[0];\n\n        if (!newNavigationState) {\n            return state;\n        }\n\n        return {\n            ...state,\n            [navigationType]: {\n                navigationStateHistory,\n                navigationState: newNavigationState\n            }\n        };\n\n    default:\n        return state;\n    }\n};\n\nexport default NavigationReducer;\n"]},"metadata":{},"sourceType":"module"}