{"ast":null,"code":"import _toConsumableArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{ONE_HUNDRED_PERCENT}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductActions/ProductActions.config\";import{showNotification as _showNotification}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";import{PriceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import{formatPrice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Price\";import ProductCustomizableOption from\"./ProductCustomizableOption.component\";/** @namespace Component/ProductCustomizableOption/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{showNotification:function showNotification(type,message){return dispatch(_showNotification(type,message));}};},\"Component/ProductCustomizableOption/Container/mapDispatchToProps\");/** @namespace Component/ProductCustomizableOption/Container/mapStateToProps */ // eslint-disable-next-line no-unused-vars\nexport var mapStateToProps=middleware(function(){return{};},\"Component/ProductCustomizableOption/Container/mapStateToProps\");/** @namespace Component/ProductCustomizableOption/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductCustomizableOptionContainer=/*#__PURE__*/function(_Extensible){_inherits(_ProductCustomizableOptionContainer,_Extensible);var _super=_createSuper(_ProductCustomizableOptionContainer);function _ProductCustomizableOptionContainer(){var _this;_classCallCheck(this,_ProductCustomizableOptionContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={textValue:'',selectedDropdownValue:0,textFieldValid:null};_this.containerFunctions={getDropdownOptions:_this.getDropdownOptions.bind(_assertThisInitialized(_this)),getSelectedCheckboxValue:_this.getSelectedCheckboxValue.bind(_assertThisInitialized(_this)),updateTextFieldValue:_this.updateTextFieldValue.bind(_assertThisInitialized(_this)),setDropdownValue:_this.setDropdownValue.bind(_assertThisInitialized(_this)),processFileUpload:_this.processFileUpload.bind(_assertThisInitialized(_this)),renderOptionLabel:_this.renderOptionLabel.bind(_assertThisInitialized(_this))};_this.containerProps=function(){return{optionType:_this.getOptionType(),requiredSelected:_this.getIsRequiredSelected()};};return _this;}_createClass(_ProductCustomizableOptionContainer,[{key:\"getOptionType\",value:function getOptionType(){var option=this.props.option;var type=option.type;return type;}},{key:\"getIsRequiredSelected\",value:function getIsRequiredSelected(){var _this$props=this.props,productOptionsData=_this$props.productOptionsData,_this$props$productOp=_this$props.productOptionsData,requiredOptions=_this$props$productOp.requiredOptions,productOptions=_this$props$productOp.productOptions,productOptionsMulti=_this$props$productOp.productOptionsMulti,option_id=_this$props.option.option_id;if(Object.keys(productOptionsData).length<1||!requiredOptions){return true;}var selectedItems=[].concat(_toConsumableArray(productOptions||[]),_toConsumableArray(productOptionsMulti||[]));var isRequired=requiredOptions.reduce(function(acc,item){if(item===option_id){acc.push(item);}return acc;},[]);if(!isRequired.length){return true;}var isRequiredSelected=selectedItems.reduce(function(acc,_ref){var option_id=_ref.option_id;if(isRequired[0]===option_id){acc.push(option_id);}return acc;},[]);return!!isRequiredSelected.length;}},{key:\"renderOptionLabel\",value:function renderOptionLabel(priceType,price,currency){var _this$props$price_ran=this.props.price_range;_this$props$price_ran=_this$props$price_ran===void 0?{}:_this$props$price_ran;var _this$props$price_ran2=_this$props$price_ran.minimum_price;_this$props$price_ran2=_this$props$price_ran2===void 0?{}:_this$props$price_ran2;var _this$props$price_ran3=_this$props$price_ran2.default_final_price_excl_tax;_this$props$price_ran3=_this$props$price_ran3===void 0?{}:_this$props$price_ran3;var _this$props$price_ran4=_this$props$price_ran3.value,value=_this$props$price_ran4===void 0?0:_this$props$price_ran4;var finalPriceSource=price===0?value:price;var finalPrice=formatPrice(finalPriceSource,currency);switch(priceType){case'PERCENT':var percentPrice=formatPrice(finalPriceSource/ONE_HUNDRED_PERCENT*value,currency);return\"\".concat(percentPrice,\" (\").concat(price,\"%)\");default:return finalPrice;}}},{key:\"getSelectedCheckboxValue\",value:function getSelectedCheckboxValue(value){var _this$props2=this.props,option=_this$props2.option,setSelectedCheckboxValues=_this$props2.setSelectedCheckboxValues;var option_id=option.option_id;setSelectedCheckboxValues(option_id,value);}},{key:\"updateTextFieldValue\",value:function updateTextFieldValue(value){var _this$props3=this.props,option=_this$props3.option,setCustomizableOptionTextFieldValue=_this$props3.setCustomizableOptionTextFieldValue;var option_id=option.option_id,required=option.required;setCustomizableOptionTextFieldValue(option_id,value);this.setState({fieldValue:value,textFieldValid:required?value.length>0:true});}},{key:\"setDropdownValue\",value:function setDropdownValue(value){var _this$props4=this.props,setSelectedDropdownValue=_this$props4.setSelectedDropdownValue,option=_this$props4.option;var selectedDropdownValue=this.state.selectedDropdownValue;if(selectedDropdownValue===value){setSelectedDropdownValue(null,option);this.setState({selectedDropdownValue:0});}else{setSelectedDropdownValue(value,option);this.setState({selectedDropdownValue:parseInt(value,10)});}}},{key:\"getDropdownOptions\",value:function getDropdownOptions(values){var _this2=this;return values.reduce(function(acc,_ref2){var option_type_id=_ref2.option_type_id,title=_ref2.title,price=_ref2.price,price_type=_ref2.price_type,currency=_ref2.currency;acc.push({id:option_type_id,name:title,value:option_type_id,label:\"\".concat(title,\" + \").concat(_this2.renderOptionLabel(price_type,price,currency))});return acc;},[]);}},{key:\"processFileUpload\",value:function processFileUpload(values){var _this$props5=this.props,option=_this$props5.option,_this$props5$option$d=_this$props5.option.data.file_extension,file_extension=_this$props5$option$d===void 0?'':_this$props5$option$d,setCustomizableOptionFileFieldValue=_this$props5.setCustomizableOptionFileFieldValue,showNotification=_this$props5.showNotification;var _values$type=values.type,type=_values$type===void 0?'':_values$type,name=values.name;if(file_extension&&!file_extension.split(', ').some(function(fileType){return type.includes(fileType);})){showNotification('error',__('File type is incorrect'));return false;}var reader=new FileReader();// eslint-disable-next-line func-names\nreader.onloadend=function(){setCustomizableOptionFileFieldValue(reader.result,option,name);};reader.readAsDataURL(values);return true;}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,ProductCustomizableOption,Object.assign({},this.props,this.state,this.containerFunctions,this.containerProps()));}}]);return _ProductCustomizableOptionContainer;}(Extensible(PureComponent));Object.defineProperty(_ProductCustomizableOptionContainer,'name',{value:'ProductCustomizableOptionContainer'});export var ProductCustomizableOptionContainer=middleware(_ProductCustomizableOptionContainer,\"Component/ProductCustomizableOption/Container\");export default connect(mapStateToProps,mapDispatchToProps)(ProductCustomizableOptionContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCustomizableOption/ProductCustomizableOption.container.js"],"names":["PureComponent","connect","ONE_HUNDRED_PERCENT","showNotification","PriceType","formatPrice","ProductCustomizableOption","mapDispatchToProps","dispatch","type","message","mapStateToProps","ProductCustomizableOptionContainer","state","textValue","selectedDropdownValue","textFieldValid","containerFunctions","getDropdownOptions","bind","getSelectedCheckboxValue","updateTextFieldValue","setDropdownValue","processFileUpload","renderOptionLabel","containerProps","optionType","getOptionType","requiredSelected","getIsRequiredSelected","option","props","productOptionsData","requiredOptions","productOptions","productOptionsMulti","option_id","Object","keys","length","selectedItems","isRequired","reduce","acc","item","push","isRequiredSelected","priceType","price","currency","price_range","minimum_price","default_final_price_excl_tax","value","finalPriceSource","finalPrice","percentPrice","setSelectedCheckboxValues","setCustomizableOptionTextFieldValue","required","setState","fieldValue","setSelectedDropdownValue","parseInt","values","option_type_id","title","price_type","id","name","label","data","file_extension","setCustomizableOptionFileFieldValue","split","some","fileType","includes","__","reader","FileReader","onloadend","result","readAsDataURL","defineProperty","_ProductCustomizableOptionContainer"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { ONE_HUNDRED_PERCENT } from 'Component/ProductActions/ProductActions.config';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { PriceType } from 'Type/ProductList';\nimport { formatPrice } from 'Util/Price';\n\nimport ProductCustomizableOption from './ProductCustomizableOption.component';\n\n/** @namespace Component/ProductCustomizableOption/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    showNotification: (type, message) => dispatch(showNotification(type, message))\n});\n\n/** @namespace Component/ProductCustomizableOption/Container/mapStateToProps */\n// eslint-disable-next-line no-unused-vars\nexport const mapStateToProps = () => ({});\n\n/** @namespace Component/ProductCustomizableOption/Container */\nexport class ProductCustomizableOptionContainer extends PureComponent {\n    static propTypes = {\n        option: PropTypes.object.isRequired,\n        productOptionsData: PropTypes.object.isRequired,\n        setSelectedCheckboxValues: PropTypes.func.isRequired,\n        setCustomizableOptionTextFieldValue: PropTypes.func.isRequired,\n        setCustomizableOptionFileFieldValue: PropTypes.func.isRequired,\n        setSelectedDropdownValue: PropTypes.func.isRequired,\n        showNotification: PropTypes.func.isRequired,\n        price_range: PriceType.isRequired,\n        type_id: PropTypes.string.isRequired\n    };\n\n    state = {\n        textValue: '',\n        selectedDropdownValue: 0,\n        textFieldValid: null\n    };\n\n    containerFunctions = {\n        getDropdownOptions: this.getDropdownOptions.bind(this),\n        getSelectedCheckboxValue: this.getSelectedCheckboxValue.bind(this),\n        updateTextFieldValue: this.updateTextFieldValue.bind(this),\n        setDropdownValue: this.setDropdownValue.bind(this),\n        processFileUpload: this.processFileUpload.bind(this),\n        renderOptionLabel: this.renderOptionLabel.bind(this)\n    };\n\n    containerProps = () => ({\n        optionType: this.getOptionType(),\n        requiredSelected: this.getIsRequiredSelected()\n    });\n\n    getOptionType() {\n        const { option } = this.props;\n        const { type } = option;\n\n        return type;\n    }\n\n    getIsRequiredSelected() {\n        const {\n            productOptionsData,\n            productOptionsData: {\n                requiredOptions,\n                productOptions,\n                productOptionsMulti\n            },\n            option: {\n                option_id\n            }\n        } = this.props;\n\n        if (Object.keys(productOptionsData).length < 1 || !requiredOptions) {\n            return true;\n        }\n\n        const selectedItems = [...productOptions || [], ...productOptionsMulti || []];\n        const isRequired = requiredOptions.reduce((acc, item) => {\n            if (item === option_id) {\n                acc.push(item);\n            }\n\n            return acc;\n        }, []);\n\n        if (!isRequired.length) {\n            return true;\n        }\n\n        const isRequiredSelected = selectedItems.reduce((acc, { option_id }) => {\n            if (isRequired[0] === option_id) {\n                acc.push(option_id);\n            }\n\n            return acc;\n        }, []);\n\n        return !!isRequiredSelected.length;\n    }\n\n    renderOptionLabel(priceType, price, currency) {\n        const {\n            price_range: {\n                minimum_price: {\n                    default_final_price_excl_tax: {\n                        value = 0\n                    } = {}\n                } = {}\n            } = {}\n        } = this.props;\n\n        const finalPriceSource = price === 0 ? value : price;\n        const finalPrice = formatPrice(finalPriceSource, currency);\n\n        switch (priceType) {\n        case 'PERCENT':\n            const percentPrice = formatPrice((finalPriceSource / ONE_HUNDRED_PERCENT) * value, currency);\n            return `${percentPrice} (${ price }%)`;\n        default:\n            return finalPrice;\n        }\n    }\n\n    getSelectedCheckboxValue(value) {\n        const { option, setSelectedCheckboxValues } = this.props;\n        const { option_id } = option;\n\n        setSelectedCheckboxValues(option_id, value);\n    }\n\n    updateTextFieldValue(value) {\n        const { option, setCustomizableOptionTextFieldValue } = this.props;\n        const { option_id, required } = option;\n\n        setCustomizableOptionTextFieldValue(option_id, value);\n        this.setState({\n            fieldValue: value,\n            textFieldValid: required ? value.length > 0 : true\n        });\n    }\n\n    setDropdownValue(value) {\n        const { setSelectedDropdownValue, option } = this.props;\n        const { selectedDropdownValue } = this.state;\n\n        if (selectedDropdownValue === value) {\n            setSelectedDropdownValue(null, option);\n            this.setState({ selectedDropdownValue: 0 });\n        } else {\n            setSelectedDropdownValue(value, option);\n            this.setState({ selectedDropdownValue: parseInt(value, 10) });\n        }\n    }\n\n    getDropdownOptions(values) {\n        return values.reduce((acc, {\n            option_type_id, title, price, price_type, currency\n        }) => {\n            acc.push({\n                id: option_type_id,\n                name: title,\n                value: option_type_id,\n                label: `${title} + ${this.renderOptionLabel(price_type, price, currency)}`\n            });\n\n            return acc;\n        }, []);\n    }\n\n    processFileUpload(values) {\n        const {\n            option,\n            option: { data: { file_extension = '' } },\n            setCustomizableOptionFileFieldValue,\n            showNotification\n        } = this.props;\n        const { type = '', name } = values;\n\n        if (file_extension && !file_extension.split(', ').some((fileType) => type.includes(fileType))) {\n            showNotification('error', __('File type is incorrect'));\n\n            return false;\n        }\n\n        const reader = new FileReader();\n        // eslint-disable-next-line func-names\n        reader.onloadend = function () {\n            setCustomizableOptionFileFieldValue(reader.result, option, name);\n        };\n\n        reader.readAsDataURL(values);\n\n        return true;\n    }\n\n    render() {\n        return (\n            <ProductCustomizableOption\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCustomizableOptionContainer);\n"]},"metadata":{},"sourceType":"module"}