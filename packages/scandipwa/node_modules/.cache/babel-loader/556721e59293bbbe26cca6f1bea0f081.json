{"ast":null,"code":"import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{SHARE_WISHLIST_POPUP_ID}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ShareWishlistPopup/ShareWishlistPopup.config\";import{showNotification as _showNotification}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";import{showPopup as _showPopup}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Popup/Popup.action\";import{ProductType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import{isSignedIn}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Auth\";import MyAccountMyWishlist from\"./MyAccountMyWishlist.component\";export var WishlistDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Wishlist/Wishlist.dispatcher\");/** @namespace Component/MyAccountMyWishlist/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{wishlistItems:state.WishlistReducer.productsInWishlist,isWishlistLoading:state.WishlistReducer.isLoading,isMobile:state.ConfigReducer.device.isMobile};},\"Component/MyAccountMyWishlist/Container/mapStateToProps\");/** @namespace Component/MyAccountMyWishlist/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{clearWishlist:function clearWishlist(){return WishlistDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.clearWishlist(dispatch);});},moveWishlistToCart:function moveWishlistToCart(){return WishlistDispatcher.then(function(_ref2){var dispatcher=_ref2.default;return dispatcher.moveWishlistToCart(dispatch);});},showPopup:function showPopup(payload){return dispatch(_showPopup(SHARE_WISHLIST_POPUP_ID,payload));},showNotification:function showNotification(message){return dispatch(_showNotification('success',message));},showError:function showError(message){return dispatch(_showNotification('error',message));},removeSelectedFromWishlist:function removeSelectedFromWishlist(options){return WishlistDispatcher.then(function(_ref3){var dispatcher=_ref3.default;return dispatcher.removeItemsFromWishlist(dispatch,options);});}};},\"Component/MyAccountMyWishlist/Container/mapDispatchToProps\");/** @namespace Component/MyAccountMyWishlist/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _MyAccountMyWishlistContainer=/*#__PURE__*/function(_Extensible){_inherits(_MyAccountMyWishlistContainer,_Extensible);var _super=_createSuper(_MyAccountMyWishlistContainer);function _MyAccountMyWishlistContainer(){var _this;_classCallCheck(this,_MyAccountMyWishlistContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLoading:false,loadingItemsMap:{}};_this.containerProps=function(){var _this$state=_this.state,isLoading=_this$state.isLoading,loadingItemsMap=_this$state.loadingItemsMap;var isWishlistLoading=_this.props.isWishlistLoading;var isWishlistEmpty=_this._getIsWishlistEmpty();return{isWishlistEmpty:isWishlistEmpty,isLoading:isLoading,isActionsDisabled:isWishlistLoading||isWishlistEmpty,loadingItemsMap:loadingItemsMap};};_this.containerFunctions=function(){return{removeAll:_this.removeAll,addAllToCart:_this.addAllToCart,shareWishlist:_this.shareWishlist,removeSelectedFromWishlist:_this.removeSelectedFromWishlist};};_this.addAllToCart=function(){var moveWishlistToCart=_this.props.moveWishlistToCart;if(!isSignedIn()){return null;}_this.setState({isLoading:true});return moveWishlistToCart().then(/** @namespace Component/MyAccountMyWishlist/Container/moveWishlistToCartThen */middleware(function(){return _this.showNotificationAndRemoveLoading('Available items moved to cart');},\"Component/MyAccountMyWishlist/Container/moveWishlistToCartThen\"),/** @namespace Component/MyAccountMyWishlist/Container/moveWishlistToCartCatch */middleware(function(){return _this.showErrorAndRemoveLoading('Failed to add items to cart');},\"Component/MyAccountMyWishlist/Container/moveWishlistToCartCatch\"));};_this.removeAll=function(){var clearWishlist=_this.props.clearWishlist;if(!isSignedIn()){return null;}_this.setState({isLoading:true});return clearWishlist().then(/** @namespace Component/MyAccountMyWishlist/Container/clearWishlistThen */middleware(function(){return _this.showNotificationAndRemoveLoading('Wishlist cleared');},\"Component/MyAccountMyWishlist/Container/clearWishlistThen\"));};_this.removeSelectedFromWishlist=function(selectedIdMap){var removeSelectedFromWishlist=_this.props.removeSelectedFromWishlist;var prevLoadingItemsMap=_this.state.loadingItemsMap;if(!isSignedIn()){return null;}var loadingItemsMap=_objectSpread({},prevLoadingItemsMap);selectedIdMap.forEach(function(id){loadingItemsMap[id]=true;});_this.setState({loadingItemsMap:loadingItemsMap});return removeSelectedFromWishlist(selectedIdMap);};_this.shareWishlist=function(){var showPopup=_this.props.showPopup;showPopup({title:__('Share Wishlist')});};_this._getIsWishlistEmpty=function(){var wishlistItems=_this.props.wishlistItems;return Object.entries(wishlistItems).length<=0;};return _this;}_createClass(_MyAccountMyWishlistContainer,[{key:\"showNotificationAndRemoveLoading\",value:function showNotificationAndRemoveLoading(message){var showNotification=this.props.showNotification;this.setState({isLoading:false});showNotification(message);}},{key:\"showErrorAndRemoveLoading\",value:function showErrorAndRemoveLoading(message){var showError=this.props.showError;this.setState({isLoading:false});showError(message);}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,MyAccountMyWishlist,Object.assign({},this.props,this.containerProps(),this.containerFunctions()));}}]);return _MyAccountMyWishlistContainer;}(Extensible(PureComponent));Object.defineProperty(_MyAccountMyWishlistContainer,'name',{value:'MyAccountMyWishlistContainer'});export var MyAccountMyWishlistContainer=middleware(_MyAccountMyWishlistContainer,\"Component/MyAccountMyWishlist/Container\");export default connect(mapStateToProps,mapDispatchToProps)(MyAccountMyWishlistContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/MyAccountMyWishlist/MyAccountMyWishlist.container.js"],"names":["PureComponent","connect","SHARE_WISHLIST_POPUP_ID","showNotification","showPopup","ProductType","isSignedIn","MyAccountMyWishlist","WishlistDispatcher","mapStateToProps","state","wishlistItems","WishlistReducer","productsInWishlist","isWishlistLoading","isLoading","isMobile","ConfigReducer","device","mapDispatchToProps","dispatch","clearWishlist","then","dispatcher","default","moveWishlistToCart","payload","message","showError","removeSelectedFromWishlist","options","removeItemsFromWishlist","MyAccountMyWishlistContainer","loadingItemsMap","containerProps","props","isWishlistEmpty","_getIsWishlistEmpty","isActionsDisabled","containerFunctions","removeAll","addAllToCart","shareWishlist","setState","showNotificationAndRemoveLoading","showErrorAndRemoveLoading","selectedIdMap","prevLoadingItemsMap","forEach","id","title","__","Object","entries","length","defineProperty","_MyAccountMyWishlistContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { SHARE_WISHLIST_POPUP_ID } from 'Component/ShareWishlistPopup/ShareWishlistPopup.config';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { showPopup } from 'Store/Popup/Popup.action';\nimport { ProductType } from 'Type/ProductList';\nimport { isSignedIn } from 'Util/Auth';\n\nimport MyAccountMyWishlist from './MyAccountMyWishlist.component';\n\nexport const WishlistDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Wishlist/Wishlist.dispatcher'\n);\n\n/** @namespace Component/MyAccountMyWishlist/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    wishlistItems: state.WishlistReducer.productsInWishlist,\n    isWishlistLoading: state.WishlistReducer.isLoading,\n    isMobile: state.ConfigReducer.device.isMobile\n});\n\n/** @namespace Component/MyAccountMyWishlist/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    clearWishlist: () => WishlistDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.clearWishlist(dispatch)\n    ),\n    moveWishlistToCart: () => WishlistDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.moveWishlistToCart(dispatch)\n    ),\n    showPopup: (payload) => dispatch(showPopup(SHARE_WISHLIST_POPUP_ID, payload)),\n    showNotification: (message) => dispatch(showNotification('success', message)),\n    showError: (message) => dispatch(showNotification('error', message)),\n    removeSelectedFromWishlist: (options) => WishlistDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.removeItemsFromWishlist(dispatch, options)\n    )\n});\n\n/** @namespace Component/MyAccountMyWishlist/Container */\nexport class MyAccountMyWishlistContainer extends PureComponent {\n    static propTypes = {\n        showPopup: PropTypes.func.isRequired,\n        showError: PropTypes.func.isRequired,\n        clearWishlist: PropTypes.func.isRequired,\n        showNotification: PropTypes.func.isRequired,\n        moveWishlistToCart: PropTypes.func.isRequired,\n        wishlistItems: PropTypes.objectOf(ProductType).isRequired,\n        isWishlistLoading: PropTypes.bool.isRequired,\n        removeSelectedFromWishlist: PropTypes.func.isRequired\n    };\n\n    state = {\n        isLoading: false,\n        loadingItemsMap: {}\n    };\n\n    containerProps = () => {\n        const { isLoading, loadingItemsMap } = this.state;\n        const { isWishlistLoading } = this.props;\n\n        const isWishlistEmpty = this._getIsWishlistEmpty();\n\n        return {\n            isWishlistEmpty,\n            isLoading,\n            isActionsDisabled: isWishlistLoading || isWishlistEmpty,\n            loadingItemsMap\n        };\n    };\n\n    containerFunctions = () => ({\n        removeAll: this.removeAll,\n        addAllToCart: this.addAllToCart,\n        shareWishlist: this.shareWishlist,\n        removeSelectedFromWishlist: this.removeSelectedFromWishlist\n    });\n\n    addAllToCart = () => {\n        const { moveWishlistToCart } = this.props;\n\n        if (!isSignedIn()) {\n            return null;\n        }\n\n        this.setState({ isLoading: true });\n\n        return moveWishlistToCart().then(\n            /** @namespace Component/MyAccountMyWishlist/Container/moveWishlistToCartThen */\n            () => this.showNotificationAndRemoveLoading('Available items moved to cart'),\n            /** @namespace Component/MyAccountMyWishlist/Container/moveWishlistToCartCatch */\n            () => this.showErrorAndRemoveLoading('Failed to add items to cart')\n        );\n    };\n\n    removeAll = () => {\n        const { clearWishlist } = this.props;\n\n        if (!isSignedIn()) {\n            return null;\n        }\n\n        this.setState({ isLoading: true });\n\n        return clearWishlist().then(\n            /** @namespace Component/MyAccountMyWishlist/Container/clearWishlistThen */\n            () => this.showNotificationAndRemoveLoading('Wishlist cleared')\n        );\n    };\n\n    removeSelectedFromWishlist = (selectedIdMap) => {\n        const { removeSelectedFromWishlist } = this.props;\n        const { loadingItemsMap: prevLoadingItemsMap } = this.state;\n\n        if (!isSignedIn()) {\n            return null;\n        }\n\n        const loadingItemsMap = { ...prevLoadingItemsMap };\n\n        selectedIdMap.forEach((id) => {\n            loadingItemsMap[id] = true;\n        });\n\n        this.setState({ loadingItemsMap });\n\n        return removeSelectedFromWishlist(selectedIdMap);\n    };\n\n    shareWishlist = () => {\n        const { showPopup } = this.props;\n        showPopup({ title: __('Share Wishlist') });\n    };\n\n    _getIsWishlistEmpty = () => {\n        const { wishlistItems } = this.props;\n\n        return Object.entries(wishlistItems).length <= 0;\n    };\n\n    showNotificationAndRemoveLoading(message) {\n        const { showNotification } = this.props;\n        this.setState({ isLoading: false });\n        showNotification(message);\n    }\n\n    showErrorAndRemoveLoading(message) {\n        const { showError } = this.props;\n        this.setState({ isLoading: false });\n        showError(message);\n    }\n\n    render() {\n        return (\n            <MyAccountMyWishlist\n              { ...this.props }\n              { ...this.containerProps() }\n              { ...this.containerFunctions() }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MyAccountMyWishlistContainer);\n"]},"metadata":{},"sourceType":"module"}