{"ast":null,"code":"import _regeneratorRuntime from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import loadTranslation from\"./loadTranslation\";import localeMap from\"./localeMap\";var I18n=/*#__PURE__*/function(){function I18n(){var _this=this;_classCallCheck(this,I18n);this.currentTranslation={};this.setLocale=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(locale){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(locale===_this.currentLocale)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:// Set the new locale code\n_this.currentLocale=locale;// Update the current translation map\n_this.isLoading=true;_context.next=6;return loadTranslation(locale);case 6:_this.currentTranslation=_context.sent;_this.isLoading=false;// Rerender the app for changes to get applied\n_this.rerenderApplication();case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();if(window.defaultLocale){this.setLocale(window.defaultLocale);}}_createClass(I18n,[{key:\"getLocaleList\",value:function getLocaleList(){return Object.keys(localeMap);}},{key:\"getCurrentLocale\",value:function getCurrentLocale(){return this.currentLocale;}},{key:\"init\",value:/**\n     * This method should be called on app init\n     * @param {function} rerenderApplication\n     */function init(rerenderApplication){if(typeof rerenderApplication!=='function'){throw new Error(\"The root component's forceUpdate should be supplied to the i18n init sequence\");}this.rerenderApplication=rerenderApplication;}}]);return I18n;}();export default new I18n();","map":{"version":3,"sources":["/home/marketihor/scandipwa/node_modules/@scandipwa/webpack-i18n-runtime/src/util/i18n.js"],"names":["loadTranslation","localeMap","I18n","currentTranslation","setLocale","locale","currentLocale","isLoading","rerenderApplication","window","defaultLocale","Object","keys","Error"],"mappings":"+jBAAA,MAAOA,CAAAA,eAAP,yBACA,MAAOC,CAAAA,SAAP,mB,GAEMC,CAAAA,I,yBACF,eAAc,gDAMdC,kBANc,CAMO,EANP,MAgBdC,SAhBc,0FAgBF,iBAAOC,MAAP,uHAEJA,MAAM,GAAK,KAAI,CAACC,aAFZ,kEAMR;AACA,KAAI,CAACA,aAAL,CAAqBD,MAArB,CAEA;AACA,KAAI,CAACE,SAAL,CAAiB,IAAjB,CAVQ,sBAWwBP,CAAAA,eAAe,CAACK,MAAD,CAXvC,QAWR,KAAI,CAACF,kBAXG,eAYR,KAAI,CAACI,SAAL,CAAiB,KAAjB,CAEA;AACA,KAAI,CAACC,mBAAL,GAfQ,sDAhBE,+DACV,GAAIC,MAAM,CAACC,aAAX,CAA0B,CACtB,KAAKN,SAAL,CAAeK,MAAM,CAACC,aAAtB,EACH,CACJ,C,8CAID,wBAAgB,CACZ,MAAOC,CAAAA,MAAM,CAACC,IAAP,CAAYX,SAAZ,CAAP,CACH,C,gCAED,2BAAmB,CACf,MAAO,MAAKK,aAAZ,CACH,C,oBAoBD;AACJ;AACA;AACA,OACI,cAAKE,mBAAL,CAA0B,CACtB,GAAI,MAAOA,CAAAA,mBAAP,GAA+B,UAAnC,CAA+C,CAC3C,KAAM,IAAIK,CAAAA,KAAJ,CAAU,+EAAV,CAAN,CACH,CAED,KAAKL,mBAAL,CAA2BA,mBAA3B,CACH,C,oBAGL,cAAe,IAAIN,CAAAA,IAAJ,EAAf","sourcesContent":["import loadTranslation from './loadTranslation';\nimport localeMap from './localeMap';\n\nclass I18n {\n    constructor() {\n        if (window.defaultLocale) {\n            this.setLocale(window.defaultLocale);\n        }\n    }\n\n    currentTranslation = {};\n\n    getLocaleList() {\n        return Object.keys(localeMap);\n    }\n\n    getCurrentLocale() {\n        return this.currentLocale;\n    }\n\n    setLocale = async (locale) => {\n        // Ignore same locale\n        if (locale === this.currentLocale) {\n            return;\n        }\n\n        // Set the new locale code\n        this.currentLocale = locale;\n\n        // Update the current translation map\n        this.isLoading = true;\n        this.currentTranslation = await loadTranslation(locale);\n        this.isLoading = false;\n\n        // Rerender the app for changes to get applied\n        this.rerenderApplication();\n    };\n\n    /**\n     * This method should be called on app init\n     * @param {function} rerenderApplication\n     */\n    init(rerenderApplication) {\n        if (typeof rerenderApplication !== 'function') {\n            throw new Error(\"The root component's forceUpdate should be supplied to the i18n init sequence\");\n        }\n\n        this.rerenderApplication = rerenderApplication;\n    }\n}\n\nexport default new I18n();\n"]},"metadata":{},"sourceType":"module"}