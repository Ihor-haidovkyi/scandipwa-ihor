{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _get from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{Children,cloneElement,createRef,PureComponent}from'react';import{ChildrenType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";/** @namespace Component/ClickOutside/Component */export var _ClickOutside=/*#__PURE__*/function(_Extensible){_inherits(_ClickOutside,_Extensible);var _super=_createSuper(_ClickOutside);function _ClickOutside(){var _this;_classCallCheck(this,_ClickOutside);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleClick=function(_ref){var target=_ref.target;var onClick=_this.props.onClick;if(_this.childrenRefs.every(function(ref){var _ref$current,_ref$current$overlayR;var elementRef=((_ref$current=ref.current)===null||_ref$current===void 0?void 0:(_ref$current$overlayR=_ref$current.overlayRef)===null||_ref$current$overlayR===void 0?void 0:_ref$current$overlayR.current)||ref.current;return!elementRef.contains(target);})){onClick();}};return _this;}_createClass(_ClickOutside,[{key:\"__construct\",value:function __construct(props){_get(_getPrototypeOf(_ClickOutside.prototype),\"__construct\",this).call(this,props);var children=this.props.children;this.childrenRefs=Children.map(children,function(){return/*#__PURE__*/createRef();});}},{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener('click',this.handleClick);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('click',this.handleClick);}},{key:\"render\",value:function render(){var _this2=this;var children=this.props.children;return Children.map(children,function(element,idx){return/*#__PURE__*/cloneElement(element,{ref:_this2.childrenRefs[idx]});});}}]);return _ClickOutside;}(Extensible(PureComponent));_ClickOutside.defaultProps={onClick:function onClick(){},children:[]};Object.defineProperty(_ClickOutside,'name',{value:'ClickOutside'});export var ClickOutside=middleware(_ClickOutside,\"Component/ClickOutside/Component\");export default ClickOutside;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ClickOutside/ClickOutside.component.js"],"names":["Children","cloneElement","createRef","PureComponent","ChildrenType","ClickOutside","handleClick","target","onClick","props","childrenRefs","every","ref","elementRef","current","overlayRef","contains","children","map","document","addEventListener","removeEventListener","element","idx","defaultProps","Object","defineProperty","_ClickOutside","value"],"mappings":"o0BAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAGA,OACIA,QADJ,CAEIC,YAFJ,CAGIC,SAHJ,CAIIC,aAJJ,KAKO,OALP,CAOA,OAASC,YAAT,qEAEA,kDACA,UAAaC,CAAAA,aAAb,yVA8BIC,WA9BJ,CA8BkB,cAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,IAClBC,CAAAA,OADkB,CACN,MAAKC,KADC,CAClBD,OADkB,CAG1B,GAAI,MAAKE,YAAL,CAAkBC,KAAlB,CACA,SAACC,GAAD,CAAS,wCACL,GAAMC,CAAAA,UAAU,CAAG,eAAAD,GAAG,CAACE,OAAJ,2EAAaC,UAAb,sEAAyBD,OAAzB,GAAoCF,GAAG,CAACE,OAA3D,CACA,MAAO,CAACD,UAAU,CAACG,QAAX,CAAoBT,MAApB,CAAR,CACH,CAJD,CAAJ,CAKG,CACCC,OAAO,GACV,CACJ,CAzCL,oEAWI,qBAAYC,KAAZ,CAAmB,CACf,4EAAkBA,KAAlB,EADe,GAGPQ,CAAAA,QAHO,CAGM,KAAKR,KAHX,CAGPQ,QAHO,CAKf,KAAKP,YAAL,CAAoBV,QAAQ,CAACkB,GAAT,CAChBD,QADgB,CAEhB,8BAAMf,SAAS,EAAf,EAFgB,CAApB,CAIH,CApBL,iCAsBI,4BAAoB,CAChBiB,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAmC,KAAKd,WAAxC,EACH,CAxBL,oCA0BI,+BAAuB,CACnBa,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,CAAsC,KAAKf,WAA3C,EACH,CA5BL,sBA2CI,iBAAS,oBACGW,CAAAA,QADH,CACgB,KAAKR,KADrB,CACGQ,QADH,CAGL,MAAOjB,CAAAA,QAAQ,CAACkB,GAAT,CAAaD,QAAb,CAAuB,SAACK,OAAD,CAAUC,GAAV,qBAC1BtB,YAAY,CAACqB,OAAD,CAAU,CAAEV,GAAG,CAAE,MAAI,CAACF,YAAL,CAAkBa,GAAlB,CAAP,CAAV,CADc,EAAvB,CAAP,CAGH,CAjDL,sDAAalB,a,CAMFmB,Y,CAAe,CAClBhB,OAAO,CAAE,kBAAM,CAAE,CADC,CAElBS,QAAQ,CAAE,EAFQ,C,CA5B1BQ,MAAM,CAACC,cAAP,CAAsBC,aAAtB,CAAqC,MAArC,CAA6C,CAAEC,KAAK,CAAE,cAAT,CAA7C,E,qFA0EA,cAAevB,CAAAA,YAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport {\n    Children,\n    cloneElement,\n    createRef,\n    PureComponent\n} from 'react';\n\nimport { ChildrenType } from 'Type/Common';\n\n/** @namespace Component/ClickOutside/Component */\nexport class ClickOutside extends PureComponent {\n    static propTypes = {\n        onClick: PropTypes.func,\n        children: ChildrenType\n    };\n\n    static defaultProps = {\n        onClick: () => {},\n        children: []\n    };\n\n    __construct(props) {\n        super.__construct(props);\n\n        const { children } = this.props;\n\n        this.childrenRefs = Children.map(\n            children,\n            () => createRef()\n        );\n    }\n\n    componentDidMount() {\n        document.addEventListener('click', this.handleClick);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.handleClick);\n    }\n\n    handleClick = ({ target }) => {\n        const { onClick } = this.props;\n\n        if (this.childrenRefs.every(\n            (ref) => {\n                const elementRef = ref.current?.overlayRef?.current || ref.current;\n                return !elementRef.contains(target);\n            }\n        )) {\n            onClick();\n        }\n    };\n\n    render() {\n        const { children } = this.props;\n\n        return Children.map(children, (element, idx) => (\n            cloneElement(element, { ref: this.childrenRefs[idx] })\n        ));\n    }\n}\n\nexport default ClickOutside;\n"]},"metadata":{},"sourceType":"module"}