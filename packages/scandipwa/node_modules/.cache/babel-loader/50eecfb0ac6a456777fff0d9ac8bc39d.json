{"ast":null,"code":"import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{showNotification as _showNotification}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";import{DeviceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Device\";import{ProductType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import{BUNDLE,CONFIGURABLE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Product\";import ProductCompareItem from\"./ProductCompareItem.component\";export var ProductCompareDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductCompare/ProductCompare.dispatcher\");/** @namespace Component/ProductCompareItem/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{device:state.ConfigReducer.device};},\"Component/ProductCompareItem/Container/mapStateToProps\");/** @namespace Component/ProductCompareItem/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{removeComparedProduct:function removeComparedProduct(productId){return ProductCompareDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.removeComparedProduct(productId,dispatch);});},showNotification:function showNotification(type,message){return dispatch(_showNotification(type,message));}};},\"Component/ProductCompareItem/Container/mapDispatchToProps\");/** @namespace Component/ProductCompareItem/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductCompareItemContainer=/*#__PURE__*/function(_Extensible){_inherits(_ProductCompareItemContainer,_Extensible);var _super=_createSuper(_ProductCompareItemContainer);function _ProductCompareItemContainer(){var _this;_classCallCheck(this,_ProductCompareItemContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLoading:false};_this.containerFunctions={removeComparedProduct:_this.removeComparedProduct.bind(_assertThisInitialized(_this)),getGroupedProductQuantity:_this.getGroupedProductQuantity.bind(_assertThisInitialized(_this)),getProductOptionsData:_this.getProductOptionsData.bind(_assertThisInitialized(_this)),overriddenAddToCartBtnHandler:_this.overriddenAddToCartBtnHandler.bind(_assertThisInitialized(_this))};_this.containerProps={imgUrl:_this.getProductImage(),overrideAddToCartBtnBehavior:_this.getOverrideAddToCartBtnBehavior(),linkTo:_this.getLinkTo()};return _this;}_createClass(_ProductCompareItemContainer,[{key:\"removeComparedProduct\",value:function(){var _removeComparedProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props,_this$props$product,id,removeComparedProduct;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=this.props,_this$props$product=_this$props.product;_this$props$product=_this$props$product===void 0?{}:_this$props$product;id=_this$props$product.id,removeComparedProduct=_this$props.removeComparedProduct;this.setState({isLoading:true});_context.next=6;return removeComparedProduct(id);case 6:case\"end\":return _context.stop();}}},_callee,this);}));function removeComparedProduct(){return _removeComparedProduct.apply(this,arguments);}return removeComparedProduct;}()},{key:\"getGroupedProductQuantity\",value:function getGroupedProductQuantity(){var _this$props$product2=this.props.product;_this$props$product2=_this$props$product2===void 0?{}:_this$props$product2;var items=_this$props$product2.items;if(!items){return{};}return items.reduce(function(result,item){var _item$product=item.product;_item$product=_item$product===void 0?{}:_item$product;var id=_item$product.id;Object.assign(result,_defineProperty({},id,1));return result;},{});}},{key:\"getProductOptionsData\",value:function getProductOptionsData(){var options=this.props.product.options;if(!options){return{requiredOptions:[]};}return{requiredOptions:options.map(function(_ref2){var option_id=_ref2.option_id,required=_ref2.required;return required?option_id:null;}).filter(function(item){return!!item;})};}},{key:\"getProductImage\",value:function getProductImage(){var _this$props2=this.props,_this$props2$product=_this$props2.product;_this$props2$product=_this$props2$product===void 0?{}:_this$props2$product;var thumbnail=_this$props2$product.thumbnail,small_image=_this$props2$product.small_image,_this$props2$device=_this$props2.device;_this$props2$device=_this$props2$device===void 0?{}:_this$props2$device;var isMobile=_this$props2$device.isMobile;if(isMobile){return small_image.url;}return thumbnail.url;}},{key:\"getLinkTo\",value:function getLinkTo(){var _this$props3=this.props,url=_this$props3.product.url,product=_this$props3.product;return{pathname:url,state:{product:product}};}},{key:\"getOverrideAddToCartBtnBehavior\",value:function getOverrideAddToCartBtnBehavior(){var _this$props$product3=this.props.product,type_id=_this$props$product3.type_id,options=_this$props$product3.options;var types=[BUNDLE,CONFIGURABLE];return!!(types.indexOf(type_id)!==-1||(options===null||options===void 0?void 0:options.length));}},{key:\"overriddenAddToCartBtnHandler\",value:function overriddenAddToCartBtnHandler(){var showNotification=this.props.showNotification;showNotification('info',__('Please select required option!'));}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,ProductCompareItem,Object.assign({},this.props,this.state,this.containerProps,this.containerFunctions));}}]);return _ProductCompareItemContainer;}(Extensible(PureComponent));Object.defineProperty(_ProductCompareItemContainer,'name',{value:'ProductCompareItemContainer'});export var ProductCompareItemContainer=middleware(_ProductCompareItemContainer,\"Component/ProductCompareItem/Container\");export default connect(mapStateToProps,mapDispatchToProps)(ProductCompareItemContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCompareItem/ProductCompareItem.container.js"],"names":["PureComponent","connect","showNotification","DeviceType","ProductType","BUNDLE","CONFIGURABLE","ProductCompareItem","ProductCompareDispatcher","mapStateToProps","state","device","ConfigReducer","mapDispatchToProps","dispatch","removeComparedProduct","productId","then","dispatcher","default","type","message","ProductCompareItemContainer","isLoading","containerFunctions","bind","getGroupedProductQuantity","getProductOptionsData","overriddenAddToCartBtnHandler","containerProps","imgUrl","getProductImage","overrideAddToCartBtnBehavior","getOverrideAddToCartBtnBehavior","linkTo","getLinkTo","props","product","id","setState","items","reduce","result","item","Object","assign","options","requiredOptions","map","option_id","required","filter","thumbnail","small_image","isMobile","url","pathname","type_id","types","indexOf","length","__","defineProperty","_ProductCompareItemContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { DeviceType } from 'Type/Device';\nimport { ProductType } from 'Type/ProductList';\nimport { BUNDLE, CONFIGURABLE } from 'Util/Product';\n\nimport ProductCompareItem from './ProductCompareItem.component';\n\nexport const ProductCompareDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/ProductCompare/ProductCompare.dispatcher'\n);\n\n/** @namespace Component/ProductCompareItem/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    device: state.ConfigReducer.device\n});\n\n/** @namespace Component/ProductCompareItem/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    removeComparedProduct: (productId) => ProductCompareDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.removeComparedProduct(productId, dispatch)\n    ),\n    showNotification: (type, message) => dispatch(showNotification(type, message))\n});\n\n/** @namespace Component/ProductCompareItem/Container */\nexport class ProductCompareItemContainer extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        removeComparedProduct: PropTypes.func.isRequired,\n        device: DeviceType.isRequired,\n        showNotification: PropTypes.func.isRequired\n    };\n\n    state = {\n        isLoading: false\n    };\n\n    containerFunctions = {\n        removeComparedProduct: this.removeComparedProduct.bind(this),\n        getGroupedProductQuantity: this.getGroupedProductQuantity.bind(this),\n        getProductOptionsData: this.getProductOptionsData.bind(this),\n        overriddenAddToCartBtnHandler: this.overriddenAddToCartBtnHandler.bind(this)\n    };\n\n    containerProps = {\n        imgUrl: this.getProductImage(),\n        overrideAddToCartBtnBehavior: this.getOverrideAddToCartBtnBehavior(),\n        linkTo: this.getLinkTo()\n    };\n\n    async removeComparedProduct() {\n        const {\n            product: { id } = {},\n            removeComparedProduct\n        } = this.props;\n\n        this.setState({ isLoading: true });\n        await removeComparedProduct(id);\n    }\n\n    getGroupedProductQuantity() {\n        const { product: { items } = {} } = this.props;\n\n        if (!items) {\n            return {};\n        }\n\n        return items.reduce((result, item) => {\n            const { product: { id } = {} } = item;\n            Object.assign(result, { [id]: 1 });\n            return result;\n        }, {});\n    }\n\n    getProductOptionsData() {\n        const { product: { options } } = this.props;\n\n        if (!options) {\n            return { requiredOptions: [] };\n        }\n\n        return {\n            requiredOptions: options\n                .map(({ option_id, required }) => (required ? option_id : null))\n                .filter((item) => !!item)\n        };\n    }\n\n    getProductImage() {\n        const {\n            product: {\n                thumbnail,\n                small_image\n            } = {},\n            device: {\n                isMobile\n            } = {}\n        } = this.props;\n\n        if (isMobile) {\n            return small_image.url;\n        }\n\n        return thumbnail.url;\n    }\n\n    getLinkTo() {\n        const { product: { url }, product } = this.props;\n\n        return {\n            pathname: url,\n            state: { product }\n        };\n    }\n\n    getOverrideAddToCartBtnBehavior() {\n        const { product: { type_id, options } } = this.props;\n        const types = [BUNDLE, CONFIGURABLE];\n\n        return !!(types.indexOf(type_id) !== -1 || options?.length);\n    }\n\n    overriddenAddToCartBtnHandler() {\n        const { showNotification } = this.props;\n        showNotification('info', __('Please select required option!'));\n    }\n\n    render() {\n        return (\n            <ProductCompareItem\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerProps }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCompareItemContainer);\n"]},"metadata":{},"sourceType":"module"}