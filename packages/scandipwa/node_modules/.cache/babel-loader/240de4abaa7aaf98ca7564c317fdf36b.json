{"ast":null,"code":"import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{connect}from'react-redux';// TODO: try SEARCH type\nimport{CATEGORY}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Header/Header.config\";import{LOADING_TIME}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/CategoryPage/CategoryPage.config\";import{CategoryPageContainer}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/CategoryPage/CategoryPage.container\";import{updateCurrentCategory as _updateCurrentCategory}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Category/Category.action\";import{updateMeta as _updateMeta}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Meta/Meta.action\";import{changeNavigationState as _changeNavigationState}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Navigation/Navigation.action\";import{BOTTOM_NAVIGATION_TYPE,TOP_NAVIGATION_TYPE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Navigation/Navigation.reducer\";import{setBigOfflineNotice as _setBigOfflineNotice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Offline/Offline.action\";import{toggleOverlayByKey as _toggleOverlayByKey}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Overlay/Overlay.action\";import{updateInfoLoadStatus}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductListInfo/ProductListInfo.action\";import{debounce}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";import{appendWithStoreCode}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Url\";import SearchPage from\"./SearchPage.component\";export var BreadcrumbsDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Breadcrumbs/Breadcrumbs.dispatcher\");export var CategoryDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Category/Category.dispatcher\");export var MetaDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Meta/Meta.dispatcher\");export var NoMatchDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/NoMatch/NoMatch.dispatcher\");export var ProductListInfoDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductListInfo/ProductListInfo.dispatcher\");/** @namespace Route/SearchPage/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{category:state.CategoryReducer.category,isOffline:state.OfflineReducer.isOffline,filters:state.ProductListInfoReducer.filters,currentArgs:state.ProductListReducer.currentArgs,sortFields:state.ProductListInfoReducer.sortFields,minPriceRange:state.ProductListInfoReducer.minPrice,maxPriceRange:state.ProductListInfoReducer.maxPrice,isInfoLoading:state.ProductListInfoReducer.isLoading,totalPages:state.ProductListReducer.totalPages,device:state.ConfigReducer.device};},\"Route/SearchPage/Container/mapStateToProps\");/** @namespace Route/SearchPage/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{toggleOverlayByKey:function toggleOverlayByKey(key){return dispatch(_toggleOverlayByKey(key));},changeHeaderState:function changeHeaderState(state){return dispatch(_changeNavigationState(TOP_NAVIGATION_TYPE,state));},changeNavigationState:function changeNavigationState(state){return dispatch(_changeNavigationState(BOTTOM_NAVIGATION_TYPE,state));},requestCategory:function requestCategory(options){return CategoryDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.handleData(dispatch,options);});},updateBreadcrumbs:function updateBreadcrumbs(breadcrumbs){return BreadcrumbsDispatcher.then(function(_ref2){var dispatcher=_ref2.default;return dispatcher.update(breadcrumbs,dispatch);});},requestProductListInfo:function requestProductListInfo(options){return ProductListInfoDispatcher.then(function(_ref3){var dispatcher=_ref3.default;return dispatcher.handleData(dispatch,options);});},updateLoadStatus:function updateLoadStatus(isLoading){return dispatch(updateInfoLoadStatus(isLoading));},updateNoMatch:function updateNoMatch(options){return NoMatchDispatcher.then(function(_ref4){var dispatcher=_ref4.default;return dispatcher.updateNoMatch(dispatch,options);});},setBigOfflineNotice:function setBigOfflineNotice(isBig){return dispatch(_setBigOfflineNotice(isBig));},updateMetaFromCategory:function updateMetaFromCategory(category){return MetaDispatcher.then(function(_ref5){var dispatcher=_ref5.default;return dispatcher.updateWithCategory(category,dispatch);});},updateCurrentCategory:function updateCurrentCategory(category){return dispatch(_updateCurrentCategory(category));},updateMeta:function updateMeta(meta){return dispatch(_updateMeta(meta));}};},\"Route/SearchPage/Container/mapDispatchToProps\");/** @namespace Route/SearchPage/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _SearchPageContainer=/*#__PURE__*/function(_Extensible){_inherits(_SearchPageContainer,_Extensible);var _super=_createSuper(_SearchPageContainer);function _SearchPageContainer(){_classCallCheck(this,_SearchPageContainer);return _super.apply(this,arguments);}_createClass(_SearchPageContainer,[{key:\"updateMeta\",value:function updateMeta(){var updateMeta=this.props.updateMeta;updateMeta({title:__('Search')});}},{key:\"updateBreadcrumbs\",value:function updateBreadcrumbs(){var updateBreadcrumbs=this.props.updateBreadcrumbs;var search=this.getSearchParam();updateBreadcrumbs([{url:'',name:search.toUpperCase()}]);}},{key:\"updateHeaderState\",value:function updateHeaderState(){var _history$location;var _this$props=this.props,changeHeaderState=_this$props.changeHeaderState,history=_this$props.history;var _ref6=(history===null||history===void 0?void 0:(_history$location=history.location)===null||_history$location===void 0?void 0:_history$location.state)||{},category=_ref6.category;var search=this.getSearchParam();var onBackClick=category?function(){return history.goBack();}:function(){return history.push(appendWithStoreCode('/menu'));};changeHeaderState({name:CATEGORY,title:search,onBackClick:onBackClick});}},{key:\"getIsMatchingListFilter\",value:function getIsMatchingListFilter(){var currentSearch=this.props.currentArgs.search;var search=this.getSearchParam();// if the search requested is equal to search from URL\nreturn search===currentSearch;}},{key:\"getIsMatchingInfoFilter\",value:function getIsMatchingInfoFilter(){var currentSearch=this.props.currentArgs.search;var search=this.getSearchParam();// if the search requested is equal to search from URL\nreturn search===currentSearch;}},{key:\"componentDidMount\",value:function componentDidMount(){this.updateMeta();this.updateBreadcrumbs();this.updateHeaderState();this.updateNavigationState();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props2=this.props,isOffline=_this$props2.isOffline,query=_this$props2.match.params.query;var prevQuery=prevProps.match.params.query;if(isOffline){debounce(this.setOfflineNoticeSize,LOADING_TIME)();}/**\n         * If search query has changed - update related information\n         */if(query!==prevQuery){this.updateMeta();this.updateBreadcrumbs();this.updateHeaderState();}}},{key:\"getSearchParam\",value:function getSearchParam(){var query=this.props.match.params.query;return query;}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,SearchPage,Object.assign({},this.props,this.containerFunctions,this.containerProps(),{// addded here to not override the container props\nsearch:this.getSearchParam()}));}}]);return _SearchPageContainer;}(Extensible(CategoryPageContainer));_SearchPageContainer.defaultProps=_objectSpread(_objectSpread({},_SearchPageContainer.defaultProps),{},{isSearchPage:true});Object.defineProperty(_SearchPageContainer,'name',{value:'SearchPageContainer'});export var SearchPageContainer=middleware(_SearchPageContainer,\"Route/SearchPage/Container\");export default connect(mapStateToProps,mapDispatchToProps)(SearchPageContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/route/SearchPage/SearchPage.container.js"],"names":["connect","CATEGORY","LOADING_TIME","CategoryPageContainer","updateCurrentCategory","updateMeta","changeNavigationState","BOTTOM_NAVIGATION_TYPE","TOP_NAVIGATION_TYPE","setBigOfflineNotice","toggleOverlayByKey","updateInfoLoadStatus","debounce","appendWithStoreCode","SearchPage","BreadcrumbsDispatcher","CategoryDispatcher","MetaDispatcher","NoMatchDispatcher","ProductListInfoDispatcher","mapStateToProps","state","category","CategoryReducer","isOffline","OfflineReducer","filters","ProductListInfoReducer","currentArgs","ProductListReducer","sortFields","minPriceRange","minPrice","maxPriceRange","maxPrice","isInfoLoading","isLoading","totalPages","device","ConfigReducer","mapDispatchToProps","dispatch","key","changeHeaderState","requestCategory","options","then","dispatcher","default","handleData","updateBreadcrumbs","breadcrumbs","update","requestProductListInfo","updateLoadStatus","updateNoMatch","isBig","updateMetaFromCategory","updateWithCategory","meta","SearchPageContainer","props","title","__","search","getSearchParam","url","name","toUpperCase","history","location","onBackClick","goBack","push","currentSearch","updateHeaderState","updateNavigationState","prevProps","query","match","params","prevQuery","setOfflineNoticeSize","containerFunctions","containerProps","defaultProps","isSearchPage","Object","defineProperty","_SearchPageContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport { connect } from 'react-redux';\n\n// TODO: try SEARCH type\nimport { CATEGORY } from 'Component/Header/Header.config';\nimport { LOADING_TIME } from 'Route/CategoryPage/CategoryPage.config';\nimport { CategoryPageContainer } from 'Route/CategoryPage/CategoryPage.container';\nimport { updateCurrentCategory } from 'Store/Category/Category.action';\nimport { updateMeta } from 'Store/Meta/Meta.action';\nimport { changeNavigationState } from 'Store/Navigation/Navigation.action';\nimport { BOTTOM_NAVIGATION_TYPE, TOP_NAVIGATION_TYPE } from 'Store/Navigation/Navigation.reducer';\nimport { setBigOfflineNotice } from 'Store/Offline/Offline.action';\nimport { toggleOverlayByKey } from 'Store/Overlay/Overlay.action';\nimport { updateInfoLoadStatus } from 'Store/ProductListInfo/ProductListInfo.action';\nimport { debounce } from 'Util/Request';\nimport { appendWithStoreCode } from 'Util/Url';\n\nimport SearchPage from './SearchPage.component';\n\nexport const BreadcrumbsDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Breadcrumbs/Breadcrumbs.dispatcher'\n);\nexport const CategoryDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Category/Category.dispatcher'\n);\nexport const MetaDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Meta/Meta.dispatcher'\n);\nexport const NoMatchDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/NoMatch/NoMatch.dispatcher'\n);\nexport const ProductListInfoDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/ProductListInfo/ProductListInfo.dispatcher'\n);\n\n/** @namespace Route/SearchPage/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    category: state.CategoryReducer.category,\n    isOffline: state.OfflineReducer.isOffline,\n    filters: state.ProductListInfoReducer.filters,\n    currentArgs: state.ProductListReducer.currentArgs,\n    sortFields: state.ProductListInfoReducer.sortFields,\n    minPriceRange: state.ProductListInfoReducer.minPrice,\n    maxPriceRange: state.ProductListInfoReducer.maxPrice,\n    isInfoLoading: state.ProductListInfoReducer.isLoading,\n    totalPages: state.ProductListReducer.totalPages,\n    device: state.ConfigReducer.device\n});\n\n/** @namespace Route/SearchPage/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    toggleOverlayByKey: (key) => dispatch(toggleOverlayByKey(key)),\n    changeHeaderState: (state) => dispatch(changeNavigationState(TOP_NAVIGATION_TYPE, state)),\n    changeNavigationState: (state) => dispatch(changeNavigationState(BOTTOM_NAVIGATION_TYPE, state)),\n    requestCategory: (options) => CategoryDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.handleData(dispatch, options)\n    ),\n    updateBreadcrumbs: (breadcrumbs) => BreadcrumbsDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.update(breadcrumbs, dispatch)\n    ),\n    requestProductListInfo: (options) => ProductListInfoDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.handleData(dispatch, options)\n    ),\n    updateLoadStatus: (isLoading) => dispatch(updateInfoLoadStatus(isLoading)),\n    updateNoMatch: (options) => NoMatchDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.updateNoMatch(dispatch, options)\n    ),\n    setBigOfflineNotice: (isBig) => dispatch(setBigOfflineNotice(isBig)),\n    updateMetaFromCategory: (category) => MetaDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.updateWithCategory(category, dispatch)\n    ),\n    updateCurrentCategory: (category) => dispatch(updateCurrentCategory(category)),\n    updateMeta: (meta) => dispatch(updateMeta(meta))\n});\n\n/** @namespace Route/SearchPage/Container */\nexport class SearchPageContainer extends CategoryPageContainer {\n    static defaultProps = {\n        ...this.defaultProps,\n        isSearchPage: true\n    };\n\n    updateMeta() {\n        const { updateMeta } = this.props;\n        updateMeta({ title: __('Search') });\n    }\n\n    updateBreadcrumbs() {\n        const { updateBreadcrumbs } = this.props;\n        const search = this.getSearchParam();\n\n        updateBreadcrumbs([{\n            url: '',\n            name: search.toUpperCase()\n        }]);\n    }\n\n    updateHeaderState() {\n        const {\n            changeHeaderState,\n            history\n        } = this.props;\n\n        const { category } = history?.location?.state || {};\n        const search = this.getSearchParam();\n\n        const onBackClick = category\n            ? () => history.goBack()\n            : () => history.push(appendWithStoreCode('/menu'));\n\n        changeHeaderState({\n            name: CATEGORY,\n            title: search,\n            onBackClick\n        });\n    }\n\n    getIsMatchingListFilter() {\n        const { currentArgs: { search: currentSearch } } = this.props;\n        const search = this.getSearchParam();\n\n        // if the search requested is equal to search from URL\n        return search === currentSearch;\n    }\n\n    getIsMatchingInfoFilter() {\n        const { currentArgs: { search: currentSearch } } = this.props;\n        const search = this.getSearchParam();\n\n        // if the search requested is equal to search from URL\n        return search === currentSearch;\n    }\n\n    componentDidMount() {\n        this.updateMeta();\n        this.updateBreadcrumbs();\n        this.updateHeaderState();\n        this.updateNavigationState();\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            isOffline,\n            match: { params: { query } }\n        } = this.props;\n\n        const {\n            match: { params: { query: prevQuery } }\n        } = prevProps;\n\n        if (isOffline) {\n            debounce(this.setOfflineNoticeSize, LOADING_TIME)();\n        }\n\n        /**\n         * If search query has changed - update related information\n         */\n        if (query !== prevQuery) {\n            this.updateMeta();\n            this.updateBreadcrumbs();\n            this.updateHeaderState();\n        }\n    }\n\n    getSearchParam() {\n        const { match: { params: { query } } } = this.props;\n        return query;\n    }\n\n    render() {\n        return (\n            <SearchPage\n              { ...this.props }\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n              // addded here to not override the container props\n              search={ this.getSearchParam() }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchPageContainer);\n"]},"metadata":{},"sourceType":"module"}