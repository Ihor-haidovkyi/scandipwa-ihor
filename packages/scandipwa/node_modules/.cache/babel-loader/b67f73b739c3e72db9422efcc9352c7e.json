{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import Field from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Field\";import Form from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Form\";import Loader from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Loader\";import ReviewStar from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ReviewStar\";import{RatingItemsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Rating\";import\"./ProductReviewForm.style\";/**\n * ProductReviewForm\n * @class ProductReviewForm\n * @namespace Component/ProductReviewForm/Component\n */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductReviewForm=/*#__PURE__*/function(_Extensible){_inherits(_ProductReviewForm,_Extensible);var _super=_createSuper(_ProductReviewForm);function _ProductReviewForm(){var _this;_classCallCheck(this,_ProductReviewForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.ratingTitleMap={1:__('Awful'),2:__('Bad'),3:__('Average'),4:__('Good'),5:__('Awesome')};return _this;}_createClass(_ProductReviewForm,[{key:\"renderReviewStar\",value:function renderReviewStar(options,rating_id){var _this$props=this.props,ratingData=_this$props.ratingData,onStarRatingClick=_this$props.onStarRatingClick;var option_id=options.option_id,value=options.value;var isChecked=!!ratingData[rating_id]&&ratingData[rating_id]===option_id;return/*#__PURE__*/_checkBEM(React,ReviewStar,{key:option_id,name:rating_id,value:value,title:this.ratingTitleMap[value],isChecked:isChecked,option_id:option_id,rating_id:rating_id,onStarRatingClick:onStarRatingClick});}},{key:\"renderReviewRating\",value:function renderReviewRating(){var _this2=this;var reviewRatings=this.props.reviewRatings;return reviewRatings.map(function(rating){var rating_id=rating.rating_id,rating_code=rating.rating_code,rating_options=rating.rating_options;return/*#__PURE__*/_checkBEM(React,\"fieldset\",{block:\"ProductReviewForm\",elem:\"Rating\",key:rating_id},/*#__PURE__*/_checkBEM(React,\"legend\",{block:\"ProductReviewForm\",elem:\"Legend\"},rating_code),rating_options.sort(function(_ref,_ref2){var value=_ref.value;var nextValue=_ref2.value;return nextValue-value;}).map(function(option){return _this2.renderReviewStar(option,rating_id);}));});}},{key:\"renderButton\",value:function renderButton(){return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"ProductReviewForm\",elem:\"Button\",type:\"submit\",mix:{block:'Button'}},__('Submit Review'));}},{key:\"renderReviewFormContent\",value:function renderReviewFormContent(){var _this$props2=this.props,handleNicknameChange=_this$props2.handleNicknameChange,handleSummaryChange=_this$props2.handleSummaryChange,handleDetailChange=_this$props2.handleDetailChange,reviewData=_this$props2.reviewData,isSubmitted=_this$props2.isSubmitted;var _reviewData$nickname=reviewData.nickname,nickname=_reviewData$nickname===void 0?'':_reviewData$nickname,_reviewData$summary=reviewData.summary,summary=_reviewData$summary===void 0?'':_reviewData$summary,_reviewData$detail=reviewData.detail,detail=_reviewData$detail===void 0?'':_reviewData$detail;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ProductReviewForm\",elem:\"Wrapper\"},/*#__PURE__*/_checkBEM(React,\"div\",null,this.renderReviewRating()),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ProductReviewForm\",elem:\"Content\"},/*#__PURE__*/_checkBEM(React,Field,{type:\"text\",label:__('Nickname'),id:\"nickname\",name:\"nickname\",validation:['notEmpty'],value:nickname,onChange:handleNicknameChange,validateSeparately:true,isSubmitted:isSubmitted}),/*#__PURE__*/_checkBEM(React,Field,{type:\"text\",label:__('Summary'),id:\"title\",name:\"title\",validation:['notEmpty'],value:summary,onChange:handleSummaryChange,isSubmitted:isSubmitted,validateSeparately:true}),/*#__PURE__*/_checkBEM(React,Field,{type:\"textarea\",label:__('Review'),id:\"detail\",name:\"detail\",validation:['notEmpty'],value:detail,onChange:handleDetailChange,isSubmitted:isSubmitted,validateSeparately:true})));}},{key:\"render\",value:function render(){var _this$props3=this.props,isLoading=_this$props3.isLoading,onReviewSubmitAttempt=_this$props3.onReviewSubmitAttempt,onReviewSubmitSuccess=_this$props3.onReviewSubmitSuccess,onReviewError=_this$props3.onReviewError;return/*#__PURE__*/_checkBEM(React,Form,{key:\"product-review\",mix:{block:'ProductReviewForm'},onSubmit:onReviewSubmitAttempt,onSubmitSuccess:onReviewSubmitSuccess,onSubmitError:onReviewError},/*#__PURE__*/_checkBEM(React,Loader,{isLoading:isLoading}),this.renderReviewFormContent(),this.renderButton());}}]);return _ProductReviewForm;}(Extensible(PureComponent));_ProductReviewForm.defaultProps={isSubmitted:false};Object.defineProperty(_ProductReviewForm,'name',{value:'ProductReviewForm'});export var ProductReviewForm=middleware(_ProductReviewForm,\"Component/ProductReviewForm/Component\");export default ProductReviewForm;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductReviewForm/ProductReviewForm.component.js"],"names":["PureComponent","Field","Form","Loader","ReviewStar","RatingItemsType","ProductReviewForm","ratingTitleMap","__","options","rating_id","props","ratingData","onStarRatingClick","option_id","value","isChecked","reviewRatings","map","rating","rating_code","rating_options","sort","nextValue","option","renderReviewStar","block","handleNicknameChange","handleSummaryChange","handleDetailChange","reviewData","isSubmitted","nickname","summary","detail","renderReviewRating","isLoading","onReviewSubmitAttempt","onReviewSubmitSuccess","onReviewError","renderReviewFormContent","renderButton","defaultProps","Object","defineProperty","_ProductReviewForm"],"mappings":"ojBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAGA,OAASA,aAAT,KAA8B,OAA9B,CAEA,MAAOC,CAAAA,KAAP,yEACA,MAAOC,CAAAA,IAAP,wEACA,MAAOC,CAAAA,MAAP,0EACA,MAAOC,CAAAA,UAAP,8EACA,OAASC,eAAT,qEAEA,kCAEA;AACA;AACA;AACA;AACA,G,wEACA,UAAaC,CAAAA,kBAAb,6WAwBIC,cAxBJ,CAwBqB,CACb,EAAGC,EAAE,CAAC,OAAD,CADQ,CAEb,EAAGA,EAAE,CAAC,KAAD,CAFQ,CAGb,EAAGA,EAAE,CAAC,SAAD,CAHQ,CAIb,EAAGA,EAAE,CAAC,MAAD,CAJQ,CAKb,EAAGA,EAAE,CAAC,SAAD,CALQ,CAxBrB,8EAgCI,0BAAiBC,OAAjB,CAA0BC,SAA1B,CAAqC,iBACS,KAAKC,KADd,CACzBC,UADyB,aACzBA,UADyB,CACbC,iBADa,aACbA,iBADa,IAEzBC,CAAAA,SAFyB,CAEJL,OAFI,CAEzBK,SAFyB,CAEdC,KAFc,CAEJN,OAFI,CAEdM,KAFc,CAGjC,GAAMC,CAAAA,SAAS,CAAG,CAAC,CAACJ,UAAU,CAACF,SAAD,CAAZ,EAA2BE,UAAU,CAACF,SAAD,CAAV,GAA0BI,SAAvE,CAEA,mCACK,UADL,EAEM,GAAG,CAAGA,SAFZ,CAGM,IAAI,CAAGJ,SAHb,CAIM,KAAK,CAAGK,KAJd,CAKM,KAAK,CAAG,KAAKR,cAAL,CAAoBQ,KAApB,CALd,CAMM,SAAS,CAAGC,SANlB,CAOM,SAAS,CAAGF,SAPlB,CAQM,SAAS,CAAGJ,SARlB,CASM,iBAAiB,CAAGG,iBAT1B,GAYH,CAjDL,kCAmDI,6BAAqB,oBACTI,CAAAA,aADS,CACS,KAAKN,KADd,CACTM,aADS,CAGjB,MAAOA,CAAAA,aAAa,CAACC,GAAd,CAAkB,SAACC,MAAD,CAAY,IACzBT,CAAAA,SADyB,CACkBS,MADlB,CACzBT,SADyB,CACdU,WADc,CACkBD,MADlB,CACdC,WADc,CACDC,cADC,CACkBF,MADlB,CACDE,cADC,CAGjC,+CACc,KAAK,CAAC,mBADpB,CACwC,IAAI,CAAC,QAD7C,CACsD,GAAG,CAAGX,SAD5D,yCAEgB,KAAK,CAAC,mBAFtB,CAE0C,IAAI,CAAC,QAF/C,EAGcU,WAHd,EAKUC,cAAc,CACXC,IADH,CACQ,wBAAGP,CAAAA,KAAH,MAAGA,KAAH,IAAqBQ,CAAAA,SAArB,OAAcR,KAAd,OAAqCQ,CAAAA,SAAS,CAAGR,KAAjD,EADR,EAEGG,GAFH,CAEO,SAACM,MAAD,QAAY,CAAA,MAAI,CAACC,gBAAL,CAAsBD,MAAtB,CAA8Bd,SAA9B,CAAZ,EAFP,CALV,EAUH,CAbM,CAAP,CAcH,CApEL,4BAsEI,uBAAe,CACX,6CAEM,KAAK,CAAC,mBAFZ,CAGM,IAAI,CAAC,QAHX,CAIM,IAAI,CAAC,QAJX,CAKM,GAAG,CAAG,CAAEgB,KAAK,CAAE,QAAT,CALZ,EAOUlB,EAAE,CAAC,eAAD,CAPZ,EAUH,CAjFL,uCAmFI,kCAA0B,kBAOlB,KAAKG,KAPa,CAElBgB,oBAFkB,cAElBA,oBAFkB,CAGlBC,mBAHkB,cAGlBA,mBAHkB,CAIlBC,kBAJkB,cAIlBA,kBAJkB,CAKlBC,UALkB,cAKlBA,UALkB,CAMlBC,WANkB,cAMlBA,WANkB,0BAalBD,UAbkB,CAUlBE,QAVkB,CAUlBA,QAVkB,+BAUP,EAVO,0CAalBF,UAbkB,CAWlBG,OAXkB,CAWlBA,OAXkB,8BAWR,EAXQ,wCAalBH,UAbkB,CAYlBI,MAZkB,CAYlBA,MAZkB,6BAYT,EAZS,oBAetB,0CAEM,KAAK,CAAC,mBAFZ,CAGM,IAAI,CAAC,SAHX,0CAMc,KAAKC,kBAAL,EANd,sCASU,KAAK,CAAC,mBAThB,CAUU,IAAI,CAAC,SAVf,+BAYa,KAZb,EAac,IAAI,CAAC,MAbnB,CAcc,KAAK,CAAG3B,EAAE,CAAC,UAAD,CAdxB,CAec,EAAE,CAAC,UAfjB,CAgBc,IAAI,CAAC,UAhBnB,CAiBc,UAAU,CAAG,CAAC,UAAD,CAjB3B,CAkBc,KAAK,CAAGwB,QAlBtB,CAmBc,QAAQ,CAAGL,oBAnBzB,CAoBc,kBAAkB,KApBhC,CAqBc,WAAW,CAAGI,WArB5B,gCAuBa,KAvBb,EAwBc,IAAI,CAAC,MAxBnB,CAyBc,KAAK,CAAGvB,EAAE,CAAC,SAAD,CAzBxB,CA0Bc,EAAE,CAAC,OA1BjB,CA2Bc,IAAI,CAAC,OA3BnB,CA4Bc,UAAU,CAAG,CAAC,UAAD,CA5B3B,CA6Bc,KAAK,CAAGyB,OA7BtB,CA8Bc,QAAQ,CAAGL,mBA9BzB,CA+Bc,WAAW,CAAGG,WA/B5B,CAgCc,kBAAkB,KAhChC,gCAkCa,KAlCb,EAmCc,IAAI,CAAC,UAnCnB,CAoCc,KAAK,CAAGvB,EAAE,CAAC,QAAD,CApCxB,CAqCc,EAAE,CAAC,QArCjB,CAsCc,IAAI,CAAC,QAtCnB,CAuCc,UAAU,CAAG,CAAC,UAAD,CAvC3B,CAwCc,KAAK,CAAG0B,MAxCtB,CAyCc,QAAQ,CAAGL,kBAzCzB,CA0Cc,WAAW,CAAGE,WA1C5B,CA2Cc,kBAAkB,KA3ChC,KAgDH,CAlJL,sBAoJI,iBAAS,kBAMD,KAAKpB,KANJ,CAEDyB,SAFC,cAEDA,SAFC,CAGDC,qBAHC,cAGDA,qBAHC,CAIDC,qBAJC,cAIDA,qBAJC,CAKDC,aALC,cAKDA,aALC,CAQL,mCACK,IADL,EAEM,GAAG,CAAC,gBAFV,CAGM,GAAG,CAAG,CAAEb,KAAK,CAAE,mBAAT,CAHZ,CAIM,QAAQ,CAAGW,qBAJjB,CAKM,eAAe,CAAGC,qBALxB,CAMM,aAAa,CAAGC,aANtB,+BAQS,MART,EAQgB,SAAS,CAAGH,SAR5B,GASU,KAAKI,uBAAL,EATV,CAUU,KAAKC,YAAL,EAVV,EAaH,CAzKL,2DAAanC,kB,CAoBFoC,Y,CAAe,CAClBX,WAAW,CAAE,KADK,C,CA/C1BY,MAAM,CAACC,cAAP,CAAsBC,kBAAtB,CAA0C,MAA1C,CAAkD,CAAE9B,KAAK,CAAE,mBAAT,CAAlD,E,oGAuMA,cAAeT,CAAAA,iBAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport Field from 'Component/Field';\nimport Form from 'Component/Form';\nimport Loader from 'Component/Loader';\nimport ReviewStar from 'Component/ReviewStar';\nimport { RatingItemsType } from 'Type/Rating';\n\nimport './ProductReviewForm.style';\n\n/**\n * ProductReviewForm\n * @class ProductReviewForm\n * @namespace Component/ProductReviewForm/Component\n */\nexport class ProductReviewForm extends PureComponent {\n    static propTypes = {\n        reviewRatings: RatingItemsType.isRequired,\n        isLoading: PropTypes.bool.isRequired,\n        onReviewSubmitAttempt: PropTypes.func.isRequired,\n        onReviewSubmitSuccess: PropTypes.func.isRequired,\n        onReviewError: PropTypes.func.isRequired,\n        onStarRatingClick: PropTypes.func.isRequired,\n        handleNicknameChange: PropTypes.func.isRequired,\n        handleSummaryChange: PropTypes.func.isRequired,\n        handleDetailChange: PropTypes.func.isRequired,\n        ratingData: PropTypes.objectOf(PropTypes.string).isRequired,\n        reviewData: PropTypes.shape({\n            nickname: PropTypes.string,\n            summary: PropTypes.string,\n            detail: PropTypes.string\n        }).isRequired,\n        isSubmitted: PropTypes.bool\n    };\n\n    static defaultProps = {\n        isSubmitted: false\n    };\n\n    ratingTitleMap = {\n        1: __('Awful'),\n        2: __('Bad'),\n        3: __('Average'),\n        4: __('Good'),\n        5: __('Awesome')\n    };\n\n    renderReviewStar(options, rating_id) {\n        const { ratingData, onStarRatingClick } = this.props;\n        const { option_id, value } = options;\n        const isChecked = !!ratingData[rating_id] && ratingData[rating_id] === option_id;\n\n        return (\n            <ReviewStar\n              key={ option_id }\n              name={ rating_id }\n              value={ value }\n              title={ this.ratingTitleMap[value] }\n              isChecked={ isChecked }\n              option_id={ option_id }\n              rating_id={ rating_id }\n              onStarRatingClick={ onStarRatingClick }\n            />\n        );\n    }\n\n    renderReviewRating() {\n        const { reviewRatings } = this.props;\n\n        return reviewRatings.map((rating) => {\n            const { rating_id, rating_code, rating_options } = rating;\n\n            return (\n                <fieldset block=\"ProductReviewForm\" elem=\"Rating\" key={ rating_id }>\n                    <legend block=\"ProductReviewForm\" elem=\"Legend\">\n                        { rating_code }\n                    </legend>\n                    { rating_options\n                        .sort(({ value }, { value: nextValue }) => nextValue - value)\n                        .map((option) => this.renderReviewStar(option, rating_id)) }\n                </fieldset>\n            );\n        });\n    }\n\n    renderButton() {\n        return (\n            <button\n              block=\"ProductReviewForm\"\n              elem=\"Button\"\n              type=\"submit\"\n              mix={ { block: 'Button' } }\n            >\n                { __('Submit Review') }\n            </button>\n        );\n    }\n\n    renderReviewFormContent() {\n        const {\n            handleNicknameChange,\n            handleSummaryChange,\n            handleDetailChange,\n            reviewData,\n            isSubmitted\n        } = this.props;\n\n        const {\n            nickname = '',\n            summary = '',\n            detail = ''\n        } = reviewData;\n\n        return (\n            <div\n              block=\"ProductReviewForm\"\n              elem=\"Wrapper\"\n            >\n                <div>\n                    { this.renderReviewRating() }\n                </div>\n                <div\n                  block=\"ProductReviewForm\"\n                  elem=\"Content\"\n                >\n                    <Field\n                      type=\"text\"\n                      label={ __('Nickname') }\n                      id=\"nickname\"\n                      name=\"nickname\"\n                      validation={ ['notEmpty'] }\n                      value={ nickname }\n                      onChange={ handleNicknameChange }\n                      validateSeparately\n                      isSubmitted={ isSubmitted }\n                    />\n                    <Field\n                      type=\"text\"\n                      label={ __('Summary') }\n                      id=\"title\"\n                      name=\"title\"\n                      validation={ ['notEmpty'] }\n                      value={ summary }\n                      onChange={ handleSummaryChange }\n                      isSubmitted={ isSubmitted }\n                      validateSeparately\n                    />\n                    <Field\n                      type=\"textarea\"\n                      label={ __('Review') }\n                      id=\"detail\"\n                      name=\"detail\"\n                      validation={ ['notEmpty'] }\n                      value={ detail }\n                      onChange={ handleDetailChange }\n                      isSubmitted={ isSubmitted }\n                      validateSeparately\n                    />\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        const {\n            isLoading,\n            onReviewSubmitAttempt,\n            onReviewSubmitSuccess,\n            onReviewError\n        } = this.props;\n\n        return (\n            <Form\n              key=\"product-review\"\n              mix={ { block: 'ProductReviewForm' } }\n              onSubmit={ onReviewSubmitAttempt }\n              onSubmitSuccess={ onReviewSubmitSuccess }\n              onSubmitError={ onReviewError }\n            >\n                <Loader isLoading={ isLoading } />\n                { this.renderReviewFormContent() }\n                { this.renderButton() }\n            </Form>\n        );\n    }\n}\n\nexport default ProductReviewForm;\n"]},"metadata":{},"sourceType":"module"}