{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{STATE_CREATE_ACCOUNT,STATE_FORGOT_PASSWORD,STATE_SIGN_IN}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/MyAccountOverlay/MyAccountOverlay.config\";import{SHIPPING_STEP}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/Checkout/Checkout.config\";import{showNotification as _showNotification}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";import{isSignedIn}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Auth\";import{getErrorMessage}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";import CheckoutGuestForm from\"./CheckoutGuestForm.component\";export var MyAccountDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/MyAccount/MyAccount.dispatcher\");/** @namespace Component/CheckoutGuestForm/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{isEmailConfirmationRequired:state.ConfigReducer.is_email_confirmation_required,emailValue:state.CheckoutReducer.email,isEmailAvailable:state.CheckoutReducer.isEmailAvailable};},\"Component/CheckoutGuestForm/Container/mapStateToProps\");/** @namespace Component/CheckoutGuestForm/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{signIn:function signIn(options){return MyAccountDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.signIn(options,dispatch);});},showNotification:function showNotification(type,message){return dispatch(_showNotification(type,message));},showErrorNotification:function showErrorNotification(error){return dispatch(_showNotification('error',getErrorMessage(error)));}};},\"Component/CheckoutGuestForm/Container/mapDispatchToProps\");/** @namespace Component/CheckoutGuestForm/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CheckoutGuestFormContainer=/*#__PURE__*/function(_Extensible){_inherits(_CheckoutGuestFormContainer,_Extensible);var _super=_createSuper(_CheckoutGuestFormContainer);function _CheckoutGuestFormContainer(){var _this;_classCallCheck(this,_CheckoutGuestFormContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLoading:false,signInState:''};_this.containerFunctions={handleEmailInput:_this.handleEmailInput.bind(_assertThisInitialized(_this)),handleCreateUser:_this.handleCreateUser.bind(_assertThisInitialized(_this)),handlePasswordInput:_this.handlePasswordInput.bind(_assertThisInitialized(_this)),handleForgotPassword:_this.handleForgotPassword.bind(_assertThisInitialized(_this)),handleSignIn:_this.handleSignIn.bind(_assertThisInitialized(_this)),handleCreateAccount:_this.handleCreateAccount.bind(_assertThisInitialized(_this)),onFormError:_this.onFormError.bind(_assertThisInitialized(_this)),setSignInState:_this.setSignInState.bind(_assertThisInitialized(_this)),setLoadingState:_this.setLoadingState.bind(_assertThisInitialized(_this))};_this.containerProps=function(){var emailValue=_this.props.emailValue;return{formId:SHIPPING_STEP,emailValue:emailValue};};return _this;}_createClass(_CheckoutGuestFormContainer,[{key:\"onFormError\",value:function onFormError(){this.setState({isLoading:false});}},{key:\"handleForgotPassword\",value:function handleForgotPassword(e){e.preventDefault();e.nativeEvent.stopImmediatePropagation();this.setState({signInState:STATE_FORGOT_PASSWORD});}},{key:\"handleSignIn\",value:function handleSignIn(e){e.preventDefault();e.nativeEvent.stopImmediatePropagation();this.setState({signInState:STATE_SIGN_IN});}},{key:\"handleCreateAccount\",value:function handleCreateAccount(e){e.preventDefault();e.nativeEvent.stopImmediatePropagation();this.setState({signInState:STATE_CREATE_ACCOUNT});}},{key:\"setSignInState\",value:function setSignInState(signInState){this.setState({signInState:signInState});}},{key:\"setLoadingState\",value:function setLoadingState(isLoading){this.setState({isLoading:isLoading});}},{key:\"handleEmailInput\",value:function handleEmailInput(email){var onEmailChange=this.props.onEmailChange;onEmailChange(email);}},{key:\"handleCreateUser\",value:function handleCreateUser(){var onCreateUserChange=this.props.onCreateUserChange;onCreateUserChange();}},{key:\"handlePasswordInput\",value:function handlePasswordInput(password){var onPasswordChange=this.props.onPasswordChange;onPasswordChange(password);}},{key:\"render\",value:function render(){var isGuestEmailSaved=this.props.isGuestEmailSaved;if(isSignedIn()||isGuestEmailSaved){return null;}return/*#__PURE__*/_checkBEM(React,CheckoutGuestForm,Object.assign({},this.props,this.state,this.containerFunctions,this.containerProps()));}}]);return _CheckoutGuestFormContainer;}(Extensible(PureComponent));_CheckoutGuestFormContainer.defaultProps={emailValue:'',isGuestEmailSaved:false,onSignIn:function onSignIn(){}};Object.defineProperty(_CheckoutGuestFormContainer,'name',{value:'CheckoutGuestFormContainer'});export var CheckoutGuestFormContainer=middleware(_CheckoutGuestFormContainer,\"Component/CheckoutGuestForm/Container\");export default connect(mapStateToProps,mapDispatchToProps)(CheckoutGuestFormContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutGuestForm/CheckoutGuestForm.container.js"],"names":["PureComponent","connect","STATE_CREATE_ACCOUNT","STATE_FORGOT_PASSWORD","STATE_SIGN_IN","SHIPPING_STEP","showNotification","isSignedIn","getErrorMessage","CheckoutGuestForm","MyAccountDispatcher","mapStateToProps","state","isEmailConfirmationRequired","ConfigReducer","is_email_confirmation_required","emailValue","CheckoutReducer","email","isEmailAvailable","mapDispatchToProps","dispatch","signIn","options","then","dispatcher","default","type","message","showErrorNotification","error","CheckoutGuestFormContainer","isLoading","signInState","containerFunctions","handleEmailInput","bind","handleCreateUser","handlePasswordInput","handleForgotPassword","handleSignIn","handleCreateAccount","onFormError","setSignInState","setLoadingState","containerProps","props","formId","setState","e","preventDefault","nativeEvent","stopImmediatePropagation","onEmailChange","onCreateUserChange","password","onPasswordChange","isGuestEmailSaved","defaultProps","onSignIn","Object","defineProperty","_CheckoutGuestFormContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n    STATE_CREATE_ACCOUNT,\n    STATE_FORGOT_PASSWORD,\n    STATE_SIGN_IN\n} from 'Component/MyAccountOverlay/MyAccountOverlay.config';\nimport { SHIPPING_STEP } from 'Route/Checkout/Checkout.config';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { isSignedIn } from 'Util/Auth';\nimport { getErrorMessage } from 'Util/Request';\n\nimport CheckoutGuestForm from './CheckoutGuestForm.component';\n\nexport const MyAccountDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/MyAccount/MyAccount.dispatcher'\n);\n\n/** @namespace Component/CheckoutGuestForm/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isEmailConfirmationRequired: state.ConfigReducer.is_email_confirmation_required,\n    emailValue: state.CheckoutReducer.email,\n    isEmailAvailable: state.CheckoutReducer.isEmailAvailable\n});\n\n/** @namespace Component/CheckoutGuestForm/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    signIn: (options) => MyAccountDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.signIn(options, dispatch)\n    ),\n    showNotification: (type, message) => dispatch(showNotification(type, message)),\n    showErrorNotification: (error) => dispatch(showNotification('error', getErrorMessage(error)))\n});\n\n/** @namespace Component/CheckoutGuestForm/Container */\nexport class CheckoutGuestFormContainer extends PureComponent {\n    static propTypes = {\n        isCreateUser: PropTypes.bool.isRequired,\n        isGuestEmailSaved: PropTypes.bool,\n        showErrorNotification: PropTypes.func.isRequired,\n        onEmailChange: PropTypes.func.isRequired,\n        onCreateUserChange: PropTypes.func.isRequired,\n        onPasswordChange: PropTypes.func.isRequired,\n        emailValue: PropTypes.string,\n        onSignIn: PropTypes.func,\n        isEmailAvailable: PropTypes.bool.isRequired,\n        showNotification: PropTypes.func.isRequired,\n        signIn: PropTypes.func.isRequired\n    };\n\n    static defaultProps = {\n        emailValue: '',\n        isGuestEmailSaved: false,\n        onSignIn: () => {}\n    };\n\n    state = {\n        isLoading: false,\n        signInState: ''\n    };\n\n    containerFunctions = {\n        handleEmailInput: this.handleEmailInput.bind(this),\n        handleCreateUser: this.handleCreateUser.bind(this),\n        handlePasswordInput: this.handlePasswordInput.bind(this),\n        handleForgotPassword: this.handleForgotPassword.bind(this),\n        handleSignIn: this.handleSignIn.bind(this),\n        handleCreateAccount: this.handleCreateAccount.bind(this),\n        onFormError: this.onFormError.bind(this),\n        setSignInState: this.setSignInState.bind(this),\n        setLoadingState: this.setLoadingState.bind(this)\n    };\n\n    containerProps = () => {\n        const { emailValue } = this.props;\n        return ({\n            formId: SHIPPING_STEP,\n            emailValue\n        });\n    };\n\n    onFormError() {\n        this.setState({ isLoading: false });\n    }\n\n    handleForgotPassword(e) {\n        e.preventDefault();\n        e.nativeEvent.stopImmediatePropagation();\n        this.setState({ signInState: STATE_FORGOT_PASSWORD });\n    }\n\n    handleSignIn(e) {\n        e.preventDefault();\n        e.nativeEvent.stopImmediatePropagation();\n        this.setState({ signInState: STATE_SIGN_IN });\n    }\n\n    handleCreateAccount(e) {\n        e.preventDefault();\n        e.nativeEvent.stopImmediatePropagation();\n        this.setState({ signInState: STATE_CREATE_ACCOUNT });\n    }\n\n    setSignInState(signInState) {\n        this.setState({ signInState });\n    }\n\n    setLoadingState(isLoading) {\n        this.setState({ isLoading });\n    }\n\n    handleEmailInput(email) {\n        const { onEmailChange } = this.props;\n        onEmailChange(email);\n    }\n\n    handleCreateUser() {\n        const { onCreateUserChange } = this.props;\n        onCreateUserChange();\n    }\n\n    handlePasswordInput(password) {\n        const { onPasswordChange } = this.props;\n        onPasswordChange(password);\n    }\n\n    render() {\n        const { isGuestEmailSaved } = this.props;\n        if (isSignedIn() || isGuestEmailSaved) {\n            return null;\n        }\n\n        return (\n            <CheckoutGuestForm\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutGuestFormContainer);\n"]},"metadata":{},"sourceType":"module"}