{"ast":null,"code":"'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _debug=require('debug');var _debug2=_interopRequireDefault(_debug);var _functionNames=require(\"./functionNames\");var _functionNames2=_interopRequireDefault(_functionNames);var _eventNames=require(\"./eventNames\");var _eventNames2=_interopRequireDefault(_eventNames);var _FunctionStateMap=require(\"./FunctionStateMap\");var _FunctionStateMap2=_interopRequireDefault(_FunctionStateMap);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}/* eslint-disable promise/prefer-await-to-then */var debug=(0,_debug2.default)('youtube-player');var YouTubePlayer={};/**\n * Construct an object that defines an event handler for all of the YouTube\n * player events. Proxy captured events through an event emitter.\n *\n * @todo Capture event parameters.\n * @see https://developers.google.com/youtube/iframe_api_reference#Events\n */YouTubePlayer.proxyEvents=function(emitter){var events={};var _loop=function _loop(eventName){var onEventName='on'+eventName.slice(0,1).toUpperCase()+eventName.slice(1);events[onEventName]=function(event){debug('event \"%s\"',onEventName,event);emitter.trigger(eventName,event);};};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_eventNames2.default[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var eventName=_step.value;_loop(eventName);}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}return events;};/**\n * Delays player API method execution until player state is ready.\n *\n * @todo Proxy all of the methods using Object.keys.\n * @todo See TRICKY below.\n * @param playerAPIReady Promise that resolves when player is ready.\n * @param strictState A flag designating whether or not to wait for\n * an acceptable state when calling supported functions.\n * @returns {Object}\n */YouTubePlayer.promisifyPlayer=function(playerAPIReady){var strictState=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var functions={};var _loop2=function _loop2(functionName){if(strictState&&_FunctionStateMap2.default[functionName]){functions[functionName]=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return playerAPIReady.then(function(player){var stateInfo=_FunctionStateMap2.default[functionName];var playerState=player.getPlayerState();// eslint-disable-next-line no-warning-comments\n// TODO: Just spread the args into the function once Babel is fixed:\n// https://github.com/babel/babel/issues/4270\n//\n// eslint-disable-next-line prefer-spread\nvar value=player[functionName].apply(player,args);// TRICKY: For functions like `seekTo`, a change in state must be\n// triggered given that the resulting state could match the initial\n// state.\nif(stateInfo.stateChangeRequired||// eslint-disable-next-line no-extra-parens\nArray.isArray(stateInfo.acceptableStates)&&stateInfo.acceptableStates.indexOf(playerState)===-1){return new Promise(function(resolve){var onPlayerStateChange=function onPlayerStateChange(){var playerStateAfterChange=player.getPlayerState();var timeout=void 0;if(typeof stateInfo.timeout==='number'){timeout=setTimeout(function(){player.removeEventListener('onStateChange',onPlayerStateChange);resolve();},stateInfo.timeout);}if(Array.isArray(stateInfo.acceptableStates)&&stateInfo.acceptableStates.indexOf(playerStateAfterChange)!==-1){player.removeEventListener('onStateChange',onPlayerStateChange);clearTimeout(timeout);resolve();}};player.addEventListener('onStateChange',onPlayerStateChange);}).then(function(){return value;});}return value;});};}else{functions[functionName]=function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return playerAPIReady.then(function(player){// eslint-disable-next-line no-warning-comments\n// TODO: Just spread the args into the function once Babel is fixed:\n// https://github.com/babel/babel/issues/4270\n//\n// eslint-disable-next-line prefer-spread\nreturn player[functionName].apply(player,args);});};}};var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=_functionNames2.default[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var functionName=_step2.value;_loop2(functionName);}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return functions;};exports.default=YouTubePlayer;module.exports=exports['default'];","map":{"version":3,"sources":["/home/marketihor/scandipwa/node_modules/youtube-player/dist/YouTubePlayer.js"],"names":["Object","defineProperty","exports","value","_debug","require","_debug2","_interopRequireDefault","_functionNames","_functionNames2","_eventNames","_eventNames2","_FunctionStateMap","_FunctionStateMap2","obj","__esModule","default","debug","YouTubePlayer","proxyEvents","emitter","events","_loop","eventName","onEventName","slice","toUpperCase","event","trigger","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","next","done","err","return","promisifyPlayer","playerAPIReady","strictState","arguments","length","functions","_loop2","functionName","_len","args","Array","_key","then","player","stateInfo","playerState","getPlayerState","apply","stateChangeRequired","isArray","acceptableStates","indexOf","Promise","resolve","onPlayerStateChange","playerStateAfterChange","timeout","setTimeout","removeEventListener","clearTimeout","addEventListener","_len2","_key2","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","module"],"mappings":"AAAA,aAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CC,KAAK,CAAE,IADoC,CAA7C,EAIA,GAAIC,CAAAA,MAAM,CAAGC,OAAO,CAAC,OAAD,CAApB,CAEA,GAAIC,CAAAA,OAAO,CAAGC,sBAAsB,CAACH,MAAD,CAApC,CAEA,GAAII,CAAAA,cAAc,CAAGH,OAAO,mBAA5B,CAEA,GAAII,CAAAA,eAAe,CAAGF,sBAAsB,CAACC,cAAD,CAA5C,CAEA,GAAIE,CAAAA,WAAW,CAAGL,OAAO,gBAAzB,CAEA,GAAIM,CAAAA,YAAY,CAAGJ,sBAAsB,CAACG,WAAD,CAAzC,CAEA,GAAIE,CAAAA,iBAAiB,CAAGP,OAAO,sBAA/B,CAEA,GAAIQ,CAAAA,kBAAkB,CAAGN,sBAAsB,CAACK,iBAAD,CAA/C,CAEA,QAASL,CAAAA,sBAAT,CAAgCO,GAAhC,CAAqC,CAAE,MAAOA,CAAAA,GAAG,EAAIA,GAAG,CAACC,UAAX,CAAwBD,GAAxB,CAA8B,CAAEE,OAAO,CAAEF,GAAX,CAArC,CAAwD,CAE/F,iDAEA,GAAIG,CAAAA,KAAK,CAAG,CAAC,EAAGX,OAAO,CAACU,OAAZ,EAAqB,gBAArB,CAAZ,CAEA,GAAIE,CAAAA,aAAa,CAAG,EAApB,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,GACAA,aAAa,CAACC,WAAd,CAA4B,SAAUC,OAAV,CAAmB,CAC7C,GAAIC,CAAAA,MAAM,CAAG,EAAb,CAEA,GAAIC,CAAAA,KAAK,CAAG,QAASA,CAAAA,KAAT,CAAeC,SAAf,CAA0B,CACpC,GAAIC,CAAAA,WAAW,CAAG,KAAOD,SAAS,CAACE,KAAV,CAAgB,CAAhB,CAAmB,CAAnB,EAAsBC,WAAtB,EAAP,CAA6CH,SAAS,CAACE,KAAV,CAAgB,CAAhB,CAA/D,CAEAJ,MAAM,CAACG,WAAD,CAAN,CAAsB,SAAUG,KAAV,CAAiB,CACrCV,KAAK,CAAC,YAAD,CAAeO,WAAf,CAA4BG,KAA5B,CAAL,CAEAP,OAAO,CAACQ,OAAR,CAAgBL,SAAhB,CAA2BI,KAA3B,EACD,CAJD,CAKD,CARD,CAUA,GAAIE,CAAAA,yBAAyB,CAAG,IAAhC,CACA,GAAIC,CAAAA,iBAAiB,CAAG,KAAxB,CACA,GAAIC,CAAAA,cAAc,CAAGC,SAArB,CAEA,GAAI,CACF,IAAK,GAAIC,CAAAA,SAAS,CAAGtB,YAAY,CAACK,OAAb,CAAqBkB,MAAM,CAACC,QAA5B,GAAhB,CAAyDC,KAA9D,CAAqE,EAAEP,yBAAyB,CAAG,CAACO,KAAK,CAAGH,SAAS,CAACI,IAAV,EAAT,EAA2BC,IAAzD,CAArE,CAAqIT,yBAAyB,CAAG,IAAjK,CAAuK,CACrK,GAAIN,CAAAA,SAAS,CAAGa,KAAK,CAACjC,KAAtB,CAEAmB,KAAK,CAACC,SAAD,CAAL,CACD,CACF,CAAC,MAAOgB,GAAP,CAAY,CACZT,iBAAiB,CAAG,IAApB,CACAC,cAAc,CAAGQ,GAAjB,CACD,CATD,OASU,CACR,GAAI,CACF,GAAI,CAACV,yBAAD,EAA8BI,SAAS,CAACO,MAA5C,CAAoD,CAClDP,SAAS,CAACO,MAAV,GACD,CACF,CAJD,OAIU,CACR,GAAIV,iBAAJ,CAAuB,CACrB,KAAMC,CAAAA,cAAN,CACD,CACF,CACF,CAED,MAAOV,CAAAA,MAAP,CACD,CAvCD,CAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACAH,aAAa,CAACuB,eAAd,CAAgC,SAAUC,cAAV,CAA0B,CACxD,GAAIC,CAAAA,WAAW,CAAGC,SAAS,CAACC,MAAV,CAAmB,CAAnB,EAAwBD,SAAS,CAAC,CAAD,CAAT,GAAiBZ,SAAzC,CAAqDY,SAAS,CAAC,CAAD,CAA9D,CAAoE,KAAtF,CAEA,GAAIE,CAAAA,SAAS,CAAG,EAAhB,CAEA,GAAIC,CAAAA,MAAM,CAAG,QAASA,CAAAA,MAAT,CAAgBC,YAAhB,CAA8B,CACzC,GAAIL,WAAW,EAAI9B,kBAAkB,CAACG,OAAnB,CAA2BgC,YAA3B,CAAnB,CAA6D,CAC3DF,SAAS,CAACE,YAAD,CAAT,CAA0B,UAAY,CACpC,IAAK,GAAIC,CAAAA,IAAI,CAAGL,SAAS,CAACC,MAArB,CAA6BK,IAAI,CAAGC,KAAK,CAACF,IAAD,CAAzC,CAAiDG,IAAI,CAAG,CAA7D,CAAgEA,IAAI,CAAGH,IAAvE,CAA6EG,IAAI,EAAjF,CAAqF,CACnFF,IAAI,CAACE,IAAD,CAAJ,CAAaR,SAAS,CAACQ,IAAD,CAAtB,CACD,CAED,MAAOV,CAAAA,cAAc,CAACW,IAAf,CAAoB,SAAUC,MAAV,CAAkB,CAC3C,GAAIC,CAAAA,SAAS,CAAG1C,kBAAkB,CAACG,OAAnB,CAA2BgC,YAA3B,CAAhB,CACA,GAAIQ,CAAAA,WAAW,CAAGF,MAAM,CAACG,cAAP,EAAlB,CAEA;AACA;AACA;AACA;AACA;AACA,GAAItD,CAAAA,KAAK,CAAGmD,MAAM,CAACN,YAAD,CAAN,CAAqBU,KAArB,CAA2BJ,MAA3B,CAAmCJ,IAAnC,CAAZ,CAEA;AACA;AACA;AACA,GAAIK,SAAS,CAACI,mBAAV,EAEJ;AACAR,KAAK,CAACS,OAAN,CAAcL,SAAS,CAACM,gBAAxB,GAA6CN,SAAS,CAACM,gBAAV,CAA2BC,OAA3B,CAAmCN,WAAnC,IAAoD,CAAC,CAHlG,CAGqG,CACnG,MAAO,IAAIO,CAAAA,OAAJ,CAAY,SAAUC,OAAV,CAAmB,CACpC,GAAIC,CAAAA,mBAAmB,CAAG,QAASA,CAAAA,mBAAT,EAA+B,CACvD,GAAIC,CAAAA,sBAAsB,CAAGZ,MAAM,CAACG,cAAP,EAA7B,CAEA,GAAIU,CAAAA,OAAO,CAAG,IAAK,EAAnB,CAEA,GAAI,MAAOZ,CAAAA,SAAS,CAACY,OAAjB,GAA6B,QAAjC,CAA2C,CACzCA,OAAO,CAAGC,UAAU,CAAC,UAAY,CAC/Bd,MAAM,CAACe,mBAAP,CAA2B,eAA3B,CAA4CJ,mBAA5C,EAEAD,OAAO,GACR,CAJmB,CAIjBT,SAAS,CAACY,OAJO,CAApB,CAKD,CAED,GAAIhB,KAAK,CAACS,OAAN,CAAcL,SAAS,CAACM,gBAAxB,GAA6CN,SAAS,CAACM,gBAAV,CAA2BC,OAA3B,CAAmCI,sBAAnC,IAA+D,CAAC,CAAjH,CAAoH,CAClHZ,MAAM,CAACe,mBAAP,CAA2B,eAA3B,CAA4CJ,mBAA5C,EAEAK,YAAY,CAACH,OAAD,CAAZ,CAEAH,OAAO,GACR,CACF,CApBD,CAsBAV,MAAM,CAACiB,gBAAP,CAAwB,eAAxB,CAAyCN,mBAAzC,EACD,CAxBM,EAwBJZ,IAxBI,CAwBC,UAAY,CAClB,MAAOlD,CAAAA,KAAP,CACD,CA1BM,CAAP,CA2BD,CAED,MAAOA,CAAAA,KAAP,CACD,CAhDM,CAAP,CAiDD,CAtDD,CAuDD,CAxDD,IAwDO,CACL2C,SAAS,CAACE,YAAD,CAAT,CAA0B,UAAY,CACpC,IAAK,GAAIwB,CAAAA,KAAK,CAAG5B,SAAS,CAACC,MAAtB,CAA8BK,IAAI,CAAGC,KAAK,CAACqB,KAAD,CAA1C,CAAmDC,KAAK,CAAG,CAAhE,CAAmEA,KAAK,CAAGD,KAA3E,CAAkFC,KAAK,EAAvF,CAA2F,CACzFvB,IAAI,CAACuB,KAAD,CAAJ,CAAc7B,SAAS,CAAC6B,KAAD,CAAvB,CACD,CAED,MAAO/B,CAAAA,cAAc,CAACW,IAAf,CAAoB,SAAUC,MAAV,CAAkB,CAC3C;AACA;AACA;AACA;AACA;AACA,MAAOA,CAAAA,MAAM,CAACN,YAAD,CAAN,CAAqBU,KAArB,CAA2BJ,MAA3B,CAAmCJ,IAAnC,CAAP,CACD,CAPM,CAAP,CAQD,CAbD,CAcD,CACF,CAzED,CA2EA,GAAIwB,CAAAA,0BAA0B,CAAG,IAAjC,CACA,GAAIC,CAAAA,kBAAkB,CAAG,KAAzB,CACA,GAAIC,CAAAA,eAAe,CAAG5C,SAAtB,CAEA,GAAI,CACF,IAAK,GAAI6C,CAAAA,UAAU,CAAGpE,eAAe,CAACO,OAAhB,CAAwBkB,MAAM,CAACC,QAA/B,GAAjB,CAA6D2C,MAAlE,CAA0E,EAAEJ,0BAA0B,CAAG,CAACI,MAAM,CAAGD,UAAU,CAACxC,IAAX,EAAV,EAA6BC,IAA5D,CAA1E,CAA6IoC,0BAA0B,CAAG,IAA1K,CAAgL,CAC9K,GAAI1B,CAAAA,YAAY,CAAG8B,MAAM,CAAC3E,KAA1B,CAEA4C,MAAM,CAACC,YAAD,CAAN,CACD,CACF,CAAC,MAAOT,GAAP,CAAY,CACZoC,kBAAkB,CAAG,IAArB,CACAC,eAAe,CAAGrC,GAAlB,CACD,CATD,OASU,CACR,GAAI,CACF,GAAI,CAACmC,0BAAD,EAA+BG,UAAU,CAACrC,MAA9C,CAAsD,CACpDqC,UAAU,CAACrC,MAAX,GACD,CACF,CAJD,OAIU,CACR,GAAImC,kBAAJ,CAAwB,CACtB,KAAMC,CAAAA,eAAN,CACD,CACF,CACF,CAED,MAAO9B,CAAAA,SAAP,CACD,CA1GD,CA4GA5C,OAAO,CAACc,OAAR,CAAkBE,aAAlB,CACA6D,MAAM,CAAC7E,OAAP,CAAiBA,OAAO,CAAC,SAAD,CAAxB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _debug = require('debug');\n\nvar _debug2 = _interopRequireDefault(_debug);\n\nvar _functionNames = require('./functionNames');\n\nvar _functionNames2 = _interopRequireDefault(_functionNames);\n\nvar _eventNames = require('./eventNames');\n\nvar _eventNames2 = _interopRequireDefault(_eventNames);\n\nvar _FunctionStateMap = require('./FunctionStateMap');\n\nvar _FunctionStateMap2 = _interopRequireDefault(_FunctionStateMap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable promise/prefer-await-to-then */\n\nvar debug = (0, _debug2.default)('youtube-player');\n\nvar YouTubePlayer = {};\n\n/**\n * Construct an object that defines an event handler for all of the YouTube\n * player events. Proxy captured events through an event emitter.\n *\n * @todo Capture event parameters.\n * @see https://developers.google.com/youtube/iframe_api_reference#Events\n */\nYouTubePlayer.proxyEvents = function (emitter) {\n  var events = {};\n\n  var _loop = function _loop(eventName) {\n    var onEventName = 'on' + eventName.slice(0, 1).toUpperCase() + eventName.slice(1);\n\n    events[onEventName] = function (event) {\n      debug('event \"%s\"', onEventName, event);\n\n      emitter.trigger(eventName, event);\n    };\n  };\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = _eventNames2.default[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var eventName = _step.value;\n\n      _loop(eventName);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return events;\n};\n\n/**\n * Delays player API method execution until player state is ready.\n *\n * @todo Proxy all of the methods using Object.keys.\n * @todo See TRICKY below.\n * @param playerAPIReady Promise that resolves when player is ready.\n * @param strictState A flag designating whether or not to wait for\n * an acceptable state when calling supported functions.\n * @returns {Object}\n */\nYouTubePlayer.promisifyPlayer = function (playerAPIReady) {\n  var strictState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var functions = {};\n\n  var _loop2 = function _loop2(functionName) {\n    if (strictState && _FunctionStateMap2.default[functionName]) {\n      functions[functionName] = function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return playerAPIReady.then(function (player) {\n          var stateInfo = _FunctionStateMap2.default[functionName];\n          var playerState = player.getPlayerState();\n\n          // eslint-disable-next-line no-warning-comments\n          // TODO: Just spread the args into the function once Babel is fixed:\n          // https://github.com/babel/babel/issues/4270\n          //\n          // eslint-disable-next-line prefer-spread\n          var value = player[functionName].apply(player, args);\n\n          // TRICKY: For functions like `seekTo`, a change in state must be\n          // triggered given that the resulting state could match the initial\n          // state.\n          if (stateInfo.stateChangeRequired ||\n\n          // eslint-disable-next-line no-extra-parens\n          Array.isArray(stateInfo.acceptableStates) && stateInfo.acceptableStates.indexOf(playerState) === -1) {\n            return new Promise(function (resolve) {\n              var onPlayerStateChange = function onPlayerStateChange() {\n                var playerStateAfterChange = player.getPlayerState();\n\n                var timeout = void 0;\n\n                if (typeof stateInfo.timeout === 'number') {\n                  timeout = setTimeout(function () {\n                    player.removeEventListener('onStateChange', onPlayerStateChange);\n\n                    resolve();\n                  }, stateInfo.timeout);\n                }\n\n                if (Array.isArray(stateInfo.acceptableStates) && stateInfo.acceptableStates.indexOf(playerStateAfterChange) !== -1) {\n                  player.removeEventListener('onStateChange', onPlayerStateChange);\n\n                  clearTimeout(timeout);\n\n                  resolve();\n                }\n              };\n\n              player.addEventListener('onStateChange', onPlayerStateChange);\n            }).then(function () {\n              return value;\n            });\n          }\n\n          return value;\n        });\n      };\n    } else {\n      functions[functionName] = function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        return playerAPIReady.then(function (player) {\n          // eslint-disable-next-line no-warning-comments\n          // TODO: Just spread the args into the function once Babel is fixed:\n          // https://github.com/babel/babel/issues/4270\n          //\n          // eslint-disable-next-line prefer-spread\n          return player[functionName].apply(player, args);\n        });\n      };\n    }\n  };\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = _functionNames2.default[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var functionName = _step2.value;\n\n      _loop2(functionName);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return functions;\n};\n\nexports.default = YouTubePlayer;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"module"}