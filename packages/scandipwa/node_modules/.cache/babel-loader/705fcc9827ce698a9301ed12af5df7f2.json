{"ast":null,"code":"import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import BrowserDatabase from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/BrowserDatabase\";import{UPDATE_CONFIG,UPDATE_CONFIG_DEVICE}from\"./Config.action\";export var MAX_WIDTH=150;export var MAX_HEIGHT=40;export var DEFAULT_CATGORY_URL_SUFFIX='.html';/** @namespace Store/Config/Reducer/filterStoreConfig */export var filterStoreConfig=middleware(function(config){return Object.entries(config).reduce(function(acc,_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return value!==null?_objectSpread(_objectSpread({},acc),{},_defineProperty({},key,value)):acc;},{});},\"Store/Config/Reducer/filterStoreConfig\");var _ref3=BrowserDatabase.getItem('config')||{countries:[],reviewRatings:[],storeConfig:{},currencyData:{},cartDisplayConfig:{display_tax_in_price:'',display_tax_in_subtotal:'',display_tax_in_shipping_amount:'',include_tax_in_order_total:false,display_full_tax_summary:false,display_zero_tax_subtotal:false}},countries=_ref3.countries,reviewRatings=_ref3.reviewRatings,storeConfig=_ref3.storeConfig,currencyData=_ref3.currencyData,cartDisplayConfig=_ref3.cartDisplayConfig;/** @namespace Store/Config/Reducer/getIndexedRatings */export{countries,reviewRatings,storeConfig,currencyData,cartDisplayConfig};export var getIndexedRatings=middleware(function(reviewRatings){return reviewRatings?reviewRatings.items||[]:[];},\"Store/Config/Reducer/getIndexedRatings\");/** @namespace Store/Config/Reducer/getCurrencyData */export var getCurrencyData=middleware(function(base,state){return base||state.currencyData||{};},\"Store/Config/Reducer/getCurrencyData\");/** @namespace Store/Config/Reducer/getCountryData */export var getCountryData=middleware(function(base,state){return base||state.countries||{};},\"Store/Config/Reducer/getCountryData\");/** @namespace Store/Config/Reducer/getCheckoutAgreementData */export var getCheckoutAgreementData=middleware(function(base,state){return base||state.checkoutAgreements||{};},\"Store/Config/Reducer/getCheckoutAgreementData\");/** @namespace Store/Config/Reducer/getInitialState */export var getInitialState=middleware(function(){return _objectSpread(_objectSpread({},filterStoreConfig(storeConfig)),{},{countries:countries,reviewRatings:reviewRatings,checkoutAgreements:[],currencyData:currencyData,isLoading:true,cartDisplayConfig:cartDisplayConfig,priceTaxDisplay:{},category_url_suffix:DEFAULT_CATGORY_URL_SUFFIX,device:{isMobile:true,android:true,ios:false,blackberry:false,opera:false,windows:false,standaloneMode:window.matchMedia('(display-mode: standalone)').matches}});},\"Store/Config/Reducer/getInitialState\");/** @namespace Store/Config/Reducer */export var ConfigReducer=middleware(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getInitialState();var action=arguments.length>1?arguments[1]:undefined;var type=action.type,_action$config=action.config;_action$config=_action$config===void 0?{}:_action$config;var countries=_action$config.countries,reviewRatings=_action$config.reviewRatings,checkoutAgreements=_action$config.checkoutAgreements,currencyData=_action$config.currencyData,_action$config$storeC=_action$config.storeConfig,storeConfig=_action$config$storeC===void 0?{}:_action$config$storeC,_action$config$cartDi=_action$config.cartDisplayConfig,cartDisplayConfig=_action$config$cartDi===void 0?{}:_action$config$cartDi,device=action.device;switch(type){case UPDATE_CONFIG:var filteredStoreConfig=filterStoreConfig(storeConfig);var secure_base_media_url=filteredStoreConfig.secure_base_media_url;window.secure_base_media_url=secure_base_media_url;return _objectSpread(_objectSpread(_objectSpread({},state),{},{countries:getCountryData(countries,state),reviewRatings:getIndexedRatings(reviewRatings),checkoutAgreements:getCheckoutAgreementData(checkoutAgreements,state),currencyData:getCurrencyData(currencyData,state)},filteredStoreConfig),{},{// Should be updated manually as filteredStoreConfig does not contain header_logo_src when it is null\n// and header_logo_src takes old value\nisLoading:false,cartDisplayConfig:cartDisplayConfig});case UPDATE_CONFIG_DEVICE:return _objectSpread(_objectSpread({},state),{},{device:_objectSpread(_objectSpread({},state.device),device)});default:return state;}},\"Store/Config/Reducer\");export default ConfigReducer;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/store/Config/Config.reducer.js"],"names":["BrowserDatabase","UPDATE_CONFIG","UPDATE_CONFIG_DEVICE","MAX_WIDTH","MAX_HEIGHT","DEFAULT_CATGORY_URL_SUFFIX","filterStoreConfig","config","Object","entries","reduce","acc","key","value","getItem","countries","reviewRatings","storeConfig","currencyData","cartDisplayConfig","display_tax_in_price","display_tax_in_subtotal","display_tax_in_shipping_amount","include_tax_in_order_total","display_full_tax_summary","display_zero_tax_subtotal","getIndexedRatings","items","getCurrencyData","base","state","getCountryData","getCheckoutAgreementData","checkoutAgreements","getInitialState","isLoading","priceTaxDisplay","category_url_suffix","device","isMobile","android","ios","blackberry","opera","windows","standaloneMode","window","matchMedia","matches","ConfigReducer","action","type","filteredStoreConfig","secure_base_media_url"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport BrowserDatabase from 'Util/BrowserDatabase';\n\nimport { UPDATE_CONFIG, UPDATE_CONFIG_DEVICE } from './Config.action';\n\nexport const MAX_WIDTH = 150;\nexport const MAX_HEIGHT = 40;\nexport const DEFAULT_CATGORY_URL_SUFFIX = '.html';\n\n/** @namespace Store/Config/Reducer/filterStoreConfig */\nexport const filterStoreConfig = (config) => Object.entries(config).reduce(\n    (acc, [key, value]) => (value !== null ? { ...acc, [key]: value } : acc),\n    {}\n);\n\nexport const {\n    countries, reviewRatings, storeConfig, currencyData, cartDisplayConfig\n} = BrowserDatabase.getItem('config') || {\n    countries: [],\n    reviewRatings: [],\n    storeConfig: {},\n    currencyData: {},\n    cartDisplayConfig: {\n        display_tax_in_price: '',\n        display_tax_in_subtotal: '',\n        display_tax_in_shipping_amount: '',\n        include_tax_in_order_total: false,\n        display_full_tax_summary: false,\n        display_zero_tax_subtotal: false\n    }\n};\n\n/** @namespace Store/Config/Reducer/getIndexedRatings */\nexport const getIndexedRatings = (reviewRatings) => ((reviewRatings) ? reviewRatings.items || [] : []);\n\n/** @namespace Store/Config/Reducer/getCurrencyData */\nexport const getCurrencyData = (base, state) => (base || state.currencyData || {});\n\n/** @namespace Store/Config/Reducer/getCountryData */\nexport const getCountryData = (base, state) => (base || state.countries || {});\n\n/** @namespace Store/Config/Reducer/getCheckoutAgreementData */\nexport const getCheckoutAgreementData = (base, state) => (base || state.checkoutAgreements || {});\n\n/** @namespace Store/Config/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    ...filterStoreConfig(storeConfig),\n    countries,\n    reviewRatings,\n    checkoutAgreements: [],\n    currencyData,\n    isLoading: true,\n    cartDisplayConfig,\n    priceTaxDisplay: {},\n    category_url_suffix: DEFAULT_CATGORY_URL_SUFFIX,\n    device: {\n        isMobile: true,\n        android: true,\n        ios: false,\n        blackberry: false,\n        opera: false,\n        windows: false,\n        standaloneMode: window.matchMedia('(display-mode: standalone)').matches\n    }\n});\n\n/** @namespace Store/Config/Reducer */\nexport const ConfigReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const {\n        type,\n        config: {\n            countries,\n            reviewRatings,\n            checkoutAgreements,\n            currencyData,\n            storeConfig = {},\n            cartDisplayConfig = {}\n        } = {},\n        device\n    } = action;\n\n    switch (type) {\n    case UPDATE_CONFIG:\n        const filteredStoreConfig = filterStoreConfig(storeConfig);\n        const { secure_base_media_url } = filteredStoreConfig;\n        window.secure_base_media_url = secure_base_media_url;\n\n        return {\n            ...state,\n            countries: getCountryData(countries, state),\n            reviewRatings: getIndexedRatings(reviewRatings),\n            checkoutAgreements: getCheckoutAgreementData(checkoutAgreements, state),\n            currencyData: getCurrencyData(currencyData, state),\n            ...filteredStoreConfig,\n            // Should be updated manually as filteredStoreConfig does not contain header_logo_src when it is null\n            // and header_logo_src takes old value\n            isLoading: false,\n            cartDisplayConfig\n        };\n\n    case UPDATE_CONFIG_DEVICE:\n        return {\n            ...state,\n            device: {\n                ...state.device,\n                ...device\n            }\n        };\n\n    default:\n        return state;\n    }\n};\n\nexport default ConfigReducer;\n"]},"metadata":{},"sourceType":"module"}