{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CartItem from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CartItem\";import CmsBlock from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CmsBlock\";import{CART_OVERLAY}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Header/Header.config\";import Link from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Link\";import Overlay from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Overlay\";import{OVERLAY_PLACEHOLDER}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/PopupSuspense/PopupSuspense.config\";import{DeviceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Device\";import{TotalsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/MiniCart\";import{formatPrice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Price\";import\"./CartOverlay.style\";/** @namespace Component/CartOverlay/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CartOverlay=/*#__PURE__*/function(_Extensible){_inherits(_CartOverlay,_Extensible);var _super=_createSuper(_CartOverlay);function _CartOverlay(){_classCallCheck(this,_CartOverlay);return _super.apply(this,arguments);}_createClass(_CartOverlay,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props=this.props,showOverlay=_this$props.showOverlay,device=_this$props.device,activeOverlay=_this$props.activeOverlay;if(!device.isMobile&&activeOverlay===OVERLAY_PLACEHOLDER){showOverlay(CART_OVERLAY);}}},{key:\"renderPriceLine\",value:function renderPriceLine(price){var currencyCode=this.props.currencyCode;return formatPrice(price,currencyCode);}},{key:\"renderCartItems\",value:function renderCartItems(){var _this$props$totals=this.props.totals,items=_this$props$totals.items,quote_currency_code=_this$props$totals.quote_currency_code;if(!items||items.length<1){return this.renderNoCartItems();}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartOverlay\",elem:\"Items\",\"aria-label\":\"List of items in cart\"},items.map(function(item){return/*#__PURE__*/_checkBEM(React,CartItem,{key:item.item_id,item:item,currency_code:quote_currency_code,isEditing:true});}));}},{key:\"renderNoCartItems\",value:function renderNoCartItems(){return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CartOverlay\",elem:\"Empty\"},__('You have no items in your shopping cart.'));}},{key:\"renderOrderTotalExlTax\",value:function renderOrderTotalExlTax(){var cartTotalSubPrice=this.props.cartTotalSubPrice;if(!cartTotalSubPrice){return null;}return/*#__PURE__*/_checkBEM(React,\"span\",null,\"\".concat(__('Excl. tax:'),\" \").concat(this.renderPriceLine(cartTotalSubPrice)));}},{key:\"renderTotals\",value:function renderTotals(){var _this$props$totals$gr=this.props.totals.grand_total,grand_total=_this$props$totals$gr===void 0?0:_this$props$totals$gr;return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"CartOverlay\",elem:\"Total\"},/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Order total:')),/*#__PURE__*/_checkBEM(React,\"dd\",null,this.renderPriceLine(grand_total),this.renderOrderTotalExlTax()));}},{key:\"renderTax\",value:function renderTax(){var _this$props2=this.props,_this$props2$totals=_this$props2.totals;_this$props2$totals=_this$props2$totals===void 0?{}:_this$props2$totals;var _this$props2$totals$t=_this$props2$totals.tax_amount,tax_amount=_this$props2$totals$t===void 0?0:_this$props2$totals$t,_this$props2$cartDisp=_this$props2.cartDisplaySettings;_this$props2$cartDisp=_this$props2$cartDisp===void 0?{}:_this$props2$cartDisp;var display_zero_tax_subtotal=_this$props2$cartDisp.display_zero_tax_subtotal;if(!tax_amount&&!display_zero_tax_subtotal){return null;}return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"CartOverlay\",elem:\"Tax\"},/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Tax total:')),/*#__PURE__*/_checkBEM(React,\"dd\",null,this.renderPriceLine(tax_amount)));}},{key:\"renderEstimatedShippingSubPrice\",value:function renderEstimatedShippingSubPrice(){var cartShippingSubPrice=this.props.cartShippingSubPrice;if(!cartShippingSubPrice){return null;}return/*#__PURE__*/_checkBEM(React,\"span\",null,\"\".concat(__('Excl. tax:'),\" \").concat(this.renderPriceLine(cartShippingSubPrice)));}},{key:\"renderEstimatedShipping\",value:function renderEstimatedShipping(){var cartShippingPrice=this.props.cartShippingPrice;if(!cartShippingPrice){return null;}return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"CartOverlay\",elem:\"Shipping\"},/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Estimated Shipping: ')),/*#__PURE__*/_checkBEM(React,\"dd\",null,this.renderPriceLine(cartShippingPrice),this.renderEstimatedShippingSubPrice()));}},{key:\"renderDiscount\",value:function renderDiscount(){var _this$props$totals2=this.props.totals,applied_rule_ids=_this$props$totals2.applied_rule_ids,discount_amount=_this$props$totals2.discount_amount,coupon_code=_this$props$totals2.coupon_code;if(!applied_rule_ids||!discount_amount){return null;}if(!coupon_code){return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"CartOverlay\",elem:\"Discount\"},/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Discount: ')),/*#__PURE__*/_checkBEM(React,\"dd\",null,\"-\".concat(this.renderPriceLine(Math.abs(discount_amount)))));}return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"CartOverlay\",elem:\"Discount\"},/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Discount/Coupon '),/*#__PURE__*/_checkBEM(React,\"strong\",{block:\"CartOverlay\",elem:\"DiscountCoupon\"},coupon_code.toUpperCase())),/*#__PURE__*/_checkBEM(React,\"dd\",null,\"-\".concat(this.renderPriceLine(Math.abs(discount_amount)))));}},{key:\"renderSecureCheckoutButton\",value:function renderSecureCheckoutButton(){var _this$props3=this.props,handleCheckoutClick=_this$props3.handleCheckoutClick,hasOutOfStockProductsInCart=_this$props3.hasOutOfStockProductsInCart;var options=hasOutOfStockProductsInCart?{onClick:function onClick(e){return e.preventDefault();},disabled:true}:{};return/*#__PURE__*/_checkBEM(React,\"button\",Object.assign({block:\"CartOverlay\",elem:\"CheckoutButton\",mix:{block:'Button'},onClick:handleCheckoutClick},options),/*#__PURE__*/_checkBEM(React,\"span\",null),__('Secure checkout'));}},{key:\"renderActions\",value:function renderActions(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartOverlay\",elem:\"Actions\"},/*#__PURE__*/_checkBEM(React,Link,{block:\"CartOverlay\",elem:\"CartButton\",mix:{block:'Button',mods:{isHollow:true}},to:\"/cart\"},__('View cart')),this.renderSecureCheckoutButton());}},{key:\"renderCartAdditional\",value:function renderCartAdditional(){var items=this.props.totals.items;if(!items||items.length<1){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartOverlay\",elem:\"Additional\"},this.renderEstimatedShipping(),this.renderDiscount(),this.renderTax(),this.renderTotals(),this.renderOutOfStockProductsWarning(),this.renderActions());}},{key:\"renderPromo\",value:function renderPromo(){var _window$contentConfig=window.contentConfiguration.minicart_content;_window$contentConfig=_window$contentConfig===void 0?{}:_window$contentConfig;var minicart_cms=_window$contentConfig.minicart_cms;if(minicart_cms){return/*#__PURE__*/_checkBEM(React,CmsBlock,{identifier:minicart_cms});}return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CartOverlay\",elem:\"Promo\"},__('Free shipping on order 49$ and more.'));}},{key:\"renderOutOfStockProductsWarning\",value:function renderOutOfStockProductsWarning(){var hasOutOfStockProductsInCart=this.props.hasOutOfStockProductsInCart;if(!hasOutOfStockProductsInCart){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CartOverlay\",elem:\"OutOfStockProductsWarning\"},__('Remove out of stock products from cart'));}},{key:\"render\",value:function render(){var changeHeaderState=this.props.changeHeaderState;return/*#__PURE__*/_checkBEM(React,Overlay,{id:CART_OVERLAY,onVisible:changeHeaderState,mix:{block:'CartOverlay'}},this.renderPromo(),this.renderCartItems(),this.renderCartAdditional());}}]);return _CartOverlay;}(Extensible(PureComponent));_CartOverlay.defaultProps={hasOutOfStockProductsInCart:false,cartTotalSubPrice:null,cartShippingPrice:0,cartShippingSubPrice:null};Object.defineProperty(_CartOverlay,'name',{value:'CartOverlay'});export var CartOverlay=middleware(_CartOverlay,\"Component/CartOverlay/Component\");export default CartOverlay;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CartOverlay/CartOverlay.component.js"],"names":["PureComponent","CartItem","CmsBlock","CART_OVERLAY","Link","Overlay","OVERLAY_PLACEHOLDER","DeviceType","TotalsType","formatPrice","CartOverlay","props","showOverlay","device","activeOverlay","isMobile","price","currencyCode","totals","items","quote_currency_code","length","renderNoCartItems","map","item","item_id","__","cartTotalSubPrice","renderPriceLine","grand_total","renderOrderTotalExlTax","tax_amount","cartDisplaySettings","display_zero_tax_subtotal","cartShippingSubPrice","cartShippingPrice","renderEstimatedShippingSubPrice","applied_rule_ids","discount_amount","coupon_code","Math","abs","toUpperCase","handleCheckoutClick","hasOutOfStockProductsInCart","options","onClick","e","preventDefault","disabled","block","mods","isHollow","renderSecureCheckoutButton","renderEstimatedShipping","renderDiscount","renderTax","renderTotals","renderOutOfStockProductsWarning","renderActions","window","contentConfiguration","minicart_content","minicart_cms","changeHeaderState","renderPromo","renderCartItems","renderCartAdditional","defaultProps","Object","defineProperty","_CartOverlay","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CartItem from 'Component/CartItem';\nimport CmsBlock from 'Component/CmsBlock';\nimport { CART_OVERLAY } from 'Component/Header/Header.config';\nimport Link from 'Component/Link';\nimport Overlay from 'Component/Overlay';\nimport { OVERLAY_PLACEHOLDER } from 'Component/PopupSuspense/PopupSuspense.config';\nimport { DeviceType } from 'Type/Device';\nimport { TotalsType } from 'Type/MiniCart';\nimport { formatPrice } from 'Util/Price';\n\nimport './CartOverlay.style';\n\n/** @namespace Component/CartOverlay/Component */\nexport class CartOverlay extends PureComponent {\n    static propTypes = {\n        totals: TotalsType.isRequired,\n        device: DeviceType.isRequired,\n        changeHeaderState: PropTypes.func.isRequired,\n        isEditing: PropTypes.bool.isRequired,\n        handleCheckoutClick: PropTypes.func.isRequired,\n        currencyCode: PropTypes.string.isRequired,\n        showOverlay: PropTypes.func.isRequired,\n        activeOverlay: PropTypes.string.isRequired,\n        hasOutOfStockProductsInCart: PropTypes.bool,\n        cartTotalSubPrice: PropTypes.number,\n        cartShippingPrice: PropTypes.number,\n        cartShippingSubPrice: PropTypes.number,\n        cartDisplaySettings: PropTypes.object.isRequired\n    };\n\n    static defaultProps = {\n        hasOutOfStockProductsInCart: false,\n        cartTotalSubPrice: null,\n        cartShippingPrice: 0,\n        cartShippingSubPrice: null\n    };\n\n    componentDidMount() {\n        const { showOverlay, device, activeOverlay } = this.props;\n\n        if (!device.isMobile && activeOverlay === OVERLAY_PLACEHOLDER) {\n            showOverlay(CART_OVERLAY);\n        }\n    }\n\n    renderPriceLine(price) {\n        const { currencyCode } = this.props;\n        return formatPrice(price, currencyCode);\n    }\n\n    renderCartItems() {\n        const { totals: { items, quote_currency_code } } = this.props;\n\n        if (!items || items.length < 1) {\n            return this.renderNoCartItems();\n        }\n\n        return (\n            <div block=\"CartOverlay\" elem=\"Items\" aria-label=\"List of items in cart\">\n                { items.map((item) => (\n                    <CartItem\n                      key={ item.item_id }\n                      item={ item }\n                      currency_code={ quote_currency_code }\n                      isEditing\n                    />\n                )) }\n            </div>\n        );\n    }\n\n    renderNoCartItems() {\n        return (\n            <p block=\"CartOverlay\" elem=\"Empty\">\n                { __('You have no items in your shopping cart.') }\n            </p>\n        );\n    }\n\n    renderOrderTotalExlTax() {\n        const { cartTotalSubPrice } = this.props;\n\n        if (!cartTotalSubPrice) {\n            return null;\n        }\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ this.renderPriceLine(cartTotalSubPrice) }` }\n            </span>\n        );\n    }\n\n    renderTotals() {\n        const { totals: { grand_total = 0 } } = this.props;\n\n        return (\n            <dl\n              block=\"CartOverlay\"\n              elem=\"Total\"\n            >\n                <dt>{ __('Order total:') }</dt>\n                <dd>\n                    { this.renderPriceLine(grand_total) }\n                    { this.renderOrderTotalExlTax() }\n                </dd>\n            </dl>\n        );\n    }\n\n    renderTax() {\n        const {\n            totals: {\n                tax_amount = 0\n            } = {},\n            cartDisplaySettings: {\n                display_zero_tax_subtotal\n            } = {}\n        } = this.props;\n\n        if (!tax_amount && !display_zero_tax_subtotal) {\n            return null;\n        }\n\n        return (\n            <dl\n              block=\"CartOverlay\"\n              elem=\"Tax\"\n            >\n                <dt>{ __('Tax total:') }</dt>\n                <dd>{ this.renderPriceLine(tax_amount) }</dd>\n            </dl>\n        );\n    }\n\n    renderEstimatedShippingSubPrice() {\n        const {\n            cartShippingSubPrice\n        } = this.props;\n\n        if (!cartShippingSubPrice) {\n            return null;\n        }\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ this.renderPriceLine(cartShippingSubPrice) }` }\n            </span>\n        );\n    }\n\n    renderEstimatedShipping() {\n        const {\n            cartShippingPrice\n        } = this.props;\n\n        if (!cartShippingPrice) {\n            return null;\n        }\n\n        return (\n            <dl\n              block=\"CartOverlay\"\n              elem=\"Shipping\"\n            >\n                <dt>\n                    { __('Estimated Shipping: ') }\n                </dt>\n                <dd>\n                    { this.renderPriceLine(cartShippingPrice) }\n                    { this.renderEstimatedShippingSubPrice() }\n                </dd>\n            </dl>\n        );\n    }\n\n    renderDiscount() {\n        const {\n            totals: {\n                applied_rule_ids,\n                discount_amount,\n                coupon_code\n            }\n        } = this.props;\n\n        if (!applied_rule_ids || !discount_amount) {\n            return null;\n        }\n\n        if (!coupon_code) {\n            return (\n                <dl\n                  block=\"CartOverlay\"\n                  elem=\"Discount\"\n                >\n                    <dt>\n                        { __('Discount: ') }\n                    </dt>\n                    <dd>{ `-${this.renderPriceLine(Math.abs(discount_amount))}` }</dd>\n                </dl>\n            );\n        }\n\n        return (\n            <dl\n              block=\"CartOverlay\"\n              elem=\"Discount\"\n            >\n                <dt>\n                    { __('Discount/Coupon ') }\n                    <strong block=\"CartOverlay\" elem=\"DiscountCoupon\">{ coupon_code.toUpperCase() }</strong>\n                </dt>\n                <dd>{ `-${this.renderPriceLine(Math.abs(discount_amount))}` }</dd>\n            </dl>\n        );\n    }\n\n    renderSecureCheckoutButton() {\n        const { handleCheckoutClick, hasOutOfStockProductsInCart } = this.props;\n\n        const options = hasOutOfStockProductsInCart\n            ? {\n                onClick: (e) => e.preventDefault(),\n                disabled: true\n            }\n            : {};\n\n        return (\n            <button\n              block=\"CartOverlay\"\n              elem=\"CheckoutButton\"\n              mix={ { block: 'Button' } }\n              onClick={ handleCheckoutClick }\n              { ...options }\n            >\n                <span />\n                { __('Secure checkout') }\n            </button>\n        );\n    }\n\n    renderActions() {\n        return (\n            <div block=\"CartOverlay\" elem=\"Actions\">\n                <Link\n                  block=\"CartOverlay\"\n                  elem=\"CartButton\"\n                  mix={ { block: 'Button', mods: { isHollow: true } } }\n                  to=\"/cart\"\n                >\n                    { __('View cart') }\n                </Link>\n                { this.renderSecureCheckoutButton() }\n            </div>\n        );\n    }\n\n    renderCartAdditional() {\n        const { totals: { items } } = this.props;\n\n        if (!items || items.length < 1) {\n            return null;\n        }\n\n        return (\n            <div block=\"CartOverlay\" elem=\"Additional\">\n                { this.renderEstimatedShipping() }\n                { this.renderDiscount() }\n                { this.renderTax() }\n                { this.renderTotals() }\n                { this.renderOutOfStockProductsWarning() }\n                { this.renderActions() }\n            </div>\n        );\n    }\n\n    renderPromo() {\n        const { minicart_content: { minicart_cms } = {} } = window.contentConfiguration;\n\n        if (minicart_cms) {\n            return <CmsBlock identifier={ minicart_cms } />;\n        }\n\n        return (\n            <p\n              block=\"CartOverlay\"\n              elem=\"Promo\"\n            >\n                { __('Free shipping on order 49$ and more.') }\n            </p>\n        );\n    }\n\n    renderOutOfStockProductsWarning() {\n        const { hasOutOfStockProductsInCart } = this.props;\n\n        if (!hasOutOfStockProductsInCart) {\n            return null;\n        }\n\n        return (\n            <div block=\"CartOverlay\" elem=\"OutOfStockProductsWarning\">\n                { __('Remove out of stock products from cart') }\n            </div>\n        );\n    }\n\n    render() {\n        const { changeHeaderState } = this.props;\n\n        return (\n            <Overlay\n              id={ CART_OVERLAY }\n              onVisible={ changeHeaderState }\n              mix={ { block: 'CartOverlay' } }\n            >\n                { this.renderPromo() }\n                { this.renderCartItems() }\n                { this.renderCartAdditional() }\n            </Overlay>\n        );\n    }\n}\n\nexport default CartOverlay;\n"]},"metadata":{},"sourceType":"module"}