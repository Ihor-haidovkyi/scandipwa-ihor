{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable react/no-array-index-key */ /**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import Html from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Html\";import Image from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Image\";import Slider from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Slider\";import{DeviceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Device\";import\"./SliderWidget.style\";/**\n * Homepage slider\n * @class SliderWidget\n * @namespace Component/SliderWidget/Component\n */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _SliderWidget=/*#__PURE__*/function(_Extensible){_inherits(_SliderWidget,_Extensible);var _super=_createSuper(_SliderWidget);function _SliderWidget(){var _this;_classCallCheck(this,_SliderWidget);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeImage:0,carouselDirection:'right',imageToShow:0};_this.onActiveImageChange=function(activeImage){_this.setState({activeImage:activeImage});};_this.startCarousel=function(interval){_this.carouselInterval=setInterval(function(){_this.getImageToShow();var imageToShow=_this.state.imageToShow;_this.onActiveImageChange(imageToShow);},interval);};_this.renderSlide=function(slide,i){var slide_text=slide.slide_text,isPlaceholder=slide.isPlaceholder,block=slide.title;return/*#__PURE__*/_checkBEM(React,\"figure\",{block:\"SliderWidget\",elem:\"Figure\",key:i},/*#__PURE__*/_checkBEM(React,Image,{mix:{block:'SliderWidget',elem:'FigureImage'},ratio:\"custom\",src:_this.getSlideImage(slide),isPlaceholder:isPlaceholder}),/*#__PURE__*/_checkBEM(React,\"figcaption\",{block:\"SliderWidget\",elem:\"Figcaption\",mix:{block:block}},/*#__PURE__*/_checkBEM(React,Html,{content:slide_text||''})));};return _this;}_createClass(_SliderWidget,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props$slider=this.props.slider,slideSpeed=_this$props$slider.slideSpeed,slides=_this$props$slider.slides;var prevSlideSpeed=prevProps.slider.slideSpeed;if(slideSpeed!==prevSlideSpeed&&slides.length!==1){this.startCarousel(slideSpeed);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.carouselInterval);}},{key:\"getImageToShow\",value:function getImageToShow(){var _this$state=this.state,activeImage=_this$state.activeImage,carouselDirection=_this$state.carouselDirection;var slides=this.props.slider.slides;if(activeImage===0){this.setState({carouselDirection:'right',imageToShow:activeImage+1});}else if(activeImage===slides.length-1){this.setState({carouselDirection:'left',imageToShow:activeImage-1});}else{this.setState({imageToShow:carouselDirection==='right'?activeImage+1:activeImage-1});}}},{key:\"getSlideImage\",value:function getSlideImage(slide){var desktop_image=slide.desktop_image,mobile_image=slide.mobile_image;var device=this.props.device;if(device.isMobile&&mobile_image){return\"/\".concat(mobile_image);}if(!desktop_image){return'';}return\"/\".concat(desktop_image);}},{key:\"render\",value:function render(){var activeImage=this.state.activeImage;var _this$props$slider2=this.props.slider,slides=_this$props$slider2.slides,block=_this$props$slider2.title;return/*#__PURE__*/_checkBEM(React,Slider,{mix:{block:'SliderWidget',mix:{block:block}},showCrumbs:true,activeImage:activeImage,onActiveImageChange:this.onActiveImageChange},slides.map(this.renderSlide));}}]);return _SliderWidget;}(Extensible(PureComponent));_SliderWidget.defaultProps={slider:[{}]};Object.defineProperty(_SliderWidget,'name',{value:'SliderWidget'});export var SliderWidget=middleware(_SliderWidget,\"Component/SliderWidget/Component\");export default SliderWidget;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/SliderWidget/SliderWidget.component.js"],"names":["PureComponent","Html","Image","Slider","DeviceType","SliderWidget","state","activeImage","carouselDirection","imageToShow","onActiveImageChange","setState","startCarousel","interval","carouselInterval","setInterval","getImageToShow","renderSlide","slide","i","slide_text","isPlaceholder","block","title","elem","getSlideImage","prevProps","props","slider","slideSpeed","slides","prevSlideSpeed","length","clearInterval","desktop_image","mobile_image","device","isMobile","mix","map","defaultProps","Object","defineProperty","_SliderWidget","value"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-array-index-key */\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport Html from 'Component/Html';\nimport Image from 'Component/Image';\nimport Slider from 'Component/Slider';\nimport { DeviceType } from 'Type/Device';\n\nimport './SliderWidget.style';\n\n/**\n * Homepage slider\n * @class SliderWidget\n * @namespace Component/SliderWidget/Component\n */\nexport class SliderWidget extends PureComponent {\n    static propTypes = {\n        slider: PropTypes.shape({\n            title: PropTypes.string,\n            slideSpeed: PropTypes.number,\n            slides: PropTypes.arrayOf(\n                PropTypes.shape({\n                    desktop_image: PropTypes.string,\n                    mobile_image: PropTypes.string,\n                    slide_text: PropTypes.string,\n                    isPlaceholder: PropTypes.bool\n                })\n            )\n        }),\n        device: DeviceType.isRequired\n    };\n\n    static defaultProps = {\n        slider: [{}]\n    };\n\n    state = {\n        activeImage: 0,\n        carouselDirection: 'right',\n        imageToShow: 0\n    };\n\n    componentDidUpdate(prevProps) {\n        const { slider: { slideSpeed, slides } } = this.props;\n        const { slider: { slideSpeed: prevSlideSpeed } } = prevProps;\n\n        if (slideSpeed !== prevSlideSpeed && slides.length !== 1) {\n            this.startCarousel(slideSpeed);\n        }\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.carouselInterval);\n    }\n\n    onActiveImageChange = (activeImage) => {\n        this.setState({ activeImage });\n    };\n\n    startCarousel = (interval) => {\n        this.carouselInterval = setInterval(() => {\n            this.getImageToShow();\n\n            const { imageToShow } = this.state;\n\n            this.onActiveImageChange(imageToShow);\n        }, interval);\n    };\n\n    getImageToShow() {\n        const { activeImage, carouselDirection } = this.state;\n        const { slider: { slides } } = this.props;\n\n        if (activeImage === 0) {\n            this.setState({\n                carouselDirection: 'right',\n                imageToShow: activeImage + 1\n            });\n        } else if (activeImage === slides.length - 1) {\n            this.setState({\n                carouselDirection: 'left',\n                imageToShow: activeImage - 1\n            });\n        } else {\n            this.setState({ imageToShow: carouselDirection === 'right' ? activeImage + 1 : activeImage - 1 });\n        }\n    }\n\n    getSlideImage(slide) {\n        const {\n            desktop_image,\n            mobile_image\n        } = slide;\n        const { device } = this.props;\n\n        if (device.isMobile && mobile_image) {\n            return `/${mobile_image}`;\n        }\n\n        if (!desktop_image) {\n            return '';\n        }\n\n        return `/${desktop_image}`;\n    }\n\n    renderSlide = (slide, i) => {\n        const {\n            slide_text,\n            isPlaceholder,\n            title: block\n        } = slide;\n\n        return (\n            <figure\n              block=\"SliderWidget\"\n              elem=\"Figure\"\n              key={ i }\n            >\n                <Image\n                  mix={ { block: 'SliderWidget', elem: 'FigureImage' } }\n                  ratio=\"custom\"\n                  src={ this.getSlideImage(slide) }\n                  isPlaceholder={ isPlaceholder }\n                />\n                <figcaption\n                  block=\"SliderWidget\"\n                  elem=\"Figcaption\"\n                  mix={ { block } }\n                >\n                    <Html content={ slide_text || '' } />\n                </figcaption>\n            </figure>\n        );\n    };\n\n    render() {\n        const { activeImage } = this.state;\n        const { slider: { slides, title: block } } = this.props;\n\n        return (\n            <Slider\n              mix={ { block: 'SliderWidget', mix: { block } } }\n              showCrumbs\n              activeImage={ activeImage }\n              onActiveImageChange={ this.onActiveImageChange }\n            >\n                { slides.map(this.renderSlide) }\n            </Slider>\n        );\n    }\n}\n\nexport default SliderWidget;\n"]},"metadata":{},"sourceType":"module"}