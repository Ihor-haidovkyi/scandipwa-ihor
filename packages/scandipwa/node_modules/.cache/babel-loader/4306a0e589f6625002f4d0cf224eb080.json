{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CategoryConfigurableAttributes from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CategoryConfigurableAttributes\";import Loader from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Loader\";import Overlay from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Overlay\";import ResetButton from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ResetButton\";import{CATEGORY_FILTER_OVERLAY_ID}from\"./CategoryFilterOverlay.config\";import\"./CategoryFilterOverlay.style\";/** @namespace Component/CategoryFilterOverlay/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CategoryFilterOverlay=/*#__PURE__*/function(_Extensible){_inherits(_CategoryFilterOverlay,_Extensible);var _super=_createSuper(_CategoryFilterOverlay);function _CategoryFilterOverlay(){_classCallCheck(this,_CategoryFilterOverlay);return _super.apply(this,arguments);}_createClass(_CategoryFilterOverlay,[{key:\"renderFilters\",value:function renderFilters(){var _this$props=this.props,availableFilters=_this$props.availableFilters,customFiltersValues=_this$props.customFiltersValues,toggleCustomFilter=_this$props.toggleCustomFilter,isMatchingInfoFilter=_this$props.isMatchingInfoFilter,getFilterUrl=_this$props.getFilterUrl;return/*#__PURE__*/_checkBEM(React,CategoryConfigurableAttributes,{mix:{block:'CategoryFilterOverlay',elem:'Attributes'},isReady:isMatchingInfoFilter,configurable_options:availableFilters,getLink:getFilterUrl,parameters:customFiltersValues,updateConfigurableVariant:toggleCustomFilter});}},{key:\"renderSeeResults\",value:function renderSeeResults(){var onSeeResultsClick=this.props.onSeeResultsClick;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CategoryFilterOverlay\",elem:\"SeeResults\"},/*#__PURE__*/_checkBEM(React,\"button\",{block:\"CategoryFilterOverlay\",elem:\"Button\",mix:{block:'Button'},onClick:onSeeResultsClick},__('SEE RESULTS')));}},{key:\"renderResetButton\",value:function renderResetButton(){var onSeeResultsClick=this.props.onSeeResultsClick;return/*#__PURE__*/_checkBEM(React,ResetButton,{onClick:onSeeResultsClick,mix:{block:'CategoryFilterOverlay',elem:'ResetButton'}});}},{key:\"renderHeading\",value:function renderHeading(){return/*#__PURE__*/_checkBEM(React,\"h3\",{block:\"CategoryFilterOverlay\",elem:\"Heading\"},__('Shopping Options'));}},{key:\"renderNoResults\",value:function renderNoResults(){return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CategoryFilterOverlay\",elem:\"NoResults\"},__(\"The selected filter combination returned no results.\\n                Please try again, using a different set of filters.\"));}},{key:\"renderEmptyFilters\",value:function renderEmptyFilters(){return/*#__PURE__*/_checkBEM(React,React.Fragment,null,this.renderNoResults(),this.renderResetButton(),this.renderSeeResults());}},{key:\"renderMinimalFilters\",value:function renderMinimalFilters(){return this.renderSeeResults();}},{key:\"renderDefaultFilters\",value:function renderDefaultFilters(){return/*#__PURE__*/_checkBEM(React,React.Fragment,null,this.renderHeading(),this.renderResetButton(),this.renderFilters(),this.renderSeeResults());}},{key:\"renderContent\",value:function renderContent(){var _this$props2=this.props,totalPages=_this$props2.totalPages,areFiltersEmpty=_this$props2.areFiltersEmpty,isProductsLoading=_this$props2.isProductsLoading;if(!isProductsLoading&&totalPages===0){return this.renderEmptyFilters();}if(areFiltersEmpty){return this.renderMinimalFilters();}return this.renderDefaultFilters();}},{key:\"renderLoader\",value:function renderLoader(){var _this$props3=this.props,isInfoLoading=_this$props3.isInfoLoading,availableFilters=_this$props3.availableFilters;var isLoaded=availableFilters&&!!Object.keys(availableFilters).length;if(!isLoaded){// hide loader if filters were not yet loaded (even once!)\nreturn null;}return/*#__PURE__*/_checkBEM(React,Loader,{isLoading:isInfoLoading});}},{key:\"render\",value:function render(){var _this$props4=this.props,onVisible=_this$props4.onVisible,onHide=_this$props4.onHide,totalPages=_this$props4.totalPages,isProductsLoading=_this$props4.isProductsLoading,isContentFiltered=_this$props4.isContentFiltered,isCategoryAnchor=_this$props4.isCategoryAnchor;if(!isProductsLoading&&totalPages===0&&!isContentFiltered||!isCategoryAnchor){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CategoryFilterOverlay\"});}return/*#__PURE__*/_checkBEM(React,Overlay,{onVisible:onVisible,onHide:onHide,mix:{block:'CategoryFilterOverlay'},id:CATEGORY_FILTER_OVERLAY_ID,isRenderInPortal:false},/*#__PURE__*/_checkBEM(React,\"div\",null,this.renderContent(),this.renderLoader()));}}]);return _CategoryFilterOverlay;}(Extensible(PureComponent));_CategoryFilterOverlay.defaultProps={isCategoryAnchor:true,isMatchingInfoFilter:false};Object.defineProperty(_CategoryFilterOverlay,'name',{value:'CategoryFilterOverlay'});export var CategoryFilterOverlay=middleware(_CategoryFilterOverlay,\"Component/CategoryFilterOverlay/Component\");export default CategoryFilterOverlay;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CategoryFilterOverlay/CategoryFilterOverlay.component.js"],"names":["PureComponent","CategoryConfigurableAttributes","Loader","Overlay","ResetButton","CATEGORY_FILTER_OVERLAY_ID","CategoryFilterOverlay","props","availableFilters","customFiltersValues","toggleCustomFilter","isMatchingInfoFilter","getFilterUrl","block","elem","onSeeResultsClick","__","renderNoResults","renderResetButton","renderSeeResults","renderHeading","renderFilters","totalPages","areFiltersEmpty","isProductsLoading","renderEmptyFilters","renderMinimalFilters","renderDefaultFilters","isInfoLoading","isLoaded","Object","keys","length","onVisible","onHide","isContentFiltered","isCategoryAnchor","renderContent","renderLoader","defaultProps","defineProperty","_CategoryFilterOverlay","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CategoryConfigurableAttributes from 'Component/CategoryConfigurableAttributes';\nimport Loader from 'Component/Loader';\nimport Overlay from 'Component/Overlay';\nimport ResetButton from 'Component/ResetButton';\n\nimport { CATEGORY_FILTER_OVERLAY_ID } from './CategoryFilterOverlay.config';\n\nimport './CategoryFilterOverlay.style';\n\n/** @namespace Component/CategoryFilterOverlay/Component */\nexport class CategoryFilterOverlay extends PureComponent {\n    static propTypes = {\n        availableFilters: PropTypes.objectOf(PropTypes.shape).isRequired,\n        areFiltersEmpty: PropTypes.bool.isRequired,\n        isContentFiltered: PropTypes.bool.isRequired,\n        isMatchingInfoFilter: PropTypes.bool,\n        isInfoLoading: PropTypes.bool.isRequired,\n        isProductsLoading: PropTypes.bool.isRequired,\n        onSeeResultsClick: PropTypes.func.isRequired,\n        onVisible: PropTypes.func.isRequired,\n        onHide: PropTypes.func.isRequired,\n        customFiltersValues: PropTypes.objectOf(PropTypes.array).isRequired,\n        toggleCustomFilter: PropTypes.func.isRequired,\n        getFilterUrl: PropTypes.func.isRequired,\n        totalPages: PropTypes.number.isRequired,\n        isCategoryAnchor: PropTypes.bool\n    };\n\n    static defaultProps = {\n        isCategoryAnchor: true,\n        isMatchingInfoFilter: false\n    };\n\n    renderFilters() {\n        const {\n            availableFilters,\n            customFiltersValues,\n            toggleCustomFilter,\n            isMatchingInfoFilter,\n            getFilterUrl\n        } = this.props;\n\n        return (\n            <CategoryConfigurableAttributes\n              mix={ { block: 'CategoryFilterOverlay', elem: 'Attributes' } }\n              isReady={ isMatchingInfoFilter }\n              configurable_options={ availableFilters }\n              getLink={ getFilterUrl }\n              parameters={ customFiltersValues }\n              updateConfigurableVariant={ toggleCustomFilter }\n            />\n        );\n    }\n\n    renderSeeResults() {\n        const { onSeeResultsClick } = this.props;\n\n        return (\n            <div\n              block=\"CategoryFilterOverlay\"\n              elem=\"SeeResults\"\n            >\n                <button\n                  block=\"CategoryFilterOverlay\"\n                  elem=\"Button\"\n                  mix={ { block: 'Button' } }\n                  onClick={ onSeeResultsClick }\n                >\n                    { __('SEE RESULTS') }\n                </button>\n            </div>\n        );\n    }\n\n    renderResetButton() {\n        const { onSeeResultsClick } = this.props;\n\n        return (\n            <ResetButton\n              onClick={ onSeeResultsClick }\n              mix={ { block: 'CategoryFilterOverlay', elem: 'ResetButton' } }\n            />\n        );\n    }\n\n    renderHeading() {\n        return (\n            <h3 block=\"CategoryFilterOverlay\" elem=\"Heading\">\n                { __('Shopping Options') }\n            </h3>\n        );\n    }\n\n    renderNoResults() {\n        return (\n            <p block=\"CategoryFilterOverlay\" elem=\"NoResults\">\n                { __(`The selected filter combination returned no results.\n                Please try again, using a different set of filters.`) }\n            </p>\n        );\n    }\n\n    renderEmptyFilters() {\n        return (\n            <>\n                { this.renderNoResults() }\n                { this.renderResetButton() }\n                { this.renderSeeResults() }\n            </>\n        );\n    }\n\n    renderMinimalFilters() {\n        return this.renderSeeResults();\n    }\n\n    renderDefaultFilters() {\n        return (\n            <>\n                { this.renderHeading() }\n                { this.renderResetButton() }\n                { this.renderFilters() }\n                { this.renderSeeResults() }\n            </>\n        );\n    }\n\n    renderContent() {\n        const {\n            totalPages,\n            areFiltersEmpty,\n            isProductsLoading\n        } = this.props;\n\n        if (!isProductsLoading && totalPages === 0) {\n            return this.renderEmptyFilters();\n        }\n\n        if (areFiltersEmpty) {\n            return this.renderMinimalFilters();\n        }\n\n        return this.renderDefaultFilters();\n    }\n\n    renderLoader() {\n        const {\n            isInfoLoading,\n            availableFilters\n        } = this.props;\n\n        const isLoaded = availableFilters && !!Object.keys(availableFilters).length;\n\n        if (!isLoaded) { // hide loader if filters were not yet loaded (even once!)\n            return null;\n        }\n\n        return (\n            <Loader isLoading={ isInfoLoading } />\n        );\n    }\n\n    render() {\n        const {\n            onVisible,\n            onHide,\n            totalPages,\n            isProductsLoading,\n            isContentFiltered,\n            isCategoryAnchor\n        } = this.props;\n\n        if ((!isProductsLoading && totalPages === 0 && !isContentFiltered) || !isCategoryAnchor) {\n            return (\n                <div block=\"CategoryFilterOverlay\" />\n            );\n        }\n\n        return (\n            <Overlay\n              onVisible={ onVisible }\n              onHide={ onHide }\n              mix={ { block: 'CategoryFilterOverlay' } }\n              id={ CATEGORY_FILTER_OVERLAY_ID }\n              isRenderInPortal={ false }\n            >\n                <div>\n                    { this.renderContent() }\n                    { this.renderLoader() }\n                </div>\n            </Overlay>\n        );\n    }\n}\n\nexport default CategoryFilterOverlay;\n"]},"metadata":{},"sourceType":"module"}