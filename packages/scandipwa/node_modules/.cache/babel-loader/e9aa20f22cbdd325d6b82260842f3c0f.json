{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable jsx-a11y/click-events-have-key-events */ /**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{createRef,lazy,PureComponent,Suspense}from'react';import ClickOutside from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ClickOutside\";import Loader from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Loader\";import{DeviceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Device\";import history from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/History\";import{appendWithStoreCode}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Url\";import\"./SearchField.style\";export var SearchOverlay=/*#__PURE__*/lazy(function(){return import(/* webpackMode: \"lazy\", webpackChunkName: \"category\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/component/SearchOverlay\");});/** @namespace Component/SearchField/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _SearchField=/*#__PURE__*/function(_Extensible){_inherits(_SearchField,_Extensible);var _super=_createSuper(_SearchField);function _SearchField(){var _this;_classCallCheck(this,_SearchField);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.searchBarRef=/*#__PURE__*/createRef();_this.state={isPlaceholderVisible:true,showSearch:false};_this.onSearchEnterPress=function(e){var _this$props=_this.props,searchCriteria=_this$props.searchCriteria,hideActiveOverlay=_this$props.hideActiveOverlay,onSearchBarChange=_this$props.onSearchBarChange;var search=searchCriteria.trim().replace(/\\s\\s+/g,'%20');var trimmedSearch=searchCriteria.trim();if(e.key==='Enter'&&trimmedSearch!==''){history.push(appendWithStoreCode(\"/search/\".concat(search)));hideActiveOverlay();onSearchBarChange({target:{value:''}});_this.searchBarRef.current.blur();_this.closeSearch();}};_this.onIconClick=function(){_this.searchBarRef.current.focus();};_this.openSearch=function(){var onSearchBarFocus=_this.props.onSearchBarFocus;onSearchBarFocus();_this.setState({showSearch:true});};_this.closeSearch=function(){var onSearchOutsideClick=_this.props.onSearchOutsideClick;onSearchOutsideClick();_this.setState({showSearch:false});};_this.handleChange=function(e){var value=e.target.value;var onSearchBarChange=_this.props.onSearchBarChange;onSearchBarChange(e);_this.setState({isPlaceholderVisible:value===''});};_this.clearSearch=function(){_this.onClearSearchButtonClick(false);};return _this;}_createClass(_SearchField,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){var showSearch=this.state.showSearch;if(showSearch){this.onIconClick();}}},{key:\"onClearSearchButtonClick\",value:function onClearSearchButtonClick(){var isFocusOnSearchBar=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var onClearSearchButtonClick=this.props.onClearSearchButtonClick;if(isFocusOnSearchBar){this.searchBarRef.current.focus();}onClearSearchButtonClick();}},{key:\"renderClearSearch\",value:function renderClearSearch(){var isVisible=this.props.isVisible;return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"Header\",elem:\"Button\",onClick:this.onClearSearchButtonClick,mods:{type:'searchClear',isVisible:isVisible},\"aria-label\":\"Clear search\"});}},{key:\"renderOverlayFallback\",value:function renderOverlayFallback(){return/*#__PURE__*/_checkBEM(React,Loader,{isLoading:true});}},{key:\"renderSearch\",value:function renderSearch(){var _this$props2=this.props,searchCriteria=_this$props2.searchCriteria,onSearchBarFocus=_this$props2.onSearchBarFocus,isActive=_this$props2.isActive;var showSearch=this.state.showSearch;if(!showSearch){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"SearchField\",elem:\"SearchInnerWrapper\"},/*#__PURE__*/_checkBEM(React,\"input\",{id:\"search-field\",ref:this.searchBarRef,block:\"SearchField\",elem:\"Input\",onFocus:onSearchBarFocus,onChange:this.handleChange,onKeyDown:this.onSearchEnterPress,value:searchCriteria,mods:{isActive:isActive},autoComplete:\"off\",\"aria-label\":__('Search')}),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"SearchField\",elem:\"SearchIcon\",role:\"button\",tabIndex:\"0\",onClick:this.onIconClick,\"aria-label\":__('Search')}),/*#__PURE__*/_checkBEM(React,Suspense,{fallback:this.renderOverlayFallback()},/*#__PURE__*/_checkBEM(React,SearchOverlay,{isHideOverlay:true,clearSearch:this.clearSearch,searchCriteria:searchCriteria})));}},{key:\"renderSearchIcon\",value:function renderSearchIcon(){var showSearch=this.state.showSearch;if(showSearch){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"SearchField\",elem:\"CloseIcon\",role:\"button\",tabIndex:\"0\",onClick:this.closeSearch,\"aria-label\":__('Close')});}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"SearchField\",elem:\"SearchIcon\",role:\"button\",tabIndex:\"0\",onClick:this.openSearch,\"aria-label\":__('Search')});}},{key:\"renderDesktopContent\",value:function renderDesktopContent(){var device=this.props.device;var showSearch=this.state.showSearch;if(device.isMobile){return null;}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,this.renderSearchIcon(),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"SearchField\",elem:\"SearchWrapper\",mods:{isVisible:showSearch}},this.renderSearch()));}},{key:\"renderMobileContent\",value:function renderMobileContent(){var _this$props3=this.props,searchCriteria=_this$props3.searchCriteria,onSearchBarFocus=_this$props3.onSearchBarFocus,isActive=_this$props3.isActive,device=_this$props3.device;if(!device.isMobile){return null;}var isPlaceholderVisible=this.state.isPlaceholderVisible;return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"input\",{id:\"search-field\",ref:this.searchBarRef,block:\"SearchField\",elem:\"Input\",onFocus:onSearchBarFocus,onChange:this.handleChange,onKeyDown:this.onSearchEnterPress,value:searchCriteria,mods:{isActive:isActive},autoComplete:\"off\",\"aria-label\":__('Search')}),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"SearchField\",elem:\"Placeholder\",mods:{isActive:isActive,isPlaceholderVisible:isPlaceholderVisible}},/*#__PURE__*/_checkBEM(React,\"span\",null,__('Search'))),/*#__PURE__*/_checkBEM(React,Suspense,{fallback:this.renderOverlayFallback()},/*#__PURE__*/_checkBEM(React,SearchOverlay,{clearSearch:this.clearSearch,searchCriteria:searchCriteria})));}},{key:\"render\",value:function render(){var _this$props4=this.props,isVisible=_this$props4.isVisible,isActive=_this$props4.isActive;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"SearchField\",mods:{isVisible:isVisible,isActive:isActive}},/*#__PURE__*/_checkBEM(React,ClickOutside,{onClick:this.closeSearch},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"SearchField\",elem:\"Wrapper\"},this.renderMobileContent(),this.renderDesktopContent())));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props){var isActive=props.isActive;if(isActive){return null;}return{isPlaceholderVisible:true};}}]);return _SearchField;}(Extensible(PureComponent));_SearchField.defaultProps={isVisible:true,isActive:true,searchCriteria:'',hideActiveOverlay:function hideActiveOverlay(){}};Object.defineProperty(_SearchField,'name',{value:'SearchField'});export var SearchField=middleware(_SearchField,\"Component/SearchField/Component\");export default SearchField;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/SearchField/SearchField.component.js"],"names":["createRef","lazy","PureComponent","Suspense","ClickOutside","Loader","DeviceType","history","appendWithStoreCode","SearchOverlay","SearchField","searchBarRef","state","isPlaceholderVisible","showSearch","onSearchEnterPress","e","props","searchCriteria","hideActiveOverlay","onSearchBarChange","search","trim","replace","trimmedSearch","key","push","target","value","current","blur","closeSearch","onIconClick","focus","openSearch","onSearchBarFocus","setState","onSearchOutsideClick","handleChange","clearSearch","onClearSearchButtonClick","isFocusOnSearchBar","isVisible","type","isActive","__","renderOverlayFallback","device","isMobile","renderSearchIcon","renderSearch","renderMobileContent","renderDesktopContent","defaultProps","Object","defineProperty","_SearchField"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport {\n    createRef,\n    lazy,\n    PureComponent,\n    Suspense\n} from 'react';\n\nimport ClickOutside from 'Component/ClickOutside';\nimport Loader from 'Component/Loader';\nimport { DeviceType } from 'Type/Device';\nimport history from 'Util/History';\nimport { appendWithStoreCode } from 'Util/Url';\n\nimport './SearchField.style';\n\nexport const SearchOverlay = lazy(\n    () => import(\n        /* webpackMode: \"lazy\", webpackChunkName: \"category\" */\n        'Component/SearchOverlay'\n    )\n);\n\n/** @namespace Component/SearchField/Component */\nexport class SearchField extends PureComponent {\n    static propTypes = {\n        searchCriteria: PropTypes.string,\n        onSearchBarFocus: PropTypes.func.isRequired,\n        onSearchBarChange: PropTypes.func.isRequired,\n        onSearchOutsideClick: PropTypes.func.isRequired,\n        onClearSearchButtonClick: PropTypes.func.isRequired,\n        isVisible: PropTypes.bool,\n        isActive: PropTypes.bool,\n        hideActiveOverlay: PropTypes.func,\n        device: DeviceType.isRequired\n    };\n\n    static defaultProps = {\n        isVisible: true,\n        isActive: true,\n        searchCriteria: '',\n        hideActiveOverlay: () => {}\n    };\n\n    searchBarRef = createRef();\n\n    state = {\n        isPlaceholderVisible: true,\n        showSearch: false\n    };\n\n    static getDerivedStateFromProps(props) {\n        const { isActive } = props;\n        if (isActive) {\n            return null;\n        }\n\n        return { isPlaceholderVisible: true };\n    }\n\n    componentDidUpdate() {\n        const { showSearch } = this.state;\n\n        if (showSearch) {\n            this.onIconClick();\n        }\n    }\n\n    onClearSearchButtonClick(isFocusOnSearchBar = true) {\n        const { onClearSearchButtonClick } = this.props;\n        if (isFocusOnSearchBar) {\n            this.searchBarRef.current.focus();\n        }\n        onClearSearchButtonClick();\n    }\n\n    onSearchEnterPress = (e) => {\n        const { searchCriteria, hideActiveOverlay, onSearchBarChange } = this.props;\n        const search = searchCriteria.trim().replace(/\\s\\s+/g, '%20');\n        const trimmedSearch = searchCriteria.trim();\n\n        if (e.key === 'Enter' && trimmedSearch !== '') {\n            history.push(appendWithStoreCode(`/search/${ search }`));\n            hideActiveOverlay();\n            onSearchBarChange({ target: { value: '' } });\n            this.searchBarRef.current.blur();\n            this.closeSearch();\n        }\n    };\n\n    onIconClick = () => {\n        this.searchBarRef.current.focus();\n    };\n\n    openSearch = () => {\n        const { onSearchBarFocus } = this.props;\n\n        onSearchBarFocus();\n        this.setState({ showSearch: true });\n    };\n\n    closeSearch = () => {\n        const { onSearchOutsideClick } = this.props;\n\n        onSearchOutsideClick();\n        this.setState({ showSearch: false });\n    };\n\n    handleChange = (e) => {\n        const { target: { value } } = e;\n        const { onSearchBarChange } = this.props;\n        onSearchBarChange(e);\n\n        this.setState({ isPlaceholderVisible: value === '' });\n    };\n\n    clearSearch = () => {\n        this.onClearSearchButtonClick(false);\n    };\n\n    renderClearSearch() {\n        const { isVisible } = this.props;\n\n        return (\n            <button\n              block=\"Header\"\n              elem=\"Button\"\n              onClick={ this.onClearSearchButtonClick }\n              mods={ {\n                  type: 'searchClear',\n                  isVisible\n              } }\n              aria-label=\"Clear search\"\n            />\n        );\n    }\n\n    renderOverlayFallback() {\n        return <Loader isLoading />;\n    }\n\n    renderSearch() {\n        const {\n            searchCriteria,\n            onSearchBarFocus,\n            isActive\n        } = this.props;\n\n        const { showSearch } = this.state;\n\n        if (!showSearch) {\n            return null;\n        }\n\n        return (\n            <div\n              block=\"SearchField\"\n              elem=\"SearchInnerWrapper\"\n            >\n                <input\n                  id=\"search-field\"\n                  ref={ this.searchBarRef }\n                  block=\"SearchField\"\n                  elem=\"Input\"\n                  onFocus={ onSearchBarFocus }\n                  onChange={ this.handleChange }\n                  onKeyDown={ this.onSearchEnterPress }\n                  value={ searchCriteria }\n                  mods={ { isActive } }\n                  autoComplete=\"off\"\n                  aria-label={ __('Search') }\n                />\n                <div\n                  block=\"SearchField\"\n                  elem=\"SearchIcon\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={ this.onIconClick }\n                  aria-label={ __('Search') }\n                />\n                <Suspense fallback={ this.renderOverlayFallback() }>\n                    <SearchOverlay\n                      isHideOverlay\n                      clearSearch={ this.clearSearch }\n                      searchCriteria={ searchCriteria }\n                    />\n                </Suspense>\n            </div>\n        );\n    }\n\n    renderSearchIcon() {\n        const { showSearch } = this.state;\n\n        if (showSearch) {\n            return (\n                <div\n                  block=\"SearchField\"\n                  elem=\"CloseIcon\"\n                  role=\"button\"\n                  tabIndex=\"0\"\n                  onClick={ this.closeSearch }\n                  aria-label={ __('Close') }\n                />\n            );\n        }\n\n        return (\n            <div\n              block=\"SearchField\"\n              elem=\"SearchIcon\"\n              role=\"button\"\n              tabIndex=\"0\"\n              onClick={ this.openSearch }\n              aria-label={ __('Search') }\n            />\n        );\n    }\n\n    renderDesktopContent() {\n        const { device } = this.props;\n        const { showSearch } = this.state;\n\n        if (device.isMobile) {\n            return null;\n        }\n\n        return (\n            <>\n                { this.renderSearchIcon() }\n                <div\n                  block=\"SearchField\"\n                  elem=\"SearchWrapper\"\n                  mods={ { isVisible: showSearch } }\n                >\n                    { this.renderSearch() }\n                </div>\n            </>\n        );\n    }\n\n    renderMobileContent() {\n        const {\n            searchCriteria,\n            onSearchBarFocus,\n            isActive,\n            device\n        } = this.props;\n\n        if (!device.isMobile) {\n            return null;\n        }\n\n        const { isPlaceholderVisible } = this.state;\n\n        return (\n            <>\n                <input\n                  id=\"search-field\"\n                  ref={ this.searchBarRef }\n                  block=\"SearchField\"\n                  elem=\"Input\"\n                  onFocus={ onSearchBarFocus }\n                  onChange={ this.handleChange }\n                  onKeyDown={ this.onSearchEnterPress }\n                  value={ searchCriteria }\n                  mods={ { isActive } }\n                  autoComplete=\"off\"\n                  aria-label={ __('Search') }\n                />\n                <div\n                  block=\"SearchField\"\n                  elem=\"Placeholder\"\n                  mods={ {\n                      isActive,\n                      isPlaceholderVisible\n                  } }\n                >\n                    <span>{ __('Search') }</span>\n                </div>\n                <Suspense fallback={ this.renderOverlayFallback() }>\n                    <SearchOverlay clearSearch={ this.clearSearch } searchCriteria={ searchCriteria } />\n                </Suspense>\n            </>\n        );\n    }\n\n    render() {\n        const {\n            isVisible,\n            isActive\n        } = this.props;\n\n        return (\n            <div block=\"SearchField\" mods={ { isVisible, isActive } }>\n                <ClickOutside onClick={ this.closeSearch }>\n                    <div block=\"SearchField\" elem=\"Wrapper\">\n                        { this.renderMobileContent() }\n                        { this.renderDesktopContent() }\n                    </div>\n                </ClickOutside>\n            </div>\n        );\n    }\n}\n\nexport default SearchField;\n"]},"metadata":{},"sourceType":"module"}