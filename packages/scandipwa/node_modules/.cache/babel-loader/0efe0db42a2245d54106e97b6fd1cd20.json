{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import ContentWrapper from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ContentWrapper\";import Link from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Link\";import BrowserDatabase from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/BrowserDatabase\";import{ONE_MONTH_IN_SECONDS}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request/QueryDispatcher\";import{COOKIE_POPUP}from\"./CookiePopup.config\";import\"./CookiePopup.style\";/** @namespace Component/CookiePopup/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CookiePopup=/*#__PURE__*/function(_Extensible){_inherits(_CookiePopup,_Extensible);var _super=_createSuper(_CookiePopup);function _CookiePopup(){var _this;_classCallCheck(this,_CookiePopup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isAccepted:_this.getAcceptCookieValue()};_this.acceptCookies=function(){var code=_this.props.code;var param=\"\".concat(COOKIE_POPUP,\"_\").concat(code);BrowserDatabase.setItem(true,param,ONE_MONTH_IN_SECONDS);_this.setState({isAccepted:true});};return _this;}_createClass(_CookiePopup,[{key:\"getAcceptCookieValue\",value:function getAcceptCookieValue(){var code=this.props.code;var param=\"\".concat(COOKIE_POPUP,\"_\").concat(code);return!!BrowserDatabase.getItem(param);}},{key:\"renderCookieLink\",value:function renderCookieLink(){var cookieLink=this.props.cookieLink;if(!cookieLink){return null;}return/*#__PURE__*/_checkBEM(React,Link,{block:\"CookiePopup\",elem:\"Link\",to:cookieLink},__('Read more'));}},{key:\"renderCookieText\",value:function renderCookieText(){var cookieText=this.props.cookieText;return/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CookiePopup\",elem:\"Content\"},cookieText,this.renderCookieLink());}},{key:\"renderCTA\",value:function renderCTA(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CookiePopup\",elem:\"CTA\"},/*#__PURE__*/_checkBEM(React,\"button\",{block:\"Button\",onClick:this.acceptCookies},__('Accept')));}},{key:\"render\",value:function render(){var cookieText=this.props.cookieText;var isAccepted=this.state.isAccepted;if(!cookieText||isAccepted){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CookiePopup\"},/*#__PURE__*/_checkBEM(React,ContentWrapper,{label:\"Cookie popup\",mix:{block:'CookiePopup',elem:'Wrapper'},wrapperMix:{block:'CookiePopup',elem:'ContentWrapper'}},this.renderCookieText(),this.renderCTA()));}}]);return _CookiePopup;}(Extensible(PureComponent));_CookiePopup.defaultProps={cookieText:'',cookieLink:'',code:''};Object.defineProperty(_CookiePopup,'name',{value:'CookiePopup'});export var CookiePopup=middleware(_CookiePopup,\"Component/CookiePopup/Component\");export default CookiePopup;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CookiePopup/CookiePopup.component.js"],"names":["PureComponent","ContentWrapper","Link","BrowserDatabase","ONE_MONTH_IN_SECONDS","COOKIE_POPUP","CookiePopup","state","isAccepted","getAcceptCookieValue","acceptCookies","code","props","param","setItem","setState","getItem","cookieLink","__","cookieText","renderCookieLink","block","elem","renderCookieText","renderCTA","defaultProps","Object","defineProperty","_CookiePopup","value"],"mappings":"ojBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAGA,OAASA,aAAT,KAA8B,OAA9B,CAEA,MAAOC,CAAAA,cAAP,kFACA,MAAOC,CAAAA,IAAP,wEACA,MAAOC,CAAAA,eAAP,8EACA,OAASC,oBAAT,sFAEA,OAASC,YAAT,4BAEA,4BAEA,iD,wEACA,UAAaC,CAAAA,YAAb,qVAaIC,KAbJ,CAaY,CACJC,UAAU,CAAE,MAAKC,oBAAL,EADR,CAbZ,OAwBIC,aAxBJ,CAwBoB,UAAM,IACVC,CAAAA,IADU,CACD,MAAKC,KADJ,CACVD,IADU,CAElB,GAAME,CAAAA,KAAK,WAAOR,YAAP,aAAyBM,IAAzB,CAAX,CAEAR,eAAe,CAACW,OAAhB,CAAwB,IAAxB,CAA8BD,KAA9B,CAAqCT,oBAArC,EACA,MAAKW,QAAL,CAAc,CAAEP,UAAU,CAAE,IAAd,CAAd,EACH,CA9BL,4EAiBI,+BAAuB,IACXG,CAAAA,IADW,CACF,KAAKC,KADH,CACXD,IADW,CAEnB,GAAME,CAAAA,KAAK,WAAOR,YAAP,aAAyBM,IAAzB,CAAX,CAEA,MAAO,CAAC,CAACR,eAAe,CAACa,OAAhB,CAAwBH,KAAxB,CAAT,CACH,CAtBL,gCAgCI,2BAAmB,IACPI,CAAAA,UADO,CACQ,KAAKL,KADb,CACPK,UADO,CAGf,GAAI,CAACA,UAAL,CAAiB,CACb,MAAO,KAAP,CACH,CAED,mCACK,IADL,EAEM,KAAK,CAAC,aAFZ,CAGM,IAAI,CAAC,MAHX,CAIM,EAAE,CAAGA,UAJX,EAMUC,EAAE,CAAC,WAAD,CANZ,EASH,CAhDL,gCAkDI,2BAAmB,IACPC,CAAAA,UADO,CACQ,KAAKP,KADb,CACPO,UADO,CAGf,wCACO,KAAK,CAAC,aADb,CAC2B,IAAI,CAAC,SADhC,EAEUA,UAFV,CAGU,KAAKC,gBAAL,EAHV,EAMH,CA3DL,yBA6DI,oBAAY,CACR,0CACS,KAAK,CAAC,aADf,CAC6B,IAAI,CAAC,KADlC,yCAEgB,KAAK,CAAC,QAFtB,CAE+B,OAAO,CAAG,KAAKV,aAF9C,EAGcQ,EAAE,CAAC,QAAD,CAHhB,GAOH,CArEL,sBAuEI,iBAAS,IACGC,CAAAA,UADH,CACkB,KAAKP,KADvB,CACGO,UADH,IAEGX,CAAAA,UAFH,CAEkB,KAAKD,KAFvB,CAEGC,UAFH,CAIL,GAAI,CAACW,UAAD,EAAeX,UAAnB,CAA+B,CAC3B,MAAO,KAAP,CACH,CAED,0CACS,KAAK,CAAC,aADf,+BAES,cAFT,EAGU,KAAK,CAAC,cAHhB,CAIU,GAAG,CAAG,CAAEa,KAAK,CAAE,aAAT,CAAwBC,IAAI,CAAE,SAA9B,CAJhB,CAKU,UAAU,CAAG,CAAED,KAAK,CAAE,aAAT,CAAwBC,IAAI,CAAE,gBAA9B,CALvB,EAOc,KAAKC,gBAAL,EAPd,CAQc,KAAKC,SAAL,EARd,GAYH,CA3FL,qDAAalB,Y,CAOFmB,Y,CAAe,CAClBN,UAAU,CAAE,EADM,CAElBF,UAAU,CAAE,EAFM,CAGlBN,IAAI,CAAE,EAHY,C,CA/B1Be,MAAM,CAACC,cAAP,CAAsBC,YAAtB,CAAoC,MAApC,CAA4C,CAAEC,KAAK,CAAE,aAAT,CAA5C,E,kFAsHA,cAAevB,CAAAA,WAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport ContentWrapper from 'Component/ContentWrapper';\nimport Link from 'Component/Link';\nimport BrowserDatabase from 'Util/BrowserDatabase';\nimport { ONE_MONTH_IN_SECONDS } from 'Util/Request/QueryDispatcher';\n\nimport { COOKIE_POPUP } from './CookiePopup.config';\n\nimport './CookiePopup.style';\n\n/** @namespace Component/CookiePopup/Component */\nexport class CookiePopup extends PureComponent {\n    static propTypes = {\n        cookieText: PropTypes.string,\n        cookieLink: PropTypes.string,\n        code: PropTypes.string\n    };\n\n    static defaultProps = {\n        cookieText: '',\n        cookieLink: '',\n        code: ''\n    };\n\n    state = {\n        isAccepted: this.getAcceptCookieValue()\n    };\n\n    getAcceptCookieValue() {\n        const { code } = this.props;\n        const param = `${ COOKIE_POPUP }_${ code }`;\n\n        return !!BrowserDatabase.getItem(param);\n    }\n\n    acceptCookies = () => {\n        const { code } = this.props;\n        const param = `${ COOKIE_POPUP }_${ code }`;\n\n        BrowserDatabase.setItem(true, param, ONE_MONTH_IN_SECONDS);\n        this.setState({ isAccepted: true });\n    };\n\n    renderCookieLink() {\n        const { cookieLink } = this.props;\n\n        if (!cookieLink) {\n            return null;\n        }\n\n        return (\n            <Link\n              block=\"CookiePopup\"\n              elem=\"Link\"\n              to={ cookieLink }\n            >\n                { __('Read more') }\n            </Link>\n        );\n    }\n\n    renderCookieText() {\n        const { cookieText } = this.props;\n\n        return (\n            <p block=\"CookiePopup\" elem=\"Content\">\n                { cookieText }\n                { this.renderCookieLink() }\n            </p>\n        );\n    }\n\n    renderCTA() {\n        return (\n            <div block=\"CookiePopup\" elem=\"CTA\">\n                <button block=\"Button\" onClick={ this.acceptCookies }>\n                    { __('Accept') }\n                </button>\n            </div>\n        );\n    }\n\n    render() {\n        const { cookieText } = this.props;\n        const { isAccepted } = this.state;\n\n        if (!cookieText || isAccepted) {\n            return null;\n        }\n\n        return (\n            <div block=\"CookiePopup\">\n                <ContentWrapper\n                  label=\"Cookie popup\"\n                  mix={ { block: 'CookiePopup', elem: 'Wrapper' } }\n                  wrapperMix={ { block: 'CookiePopup', elem: 'ContentWrapper' } }\n                >\n                    { this.renderCookieText() }\n                    { this.renderCTA() }\n                </ContentWrapper>\n            </div>\n        );\n    }\n}\n\nexport default CookiePopup;\n"]},"metadata":{},"sourceType":"module"}