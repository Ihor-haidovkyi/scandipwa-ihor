{"ast":null,"code":"import React,{Component}from'react';/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */ /* global Reflect, Promise */var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};function __extends(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}var _assign=function __assign(){_assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}}return t;};return _assign.apply(this,arguments);};function __rest(s,e){var t={};for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];}if(s!=null&&typeof Object.getOwnPropertySymbols===\"function\")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t;}var initialState={wrapperComponent:null,contentComponent:null,previousScale:1,scale:1,positionX:0,positionY:0,options:{disabled:false,transformEnabled:true,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:true,limitToWrapper:false,centerContent:true,wrapperClass:\"\",contentClass:\"\"},wheel:{disabled:false,step:5,wheelEnabled:true,touchPadEnabled:true,limitsOnWheel:false},pan:{disabled:false,panAnimationType:\"linear\",lockAxisX:false,lockAxisY:false,velocity:true,velocityEqualToMove:true,velocitySensitivity:2,velocityActiveScale:1,velocityMinSpeed:1,velocityBaseTime:1600,velocityAnimationType:\"easeOutQuart\",padding:true,paddingSize:30,panReturnAnimationTime:400,panReturnAnimationType:\"easeOut\",disableOnTarget:[]},pinch:{disabled:false},zoomIn:{disabled:false,step:20,animation:true,animationType:\"easeOut\",animationTime:200},zoomOut:{disabled:false,step:20,animation:true,animationType:\"easeOut\",animationTime:200},doubleClick:{disabled:false,step:20,mode:\"zoomIn\",animation:true,animationType:\"easeOut\",animationTime:200},reset:{disabled:false,animation:true,animationType:\"easeOut\",animationTime:200},scalePadding:{disabled:false,size:0.2,animationTime:200,animationType:\"easeOut\"}};/**\r\n * Rounds number to given decimal\r\n * eg. roundNumber(2.34343, 1) => 2.3\r\n */var roundNumber=function roundNumber(num,decimal){return Number(num.toFixed(decimal));};/**\r\n * Checks if value is number, if not it returns default value\r\n * 1# eg. checkIsNumber(2, 30) => 2\r\n * 2# eg. checkIsNumber(null, 30) => 30\r\n */var checkIsNumber=function checkIsNumber(num,defaultValue){return typeof num===\"number\"?num:defaultValue;};/**\r\n * Keeps value between given bounds, used for limiting view to given boundaries\r\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\r\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\r\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\r\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\r\n */var boundLimiter=function boundLimiter(value,minBound,maxBound,isActive){if(!isActive)return roundNumber(value,2);if(value<minBound)return roundNumber(minBound,2);if(value>maxBound)return roundNumber(maxBound,2);return roundNumber(value,2);};/**\r\n * Calculate bounding area of zoomed/panned element\r\n */var calculateBoundingArea=function calculateBoundingArea(wrapperWidth,newContentWidth,diffWidth,wrapperHeight,newContentHeight,diffHeight,limitToWrapper){var scaleWidthFactor=wrapperWidth>newContentWidth?diffWidth*(limitToWrapper?1:0.5):0;var scaleHeightFactor=wrapperHeight>newContentHeight?diffHeight*(limitToWrapper?1:0.5):0;var minPositionX=wrapperWidth-newContentWidth-scaleWidthFactor;var maxPositionX=scaleWidthFactor;var minPositionY=wrapperHeight-newContentHeight-scaleHeightFactor;var maxPositionY=scaleHeightFactor;return{minPositionX:minPositionX,maxPositionX:maxPositionX,minPositionY:minPositionY,maxPositionY:maxPositionY};};/**\r\n * Returns distance between two points x,y\r\n */var getDistance=function getDistance(firstPoint,secondPoint){return Math.sqrt(Math.pow(firstPoint.pageX-secondPoint.pageX,2)+Math.pow(firstPoint.pageY-secondPoint.pageY,2));};/**\r\n * Delete undefined values from object keys\r\n * Used for deleting empty props\r\n */var deleteUndefinedProps=function deleteUndefinedProps(value){var newObject=_assign({},value);Object.keys(newObject).forEach(function(key){return newObject[key]===undefined&&delete newObject[key];});return newObject;};/**\r\n * Fire callback if it's function\r\n */var handleCallback=function handleCallback(callback,props){if(callback&&typeof callback===\"function\"){callback(props);}};var handleWheelStop=function handleWheelStop(previousEvent,event,stateProvider){var scale=stateProvider.scale,_a=stateProvider.options,maxScale=_a.maxScale,minScale=_a.minScale;if(!previousEvent)return false;if(scale<maxScale||scale>minScale)return true;if(Math.sign(previousEvent.deltaY)!==Math.sign(event.deltaY))return true;if(previousEvent.deltaY>0&&previousEvent.deltaY<event.deltaY)return true;if(previousEvent.deltaY<0&&previousEvent.deltaY>event.deltaY)return true;if(Math.sign(previousEvent.deltaY)!==Math.sign(event.deltaY))return true;return false;};var mergeProps=function mergeProps(initialState,dynamicProps){return Object.keys(initialState).reduce(function(acc,curr){if(typeof dynamicProps[curr]===\"object\"&&dynamicProps[curr]!==null){acc[curr]=_assign(_assign({},initialState[curr]),dynamicProps[curr]);}else{acc[curr]=dynamicProps[curr]===undefined?initialState[curr]:dynamicProps[curr];}return acc;},{});};function getWindowScaleY(wrapper){if(!wrapper)return 0;return window.innerHeight/wrapper.offsetHeight;}function getWindowScaleX(wrapper){if(!wrapper)return 0;return window.innerWidth/wrapper.offsetWidth;}/**\r\n * Functions should return denominator of the target value, which is the next animation step.\r\n * t is a value from 0 to 1, reflecting the percentage of animation status.\r\n */var easeOut=function easeOut(t){return-Math.cos(t*Math.PI)/2+0.5;};// linear\nvar linear=function linear(t){return t;};// accelerating from zero velocity\nvar easeInQuad=function easeInQuad(t){return t*t;};// decelerating to zero velocity\nvar easeOutQuad=function easeOutQuad(t){return t*(2-t);};// acceleration until halfway, then deceleration\nvar easeInOutQuad=function easeInOutQuad(t){return t<0.5?2*t*t:-1+(4-2*t)*t;};// accelerating from zero velocity\nvar easeInCubic=function easeInCubic(t){return t*t*t;};// decelerating to zero velocity\nvar easeOutCubic=function easeOutCubic(t){return--t*t*t+1;};// acceleration until halfway, then deceleration\nvar easeInOutCubic=function easeInOutCubic(t){return t<0.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;};// accelerating from zero velocity\nvar easeInQuart=function easeInQuart(t){return t*t*t*t;};// decelerating to zero velocity\nvar easeOutQuart=function easeOutQuart(t){return 1- --t*t*t*t;};// acceleration until halfway, then deceleration\nvar easeInOutQuart=function easeInOutQuart(t){return t<0.5?8*t*t*t*t:1-8*--t*t*t*t;};// accelerating from zero velocity\nvar easeInQuint=function easeInQuint(t){return t*t*t*t*t;};// decelerating to zero velocity\nvar easeOutQuint=function easeOutQuint(t){return 1+--t*t*t*t*t;};// acceleration until halfway, then deceleration\nvar easeInOutQuint=function easeInOutQuint(t){return t<0.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;};var availableAnimations={easeOut:easeOut,linear:linear,easeInQuad:easeInQuad,easeOutQuad:easeOutQuad,easeInOutQuad:easeInOutQuad,easeInCubic:easeInCubic,easeOutCubic:easeOutCubic,easeInOutCubic:easeInOutCubic,easeInQuart:easeInQuart,easeOutQuart:easeOutQuart,easeInOutQuart:easeInOutQuart,easeInQuint:easeInQuint,easeOutQuint:easeOutQuint,easeInOutQuint:easeInOutQuint};function handleDisableAnimation(){if(!this.mounted)return;if(this.animation){cancelAnimationFrame(this.animation);}this.animate=false;this.animation=false;this.velocity=false;}function animate(animationName,animationTime,callback){var _this=this;if(!this.mounted)return;var startTime=new Date().getTime();var lastStep=1;// if another animation is active\nhandleDisableAnimation.call(this);// new animation\nthis.animation=function(){if(!_this.animation||!_this.mounted)return;var frameTime=new Date().getTime()-startTime;var animationProgress=frameTime/animationTime;var animationType=availableAnimations[animationName];var step=animationType(animationProgress);if(frameTime>=animationTime){callback(lastStep);_this.animation=null;}else{callback(step);requestAnimationFrame(_this.animation);}};requestAnimationFrame(this.animation);}function animateComponent(_a){var _this=this;var targetState=_a.targetState,speed=_a.speed,type=_a.type;var _b=this.stateProvider,scale=_b.scale,positionX=_b.positionX,positionY=_b.positionY;var scaleDiff=targetState.scale-scale;var positionXDiff=targetState.positionX-positionX;var positionYDiff=targetState.positionY-positionY;if(speed===0){this.stateProvider.previousScale=this.stateProvider.scale;this.stateProvider.scale=targetState.scale;this.stateProvider.positionX=targetState.positionX;this.stateProvider.positionY=targetState.positionY;this.applyTransformation();}else{// animation start timestamp\nanimate.call(this,type,speed,function(step){_this.stateProvider.previousScale=_this.stateProvider.scale;_this.stateProvider.scale=scale+scaleDiff*step;_this.stateProvider.positionX=positionX+positionXDiff*step;_this.stateProvider.positionY=positionY+positionYDiff*step;// apply animation changes\n_this.applyTransformation();});}}function checkZoomBounds(zoom,minScale,maxScale,zoomPadding,enablePadding){var scalePadding=enablePadding?zoomPadding:0;var minScaleWithPadding=minScale-scalePadding;if(!isNaN(maxScale)&&zoom>=maxScale)return maxScale;if(!isNaN(minScale)&&zoom<=minScaleWithPadding)return minScaleWithPadding;return zoom;}function checkPositionBounds(positionX,positionY,bounds,limitToBounds,paddingValue,wrapperComponent){var minPositionX=bounds.minPositionX,minPositionY=bounds.minPositionY,maxPositionX=bounds.maxPositionX,maxPositionY=bounds.maxPositionY;var paddingX=wrapperComponent?paddingValue*wrapperComponent.offsetWidth/100:0;var paddingY=wrapperComponent?paddingValue*wrapperComponent.offsetHeight/100:0;var x=boundLimiter(positionX,minPositionX-paddingX,maxPositionX+paddingX,limitToBounds);var y=boundLimiter(positionY,minPositionY-paddingY,maxPositionY+paddingY,limitToBounds);return{x:x,y:y};}function getDelta(event,customDelta){var deltaY=event?event.deltaY<0?1:-1:0;var delta=checkIsNumber(customDelta,deltaY);return delta;}function wheelMousePosition(event,contentComponent,scale){var contentRect=contentComponent.getBoundingClientRect();// mouse position x, y over wrapper component\nvar mouseX=(event.clientX-contentRect.left)/scale;var mouseY=(event.clientY-contentRect.top)/scale;if(isNaN(mouseX)||isNaN(mouseY))console.error(\"No mouse or touch offset found\");return{mouseX:mouseX,mouseY:mouseY};}function getComponentsSizes(wrapperComponent,contentComponent,newScale){var wrapperWidth=wrapperComponent.offsetWidth;var wrapperHeight=wrapperComponent.offsetHeight;var contentWidth=contentComponent.offsetWidth;var contentHeight=contentComponent.offsetHeight;var newContentWidth=contentWidth*newScale;var newContentHeight=contentHeight*newScale;var newDiffWidth=wrapperWidth-newContentWidth;var newDiffHeight=wrapperHeight-newContentHeight;return{wrapperWidth:wrapperWidth,wrapperHeight:wrapperHeight,newContentWidth:newContentWidth,newDiffWidth:newDiffWidth,newContentHeight:newContentHeight,newDiffHeight:newDiffHeight};}function handleCalculatePositions(mouseX,mouseY,newScale,bounds,limitToBounds){var _a=this.stateProvider,scale=_a.scale,positionX=_a.positionX,positionY=_a.positionY,transformEnabled=_a.options.transformEnabled;var scaleDifference=newScale-scale;if(typeof mouseX!==\"number\"||typeof mouseY!==\"number\")return console.error(\"Mouse X and Y position were not provided!\");if(!transformEnabled)return{newPositionX:positionX,newPositionY:positionY};var calculatedPositionX=positionX-mouseX*scaleDifference;var calculatedPositionY=positionY-mouseY*scaleDifference;// do not limit to bounds when there is padding animation,\n// it causes animation strange behaviour\nvar newPositions=checkPositionBounds(calculatedPositionX,calculatedPositionY,bounds,limitToBounds,0,null);return newPositions;}function getClientPosition(event){var touches=event.touches;// Mobile points\nif(touches&&touches.length===1){return{clientX:touches[0].clientX,clientY:touches[0].clientY};}// Desktop points\nif(!touches){return{clientX:event.clientX,clientY:event.clientY};}return null;}function handlePanning(event){var _a=this.stateProvider,scale=_a.scale,positionX=_a.positionX,positionY=_a.positionY,_b=_a.options,limitToBounds=_b.limitToBounds,minScale=_b.minScale,_c=_a.pan,lockAxisX=_c.lockAxisX,lockAxisY=_c.lockAxisY,padding=_c.padding,paddingSize=_c.paddingSize,wrapperComponent=_a.wrapperComponent;if(!this.startCoords)return;var _d=this.startCoords,x=_d.x,y=_d.y;var positions=getClientPosition(event);if(!positions)return console.error(\"Cannot find mouse client positions\");var clientX=positions.clientX,clientY=positions.clientY;// Get Position\nvar mouseX=clientX-x;var mouseY=clientY-y;var newPositionX=lockAxisX?positionX:mouseX;var newPositionY=lockAxisY?positionY:mouseY;// padding\nvar paddingValue=padding&&scale>=minScale?paddingSize:0;// If position didn't change\nif(newPositionX===positionX&&newPositionY===positionY)return;var calculatedPosition=checkPositionBounds(newPositionX,newPositionY,this.bounds,limitToBounds,paddingValue,wrapperComponent);// Save panned position\nhandlePaddingAnimation.call(this,calculatedPosition.x,calculatedPosition.y);}function handlePanningAnimation(){var _a=this.stateProvider,scale=_a.scale,minScale=_a.options.minScale,_b=_a.pan,disabled=_b.disabled,padding=_b.padding,panReturnAnimationTime=_b.panReturnAnimationTime,panReturnAnimationType=_b.panReturnAnimationType;var isDisabled=disabled||scale<minScale||!padding;if(isDisabled)return;var targetState=handlePanToBounds.call(this);animateComponent.call(this,{targetState:targetState,speed:panReturnAnimationTime,type:panReturnAnimationType});}function handlePanToBounds(){var _a=this.stateProvider,positionX=_a.positionX,positionY=_a.positionY,scale=_a.scale,_b=_a.options,disabled=_b.disabled,limitToBounds=_b.limitToBounds,limitToWrapper=_b.limitToWrapper;var wrapperComponent=this.state.wrapperComponent;if(disabled)return;var _c=this.bounds,maxPositionX=_c.maxPositionX,minPositionX=_c.minPositionX,maxPositionY=_c.maxPositionY,minPositionY=_c.minPositionY;var xChanged=positionX>maxPositionX||positionX<minPositionX;var yChanged=positionY>maxPositionY||positionY<minPositionY;var mouseX=positionX>maxPositionX?wrapperComponent.offsetWidth:this.stateProvider.minPositionX||0;var mouseY=positionY>maxPositionY?wrapperComponent.offsetHeight:this.stateProvider.minPositionY||0;var mousePosX=mouseX;var mousePosY=mouseY;var _d=handleCalculatePositions.call(this,mousePosX,mousePosY,scale,this.bounds,limitToBounds||limitToWrapper),x=_d.x,y=_d.y;return{scale:scale,positionX:xChanged?x:positionX,positionY:yChanged?y:positionY};}function handlePaddingAnimation(positionX,positionY){var padding=this.stateProvider.pan.padding;if(!padding)return;this.stateProvider.positionX=positionX;this.stateProvider.positionY=positionY;this.applyTransformation();}function handleCalculateZoom(delta,step,disablePadding,getTarget,isBtnFunction){var _a=this.stateProvider,scale=_a.scale,_b=_a.options,maxScale=_b.maxScale,minScale=_b.minScale,_c=_a.scalePadding,size=_c.size,disabled=_c.disabled,wrapperComponent=_a.wrapperComponent;var targetScale=null;if(isBtnFunction){var scaleFactor=window.innerWidth*0.0001;var zoomFactor=delta<0?30:20;targetScale=scale+(step-step*scaleFactor)*delta*(scale/zoomFactor);}else{var wrapperToWindowScale=2-window.innerWidth/wrapperComponent.offsetWidth;var scaleFactor=Math.max(0.2,Math.min(0.99,wrapperToWindowScale));var zoomFactor=20;targetScale=scale+step*delta*((scale-scale*scaleFactor)/zoomFactor);}if(getTarget)return targetScale;var paddingEnabled=disablePadding?false:!disabled;var newScale=checkZoomBounds(roundNumber(targetScale,3),minScale,maxScale,size,paddingEnabled);return newScale;}function handleCalculateBounds(newScale,limitToWrapper){var _a=this.stateProvider,wrapperComponent=_a.wrapperComponent,contentComponent=_a.contentComponent;var _b=getComponentsSizes(wrapperComponent,contentComponent,newScale),wrapperWidth=_b.wrapperWidth,wrapperHeight=_b.wrapperHeight,newContentWidth=_b.newContentWidth,newDiffWidth=_b.newDiffWidth,newContentHeight=_b.newContentHeight,newDiffHeight=_b.newDiffHeight;var bounds=calculateBoundingArea(wrapperWidth,newContentWidth,newDiffWidth,wrapperHeight,newContentHeight,newDiffHeight,limitToWrapper);// Save bounds\nthis.bounds=bounds;return bounds;}/**\r\n * Wheel zoom event\r\n */function handleWheelZoom(event){var _a=this.stateProvider,scale=_a.scale,contentComponent=_a.contentComponent,limitToBounds=_a.options.limitToBounds,_b=_a.scalePadding,size=_b.size,disabled=_b.disabled,_c=_a.wheel,step=_c.step,limitsOnWheel=_c.limitsOnWheel;event.preventDefault();event.stopPropagation();var delta=getDelta(event,null);var newScale=handleCalculateZoom.call(this,delta,step,!event.ctrlKey);// if scale not change\nif(scale===newScale)return;var bounds=handleCalculateBounds.call(this,newScale,!limitsOnWheel);var _d=wheelMousePosition(event,contentComponent,scale),mouseX=_d.mouseX,mouseY=_d.mouseY;var isLimitedToBounds=limitToBounds&&(disabled||size===0||limitsOnWheel);var _e=handleCalculatePositions.call(this,mouseX,mouseY,newScale,bounds,isLimitedToBounds),x=_e.x,y=_e.y;this.bounds=bounds;this.stateProvider.previousScale=scale;this.stateProvider.scale=newScale;this.stateProvider.positionX=x;this.stateProvider.positionY=y;this.applyTransformation();}/**\r\n * Zoom for animations\r\n */function handleZoomToPoint(isDisabled,scale,mouseX,mouseY,event){var _a=this.stateProvider,contentComponent=_a.contentComponent,_b=_a.options,disabled=_b.disabled,minScale=_b.minScale,maxScale=_b.maxScale,limitToBounds=_b.limitToBounds,limitToWrapper=_b.limitToWrapper;if(disabled||isDisabled)return;var newScale=checkZoomBounds(roundNumber(scale,2),minScale,maxScale,null,null);var bounds=handleCalculateBounds.call(this,newScale,limitToWrapper);var mousePosX=mouseX;var mousePosY=mouseY;// if event is present - use it's mouse position\nif(event){var mousePosition=wheelMousePosition(event,contentComponent,scale);mousePosX=mousePosition.mouseX;mousePosY=mousePosition.mouseY;}var _c=handleCalculatePositions.call(this,mousePosX,mousePosY,newScale,bounds,limitToBounds),x=_c.x,y=_c.y;return{scale:newScale,positionX:x,positionY:y};}function handlePaddingAnimation$1(){var _a=this.stateProvider,scale=_a.scale,wrapperComponent=_a.wrapperComponent,_b=_a.options,minScale=_b.minScale,limitToBounds=_b.limitToBounds,_c=_a.scalePadding,disabled=_c.disabled,animationTime=_c.animationTime,animationType=_c.animationType;var isDisabled=disabled||scale>=minScale;if(scale>=1||limitToBounds){// fire fit to bounds animation\nhandlePanningAnimation.call(this);}if(isDisabled)return;var mouseX=wrapperComponent.offsetWidth/2;var mouseY=wrapperComponent.offsetHeight/2;var targetState=handleZoomToPoint.call(this,false,minScale,mouseX,mouseY,null);animateComponent.call(this,{targetState:targetState,speed:animationTime,type:animationType});}/**\r\n * Button zoom events\r\n */function handleDoubleClick(event){event.preventDefault();event.stopPropagation();var _a=this.stateProvider,contentComponent=_a.contentComponent,scale=_a.scale,_b=_a.doubleClick,disabled=_b.disabled,mode=_b.mode,step=_b.step,animationTime=_b.animationTime,animationType=_b.animationType;if(mode===\"reset\"){return resetTransformations.call(this,event,animationTime);}var delta=mode===\"zoomOut\"?-1:1;var newScale=handleCalculateZoom.call(this,delta,step,undefined,undefined,true);var _c=wheelMousePosition(event,contentComponent,scale),mouseX=_c.mouseX,mouseY=_c.mouseY;var targetState=handleZoomToPoint.call(this,disabled,newScale,mouseX,mouseY);if(targetState.scale===scale)return;var targetScale=handleCalculateZoom.call(this,delta,step,true,undefined,true);var time=getButtonAnimationTime(targetScale,newScale,animationTime);animateComponent.call(this,{targetState:targetState,speed:time,type:animationType});}function handleZoomControls(customDelta,customStep){var _a=this.stateProvider,scale=_a.scale,positionX=_a.positionX,positionY=_a.positionY,wrapperComponent=_a.wrapperComponent,zoomIn=_a.zoomIn,zoomOut=_a.zoomOut;var wrapperWidth=wrapperComponent.offsetWidth;var wrapperHeight=wrapperComponent.offsetHeight;var mouseX=(wrapperWidth/2-positionX)/scale;var mouseY=(wrapperHeight/2-positionY)/scale;var newScale=handleCalculateZoom.call(this,customDelta,customStep,undefined,undefined,true);var isZoomIn=newScale>scale;var animationSpeed=isZoomIn?zoomIn.animationTime:zoomOut.animationTime;var animationType=isZoomIn?zoomIn.animationType:zoomOut.animationType;var isDisabled=isZoomIn?zoomIn.disabled:zoomOut.disabled;var targetState=handleZoomToPoint.call(this,isDisabled,newScale,mouseX,mouseY);if(targetState.scale===scale)return;var targetScale=handleCalculateZoom.call(this,customDelta,customStep,true,undefined,true);var time=getButtonAnimationTime(targetScale,newScale,animationSpeed);animateComponent.call(this,{targetState:targetState,speed:time,type:animationType});}function resetTransformations(animationSpeed){var _a=this.props.defaultValues,defaultScale=_a.defaultScale,defaultPositionX=_a.defaultPositionX,defaultPositionY=_a.defaultPositionY;var _b=this.stateProvider,scale=_b.scale,positionX=_b.positionX,positionY=_b.positionY,reset=_b.reset,_c=_b.options,disabled=_c.disabled,limitToBounds=_c.limitToBounds,centerContent=_c.centerContent,limitToWrapper=_c.limitToWrapper;if(disabled||reset.disabled)return;if(scale===defaultScale&&positionX===defaultPositionX&&positionY===defaultPositionY)return;var speed=typeof animationSpeed===\"number\"?animationSpeed:reset.animationTime;var targetScale=checkIsNumber(defaultScale,initialState.scale);var newPositionX=checkIsNumber(defaultPositionX,initialState.positionX);var newPositionY=checkIsNumber(defaultPositionY,initialState.positionY);if(limitToBounds&&!limitToWrapper||centerContent){var bounds=handleCalculateBounds.call(this,targetScale,limitToWrapper);newPositionX=bounds.minPositionX;newPositionY=bounds.minPositionY;}var targetState={scale:targetScale,positionX:newPositionX,positionY:newPositionY};animateComponent.call(this,{targetState:targetState,speed:speed,type:reset.animationType});}function getButtonAnimationTime(targetScale,newScale,time){return time*(newScale/targetScale);}function round(number,decimal){var roundNumber=Math.pow(10,decimal);return Math.round(number*roundNumber)/roundNumber;}function getCurrentDistance(event){return getDistance(event.touches[0],event.touches[1]);}function checkIfInfinite(number){return number===Infinity||number===-Infinity;}function calculatePinchZoom(currentDistance,pinchStartDistance){var _a=this.stateProvider,_b=_a.options,minScale=_b.minScale,maxScale=_b.maxScale,_c=_a.scalePadding,size=_c.size,disabled=_c.disabled;if(typeof pinchStartDistance!==\"number\"||typeof currentDistance!==\"number\")return console.error(\"Pinch touches distance was not provided\");if(currentDistance<0)return;var touchProportion=currentDistance/pinchStartDistance;var scaleDifference=touchProportion*this.pinchStartScale;return checkZoomBounds(roundNumber(scaleDifference,2),minScale,maxScale,size,!disabled);}function calculateMidpoint(event,scale,contentComponent){var contentRect=contentComponent.getBoundingClientRect();var touches=event.touches;var firstPointX=round(touches[0].clientX-contentRect.left,5);var firstPointY=round(touches[0].clientY-contentRect.top,5);var secondPointX=round(touches[1].clientX-contentRect.left,5);var secondPointY=round(touches[1].clientY-contentRect.top,5);return{mouseX:(firstPointX+secondPointX)/2/scale,mouseY:(firstPointY+secondPointY)/2/scale};}function handleZoomPinch(event){var _a=this.stateProvider,scale=_a.scale,_b=_a.options,limitToBounds=_b.limitToBounds,limitToWrapper=_b.limitToWrapper,_c=_a.scalePadding,disabled=_c.disabled,size=_c.size,limitsOnWheel=_a.wheel.limitsOnWheel,pinch=_a.pinch;var contentComponent=this.state.contentComponent;if(pinch.disabled||this.stateProvider.options.disabled)return;if(event.cancelable){event.preventDefault();event.stopPropagation();}// if one finger starts from outside of wrapper\nif(this.pinchStartDistance===null)return;// Position transformation\nvar _d=calculateMidpoint(event,scale,contentComponent),mouseX=_d.mouseX,mouseY=_d.mouseY;// if touches goes off of the wrapper element\nif(checkIfInfinite(mouseX)||checkIfInfinite(mouseY))return;var currentDistance=getCurrentDistance(event);var newScale=calculatePinchZoom.call(this,currentDistance,this.pinchStartDistance);if(checkIfInfinite(newScale)||newScale===scale)return;// Get new element sizes to calculate bounds\nvar bounds=handleCalculateBounds.call(this,newScale,limitToWrapper);// Calculate transformations\nvar isLimitedToBounds=limitToBounds&&(disabled||size===0||limitsOnWheel);var _e=handleCalculatePositions.call(this,mouseX,mouseY,newScale,bounds,isLimitedToBounds),x=_e.x,y=_e.y;this.lastDistance=currentDistance;this.stateProvider.positionX=x;this.stateProvider.positionY=y;this.stateProvider.scale=newScale;this.stateProvider.previousScale=scale;// update component transformation\nthis.applyTransformation();}var throttleTime=30;function velocityTimeSpeed(speed,animationTime){var velocityEqualToMove=this.stateProvider.pan.velocityEqualToMove;if(velocityEqualToMove){return animationTime-animationTime/Math.max(1,speed);}return animationTime;}function handleEnableVelocity(){this.setState({startAnimation:false});}function handleFireVelocity(){this.setState({startAnimation:true});}function animateVelocity(){var _this=this;var _a=this.stateProvider,positionX=_a.positionX,positionY=_a.positionY,limitToBounds=_a.options.limitToBounds,_b=_a.pan,velocityBaseTime=_b.velocityBaseTime,lockAxisX=_b.lockAxisX,lockAxisY=_b.lockAxisY,velocityAnimationType=_b.velocityAnimationType,panReturnAnimationTime=_b.panReturnAnimationTime,panReturnAnimationType=_b.panReturnAnimationType,padding=_b.padding,paddingSize=_b.paddingSize,wrapperComponent=_a.wrapperComponent;if(!this.mounted)return;if(!this.velocity||!this.bounds)return handleDisableAnimation.call(this);var _c=this.bounds,maxPositionX=_c.maxPositionX,minPositionX=_c.minPositionX,maxPositionY=_c.maxPositionY,minPositionY=_c.minPositionY;var _d=this.velocity,velocityX=_d.velocityX,velocityY=_d.velocityY,velocity=_d.velocity;var animationTime=velocityTimeSpeed.call(this,velocity,velocityBaseTime);if(!animationTime){handlePanningAnimation.call(this);return;}var targetX=velocityX;var targetY=velocityY;// pan return animation\nvar newAnimationTime=animationTime>panReturnAnimationTime?animationTime:panReturnAnimationTime;var paddingValue=padding?paddingSize:0;var paddingX=wrapperComponent?paddingValue*wrapperComponent.offsetWidth/100:0;var paddingY=wrapperComponent?paddingValue*wrapperComponent.offsetHeight/100:0;var maxTargetX=maxPositionX+paddingX;var minTargetX=minPositionX-paddingX;var maxTargetY=maxPositionY+paddingY;var minTargetY=minPositionY-paddingY;var startPosition=checkPositionBounds(positionX,positionY,this.bounds,limitToBounds,paddingValue,wrapperComponent);var startTime=new Date().getTime();// animation start timestamp\nanimate.call(this,velocityAnimationType,newAnimationTime,function(step){var frameTime=new Date().getTime()-startTime;var animationProgress=frameTime/panReturnAnimationTime;var returnAnimation=availableAnimations[panReturnAnimationType];var customReturnStep=returnAnimation(animationProgress);if(frameTime>panReturnAnimationTime||customReturnStep>1||customReturnStep===Infinity||customReturnStep===-Infinity)customReturnStep=1;var currentPositionX=getPosition(lockAxisX,targetX,step,customReturnStep,minPositionX,maxPositionX,limitToBounds,positionX,startPosition.x,minTargetX,maxTargetX);var currentPositionY=getPosition(lockAxisY,targetY,step,customReturnStep,minPositionY,maxPositionY,limitToBounds,positionY,startPosition.y,minTargetY,maxTargetY);if(positionX!==currentPositionX||positionY!==currentPositionY){// Save panned position\n_this.stateProvider.positionX=currentPositionX;_this.stateProvider.positionY=currentPositionY;// apply animation changes\n_this.applyTransformation();}});}function calculateVelocityStart(event){var _this=this;var _a=this.stateProvider,scale=_a.scale,disabled=_a.options.disabled,_b=_a.pan,velocity=_b.velocity,velocitySensitivity=_b.velocitySensitivity,velocityActiveScale=_b.velocityActiveScale,velocityMinSpeed=_b.velocityMinSpeed,wrapperComponent=_a.wrapperComponent;if(!velocity||velocityActiveScale>=scale||disabled)return;handleEnableVelocity.call(this);var now=Date.now();if(this.lastMousePosition){var position_1=getClientPosition(event);if(!position_1)return console.error(\"No mouse or touch position detected\");var clientX=position_1.clientX,clientY=position_1.clientY;var distanceX=clientX-this.lastMousePosition.clientX;var distanceY=clientY-this.lastMousePosition.clientY;var interval=now-this.velocityTime;var wrapperToWindowScaleX=2-wrapperComponent.offsetWidth/window.innerWidth;var wrapperToWindowScaleY=2-wrapperComponent.offsetHeight/window.innerHeight;var scaledX=20*Math.max(velocityMinSpeed,Math.min(2,wrapperToWindowScaleX));var scaledY=20*Math.max(velocityMinSpeed,Math.min(2,wrapperToWindowScaleY));var velocityX=distanceX/interval*velocitySensitivity*scale*scaledX;var velocityY=distanceY/interval*velocitySensitivity*scale*scaledY;var speed=distanceX*distanceX+distanceY*distanceY;var velocity_1=Math.sqrt(speed)/interval*velocitySensitivity;if(this.velocity&&velocity_1<this.velocity.velocity&&this.throttle)return;this.velocity={velocityX:velocityX,velocityY:velocityY,velocity:velocity_1};// throttling\nif(this.throttle)clearTimeout(this.throttle);this.throttle=setTimeout(function(){if(_this.mounted)_this.throttle=false;},throttleTime);}var position=getClientPosition(event);this.lastMousePosition=position;this.velocityTime=now;}function getPosition(isLocked,target,step,panReturnStep,minBound,maxBound,limitToBounds,offset,startPosition,minTarget,maxTarget){if(limitToBounds){if(startPosition>minBound&&offset>maxBound){var newPosition=startPosition-(startPosition-maxBound)*panReturnStep;if(newPosition>maxTarget)return maxTarget;if(newPosition<maxBound)return maxBound;return newPosition;}if(startPosition<minBound&&offset<minBound){var newPosition=startPosition-(startPosition-minBound)*panReturnStep;if(newPosition<minTarget)return minTarget;if(newPosition>minBound)return minBound;return newPosition;}}if(isLocked)return startPosition;var offsetPosition=offset+target*step;return boundLimiter(offsetPosition,minBound,maxBound,limitToBounds);}// We want to make event listeners non-passive, and to do so have to check\nfunction makePassiveEventOption(passive){return passive;}var propsList=[\"previousScale\",\"scale\",\"positionX\",\"positionY\",\"defaultPositionX\",\"defaultPositionY\",\"defaultScale\",\"onWheelStart\",\"onWheel\",\"onWheelStop\",\"onPanningStart\",\"onPanning\",\"onPanningStop\",\"onPinchingStart\",\"onPinching\",\"onPinchingStop\",\"onZoomChange\",\"options\",\"wheel\",\"scalePadding\",\"pan\",\"pinch\",\"zoomIn\",\"zoomOut\",\"doubleClick\",\"reset\"];var getValidPropsFromObject=function getValidPropsFromObject(props){return Object.keys(props).reduce(function(acc,key){if(propsList.includes(key)){acc[key]=props[key];}return acc;},{});};var Context=/*#__PURE__*/React.createContext({});var wheelStopEventTimer=null;var wheelStopEventTime=180;var wheelAnimationTimer=null;var wheelAnimationTime=100;var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;var StateProvider=/** @class */function(_super){__extends(StateProvider,_super);function StateProvider(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.mounted=true;_this.state={wrapperComponent:undefined,contentComponent:undefined};_this.stateProvider=_assign(_assign(_assign(_assign({},initialState),mergeProps(initialState,_this.props.dynamicValues)),_this.props.defaultValues),{previousScale:_this.props.dynamicValues.scale||_this.props.defaultValues.scale||initialState.scale});_this.windowToWrapperScaleX=0;_this.windowToWrapperScaleY=0;// panning helpers\n_this.startCoords=null;_this.isDown=false;// pinch helpers\n_this.pinchStartDistance=null;_this.lastDistance=null;_this.pinchStartScale=null;_this.distance=null;_this.bounds=null;// velocity helpers\n_this.velocityTime=null;_this.lastMousePosition=null;_this.velocity=null;_this.offsetX=null;_this.offsetY=null;_this.throttle=false;// wheel helpers\n_this.previousWheelEvent=null;_this.lastScale=null;// animations helpers\n_this.animate=null;_this.animation=null;_this.maxBounds=null;//////////\n// Wheel\n//////////\n_this.handleWheel=function(event){var _a=_this.stateProvider,scale=_a.scale,_b=_a.wheel,disabled=_b.disabled,wheelEnabled=_b.wheelEnabled,touchPadEnabled=_b.touchPadEnabled;var _c=_this.props,onWheelStart=_c.onWheelStart,onWheel=_c.onWheel,onWheelStop=_c.onWheelStop;var _d=_this.state,wrapperComponent=_d.wrapperComponent,contentComponent=_d.contentComponent;if(_this.isDown||disabled||_this.stateProvider.options.disabled||!wrapperComponent||!contentComponent)return;// ctrlKey detects if touchpad execute wheel or pinch gesture\nif(!wheelEnabled&&!event.ctrlKey)return;if(!touchPadEnabled&&event.ctrlKey)return;// Wheel start event\nif(!wheelStopEventTimer){_this.lastScale=scale;handleDisableAnimation.call(_this);handleCallback(onWheelStart,_this.getCallbackProps());}// Wheel event\nhandleWheelZoom.call(_this,event);handleCallback(onWheel,_this.getCallbackProps());_this.applyTransformation(null,null,null);_this.previousWheelEvent=event;// Wheel stop event\nif(handleWheelStop(_this.previousWheelEvent,event,_this.stateProvider)){clearTimeout(wheelStopEventTimer);wheelStopEventTimer=setTimeout(function(){if(!_this.mounted)return;handleCallback(onWheelStop,_this.getCallbackProps());wheelStopEventTimer=null;},wheelStopEventTime);}// cancel animation\n_this.animate=false;// fire animation\n_this.lastScale=_this.stateProvider.scale;clearTimeout(wheelAnimationTimer);wheelAnimationTimer=setTimeout(function(){if(!_this.mounted)return;handlePaddingAnimation$1.call(_this,event);},wheelAnimationTime);};//////////\n// Panning\n//////////\n_this.checkPanningTarget=function(event){var disableOnTarget=_this.stateProvider.pan.disableOnTarget;return disableOnTarget.map(function(tag){return tag.toUpperCase();}).includes(event.target.tagName)||disableOnTarget.find(function(element){return event.target.classList.value.includes(element);});};_this.checkIsPanningActive=function(event){var disabled=_this.stateProvider.pan.disabled;var _a=_this.state,wrapperComponent=_a.wrapperComponent,contentComponent=_a.contentComponent;return!_this.isDown||disabled||_this.stateProvider.options.disabled||event.touches&&(event.touches.length!==1||Math.abs(_this.startCoords.x-event.touches[0].clientX)<1||Math.abs(_this.startCoords.y-event.touches[0].clientY)<1)||!wrapperComponent||!contentComponent;};_this.handleSetUpPanning=function(x,y){var _a=_this.stateProvider,positionX=_a.positionX,positionY=_a.positionY;_this.isDown=true;_this.startCoords={x:x-positionX,y:y-positionY};handleCallback(_this.props.onPanningStart,_this.getCallbackProps());};_this.handleStartPanning=function(event){var _a=_this.stateProvider,wrapperComponent=_a.wrapperComponent,scale=_a.scale,_b=_a.options,minScale=_b.minScale,maxScale=_b.maxScale,limitToWrapper=_b.limitToWrapper,disabled=_a.pan.disabled;var target=event.target,touches=event.touches;if(disabled||_this.stateProvider.options.disabled||wrapperComponent&&!wrapperComponent.contains(target)||_this.checkPanningTarget(event)||scale<minScale||scale>maxScale)return;handleDisableAnimation.call(_this);_this.bounds=handleCalculateBounds.call(_this,scale,limitToWrapper);// Mobile points\nif(touches&&touches.length===1){_this.handleSetUpPanning(touches[0].clientX,touches[0].clientY);}// Desktop points\nif(!touches){_this.handleSetUpPanning(event.clientX,event.clientY);}};_this.handlePanning=function(event){if(_this.isDown)event.preventDefault();if(_this.checkIsPanningActive(event))return;event.stopPropagation();calculateVelocityStart.call(_this,event);handlePanning.call(_this,event);handleCallback(_this.props.onPanning,_this.getCallbackProps());};_this.handleStopPanning=function(){if(_this.isDown){_this.isDown=false;_this.animate=false;_this.animation=false;handleFireVelocity.call(_this);handleCallback(_this.props.onPanningStop,_this.getCallbackProps());var _a=_this.stateProvider,velocity=_a.pan.velocity,scale=_a.scale;// start velocity animation\nif(_this.velocity&&velocity&&scale>1){animateVelocity.call(_this);}else{// fire fit to bounds animation\nhandlePanningAnimation.call(_this);}}};//////////\n// Pinch\n//////////\n_this.handlePinchStart=function(event){var scale=_this.stateProvider.scale;event.preventDefault();event.stopPropagation();handleDisableAnimation.call(_this);var distance=getDistance(event.touches[0],event.touches[1]);_this.pinchStartDistance=distance;_this.lastDistance=distance;_this.pinchStartScale=scale;_this.isDown=false;handleCallback(_this.props.onPinchingStart,_this.getCallbackProps());};_this.handlePinch=function(event){_this.isDown=false;handleZoomPinch.call(_this,event);handleCallback(_this.props.onPinching,_this.getCallbackProps());};_this.handlePinchStop=function(){if(typeof _this.pinchStartScale===\"number\"){_this.isDown=false;_this.velocity=null;_this.lastDistance=null;_this.pinchStartScale=null;_this.pinchStartDistance=null;handlePaddingAnimation$1.call(_this);handleCallback(_this.props.onPinchingStop,_this.getCallbackProps());}};//////////\n// Touch Events\n//////////\n_this.handleTouchStart=function(event){var _a=_this.stateProvider,wrapperComponent=_a.wrapperComponent,contentComponent=_a.contentComponent,scale=_a.scale,_b=_a.options,disabled=_b.disabled,minScale=_b.minScale;var touches=event.touches;if(disabled||!wrapperComponent||!contentComponent||scale<minScale)return;handleDisableAnimation.call(_this);if(touches&&touches.length===1)return _this.handleStartPanning(event);if(touches&&touches.length===2)return _this.handlePinchStart(event);};_this.handleTouch=function(event){var _a=_this.stateProvider,pan=_a.pan,pinch=_a.pinch,options=_a.options;if(options.disabled)return;if(!pan.disabled&&event.touches.length===1)return _this.handlePanning(event);if(!pinch.disabled&&event.touches.length===2)return _this.handlePinch(event);};_this.handleTouchStop=function(){_this.handleStopPanning();_this.handlePinchStop();};//////////\n// Controls\n//////////\n_this.zoomIn=function(event){var _a=_this.stateProvider,_b=_a.zoomIn,disabled=_b.disabled,step=_b.step,options=_a.options;var _c=_this.state,wrapperComponent=_c.wrapperComponent,contentComponent=_c.contentComponent;if(!event)throw Error(\"Zoom in function requires event prop\");if(disabled||options.disabled||!wrapperComponent||!contentComponent)return;handleZoomControls.call(_this,1,step);};_this.zoomOut=function(event){var _a=_this.stateProvider,_b=_a.zoomOut,disabled=_b.disabled,step=_b.step,options=_a.options;var _c=_this.state,wrapperComponent=_c.wrapperComponent,contentComponent=_c.contentComponent;if(!event)throw Error(\"Zoom out function requires event prop\");if(disabled||options.disabled||!wrapperComponent||!contentComponent)return;handleZoomControls.call(_this,-1,step);};_this.handleDbClick=function(event){var _a=_this.stateProvider,options=_a.options,_b=_a.doubleClick,disabled=_b.disabled,step=_b.step;var _c=_this.state,wrapperComponent=_c.wrapperComponent,contentComponent=_c.contentComponent;if(!event)throw Error(\"Double click function requires event prop\");if(disabled||options.disabled||!wrapperComponent||!contentComponent)return;handleDoubleClick.call(_this,event,1,step);};_this.setScale=function(newScale,speed,type){if(speed===void 0){speed=200;}if(type===void 0){type=\"easeOut\";}var _a=_this.stateProvider,positionX=_a.positionX,positionY=_a.positionY,scale=_a.scale,disabled=_a.options.disabled;var _b=_this.state,wrapperComponent=_b.wrapperComponent,contentComponent=_b.contentComponent;if(disabled||!wrapperComponent||!contentComponent)return;var targetState={positionX:positionX,positionY:positionY,scale:isNaN(newScale)?scale:newScale};animateComponent.call(_this,{targetState:targetState,speed:speed,type:type});};_this.setPositionX=function(newPosX,speed,type){if(speed===void 0){speed=200;}if(type===void 0){type=\"easeOut\";}var _a=_this.stateProvider,positionX=_a.positionX,positionY=_a.positionY,scale=_a.scale,_b=_a.options,disabled=_b.disabled,transformEnabled=_b.transformEnabled;var _c=_this.state,wrapperComponent=_c.wrapperComponent,contentComponent=_c.contentComponent;if(disabled||!transformEnabled||!wrapperComponent||!contentComponent)return;var targetState={positionX:isNaN(newPosX)?positionX:newPosX,positionY:positionY,scale:scale};animateComponent.call(_this,{targetState:targetState,speed:speed,type:type});};_this.setPositionY=function(newPosY,speed,type){if(speed===void 0){speed=200;}if(type===void 0){type=\"easeOut\";}var _a=_this.stateProvider,positionX=_a.positionX,scale=_a.scale,positionY=_a.positionY,_b=_a.options,disabled=_b.disabled,transformEnabled=_b.transformEnabled;var _c=_this.state,wrapperComponent=_c.wrapperComponent,contentComponent=_c.contentComponent;if(disabled||!transformEnabled||!wrapperComponent||!contentComponent)return;var targetState={positionX:positionX,positionY:isNaN(newPosY)?positionY:newPosY,scale:scale};animateComponent.call(_this,{targetState:targetState,speed:speed,type:type});};_this.setTransform=function(newPosX,newPosY,newScale,speed,type){if(speed===void 0){speed=200;}if(type===void 0){type=\"easeOut\";}var _a=_this.stateProvider,positionX=_a.positionX,positionY=_a.positionY,scale=_a.scale,_b=_a.options,disabled=_b.disabled,transformEnabled=_b.transformEnabled;var _c=_this.state,wrapperComponent=_c.wrapperComponent,contentComponent=_c.contentComponent;if(disabled||!transformEnabled||!wrapperComponent||!contentComponent)return;var targetState={positionX:isNaN(newPosX)?positionX:newPosX,positionY:isNaN(newPosY)?positionY:newPosY,scale:isNaN(newScale)?scale:newScale};animateComponent.call(_this,{targetState:targetState,speed:speed,type:type});};_this.resetTransform=function(){var _a=_this.stateProvider.options,disabled=_a.disabled,transformEnabled=_a.transformEnabled;if(disabled||!transformEnabled)return;resetTransformations.call(_this);};_this.setDefaultState=function(){_this.animation=null;_this.stateProvider=_assign(_assign(_assign({},_this.stateProvider),{scale:initialState.scale,positionX:initialState.positionX,positionY:initialState.positionY}),_this.props.defaultValues);_this.forceUpdate();};//////////\n// Setters\n//////////\n_this.setWrapperComponent=function(wrapperComponent){_this.setState({wrapperComponent:wrapperComponent});};_this.setContentComponent=function(contentComponent){_this.setState({contentComponent:contentComponent},function(){var _a=_this.stateProvider,wrapperComponent=_a.wrapperComponent,_b=_a.options,centerContent=_b.centerContent,limitToBounds=_b.limitToBounds,limitToWrapper=_b.limitToWrapper,scale=_a.scale;var _c=_this.props.defaultValues,positionX=_c.positionX,positionY=_c.positionY;if(limitToBounds&&!limitToWrapper||centerContent&&!positionX&&!positionY){var transform=\"translate(25%, 25%) scale(\"+scale+\")\";contentComponent.style.transform=transform;contentComponent.style.WebkitTransform=transform;// force update to inject state to the context\n_this.forceUpdate();var startTime_1=new Date().getTime();var maxTimeWait_1=2000;var interval_1=setInterval(function(){if(wrapperComponent.offsetWidth){var bounds=handleCalculateBounds.call(_this,scale,false);_this.stateProvider.positionX=bounds.minPositionX;_this.stateProvider.positionY=bounds.minPositionY;_this.applyTransformation(null,null,null);clearInterval(interval_1);interval_1=null;}else if(new Date().getTime()-startTime_1>maxTimeWait_1){clearInterval(interval_1);interval_1=null;}},20);}else{_this.applyTransformation(null,null,null);}});};_this.applyTransformation=function(newScale,posX,posY){if(!_this.mounted)return;var contentComponent=_this.state.contentComponent;var onZoomChange=_this.props.onZoomChange;var _a=_this.stateProvider,previousScale=_a.previousScale,scale=_a.scale,positionX=_a.positionX,positionY=_a.positionY;if(!contentComponent)return console.error(\"There is no content component\");var transform=\"translate(\"+(posX||positionX)+\"px, \"+(posY||positionY)+\"px) scale(\"+(newScale||scale)+\")\";contentComponent.style.transform=transform;contentComponent.style.WebkitTransform=transform;// force update to inject state to the context\n_this.forceUpdate();if(onZoomChange&&previousScale!==scale){handleCallback(onZoomChange,_this.getCallbackProps());}};//////////\n// Props\n//////////\n_this.getCallbackProps=function(){return getValidPropsFromObject(_this.stateProvider);};return _this;}StateProvider.prototype.componentDidMount=function(){var passiveOption=makePassiveEventOption(false);// Panning on window to allow panning when mouse is out of wrapper\nwindow.addEventListener(\"mousedown\",this.handleStartPanning,passiveOption);window.addEventListener(\"mousemove\",this.handlePanning,passiveOption);window.addEventListener(\"mouseup\",this.handleStopPanning,passiveOption);};StateProvider.prototype.componentWillUnmount=function(){var passiveOption=makePassiveEventOption(false);window.removeEventListener(\"mousedown\",this.handleStartPanning,passiveOption);window.removeEventListener(\"mousemove\",this.handlePanning,passiveOption);window.removeEventListener(\"mouseup\",this.handleStopPanning,passiveOption);handleDisableAnimation.call(this);};StateProvider.prototype.componentDidUpdate=function(oldProps,oldState){var _a=this.state,wrapperComponent=_a.wrapperComponent,contentComponent=_a.contentComponent;var dynamicValues=this.props.dynamicValues;if(!oldState.contentComponent&&contentComponent){this.stateProvider.contentComponent=contentComponent;}if(!oldState.wrapperComponent&&wrapperComponent&&wrapperComponent!==undefined){this.stateProvider.wrapperComponent=wrapperComponent;this.windowToWrapperScaleX=getWindowScaleX(wrapperComponent);this.windowToWrapperScaleY=getWindowScaleY(wrapperComponent);// Zooming events on wrapper\nvar passiveOption=makePassiveEventOption(false);wrapperComponent.addEventListener(\"wheel\",this.handleWheel,passiveOption);wrapperComponent.addEventListener(\"dblclick\",this.handleDbClick,passiveOption);wrapperComponent.addEventListener(\"touchstart\",this.handleTouchStart,passiveOption);wrapperComponent.addEventListener(\"touchmove\",this.handleTouch,passiveOption);wrapperComponent.addEventListener(\"touchend\",this.handleTouchStop,passiveOption);}// set bound for animations\nif(wrapperComponent&&contentComponent||oldProps.dynamicValues!==dynamicValues){this.maxBounds=handleCalculateBounds.call(this,this.stateProvider.scale,this.stateProvider.options.limitToWrapper);}// must be at the end of the update function, updates\nif(oldProps.dynamicValues&&oldProps.dynamicValues!==dynamicValues){this.animation=null;this.stateProvider=_assign(_assign({},this.stateProvider),mergeProps(this.stateProvider,dynamicValues));this.applyTransformation(null,null,null);}};StateProvider.prototype.render=function(){var _a=this.state,wrapperComponent=_a.wrapperComponent,contentComponent=_a.contentComponent;/**\r\n         * Context provider value\r\n         */var value={loaded:Boolean(wrapperComponent&&contentComponent),state:this.getCallbackProps(),dispatch:{setScale:this.setScale,setPositionX:this.setPositionX,setPositionY:this.setPositionY,zoomIn:this.zoomIn,zoomOut:this.zoomOut,setTransform:this.setTransform,resetTransform:this.resetTransform,setDefaultState:this.setDefaultState},nodes:{setWrapperComponent:this.setWrapperComponent,setContentComponent:this.setContentComponent}};var children=this.props.children;var content=typeof children===\"function\"?children(_assign(_assign({},value.state),value.dispatch)):children;return/*#__PURE__*/_checkBEM(React,Context.Provider,{value:value},content);};return StateProvider;}(Component);var TransformWrapper=function TransformWrapper(_a){var children=_a.children,defaultPositionX=_a.defaultPositionX,defaultPositionY=_a.defaultPositionY,defaultScale=_a.defaultScale,onWheelStart=_a.onWheelStart,onWheel=_a.onWheel,onWheelStop=_a.onWheelStop,onPanningStart=_a.onPanningStart,onPanning=_a.onPanning,onPanningStop=_a.onPanningStop,onPinchingStart=_a.onPinchingStart,onPinching=_a.onPinching,onPinchingStop=_a.onPinchingStop,onZoomChange=_a.onZoomChange,rest=__rest(_a,[\"children\",\"defaultPositionX\",\"defaultPositionY\",\"defaultScale\",\"onWheelStart\",\"onWheel\",\"onWheelStop\",\"onPanningStart\",\"onPanning\",\"onPanningStop\",\"onPinchingStart\",\"onPinching\",\"onPinchingStop\",\"onZoomChange\"]);var props=_assign({},rest);if(props.options&&props.options.limitToWrapper){props.options.limitToBounds=true;}return/*#__PURE__*/_checkBEM(React,StateProvider,{defaultValues:deleteUndefinedProps({positionX:defaultPositionX,positionY:defaultPositionY,scale:defaultScale}),dynamicValues:deleteUndefinedProps(getValidPropsFromObject(props)),onWheelStart:onWheelStart,onWheel:onWheel,onWheelStop:onWheelStop,onPanningStart:onPanningStart,onPanning:onPanning,onPanningStop:onPanningStop,onPinchingStart:onPinchingStart,onPinching:onPinching,onPinchingStop:onPinchingStop,onZoomChange:onZoomChange},children);};function styleInject(css,ref){if(ref===void 0)ref={};var insertAt=ref.insertAt;if(!css||typeof document==='undefined'){return;}var head=document.head||document.getElementsByTagName('head')[0];var style=document.createElement('style');style.type='text/css';if(insertAt==='top'){if(head.firstChild){head.insertBefore(style,head.firstChild);}else{head.appendChild(style);}}else{head.appendChild(style);}if(style.styleSheet){style.styleSheet.cssText=css;}else{style.appendChild(document.createTextNode(css));}}var css=\".TransformComponent-module_container__3NwNd {\\n  position: relative;\\n  width: fit-content;\\n  height: fit-content;\\n  overflow: hidden;\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Safari */\\n  -khtml-user-select: none; /* Konqueror HTML */\\n  -moz-user-select: none; /* Firefox */\\n  -ms-user-select: none; /* Internet Explorer/Edge */\\n  user-select: none;\\n  margin: 0;\\n  padding: 0;\\n}\\n.TransformComponent-module_content__TZU5O {\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: fit-content;\\n  height: fit-content;\\n  margin: 0;\\n  padding: 0;\\n  transform-origin: 0% 0%;\\n}\\n.TransformComponent-module_content__TZU5O img {\\n  pointer-events: none;\\n}\\n\";var styles={\"container\":\"TransformComponent-module_container__3NwNd\",\"content\":\"TransformComponent-module_content__TZU5O\"};styleInject(css);var TransformComponent=/** @class */function(_super){__extends(TransformComponent,_super);function TransformComponent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.wrapperRef=/*#__PURE__*/React.createRef();_this.contentRef=/*#__PURE__*/React.createRef();return _this;}TransformComponent.prototype.componentDidMount=function(){var nodes=this.context.nodes;nodes.setWrapperComponent(this.wrapperRef.current);nodes.setContentComponent(this.contentRef.current);};TransformComponent.prototype.render=function(){var children=this.props.children;var _a=this.context.state,positionX=_a.positionX,positionY=_a.positionY,scale=_a.scale,_b=_a.options,wrapperClass=_b.wrapperClass,contentClass=_b.contentClass;var style={WebkitTransform:\"translate(\"+positionX+\"px, \"+positionY+\"px) scale(\"+scale+\")\",transform:\"translate(\"+positionX+\"px, \"+positionY+\"px) scale(\"+scale+\")\"};return/*#__PURE__*/_checkBEM(React,\"div\",{ref:this.wrapperRef,className:\"react-transform-component \"+styles.container+\" \"+wrapperClass},/*#__PURE__*/_checkBEM(React,\"div\",{ref:this.contentRef,className:\"react-transform-element \"+styles.content+\" \"+contentClass,style:style},children));};return TransformComponent;}(React.Component);TransformComponent.contextType=Context;export{TransformComponent,TransformWrapper};","map":{"version":3,"sources":["../node_modules/tslib/tslib.es6.js","../src/store/InitialState.ts","../src/store/utils.ts","../src/store/animations/utils.ts","../src/store/animations/index.ts","../src/store/zoom/utils.ts","../src/store/pan/index.ts","../src/store/zoom/index.ts","../src/store/pinch/index.ts","../src/store/velocity/index.ts","../src/store/makePassiveEventOption.ts","../src/store/propsHandlers.ts","../src/store/StateContext.tsx","../src/components/TransformWrapper.tsx","../node_modules/style-inject/dist/style-inject.es.js","../src/components/TransformComponent.tsx"],"names":["handlePaddingAnimation"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export const initialState = {\n  wrapperComponent: null,\n  contentComponent: null,\n  previousScale: 1,\n  scale: 1,\n  positionX: 0,\n  positionY: 0,\n  options: {\n    disabled: false,\n    transformEnabled: true,\n    minPositionX: null,\n    maxPositionX: null,\n    minPositionY: null,\n    maxPositionY: null,\n    minScale: 1,\n    maxScale: 8,\n    limitToBounds: true,\n    limitToWrapper: false,\n    centerContent: true,\n    wrapperClass: \"\",\n    contentClass: \"\",\n  },\n  wheel: {\n    disabled: false,\n    step: 5,\n    wheelEnabled: true,\n    touchPadEnabled: true,\n    limitsOnWheel: false,\n  },\n  pan: {\n    disabled: false,\n    panAnimationType: \"linear\",\n    lockAxisX: false,\n    lockAxisY: false,\n    velocity: true,\n    velocityEqualToMove: true,\n    velocitySensitivity: 2,\n    velocityActiveScale: 1,\n    velocityMinSpeed: 1,\n    velocityBaseTime: 1600,\n    velocityAnimationType: \"easeOutQuart\",\n    padding: true,\n    paddingSize: 30,\n    panReturnAnimationTime: 400,\n    panReturnAnimationType: \"easeOut\",\n    disableOnTarget: [],\n  },\n  pinch: {\n    disabled: false,\n  },\n  zoomIn: {\n    disabled: false,\n    step: 20,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200,\n  },\n  zoomOut: {\n    disabled: false,\n    step: 20,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200,\n  },\n  doubleClick: {\n    disabled: false,\n    step: 20,\n    mode: \"zoomIn\",\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200,\n  },\n  reset: {\n    disabled: false,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200,\n  },\n  scalePadding: {\n    disabled: false,\n    size: 0.2,\n    animationTime: 200,\n    animationType: \"easeOut\",\n  },\n};\n","/**\n * Rounds number to given decimal\n * eg. roundNumber(2.34343, 1) => 2.3\n */\nexport const roundNumber = (num, decimal) => {\n  return Number(num.toFixed(decimal));\n};\n\n/**\n * Checks if value is number, if not it returns default value\n * 1# eg. checkIsNumber(2, 30) => 2\n * 2# eg. checkIsNumber(null, 30) => 30\n */\nexport const checkIsNumber = (num, defaultValue) => {\n  return typeof num === \"number\" ? num : defaultValue;\n};\n\n/**\n * Keeps value between given bounds, used for limiting view to given boundaries\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\n */\nexport const boundLimiter = (value, minBound, maxBound, isActive) => {\n  if (!isActive) return roundNumber(value, 2);\n  if (value < minBound) return roundNumber(minBound, 2);\n  if (value > maxBound) return roundNumber(maxBound, 2);\n  return roundNumber(value, 2);\n};\n\n/**\n * Returns relative coords of mouse on wrapper element, and provides\n * info about it's width, height, with same info about its content(zoomed component) element\n */\nexport const relativeCoords = (\n  event,\n  wrapperComponent,\n  contentComponent,\n  panningCase,\n) => {\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n  const contentRect = contentComponent.getBoundingClientRect();\n  const contentWidth = contentRect.width;\n  const contentHeight = contentRect.height;\n  const contentLeft = contentRect.left;\n  const contentRight = contentRect.right;\n  const diffHeight = wrapperHeight - contentHeight;\n  const diffWidth = wrapperWidth - contentWidth;\n\n  // mouse position x, y over wrapper component\n  let x = panningCase ? event.clientX : event.clientX - contentRect.left;\n  let y = panningCase ? event.clientY : event.clientY - contentRect.top;\n\n  // Mobile touch event case\n  if (isNaN(x) && event.touches && event.touches[0]) {\n    x = event.touches[0].clientX;\n    y = event.touches[0].clientY;\n  }\n\n  return {\n    x,\n    y,\n    wrapperWidth,\n    wrapperHeight,\n    contentWidth,\n    contentHeight,\n    diffHeight,\n    diffWidth,\n    contentLeft,\n    contentRight,\n  };\n};\n\n/**\n * Calculate bounding area of zoomed/panned element\n */\nexport const calculateBoundingArea = (\n  wrapperWidth,\n  newContentWidth,\n  diffWidth,\n  wrapperHeight,\n  newContentHeight,\n  diffHeight,\n  limitToWrapper,\n) => {\n  const scaleWidthFactor =\n    wrapperWidth > newContentWidth\n      ? diffWidth * (limitToWrapper ? 1 : 0.5)\n      : 0;\n  const scaleHeightFactor =\n    wrapperHeight > newContentHeight\n      ? diffHeight * (limitToWrapper ? 1 : 0.5)\n      : 0;\n\n  const minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\n  const maxPositionX = scaleWidthFactor;\n  const minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\n  const maxPositionY = scaleHeightFactor;\n\n  return { minPositionX, maxPositionX, minPositionY, maxPositionY };\n};\n\n/**\n * Returns middle coordinates x,y of two points\n * Used to get middle point of two fingers pinch\n */\n\nexport const getMiddleCoords = (\n  firstPoint,\n  secondPoint,\n  contentComponent,\n  scale,\n) => {\n  const contentRect = contentComponent.getBoundingClientRect();\n\n  return {\n    x:\n      ((firstPoint.clientX + secondPoint.clientX) / 2 - contentRect.left) /\n      scale,\n    y:\n      ((firstPoint.clientY + secondPoint.clientY) / 2 - contentRect.top) /\n      scale,\n  };\n};\n\n/**\n * Returns middle position of PageX for touch events\n */\nexport const getMidPagePosition = (firstPoint, secondPoint) => {\n  if (!firstPoint || !secondPoint)\n    return console.warn(\"There are no points provided\");\n  return {\n    x: (firstPoint.clientX + secondPoint.clientX) / 2,\n    y: (firstPoint.clientY + secondPoint.clientY) / 2,\n  };\n};\n\n/**\n * Returns distance between two points x,y\n */\nexport const getDistance = (firstPoint, secondPoint) => {\n  return Math.sqrt(\n    Math.pow(firstPoint.pageX - secondPoint.pageX, 2) +\n      Math.pow(firstPoint.pageY - secondPoint.pageY, 2),\n  );\n};\n\n/**\n * Delete undefined values from object keys\n * Used for deleting empty props\n */\n\nexport const deleteUndefinedProps = value => {\n  let newObject = { ...value };\n  Object.keys(newObject).forEach(\n    key => newObject[key] === undefined && delete newObject[key],\n  );\n  return newObject;\n};\n\n/**\n * Returns center zoom position, for computations, based on the relative center to content node\n */\n\nexport const getRelativeZoomCoords = ({\n  wrapperComponent,\n  contentComponent,\n  scale,\n  positionX,\n  positionY,\n}) => {\n  const { wrapperWidth, wrapperHeight } = relativeCoords(\n    event,\n    wrapperComponent,\n    contentComponent,\n    true,\n  );\n  const x = (Math.abs(positionX) + wrapperWidth / 2) / scale;\n  const y = (Math.abs(positionY) + wrapperHeight / 2) / scale;\n  return { x, y };\n};\n\n/**\n * Fire callback if it's function\n */\n\nexport const handleCallback = (callback, props) => {\n  if (callback && typeof callback === \"function\") {\n    callback(props);\n  }\n};\n\nexport const handleWheelStop = (previousEvent, event, stateProvider) => {\n  const {\n    scale,\n    options: { maxScale, minScale },\n  } = stateProvider;\n  if (!previousEvent) return false;\n  if (scale < maxScale || scale > minScale) return true;\n  if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  if (previousEvent.deltaY > 0 && previousEvent.deltaY < event.deltaY)\n    return true;\n  if (previousEvent.deltaY < 0 && previousEvent.deltaY > event.deltaY)\n    return true;\n  if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  return false;\n};\n\nexport const mergeProps = (initialState, dynamicProps) => {\n  return Object.keys(initialState).reduce((acc, curr) => {\n    if (typeof dynamicProps[curr] === \"object\" && dynamicProps[curr] !== null) {\n      acc[curr] = { ...initialState[curr], ...dynamicProps[curr] };\n    } else {\n      acc[curr] =\n        dynamicProps[curr] === undefined\n          ? initialState[curr]\n          : dynamicProps[curr];\n    }\n    return acc;\n  }, {});\n};\n\nexport function getWindowScaleY(wrapper) {\n  if (!wrapper) return 0;\n  return window.innerHeight / wrapper.offsetHeight;\n}\n\nexport function getWindowScaleX(wrapper) {\n  if (!wrapper) return 0;\n  return window.innerWidth / wrapper.offsetWidth;\n}\n","/**\n * Functions should return denominator of the target value, which is the next animation step.\n * t is a value from 0 to 1, reflecting the percentage of animation status.\n */\nconst easeOut = function(t) {\n  return -Math.cos(t * Math.PI) / 2 + 0.5;\n};\n// linear\nconst linear = function(t) {\n  return t;\n};\n// accelerating from zero velocity\nconst easeInQuad = function(t) {\n  return t * t;\n};\n// decelerating to zero velocity\nconst easeOutQuad = function(t) {\n  return t * (2 - t);\n};\n// acceleration until halfway, then deceleration\nconst easeInOutQuad = function(t) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n};\n// accelerating from zero velocity\nconst easeInCubic = function(t) {\n  return t * t * t;\n};\n// decelerating to zero velocity\nconst easeOutCubic = function(t) {\n  return --t * t * t + 1;\n};\n// acceleration until halfway, then deceleration\nconst easeInOutCubic = function(t) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n};\n// accelerating from zero velocity\nconst easeInQuart = function(t) {\n  return t * t * t * t;\n};\n// decelerating to zero velocity\nconst easeOutQuart = function(t) {\n  return 1 - --t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nconst easeInOutQuart = function(t) {\n  return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n};\n// accelerating from zero velocity\nconst easeInQuint = function(t) {\n  return t * t * t * t * t;\n};\n// decelerating to zero velocity\nconst easeOutQuint = function(t) {\n  return 1 + --t * t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nconst easeInOutQuint = function(t) {\n  return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n};\n\nexport const availableAnimations = {\n  easeOut,\n  linear,\n  easeInQuad,\n  easeOutQuad,\n  easeInOutQuad,\n  easeInCubic,\n  easeOutCubic,\n  easeInOutCubic,\n  easeInQuart,\n  easeOutQuart,\n  easeInOutQuart,\n  easeInQuint,\n  easeOutQuint,\n  easeInOutQuint,\n};\n","import { availableAnimations } from \"./utils\";\n\nexport function handleDisableAnimation() {\n  if (!this.mounted) return;\n  if (this.animation) {\n    cancelAnimationFrame(this.animation);\n  }\n  this.animate = false;\n  this.animation = false;\n  this.velocity = false;\n}\n\nexport function animate(animationName, animationTime, callback) {\n  if (!this.mounted) return;\n  const startTime = new Date().getTime();\n  const lastStep = 1;\n\n  // if another animation is active\n  handleDisableAnimation.call(this);\n\n  // new animation\n  this.animation = () => {\n    if (!this.animation || !this.mounted) return;\n    const frameTime = new Date().getTime() - startTime;\n    const animationProgress = frameTime / animationTime;\n    const animationType = availableAnimations[animationName];\n\n    const step = animationType(animationProgress);\n\n    if (frameTime >= animationTime) {\n      callback(lastStep);\n      this.animation = null;\n    } else {\n      callback(step);\n      requestAnimationFrame(this.animation);\n    }\n  };\n\n  requestAnimationFrame(this.animation);\n}\n\nexport function animateComponent({ targetState, speed, type }) {\n  const { scale, positionX, positionY } = this.stateProvider;\n\n  const scaleDiff = targetState.scale - scale;\n  const positionXDiff = targetState.positionX - positionX;\n  const positionYDiff = targetState.positionY - positionY;\n\n  if (speed === 0) {\n    this.stateProvider.previousScale = this.stateProvider.scale;\n    this.stateProvider.scale = targetState.scale;\n    this.stateProvider.positionX = targetState.positionX;\n    this.stateProvider.positionY = targetState.positionY;\n    this.applyTransformation();\n  } else {\n    // animation start timestamp\n    animate.call(this, type, speed, step => {\n      this.stateProvider.previousScale = this.stateProvider.scale;\n      this.stateProvider.scale = scale + scaleDiff * step;\n      this.stateProvider.positionX = positionX + positionXDiff * step;\n      this.stateProvider.positionY = positionY + positionYDiff * step;\n\n      // apply animation changes\n      this.applyTransformation();\n    });\n  }\n}\n","import { boundLimiter, checkIsNumber } from \"../utils\";\n\nexport function checkZoomBounds(\n  zoom,\n  minScale,\n  maxScale,\n  zoomPadding,\n  enablePadding,\n) {\n  const scalePadding = enablePadding ? zoomPadding : 0;\n  const minScaleWithPadding = minScale - scalePadding;\n\n  if (!isNaN(maxScale) && zoom >= maxScale) return maxScale;\n  if (!isNaN(minScale) && zoom <= minScaleWithPadding)\n    return minScaleWithPadding;\n  return zoom;\n}\n\nexport function checkPositionBounds(\n  positionX,\n  positionY,\n  bounds,\n  limitToBounds,\n  paddingValue,\n  wrapperComponent,\n) {\n  const { minPositionX, minPositionY, maxPositionX, maxPositionY } = bounds;\n  const paddingX = wrapperComponent\n    ? (paddingValue * wrapperComponent.offsetWidth) / 100\n    : 0;\n  const paddingY = wrapperComponent\n    ? (paddingValue * wrapperComponent.offsetHeight) / 100\n    : 0;\n\n  const x = boundLimiter(\n    positionX,\n    minPositionX - paddingX,\n    maxPositionX + paddingX,\n    limitToBounds,\n  );\n\n  const y = boundLimiter(\n    positionY,\n    minPositionY - paddingY,\n    maxPositionY + paddingY,\n    limitToBounds,\n  );\n  return { x, y };\n}\n\nexport function getDelta(event, customDelta) {\n  const deltaY = event ? (event.deltaY < 0 ? 1 : -1) : 0;\n  const delta = checkIsNumber(customDelta, deltaY);\n  return delta;\n}\n\nexport function wheelMousePosition(\n  event,\n  contentComponent,\n  scale,\n): { mouseX: number; mouseY: number } {\n  const contentRect = contentComponent.getBoundingClientRect();\n\n  // mouse position x, y over wrapper component\n  const mouseX = (event.clientX - contentRect.left) / scale;\n  const mouseY = (event.clientY - contentRect.top) / scale;\n\n  if (isNaN(mouseX) || isNaN(mouseY))\n    console.error(\"No mouse or touch offset found\");\n\n  return {\n    mouseX,\n    mouseY,\n  };\n}\n\nexport function getComponentsSizes(\n  wrapperComponent,\n  contentComponent,\n  newScale,\n) {\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n\n  const contentWidth = contentComponent.offsetWidth;\n  const contentHeight = contentComponent.offsetHeight;\n\n  const newContentWidth = contentWidth * newScale;\n  const newContentHeight = contentHeight * newScale;\n  const newDiffWidth = wrapperWidth - newContentWidth;\n  const newDiffHeight = wrapperHeight - newContentHeight;\n\n  return {\n    wrapperWidth,\n    wrapperHeight,\n    newContentWidth,\n    newDiffWidth,\n    newContentHeight,\n    newDiffHeight,\n  };\n}\n\nexport function handleCalculatePositions(\n  mouseX,\n  mouseY,\n  newScale,\n  bounds,\n  limitToBounds,\n) {\n  const {\n    scale,\n    positionX,\n    positionY,\n    options: { transformEnabled },\n  } = this.stateProvider;\n\n  const scaleDifference = newScale - scale;\n\n  if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\")\n    return console.error(\"Mouse X and Y position were not provided!\");\n\n  if (!transformEnabled)\n    return { newPositionX: positionX, newPositionY: positionY };\n\n  const calculatedPositionX = positionX - mouseX * scaleDifference;\n  const calculatedPositionY = positionY - mouseY * scaleDifference;\n\n  // do not limit to bounds when there is padding animation,\n  // it causes animation strange behaviour\n\n  const newPositions = checkPositionBounds(\n    calculatedPositionX,\n    calculatedPositionY,\n    bounds,\n    limitToBounds,\n    0,\n    null,\n  );\n\n  return newPositions;\n}\n","import { PropsList } from \"../interfaces/propsInterface\";\nimport { checkPositionBounds, handleCalculatePositions } from \"../zoom/utils\";\nimport { animateComponent } from \"../animations\";\n\nexport function getClientPosition(event) {\n  const { touches } = event;\n\n  // Mobile points\n  if (touches && touches.length === 1) {\n    return { clientX: touches[0].clientX, clientY: touches[0].clientY };\n  }\n  // Desktop points\n  if (!touches) {\n    return { clientX: event.clientX, clientY: event.clientY };\n  }\n  return null;\n}\n\nexport function handlePanning(event) {\n  const {\n    scale,\n    positionX,\n    positionY,\n    options: { limitToBounds, minScale },\n    pan: { lockAxisX, lockAxisY, padding, paddingSize },\n    wrapperComponent,\n  } = this.stateProvider;\n\n  if (!this.startCoords) return;\n  const { x, y } = this.startCoords;\n\n  const positions = getClientPosition(event);\n  if (!positions) return console.error(\"Cannot find mouse client positions\");\n  const { clientX, clientY } = positions;\n\n  // Get Position\n  const mouseX = clientX - x;\n  const mouseY = clientY - y;\n  const newPositionX = lockAxisX ? positionX : mouseX;\n  const newPositionY = lockAxisY ? positionY : mouseY;\n\n  // padding\n  const paddingValue = padding && scale >= minScale ? paddingSize : 0;\n\n  // If position didn't change\n  if (newPositionX === positionX && newPositionY === positionY) return;\n\n  const calculatedPosition = checkPositionBounds(\n    newPositionX,\n    newPositionY,\n    this.bounds,\n    limitToBounds,\n    paddingValue,\n    wrapperComponent,\n  );\n\n  // Save panned position\n  handlePaddingAnimation.call(this, calculatedPosition.x, calculatedPosition.y);\n}\n\nexport function handlePanningAnimation() {\n  const {\n    scale,\n    options: { minScale },\n    pan: { disabled, padding, panReturnAnimationTime, panReturnAnimationType },\n  } = this.stateProvider;\n  const isDisabled = disabled || scale < minScale || !padding;\n\n  if (isDisabled) return;\n\n  const targetState = handlePanToBounds.call(this);\n\n  animateComponent.call(this, {\n    targetState,\n    speed: panReturnAnimationTime,\n    type: panReturnAnimationType,\n  });\n}\n\nexport function handlePanToBounds() {\n  const {\n    positionX,\n    positionY,\n    scale,\n    options: { disabled, limitToBounds, limitToWrapper },\n  } = this.stateProvider;\n  const { wrapperComponent } = this.state;\n  if (disabled) return;\n  const {\n    maxPositionX,\n    minPositionX,\n    maxPositionY,\n    minPositionY,\n  } = this.bounds;\n\n  const xChanged = positionX > maxPositionX || positionX < minPositionX;\n  const yChanged = positionY > maxPositionY || positionY < minPositionY;\n\n  let mouseX =\n    positionX > maxPositionX\n      ? wrapperComponent.offsetWidth\n      : this.stateProvider.minPositionX || 0;\n  let mouseY =\n    positionY > maxPositionY\n      ? wrapperComponent.offsetHeight\n      : this.stateProvider.minPositionY || 0;\n\n  let mousePosX = mouseX;\n  let mousePosY = mouseY;\n\n  const { x, y } = handleCalculatePositions.call(\n    this,\n    mousePosX,\n    mousePosY,\n    scale,\n    this.bounds,\n    limitToBounds || limitToWrapper,\n  );\n\n  return {\n    scale,\n    positionX: xChanged ? x : positionX,\n    positionY: yChanged ? y : positionY,\n  };\n}\n\nfunction handlePaddingAnimation(positionX, positionY) {\n  const {\n    pan: { padding },\n  }: PropsList = this.stateProvider;\n  if (!padding) return;\n  this.stateProvider.positionX = positionX;\n  this.stateProvider.positionY = positionY;\n  this.applyTransformation();\n}\n","import { roundNumber, checkIsNumber, calculateBoundingArea } from \"../utils\";\nimport { animateComponent } from \"../animations\";\nimport { handlePanningAnimation } from \"../pan\";\nimport { initialState } from \"../InitialState\";\nimport {\n  checkZoomBounds,\n  getComponentsSizes,\n  getDelta,\n  wheelMousePosition,\n  handleCalculatePositions,\n} from \"./utils\";\n\nfunction handleCalculateZoom(\n  delta,\n  step,\n  disablePadding,\n  getTarget,\n  isBtnFunction,\n) {\n  const {\n    scale,\n    options: { maxScale, minScale },\n    scalePadding: { size, disabled },\n    wrapperComponent,\n  } = this.stateProvider;\n\n  let targetScale = null;\n\n  if (isBtnFunction) {\n    const scaleFactor = window.innerWidth * 0.0001;\n    const zoomFactor = delta < 0 ? 30 : 20;\n    targetScale =\n      scale + (step - step * scaleFactor) * delta * (scale / zoomFactor);\n  } else {\n    const wrapperToWindowScale =\n      2 - window.innerWidth / wrapperComponent.offsetWidth;\n    const scaleFactor = Math.max(0.2, Math.min(0.99, wrapperToWindowScale));\n    const zoomFactor = 20;\n    targetScale =\n      scale + step * delta * ((scale - scale * scaleFactor) / zoomFactor);\n  }\n\n  if (getTarget) return targetScale;\n  const paddingEnabled = disablePadding ? false : !disabled;\n  const newScale = checkZoomBounds(\n    roundNumber(targetScale, 3),\n    minScale,\n    maxScale,\n    size,\n    paddingEnabled,\n  );\n  return newScale;\n}\n\nexport function handleCalculateBounds(newScale, limitToWrapper) {\n  const { wrapperComponent, contentComponent } = this.stateProvider;\n\n  const {\n    wrapperWidth,\n    wrapperHeight,\n    newContentWidth,\n    newDiffWidth,\n    newContentHeight,\n    newDiffHeight,\n  } = getComponentsSizes(wrapperComponent, contentComponent, newScale);\n\n  const bounds = calculateBoundingArea(\n    wrapperWidth,\n    newContentWidth,\n    newDiffWidth,\n    wrapperHeight,\n    newContentHeight,\n    newDiffHeight,\n    limitToWrapper,\n  );\n\n  // Save bounds\n  this.bounds = bounds;\n  return bounds;\n}\n\n/**\n * Wheel zoom event\n */\nexport function handleWheelZoom(event) {\n  const {\n    scale,\n    contentComponent,\n    options: { limitToBounds },\n    scalePadding: { size, disabled },\n    wheel: { step, limitsOnWheel },\n  } = this.stateProvider;\n\n  event.preventDefault();\n  event.stopPropagation();\n\n  const delta = getDelta(event, null);\n  const newScale = handleCalculateZoom.call(this, delta, step, !event.ctrlKey);\n\n  // if scale not change\n  if (scale === newScale) return;\n\n  const bounds = handleCalculateBounds.call(this, newScale, !limitsOnWheel);\n\n  const { mouseX, mouseY } = wheelMousePosition(event, contentComponent, scale);\n\n  const isLimitedToBounds =\n    limitToBounds && (disabled || size === 0 || limitsOnWheel);\n\n  const { x, y } = handleCalculatePositions.call(\n    this,\n    mouseX,\n    mouseY,\n    newScale,\n    bounds,\n    isLimitedToBounds,\n  );\n\n  this.bounds = bounds;\n  this.stateProvider.previousScale = scale;\n  this.stateProvider.scale = newScale;\n  this.stateProvider.positionX = x;\n  this.stateProvider.positionY = y;\n  this.applyTransformation();\n}\n\n/**\n * Zoom for animations\n */\n\nexport function handleZoomToPoint(isDisabled, scale, mouseX, mouseY, event) {\n  const {\n    contentComponent,\n    options: { disabled, minScale, maxScale, limitToBounds, limitToWrapper },\n  } = this.stateProvider;\n  if (disabled || isDisabled) return;\n\n  const newScale = checkZoomBounds(\n    roundNumber(scale, 2),\n    minScale,\n    maxScale,\n    null,\n    null,\n  );\n  const bounds = handleCalculateBounds.call(this, newScale, limitToWrapper);\n\n  let mousePosX = mouseX;\n  let mousePosY = mouseY;\n\n  // if event is present - use it's mouse position\n  if (event) {\n    const mousePosition = wheelMousePosition(event, contentComponent, scale);\n    mousePosX = mousePosition.mouseX;\n    mousePosY = mousePosition.mouseY;\n  }\n\n  const { x, y } = handleCalculatePositions.call(\n    this,\n    mousePosX,\n    mousePosY,\n    newScale,\n    bounds,\n    limitToBounds,\n  );\n\n  return { scale: newScale, positionX: x, positionY: y };\n}\n\nexport function handlePaddingAnimation() {\n  const {\n    scale,\n    wrapperComponent,\n    options: { minScale, limitToBounds },\n    scalePadding: { disabled, animationTime, animationType },\n  } = this.stateProvider;\n  const isDisabled = disabled || scale >= minScale;\n\n  if (scale >= 1 || limitToBounds) {\n    // fire fit to bounds animation\n    handlePanningAnimation.call(this);\n  }\n\n  if (isDisabled) return;\n  let mouseX = wrapperComponent.offsetWidth / 2;\n  let mouseY = wrapperComponent.offsetHeight / 2;\n\n  const targetState = handleZoomToPoint.call(\n    this,\n    false,\n    minScale,\n    mouseX,\n    mouseY,\n    null,\n  );\n\n  animateComponent.call(this, {\n    targetState,\n    speed: animationTime,\n    type: animationType,\n  });\n}\n\n/**\n * Button zoom events\n */\n\nexport function handleDoubleClick(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  const {\n    contentComponent,\n    scale,\n    doubleClick: { disabled, mode, step, animationTime, animationType },\n  } = this.stateProvider;\n\n  if (mode === \"reset\") {\n    return resetTransformations.call(this, event, animationTime);\n  }\n  const delta = mode === \"zoomOut\" ? -1 : 1;\n  const newScale = handleCalculateZoom.call(\n    this,\n    delta,\n    step,\n    undefined,\n    undefined,\n    true,\n  );\n\n  const { mouseX, mouseY } = wheelMousePosition(event, contentComponent, scale);\n  const targetState = handleZoomToPoint.call(\n    this,\n    disabled,\n    newScale,\n    mouseX,\n    mouseY,\n  );\n\n  if (targetState.scale === scale) return;\n  const targetScale = handleCalculateZoom.call(\n    this,\n    delta,\n    step,\n    true,\n    undefined,\n    true,\n  );\n  const time = getButtonAnimationTime(targetScale, newScale, animationTime);\n\n  animateComponent.call(this, {\n    targetState,\n    speed: time,\n    type: animationType,\n  });\n}\n\nexport function handleZoomControls(customDelta, customStep) {\n  const {\n    scale,\n    positionX,\n    positionY,\n    wrapperComponent,\n    zoomIn,\n    zoomOut,\n  } = this.stateProvider;\n\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n  const mouseX = (wrapperWidth / 2 - positionX) / scale;\n  const mouseY = (wrapperHeight / 2 - positionY) / scale;\n\n  const newScale = handleCalculateZoom.call(\n    this,\n    customDelta,\n    customStep,\n    undefined,\n    undefined,\n    true,\n  );\n  const isZoomIn = newScale > scale;\n  const animationSpeed = isZoomIn\n    ? zoomIn.animationTime\n    : zoomOut.animationTime;\n  const animationType = isZoomIn ? zoomIn.animationType : zoomOut.animationType;\n  const isDisabled = isZoomIn ? zoomIn.disabled : zoomOut.disabled;\n\n  const targetState = handleZoomToPoint.call(\n    this,\n    isDisabled,\n    newScale,\n    mouseX,\n    mouseY,\n  );\n\n  if (targetState.scale === scale) return;\n  const targetScale = handleCalculateZoom.call(\n    this,\n    customDelta,\n    customStep,\n    true,\n    undefined,\n    true,\n  );\n  const time = getButtonAnimationTime(targetScale, newScale, animationSpeed);\n\n  animateComponent.call(this, {\n    targetState,\n    speed: time,\n    type: animationType,\n  });\n}\n\nexport function resetTransformations(animationSpeed) {\n  const {\n    defaultScale,\n    defaultPositionX,\n    defaultPositionY,\n  } = this.props.defaultValues;\n  const {\n    scale,\n    positionX,\n    positionY,\n    reset,\n    options: { disabled, limitToBounds, centerContent, limitToWrapper },\n  } = this.stateProvider;\n  if (disabled || reset.disabled) return;\n  if (\n    scale === defaultScale &&\n    positionX === defaultPositionX &&\n    positionY === defaultPositionY\n  )\n    return;\n\n  const speed =\n    typeof animationSpeed === \"number\" ? animationSpeed : reset.animationTime;\n\n  const targetScale = checkIsNumber(defaultScale, initialState.scale);\n  let newPositionX = checkIsNumber(defaultPositionX, initialState.positionX);\n  let newPositionY = checkIsNumber(defaultPositionY, initialState.positionY);\n\n  if ((limitToBounds && !limitToWrapper) || centerContent) {\n    const bounds = handleCalculateBounds.call(\n      this,\n      targetScale,\n      limitToWrapper,\n    );\n    newPositionX = bounds.minPositionX;\n    newPositionY = bounds.minPositionY;\n  }\n\n  const targetState = {\n    scale: targetScale,\n    positionX: newPositionX,\n    positionY: newPositionY,\n  };\n\n  animateComponent.call(this, {\n    targetState,\n    speed,\n    type: reset.animationType,\n  });\n}\n\nfunction getButtonAnimationTime(targetScale, newScale, time) {\n  return time * (newScale / targetScale);\n}\n","import { PropsList } from \"../interfaces/propsInterface\";\nimport { checkZoomBounds, handleCalculatePositions } from \"../zoom/utils\";\nimport { handleCalculateBounds } from \"../zoom\";\nimport { getDistance, roundNumber } from \"../utils\";\n\nfunction round(number, decimal) {\n  const roundNumber = Math.pow(10, decimal);\n  return Math.round(number * roundNumber) / roundNumber;\n}\n\nfunction getCurrentDistance(event) {\n  return getDistance(event.touches[0], event.touches[1]);\n}\n\nfunction checkIfInfinite(number) {\n  return number === Infinity || number === -Infinity;\n}\n\nexport function calculatePinchZoom(currentDistance, pinchStartDistance) {\n  const {\n    options: { minScale, maxScale },\n    scalePadding: { size, disabled },\n  }: PropsList = this.stateProvider;\n  if (\n    typeof pinchStartDistance !== \"number\" ||\n    typeof currentDistance !== \"number\"\n  )\n    return console.error(\"Pinch touches distance was not provided\");\n\n  if (currentDistance < 0) return;\n  const touchProportion = currentDistance / pinchStartDistance;\n  const scaleDifference = touchProportion * this.pinchStartScale;\n\n  return checkZoomBounds(\n    roundNumber(scaleDifference, 2),\n    minScale,\n    maxScale,\n    size,\n    !disabled,\n  );\n}\n\nexport function calculateMidpoint(event, scale, contentComponent) {\n  const contentRect = contentComponent.getBoundingClientRect();\n  const { touches } = event;\n  const firstPointX = round(touches[0].clientX - contentRect.left, 5);\n  const firstPointY = round(touches[0].clientY - contentRect.top, 5);\n  const secondPointX = round(touches[1].clientX - contentRect.left, 5);\n  const secondPointY = round(touches[1].clientY - contentRect.top, 5);\n\n  return {\n    mouseX: (firstPointX + secondPointX) / 2 / scale,\n    mouseY: (firstPointY + secondPointY) / 2 / scale,\n  };\n}\n\nexport function handleZoomPinch(event) {\n  const {\n    scale,\n    options: { limitToBounds, limitToWrapper },\n    scalePadding: { disabled, size },\n    wheel: { limitsOnWheel },\n    pinch,\n  } = this.stateProvider;\n  const { contentComponent } = this.state;\n  if (pinch.disabled || this.stateProvider.options.disabled) return;\n\n  if (event.cancelable) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  // if one finger starts from outside of wrapper\n  if (this.pinchStartDistance === null) return;\n\n  // Position transformation\n  const { mouseX, mouseY } = calculateMidpoint(event, scale, contentComponent);\n\n  // if touches goes off of the wrapper element\n  if (checkIfInfinite(mouseX) || checkIfInfinite(mouseY)) return;\n\n  const currentDistance = getCurrentDistance(event);\n\n  const newScale = calculatePinchZoom.call(\n    this,\n    currentDistance,\n    this.pinchStartDistance,\n  );\n  if (checkIfInfinite(newScale) || newScale === scale) return;\n\n  // Get new element sizes to calculate bounds\n  const bounds = handleCalculateBounds.call(\n    this,\n    newScale,\n    limitToWrapper,\n  );\n\n  // Calculate transformations\n  const isLimitedToBounds =\n    limitToBounds && (disabled || size === 0 || limitsOnWheel);\n\n  const { x, y } = handleCalculatePositions.call(\n    this,\n    mouseX,\n    mouseY,\n    newScale,\n    bounds,\n    isLimitedToBounds,\n  );\n\n  this.lastDistance = currentDistance;\n\n  this.stateProvider.positionX = x;\n  this.stateProvider.positionY = y;\n  this.stateProvider.scale = newScale;\n  this.stateProvider.previousScale = scale;\n\n  // update component transformation\n  this.applyTransformation();\n}\n","import { PropsList } from \"../interfaces/propsInterface\";\nimport { getClientPosition, handlePanningAnimation } from \"../pan\";\nimport { checkPositionBounds } from \"../zoom/utils\";\nimport { boundLimiter } from \"../utils\";\nimport { animate, handleDisableAnimation } from \"../animations\";\nimport { availableAnimations } from \"../animations/utils\";\n\nconst throttleTime = 30;\n\nfunction velocityTimeSpeed(speed, animationTime) {\n  const {\n    pan: { velocityEqualToMove },\n  }: PropsList = this.stateProvider;\n\n  if (velocityEqualToMove) {\n    return animationTime - animationTime / Math.max(1, speed);\n  }\n  return animationTime;\n}\n\nfunction handleEnableVelocity() {\n  this.setState({ startAnimation: false });\n}\n\nexport function handleFireVelocity() {\n  this.setState({ startAnimation: true });\n}\n\nexport function animateVelocity() {\n  const {\n    positionX,\n    positionY,\n    options: { limitToBounds },\n    pan: {\n      velocityBaseTime,\n      lockAxisX,\n      lockAxisY,\n      velocityAnimationType,\n      panReturnAnimationTime,\n      panReturnAnimationType,\n      padding,\n      paddingSize,\n    },\n    wrapperComponent,\n  } = this.stateProvider;\n  if (!this.mounted) return;\n  if (!this.velocity || !this.bounds) return handleDisableAnimation.call(this);\n\n  const {\n    maxPositionX,\n    minPositionX,\n    maxPositionY,\n    minPositionY,\n  } = this.bounds;\n\n  const { velocityX, velocityY, velocity } = this.velocity;\n  const animationTime = velocityTimeSpeed.call(\n    this,\n    velocity,\n    velocityBaseTime,\n  );\n\n  if (!animationTime) {\n    handlePanningAnimation.call(this);\n    return;\n  }\n\n  const targetX = velocityX;\n  const targetY = velocityY;\n\n  // pan return animation\n  const newAnimationTime =\n    animationTime > panReturnAnimationTime\n      ? animationTime\n      : panReturnAnimationTime;\n\n  const paddingValue = padding ? paddingSize : 0;\n\n  const paddingX = wrapperComponent\n    ? (paddingValue * wrapperComponent.offsetWidth) / 100\n    : 0;\n  const paddingY = wrapperComponent\n    ? (paddingValue * wrapperComponent.offsetHeight) / 100\n    : 0;\n\n  const maxTargetX = maxPositionX + paddingX;\n  const minTargetX = minPositionX - paddingX;\n\n  const maxTargetY = maxPositionY + paddingY;\n  const minTargetY = minPositionY - paddingY;\n\n  const startPosition = checkPositionBounds(\n    positionX,\n    positionY,\n    this.bounds,\n    limitToBounds,\n    paddingValue,\n    wrapperComponent,\n  );\n\n  const startTime = new Date().getTime();\n\n  // animation start timestamp\n  animate.call(this, velocityAnimationType, newAnimationTime, step => {\n    const frameTime = new Date().getTime() - startTime;\n    const animationProgress = frameTime / panReturnAnimationTime;\n    const returnAnimation = availableAnimations[panReturnAnimationType];\n\n    let customReturnStep = returnAnimation(animationProgress);\n\n    if (\n      frameTime > panReturnAnimationTime ||\n      customReturnStep > 1 ||\n      customReturnStep === Infinity ||\n      customReturnStep === -Infinity\n    )\n      customReturnStep = 1;\n\n    const currentPositionX = getPosition(\n      lockAxisX,\n      targetX,\n      step,\n      customReturnStep,\n      minPositionX,\n      maxPositionX,\n      limitToBounds,\n      positionX,\n      startPosition.x,\n      minTargetX,\n      maxTargetX,\n    );\n    const currentPositionY = getPosition(\n      lockAxisY,\n      targetY,\n      step,\n      customReturnStep,\n      minPositionY,\n      maxPositionY,\n      limitToBounds,\n      positionY,\n      startPosition.y,\n      minTargetY,\n      maxTargetY,\n    );\n\n    if (positionX !== currentPositionX || positionY !== currentPositionY) {\n      // Save panned position\n      this.stateProvider.positionX = currentPositionX;\n      this.stateProvider.positionY = currentPositionY;\n\n      // apply animation changes\n      this.applyTransformation();\n    }\n  });\n}\n\nexport function calculateVelocityStart(event) {\n  const {\n    scale,\n    options: { disabled },\n    pan: {\n      velocity,\n      velocitySensitivity,\n      velocityActiveScale,\n      velocityMinSpeed,\n    },\n    wrapperComponent,\n  } = this.stateProvider;\n\n  if (!velocity || velocityActiveScale >= scale || disabled) return;\n  handleEnableVelocity.call(this);\n  const now = Date.now();\n  if (this.lastMousePosition) {\n    const position = getClientPosition(event);\n    if (!position) return console.error(\"No mouse or touch position detected\");\n\n    const { clientX, clientY } = position;\n    const distanceX = clientX - this.lastMousePosition.clientX;\n    const distanceY = clientY - this.lastMousePosition.clientY;\n\n    const interval = now - this.velocityTime;\n\n    const wrapperToWindowScaleX =\n      2 - wrapperComponent.offsetWidth / window.innerWidth;\n    const wrapperToWindowScaleY =\n      2 - wrapperComponent.offsetHeight / window.innerHeight;\n\n    const scaledX =\n      20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleX));\n    const scaledY =\n      20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleY));\n\n    const velocityX =\n      (distanceX / interval) * velocitySensitivity * scale * scaledX;\n    const velocityY =\n      (distanceY / interval) * velocitySensitivity * scale * scaledY;\n\n    const speed = distanceX * distanceX + distanceY * distanceY;\n    const velocity = (Math.sqrt(speed) / interval) * velocitySensitivity;\n\n    if (this.velocity && velocity < this.velocity.velocity && this.throttle)\n      return;\n    this.velocity = { velocityX, velocityY, velocity };\n\n    // throttling\n    if (this.throttle) clearTimeout(this.throttle);\n    this.throttle = setTimeout(() => {\n      if (this.mounted) this.throttle = false;\n    }, throttleTime);\n  }\n  const position = getClientPosition(event);\n  this.lastMousePosition = position;\n  this.velocityTime = now;\n}\n\nfunction getPosition(\n  isLocked,\n  target,\n  step,\n  panReturnStep,\n  minBound,\n  maxBound,\n  limitToBounds,\n  offset,\n  startPosition,\n  minTarget,\n  maxTarget,\n) {\n  if (limitToBounds) {\n    if (startPosition > minBound && offset > maxBound) {\n      const newPosition =\n        startPosition - (startPosition - maxBound) * panReturnStep;\n      if (newPosition > maxTarget) return maxTarget;\n      if (newPosition < maxBound) return maxBound;\n      return newPosition;\n    }\n    if (startPosition < minBound && offset < minBound) {\n      const newPosition =\n        startPosition - (startPosition - minBound) * panReturnStep;\n      if (newPosition < minTarget) return minTarget;\n      if (newPosition > minBound) return minBound;\n      return newPosition;\n    }\n  }\n  if (isLocked) return startPosition;\n  const offsetPosition = offset + target * step;\n  return boundLimiter(offsetPosition, minBound, maxBound, limitToBounds);\n}\n","// We want to make event listeners non-passive, and to do so have to check\n// that browsers support EventListenerOptions in the first place.\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nlet passiveSupported = false;\n\nfunction makePassiveEventOption(passive) {\n  return passiveSupported ? { passive } : passive;\n}\n\nexport default makePassiveEventOption;\n","export const propsList = [\n  \"previousScale\",\n  \"scale\",\n  \"positionX\",\n  \"positionY\",\n  \"defaultPositionX\",\n  \"defaultPositionY\",\n  \"defaultScale\",\n  \"onWheelStart\",\n  \"onWheel\",\n  \"onWheelStop\",\n  \"onPanningStart\",\n  \"onPanning\",\n  \"onPanningStop\",\n  \"onPinchingStart\",\n  \"onPinching\",\n  \"onPinchingStop\",\n  \"onZoomChange\",\n  \"options\",\n  \"wheel\",\n  \"scalePadding\",\n  \"pan\",\n  \"pinch\",\n  \"zoomIn\",\n  \"zoomOut\",\n  \"doubleClick\",\n  \"reset\",\n];\n\nexport const getValidPropsFromObject = props => {\n  return Object.keys(props).reduce((acc, key) => {\n    if (propsList.includes(key)) {\n      acc[key] = props[key];\n    }\n    return acc;\n  }, {});\n};\n","import React, { Component } from \"react\";\nimport { initialState } from \"./InitialState\";\nimport {\n  mergeProps,\n  getDistance,\n  handleCallback,\n  handleWheelStop,\n  getWindowScaleX,\n  getWindowScaleY,\n} from \"./utils\";\nimport {\n  handleZoomControls,\n  handleDoubleClick,\n  resetTransformations,\n  handlePaddingAnimation,\n  handleWheelZoom,\n  handleCalculateBounds,\n} from \"./zoom\";\nimport { handleDisableAnimation, animateComponent } from \"./animations\";\nimport { handleZoomPinch } from \"./pinch\";\nimport { handlePanning, handlePanningAnimation } from \"./pan\";\nimport {\n  handleFireVelocity,\n  animateVelocity,\n  calculateVelocityStart,\n} from \"./velocity\";\nimport makePassiveEventOption from \"./makePassiveEventOption\";\nimport {\n  StateContextState,\n  StateContextProps,\n} from \"./interfaces/stateContextInterface\";\nimport { getValidPropsFromObject } from \"./propsHandlers\";\n\nconst Context = React.createContext({});\n\nlet wheelStopEventTimer = null;\nconst wheelStopEventTime = 180;\nlet wheelAnimationTimer = null;\nconst wheelAnimationTime = 100;\n\nclass StateProvider extends Component<StateContextProps, StateContextState> {\n  public mounted = true;\n\n  public state = {\n    wrapperComponent: undefined,\n    contentComponent: undefined,\n  };\n  public stateProvider = {\n    ...initialState,\n    ...mergeProps(initialState, this.props.dynamicValues),\n    ...this.props.defaultValues,\n    previousScale:\n      this.props.dynamicValues.scale ||\n      this.props.defaultValues.scale ||\n      initialState.scale,\n  };\n\n  public windowToWrapperScaleX = 0;\n  public windowToWrapperScaleY = 0;\n  // panning helpers\n  public startCoords = null;\n  public isDown = false;\n  // pinch helpers\n  public pinchStartDistance = null;\n  public lastDistance = null;\n  public pinchStartScale = null;\n  public distance = null;\n  public bounds = null;\n  // velocity helpers\n  public velocityTime = null;\n  public lastMousePosition = null;\n  public velocity = null;\n  public offsetX = null;\n  public offsetY = null;\n  public throttle = false;\n  // wheel helpers\n  public previousWheelEvent = null;\n  public lastScale = null;\n  // animations helpers\n  public animate = null;\n  public animation = null;\n  public maxBounds = null;\n\n  componentDidMount() {\n    const passiveOption = makePassiveEventOption(false);\n\n    // Panning on window to allow panning when mouse is out of wrapper\n    window.addEventListener(\n      \"mousedown\",\n      this.handleStartPanning,\n      passiveOption,\n    );\n    window.addEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.addEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\n  }\n\n  componentWillUnmount() {\n    const passiveOption = makePassiveEventOption(false);\n\n    window.removeEventListener(\n      \"mousedown\",\n      this.handleStartPanning,\n      passiveOption,\n    );\n    window.removeEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.removeEventListener(\n      \"mouseup\",\n      this.handleStopPanning,\n      passiveOption,\n    );\n    handleDisableAnimation.call(this);\n  }\n\n  componentDidUpdate(oldProps, oldState) {\n    const { wrapperComponent, contentComponent } = this.state;\n    const { dynamicValues } = this.props;\n    if (!oldState.contentComponent && contentComponent) {\n      this.stateProvider.contentComponent = contentComponent;\n    }\n    if (\n      !oldState.wrapperComponent &&\n      wrapperComponent &&\n      wrapperComponent !== undefined\n    ) {\n      this.stateProvider.wrapperComponent = wrapperComponent;\n      this.windowToWrapperScaleX = getWindowScaleX(wrapperComponent);\n      this.windowToWrapperScaleY = getWindowScaleY(wrapperComponent);\n\n      // Zooming events on wrapper\n      const passiveOption = makePassiveEventOption(false);\n      wrapperComponent.addEventListener(\n        \"wheel\",\n        this.handleWheel,\n        passiveOption,\n      );\n      wrapperComponent.addEventListener(\n        \"dblclick\",\n        this.handleDbClick,\n        passiveOption,\n      );\n      wrapperComponent.addEventListener(\n        \"touchstart\",\n        this.handleTouchStart,\n        passiveOption,\n      );\n      wrapperComponent.addEventListener(\n        \"touchmove\",\n        this.handleTouch,\n        passiveOption,\n      );\n      wrapperComponent.addEventListener(\n        \"touchend\",\n        this.handleTouchStop,\n        passiveOption,\n      );\n    }\n\n    // set bound for animations\n    if (\n      (wrapperComponent && contentComponent) ||\n      oldProps.dynamicValues !== dynamicValues\n    ) {\n      this.maxBounds = handleCalculateBounds.call(\n        this,\n        this.stateProvider.scale,\n        this.stateProvider.options.limitToWrapper,\n      );\n    }\n\n    // must be at the end of the update function, updates\n    if (oldProps.dynamicValues && oldProps.dynamicValues !== dynamicValues) {\n      this.animation = null;\n      this.stateProvider = {\n        ...this.stateProvider,\n        ...mergeProps(this.stateProvider, dynamicValues),\n      };\n      this.applyTransformation(null, null, null);\n    }\n  }\n\n  //////////\n  // Wheel\n  //////////\n\n  handleWheel = event => {\n    const {\n      scale,\n      wheel: { disabled, wheelEnabled, touchPadEnabled },\n    } = this.stateProvider;\n\n    const { onWheelStart, onWheel, onWheelStop } = this.props;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    if (\n      this.isDown ||\n      disabled ||\n      this.stateProvider.options.disabled ||\n      !wrapperComponent ||\n      !contentComponent\n    )\n      return;\n\n    // ctrlKey detects if touchpad execute wheel or pinch gesture\n    if (!wheelEnabled && !event.ctrlKey) return;\n    if (!touchPadEnabled && event.ctrlKey) return;\n\n    // Wheel start event\n    if (!wheelStopEventTimer) {\n      this.lastScale = scale;\n      handleDisableAnimation.call(this);\n      handleCallback(onWheelStart, this.getCallbackProps());\n    }\n\n    // Wheel event\n    handleWheelZoom.call(this, event);\n    handleCallback(onWheel, this.getCallbackProps());\n    this.applyTransformation(null, null, null);\n    this.previousWheelEvent = event;\n\n    // Wheel stop event\n    if (handleWheelStop(this.previousWheelEvent, event, this.stateProvider)) {\n      clearTimeout(wheelStopEventTimer);\n      wheelStopEventTimer = setTimeout(() => {\n        if (!this.mounted) return;\n        handleCallback(onWheelStop, this.getCallbackProps());\n        wheelStopEventTimer = null;\n      }, wheelStopEventTime);\n    }\n\n    // cancel animation\n    this.animate = false;\n\n    // fire animation\n    this.lastScale = this.stateProvider.scale;\n    clearTimeout(wheelAnimationTimer);\n    wheelAnimationTimer = setTimeout(() => {\n      if (!this.mounted) return;\n      handlePaddingAnimation.call(this, event);\n    }, wheelAnimationTime);\n  };\n\n  //////////\n  // Panning\n  //////////\n\n  checkPanningTarget = event => {\n    const {\n      pan: { disableOnTarget },\n    } = this.stateProvider;\n\n    return (\n      disableOnTarget\n        .map(tag => tag.toUpperCase())\n        .includes(event.target.tagName) ||\n      disableOnTarget.find(element =>\n        event.target.classList.value.includes(element),\n      )\n    );\n  };\n\n  checkIsPanningActive = event => {\n    const {\n      pan: { disabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    return (\n      !this.isDown ||\n      disabled ||\n      this.stateProvider.options.disabled ||\n      (event.touches &&\n        (event.touches.length !== 1 ||\n          Math.abs(this.startCoords.x - event.touches[0].clientX) < 1 ||\n          Math.abs(this.startCoords.y - event.touches[0].clientY) < 1)) ||\n      !wrapperComponent ||\n      !contentComponent\n    );\n  };\n\n  handleSetUpPanning = (x, y) => {\n    const { positionX, positionY } = this.stateProvider;\n    this.isDown = true;\n    this.startCoords = { x: x - positionX, y: y - positionY };\n\n    handleCallback(this.props.onPanningStart, this.getCallbackProps());\n  };\n\n  handleStartPanning = event => {\n    const {\n      wrapperComponent,\n      scale,\n      options: { minScale, maxScale, limitToWrapper },\n      pan: { disabled },\n    } = this.stateProvider;\n    const { target, touches } = event;\n\n    if (\n      disabled ||\n      this.stateProvider.options.disabled ||\n      (wrapperComponent && !wrapperComponent.contains(target)) ||\n      this.checkPanningTarget(event) ||\n      scale < minScale ||\n      scale > maxScale\n    )\n      return;\n\n    handleDisableAnimation.call(this);\n    this.bounds = handleCalculateBounds.call(this, scale, limitToWrapper);\n\n    // Mobile points\n    if (touches && touches.length === 1) {\n      this.handleSetUpPanning(touches[0].clientX, touches[0].clientY);\n    }\n    // Desktop points\n    if (!touches) {\n      this.handleSetUpPanning(event.clientX, event.clientY);\n    }\n  };\n\n  handlePanning = event => {\n    if (this.isDown) event.preventDefault();\n    if (this.checkIsPanningActive(event)) return;\n    event.stopPropagation();\n    calculateVelocityStart.call(this, event);\n    handlePanning.call(this, event);\n    handleCallback(this.props.onPanning, this.getCallbackProps());\n  };\n\n  handleStopPanning = () => {\n    if (this.isDown) {\n      this.isDown = false;\n      this.animate = false;\n      this.animation = false;\n      handleFireVelocity.call(this);\n      handleCallback(this.props.onPanningStop, this.getCallbackProps());\n\n      const {\n        pan: { velocity },\n        scale,\n      } = this.stateProvider;\n\n      // start velocity animation\n      if (this.velocity && velocity && scale > 1) {\n        animateVelocity.call(this);\n      } else {\n        // fire fit to bounds animation\n        handlePanningAnimation.call(this);\n      }\n    }\n  };\n\n  //////////\n  // Pinch\n  //////////\n\n  handlePinchStart = event => {\n    const { scale } = this.stateProvider;\n    event.preventDefault();\n    event.stopPropagation();\n\n    handleDisableAnimation.call(this);\n    const distance = getDistance(event.touches[0], event.touches[1]);\n    this.pinchStartDistance = distance;\n    this.lastDistance = distance;\n    this.pinchStartScale = scale;\n    this.isDown = false;\n\n    handleCallback(this.props.onPinchingStart, this.getCallbackProps());\n  };\n\n  handlePinch = event => {\n    this.isDown = false;\n    handleZoomPinch.call(this, event);\n    handleCallback(this.props.onPinching, this.getCallbackProps());\n  };\n\n  handlePinchStop = () => {\n    if (typeof this.pinchStartScale === \"number\") {\n      this.isDown = false;\n      this.velocity = null;\n      this.lastDistance = null;\n      this.pinchStartScale = null;\n      this.pinchStartDistance = null;\n      handlePaddingAnimation.call(this);\n      handleCallback(this.props.onPinchingStop, this.getCallbackProps());\n    }\n  };\n\n  //////////\n  // Touch Events\n  //////////\n\n  handleTouchStart = event => {\n    const {\n      wrapperComponent,\n      contentComponent,\n      scale,\n      options: { disabled, minScale },\n    } = this.stateProvider;\n    const { touches } = event;\n    if (disabled || !wrapperComponent || !contentComponent || scale < minScale)\n      return;\n    handleDisableAnimation.call(this);\n\n    if (touches && touches.length === 1) return this.handleStartPanning(event);\n    if (touches && touches.length === 2) return this.handlePinchStart(event);\n  };\n\n  handleTouch = event => {\n    const { pan, pinch, options } = this.stateProvider;\n    if (options.disabled) return;\n    if (!pan.disabled && event.touches.length === 1)\n      return this.handlePanning(event);\n    if (!pinch.disabled && event.touches.length === 2)\n      return this.handlePinch(event);\n  };\n\n  handleTouchStop = () => {\n    this.handleStopPanning();\n    this.handlePinchStop();\n  };\n\n  //////////\n  // Controls\n  //////////\n\n  zoomIn = event => {\n    const {\n      zoomIn: { disabled, step },\n      options,\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    if (!event) throw Error(\"Zoom in function requires event prop\");\n    if (disabled || options.disabled || !wrapperComponent || !contentComponent)\n      return;\n    handleZoomControls.call(this, 1, step);\n  };\n\n  zoomOut = event => {\n    const {\n      zoomOut: { disabled, step },\n      options,\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    if (!event) throw Error(\"Zoom out function requires event prop\");\n    if (disabled || options.disabled || !wrapperComponent || !contentComponent)\n      return;\n    handleZoomControls.call(this, -1, step);\n  };\n\n  handleDbClick = event => {\n    const {\n      options,\n      doubleClick: { disabled, step },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    if (!event) throw Error(\"Double click function requires event prop\");\n    if (disabled || options.disabled || !wrapperComponent || !contentComponent)\n      return;\n    handleDoubleClick.call(this, event, 1, step);\n  };\n\n  setScale = (newScale, speed = 200, type = \"easeOut\") => {\n    const {\n      positionX,\n      positionY,\n      scale,\n      options: { disabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n    if (disabled || !wrapperComponent || !contentComponent) return;\n    const targetState = {\n      positionX,\n      positionY,\n      scale: isNaN(newScale) ? scale : newScale,\n    };\n\n    animateComponent.call(this, {\n      targetState,\n      speed,\n      type,\n    });\n  };\n\n  setPositionX = (newPosX, speed = 200, type = \"easeOut\") => {\n    const {\n      positionX,\n      positionY,\n      scale,\n      options: { disabled, transformEnabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n    if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\n      return;\n    const targetState = {\n      positionX: isNaN(newPosX) ? positionX : newPosX,\n      positionY,\n      scale,\n    };\n\n    animateComponent.call(this, {\n      targetState,\n      speed,\n      type,\n    });\n  };\n\n  setPositionY = (newPosY, speed = 200, type = \"easeOut\") => {\n    const {\n      positionX,\n      scale,\n      positionY,\n      options: { disabled, transformEnabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n    if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\n      return;\n\n    const targetState = {\n      positionX,\n      positionY: isNaN(newPosY) ? positionY : newPosY,\n      scale,\n    };\n\n    animateComponent.call(this, {\n      targetState,\n      speed,\n      type,\n    });\n  };\n\n  setTransform = (\n    newPosX,\n    newPosY,\n    newScale,\n    speed = 200,\n    type = \"easeOut\",\n  ) => {\n    const {\n      positionX,\n      positionY,\n      scale,\n      options: { disabled, transformEnabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n    if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\n      return;\n\n    const targetState = {\n      positionX: isNaN(newPosX) ? positionX : newPosX,\n      positionY: isNaN(newPosY) ? positionY : newPosY,\n      scale: isNaN(newScale) ? scale : newScale,\n    };\n\n    animateComponent.call(this, {\n      targetState,\n      speed,\n      type,\n    });\n  };\n\n  resetTransform = () => {\n    const {\n      options: { disabled, transformEnabled },\n    } = this.stateProvider;\n    if (disabled || !transformEnabled) return;\n    resetTransformations.call(this);\n  };\n\n  setDefaultState = () => {\n    this.animation = null;\n    this.stateProvider = {\n      ...this.stateProvider,\n      scale: initialState.scale,\n      positionX: initialState.positionX,\n      positionY: initialState.positionY,\n      ...this.props.defaultValues,\n    };\n\n    this.forceUpdate();\n  };\n\n  //////////\n  // Setters\n  //////////\n\n  setWrapperComponent = wrapperComponent => {\n    this.setState({ wrapperComponent });\n  };\n\n  setContentComponent = contentComponent => {\n    this.setState({ contentComponent }, () => {\n      const {\n        wrapperComponent,\n        options: { centerContent, limitToBounds, limitToWrapper },\n        scale,\n      } = this.stateProvider;\n\n      const { positionX, positionY } = this.props.defaultValues;\n\n      if (\n        (limitToBounds && !limitToWrapper) ||\n        (centerContent && !positionX && !positionY)\n      ) {\n        const transform = `translate(25%, 25%) scale(${scale})`;\n        contentComponent.style.transform = transform;\n        contentComponent.style.WebkitTransform = transform;\n        // force update to inject state to the context\n        this.forceUpdate();\n        const startTime = new Date().getTime();\n        const maxTimeWait = 2000;\n        let interval = setInterval(() => {\n          if (wrapperComponent.offsetWidth) {\n            const bounds = handleCalculateBounds.call(this, scale, false);\n            this.stateProvider.positionX = bounds.minPositionX;\n            this.stateProvider.positionY = bounds.minPositionY;\n            this.applyTransformation(null, null, null);\n            clearInterval(interval);\n            interval = null;\n          } else if (new Date().getTime() - startTime > maxTimeWait) {\n            clearInterval(interval);\n            interval = null;\n          }\n        }, 20);\n      } else {\n        this.applyTransformation(null, null, null);\n      }\n    });\n  };\n\n  applyTransformation = (newScale, posX, posY) => {\n    if (!this.mounted) return;\n    const { contentComponent } = this.state;\n    const { onZoomChange } = this.props;\n    const { previousScale, scale, positionX, positionY } = this.stateProvider;\n    if (!contentComponent)\n      return console.error(\"There is no content component\");\n    const transform = `translate(${posX || positionX}px, ${posY ||\n      positionY}px) scale(${newScale || scale})`;\n    contentComponent.style.transform = transform;\n    contentComponent.style.WebkitTransform = transform;\n    // force update to inject state to the context\n    this.forceUpdate();\n    if (onZoomChange && previousScale !== scale) {\n      handleCallback(onZoomChange, this.getCallbackProps());\n    }\n  };\n\n  //////////\n  // Props\n  //////////\n\n  getCallbackProps = () => getValidPropsFromObject(this.stateProvider);\n\n  render() {\n    const { wrapperComponent, contentComponent } = this.state;\n    /**\n     * Context provider value\n     */\n    const value = {\n      loaded: Boolean(wrapperComponent && contentComponent),\n      state: this.getCallbackProps(),\n      dispatch: {\n        setScale: this.setScale,\n        setPositionX: this.setPositionX,\n        setPositionY: this.setPositionY,\n        zoomIn: this.zoomIn,\n        zoomOut: this.zoomOut,\n        setTransform: this.setTransform,\n        resetTransform: this.resetTransform,\n        setDefaultState: this.setDefaultState,\n      },\n      nodes: {\n        setWrapperComponent: this.setWrapperComponent,\n        setContentComponent: this.setContentComponent,\n      },\n    };\n    const { children } = this.props;\n    const content =\n      typeof children === \"function\"\n        ? children({ ...value.state, ...value.dispatch })\n        : children;\n\n    return <Context.Provider value={value}>{content}</Context.Provider>;\n  }\n}\n\nexport { Context, StateProvider };\n","import React from \"react\";\nimport { StateProvider } from \"../store/StateContext\";\nimport { deleteUndefinedProps } from \"../store/utils\";\nimport { getValidPropsFromObject } from \"../store/propsHandlers\";\nimport { PropsList } from \"../store/interfaces/propsInterface\";\n\nconst TransformWrapper = ({\n  children,\n  defaultPositionX,\n  defaultPositionY,\n  defaultScale,\n  onWheelStart,\n  onWheel,\n  onWheelStop,\n  onPanningStart,\n  onPanning,\n  onPanningStop,\n  onPinchingStart,\n  onPinching,\n  onPinchingStop,\n  onZoomChange,\n  ...rest\n}: PropsList) => {\n  const props = { ...rest };\n  if (props.options && props.options.limitToWrapper) {\n    props.options.limitToBounds = true;\n  }\n  return (\n    <StateProvider\n      defaultValues={deleteUndefinedProps({\n        positionX: defaultPositionX,\n        positionY: defaultPositionY,\n        scale: defaultScale,\n      })}\n      dynamicValues={deleteUndefinedProps(getValidPropsFromObject(props))}\n      onWheelStart={onWheelStart}\n      onWheel={onWheel}\n      onWheelStop={onWheelStop}\n      onPanningStart={onPanningStart}\n      onPanning={onPanning}\n      onPanningStop={onPanningStop}\n      onPinchingStart={onPinchingStart}\n      onPinching={onPinching}\n      onPinchingStop={onPinchingStop}\n      onZoomChange={onZoomChange}\n    >\n      {children}\n    </StateProvider>\n  );\n};\n\nexport { TransformWrapper };\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from \"react\";\nimport { Context } from \"../store/StateContext\";\nimport styles from \"./TransformComponent.module.css\";\n\nclass TransformComponent extends React.Component {\n  private wrapperRef = React.createRef<HTMLDivElement>();\n  private contentRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    const { nodes } = this.context;\n    nodes.setWrapperComponent(this.wrapperRef.current);\n    nodes.setContentComponent(this.contentRef.current);\n  }\n\n  render() {\n    const { children } = this.props;\n    const {\n      state: {\n        positionX,\n        positionY,\n        scale,\n        options: { wrapperClass, contentClass },\n      },\n    } = this.context;\n\n    const style = {\n      WebkitTransform: `translate(${positionX}px, ${positionY}px) scale(${scale})`,\n      transform: `translate(${positionX}px, ${positionY}px) scale(${scale})`,\n    };\n    return (\n      <div\n        ref={this.wrapperRef}\n        className={`react-transform-component ${styles.container} ${wrapperClass}`}\n      >\n        <div\n          ref={this.contentRef}\n          className={`react-transform-element ${styles.content} ${contentClass}`}\n          style={style}\n        >\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n\nTransformComponent.contextType = Context;\n\nexport { TransformComponent };\n"]},"metadata":{},"sourceType":"module"}