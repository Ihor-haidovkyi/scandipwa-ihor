{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import InstallPromptAndroid from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/InstallPromptAndroid\";import InstallPromptIOS from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/InstallPromptIOS\";import{DeviceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Device\";import\"./InstallPrompt.style\";/** @namespace Component/InstallPrompt/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _InstallPrompt=/*#__PURE__*/function(_Extensible){_inherits(_InstallPrompt,_Extensible);var _super=_createSuper(_InstallPrompt);function _InstallPrompt(){_classCallCheck(this,_InstallPrompt);return _super.apply(this,arguments);}_createClass(_InstallPrompt,[{key:\"hasSupport\",value:/**\n     * Currently BeforeInstallPromptEvent is supported only on\n     * - Android webview\n     * - Chrome for Android\n     * - Samsung Internet\n     * But iOS has own \"Add to Home Screen button\" on Safari share menu\n     */function hasSupport(){var _this$props=this.props,device=_this$props.device,hasInstallPromptEvent=_this$props.hasInstallPromptEvent,isBannerClosed=_this$props.isBannerClosed;var android=device.android,ios=device.ios,safari=device.safari,standaloneMode=device.standaloneMode;var isAndroid=android&&hasInstallPromptEvent;var isIos=ios&&safari;return(isAndroid||isIos)&&!standaloneMode&&!isBannerClosed;}},{key:\"renderPrompt\",value:function renderPrompt(){var _this$props2=this.props,device=_this$props2.device,containerFunctions=_this$props2.containerFunctions;if(device.ios){return/*#__PURE__*/_checkBEM(React,InstallPromptIOS,containerFunctions);}if(device.android){return/*#__PURE__*/_checkBEM(React,InstallPromptAndroid,containerFunctions);}return null;}},{key:\"render\",value:function render(){var displayComponent=this.hasSupport();if(!displayComponent){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"InstallPrompt\"},this.renderPrompt());}}]);return _InstallPrompt;}(Extensible(PureComponent));Object.defineProperty(_InstallPrompt,'name',{value:'InstallPrompt'});export var InstallPrompt=middleware(_InstallPrompt,\"Component/InstallPrompt/Component\");export default InstallPrompt;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/InstallPrompt/InstallPrompt.component.js"],"names":["PureComponent","InstallPromptAndroid","InstallPromptIOS","DeviceType","InstallPrompt","props","device","hasInstallPromptEvent","isBannerClosed","android","ios","safari","standaloneMode","isAndroid","isIos","containerFunctions","displayComponent","hasSupport","renderPrompt","Object","defineProperty","_InstallPrompt","value"],"mappings":"ojBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAGA,OAASA,aAAT,KAA8B,OAA9B,CAEA,MAAOC,CAAAA,oBAAP,wFACA,MAAOC,CAAAA,gBAAP,oFACA,OAASC,UAAT,qEAEA,8BAEA,mD,wEACA,UAAaC,CAAAA,cAAb,2QAQI;AACJ;AACA;AACA;AACA;AACA;AACA,OACI,qBAAa,iBACiD,KAAKC,KADtD,CACDC,MADC,aACDA,MADC,CACOC,qBADP,aACOA,qBADP,CAC8BC,cAD9B,aAC8BA,cAD9B,IAGLC,CAAAA,OAHK,CAOLH,MAPK,CAGLG,OAHK,CAILC,GAJK,CAOLJ,MAPK,CAILI,GAJK,CAKLC,MALK,CAOLL,MAPK,CAKLK,MALK,CAMLC,cANK,CAOLN,MAPK,CAMLM,cANK,CAQT,GAAMC,CAAAA,SAAS,CAAGJ,OAAO,EAAIF,qBAA7B,CACA,GAAMO,CAAAA,KAAK,CAAGJ,GAAG,EAAIC,MAArB,CAEA,MAAO,CAACE,SAAS,EAAIC,KAAd,GACA,CAACF,cADD,EAEA,CAACJ,cAFR,CAGH,CA7BL,4BA+BI,uBAAe,kBAC4B,KAAKH,KADjC,CACHC,MADG,cACHA,MADG,CACKS,kBADL,cACKA,kBADL,CAGX,GAAIT,MAAM,CAACI,GAAX,CAAgB,CACZ,mCAAQ,gBAAR,CAA8BK,kBAA9B,EACH,CAED,GAAIT,MAAM,CAACG,OAAX,CAAoB,CAChB,mCAAQ,oBAAR,CAAkCM,kBAAlC,EACH,CAED,MAAO,KAAP,CACH,CA3CL,sBA6CI,iBAAS,CACL,GAAMC,CAAAA,gBAAgB,CAAG,KAAKC,UAAL,EAAzB,CAEA,GAAI,CAACD,gBAAL,CAAuB,CACnB,MAAO,KAAP,CACH,CAED,0CACS,KAAK,CAAC,eADf,EAEU,KAAKE,YAAL,EAFV,EAKH,CAzDL,uDArBAC,MAAM,CAACC,cAAP,CAAsBC,cAAtB,CAAsC,MAAtC,CAA8C,CAAEC,KAAK,CAAE,eAAT,CAA9C,E,wFAiFA,cAAelB,CAAAA,aAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport InstallPromptAndroid from 'Component/InstallPromptAndroid';\nimport InstallPromptIOS from 'Component/InstallPromptIOS';\nimport { DeviceType } from 'Type/Device';\n\nimport './InstallPrompt.style';\n\n/** @namespace Component/InstallPrompt/Component */\nexport class InstallPrompt extends PureComponent {\n    static propTypes = {\n        device: DeviceType.isRequired,\n        isBannerClosed: PropTypes.bool.isRequired,\n        hasInstallPromptEvent: PropTypes.bool.isRequired,\n        containerFunctions: PropTypes.object.isRequired\n    };\n\n    /**\n     * Currently BeforeInstallPromptEvent is supported only on\n     * - Android webview\n     * - Chrome for Android\n     * - Samsung Internet\n     * But iOS has own \"Add to Home Screen button\" on Safari share menu\n     */\n    hasSupport() {\n        const { device, hasInstallPromptEvent, isBannerClosed } = this.props;\n        const {\n            android,\n            ios,\n            safari,\n            standaloneMode\n        } = device;\n        const isAndroid = android && hasInstallPromptEvent;\n        const isIos = ios && safari;\n\n        return (isAndroid || isIos)\n            && !standaloneMode\n            && !isBannerClosed;\n    }\n\n    renderPrompt() {\n        const { device, containerFunctions } = this.props;\n\n        if (device.ios) {\n            return <InstallPromptIOS { ...containerFunctions } />;\n        }\n\n        if (device.android) {\n            return <InstallPromptAndroid { ...containerFunctions } />;\n        }\n\n        return null;\n    }\n\n    render() {\n        const displayComponent = this.hasSupport();\n\n        if (!displayComponent) {\n            return null;\n        }\n\n        return (\n            <div block=\"InstallPrompt\">\n                { this.renderPrompt() }\n            </div>\n        );\n    }\n}\n\nexport default InstallPrompt;\n"]},"metadata":{},"sourceType":"module"}