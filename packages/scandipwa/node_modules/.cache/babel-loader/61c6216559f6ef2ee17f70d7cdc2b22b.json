{"ast":null,"code":"import _slicedToArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{createRef,PureComponent}from'react';import Loader from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Loader\";import ProductCard from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCard\";import ShareWishlistPopup from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ShareWishlistPopup\";import WishlistItem from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/WishlistItem\";import{ProductType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import CSS from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/CSS\";import\"./MyAccountMyWishlist.style\";/** @namespace Component/MyAccountMyWishlist/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _MyAccountMyWishlist=/*#__PURE__*/function(_Extensible){_inherits(_MyAccountMyWishlist,_Extensible);var _super=_createSuper(_MyAccountMyWishlist);function _MyAccountMyWishlist(){var _this;_classCallCheck(this,_MyAccountMyWishlist);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={selectedIdMap:[]};_this.actionLineMobileRef=/*#__PURE__*/createRef();_this.productsRef=/*#__PURE__*/createRef();_this.handleSelectIdChange=function(id){var isRemoveOnly=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var prevSelectedIdMap=_this.state.selectedIdMap;var selectIdIndex=prevSelectedIdMap.findIndex(function(selectId){return selectId===id;});var selectedIdMap=Array.from(prevSelectedIdMap);if(isRemoveOnly){if(selectIdIndex!==-1){selectedIdMap.splice(selectIdIndex,1);_this.setState({selectedIdMap:selectedIdMap});}return;}if(selectIdIndex===-1){selectedIdMap.push(id);}else{selectedIdMap.splice(selectIdIndex,1);}_this.setState({selectedIdMap:selectedIdMap});};_this.handleRemoveButtonClick=function(){// Removes selected items from wishlist\nvar removeSelectedFromWishlist=_this.props.removeSelectedFromWishlist;var selectedIdMap=_this.state.selectedIdMap;removeSelectedFromWishlist(selectedIdMap);_this.setState({selectedIdMap:[]});};_this.renderNoProductsFound=function(){return/*#__PURE__*/_checkBEM(React,\"div\",null,/*#__PURE__*/_checkBEM(React,\"p\",null,__('Wishlist is empty!')));};_this.renderProduct=function(_ref){var _ref2=_slicedToArray(_ref,2),id=_ref2[0],product=_ref2[1];var _this$props=_this.props,isEditingActive=_this$props.isEditingActive,loadingItemsMap=_this$props.loadingItemsMap;return/*#__PURE__*/_checkBEM(React,WishlistItem,{key:id,product:product,isRemoving:loadingItemsMap[id],isEditingActive:isEditingActive,handleSelectIdChange:_this.handleSelectIdChange});};return _this;}_createClass(_MyAccountMyWishlist,[{key:\"componentDidMount\",value:function componentDidMount(){this.setActionLineHeight();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevIsEditingActive=prevProps.isEditingActive,prevIsMobile=prevProps.isMobile;var _this$props2=this.props,isEditingActive=_this$props2.isEditingActive,isMobile=_this$props2.isMobile;var prevActionLineHeight=this.state.actionLineHeight;var actionLineHeight=this.state.actionLineHeight;if(prevIsEditingActive!==isEditingActive&&prevActionLineHeight===actionLineHeight||isMobile!==prevIsMobile){this.setActionLineHeight();}}},{key:\"setActionLineHeight\",value:function setActionLineHeight(){var isMobile=this.props.isMobile;var current=this.actionLineMobileRef.current;if(!current){return;}CSS.setVariable(this.productsRef,'myaccount-wihslist-products-margin-bottom',isMobile?\"\".concat(current.clientHeight,\"px\"):0);}},{key:\"renderProducts\",value:function renderProducts(){var _this$props3=this.props,isWishlistLoading=_this$props3.isWishlistLoading,isWishlistEmpty=_this$props3.isWishlistEmpty,wishlistItems=_this$props3.wishlistItems;if(isWishlistLoading&&isWishlistEmpty){return this.renderPlaceholders();}return Object.entries(wishlistItems).map(this.renderProduct);}},{key:\"renderClearWishlist\",value:function renderClearWishlist(){var _this$props4=this.props,removeAll=_this$props4.removeAll,isActionsDisabled=_this$props4.isActionsDisabled;return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"Button\",mods:{likeLink:true},mix:{block:'MyAccountMyWishlist',elem:'ClearWishlistButton'},onClick:removeAll,disabled:isActionsDisabled},__('Clear'));}},{key:\"renderAddAllToCart\",value:function renderAddAllToCart(){var _this$props5=this.props,addAllToCart=_this$props5.addAllToCart,isActionsDisabled=_this$props5.isActionsDisabled,isEditingActive=_this$props5.isEditingActive,isMobile=_this$props5.isMobile;var isDisabled=isMobile&&isEditingActive||isActionsDisabled;return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"Button\",mix:{block:'MyAccountMyWishlist',elem:'Button'},onClick:addAllToCart,disabled:isDisabled},__('Add All to Cart'));}},{key:\"renderShareWishlistButton\",value:function renderShareWishlistButton(){var _this$props6=this.props,isWishlistLoading=_this$props6.isWishlistLoading,shareWishlist=_this$props6.shareWishlist,isWishlistEmpty=_this$props6.isWishlistEmpty;var disabled=isWishlistLoading||isWishlistEmpty;return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"Button\",mods:{isHollow:true},mix:{},onClick:shareWishlist,disabled:disabled},__('Share'));}},{key:\"renderRemoveItemsButton\",value:function renderRemoveItemsButton(){var _this$props7=this.props,isActionsDisabled=_this$props7.isActionsDisabled,isMobile=_this$props7.isMobile;var selectedIdMap=this.state.selectedIdMap;var isDisabled=isActionsDisabled||isMobile&&!selectedIdMap.length;return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"Button\",mods:{likeLink:true},mix:{block:'MyAccountMyWishlist',elem:'ClearRemoveItemsButton'},onClick:this.handleRemoveButtonClick,disabled:isDisabled},selectedIdMap.length===1?__('Remove item (%s)',1):__('Remove items (%s)',selectedIdMap.length));}},{key:\"renderActionBarAction\",value:function renderActionBarAction(){var isEditingActive=this.props.isEditingActive;if(!isEditingActive){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"MyAccountMyWishlist\",elem:\"ActionBarActionWrapper\"},this.renderRemoveItemsButton(),this.renderClearWishlist());}},{key:\"renderActionBarMobile\",value:function renderActionBarMobile(){return/*#__PURE__*/_checkBEM(React,\"div\",{ref:this.actionLineMobileRef,block:\"MyAccountMyWishlist\",elem:\"ActionBar\"},this.renderActionBarAction(),this.renderAddAllToCart());}},{key:\"renderActionBar\",value:function renderActionBar(){var isMobile=this.props.isMobile;if(isMobile){return this.renderActionBarMobile();}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"MyAccountMyWishlist\",elem:\"ActionBar\"},this.renderAddAllToCart(),this.renderShareWishlistButton(),this.renderClearWishlist());}},{key:\"renderPlaceholders\",value:function renderPlaceholders(){return Array.from({length:2},function(_,i){return/*#__PURE__*/_checkBEM(React,ProductCard,{key:i});});}},{key:\"renderShareWishlist\",value:function renderShareWishlist(){return/*#__PURE__*/_checkBEM(React,ShareWishlistPopup,null);}},{key:\"renderContent\",value:function renderContent(){var _this$props8=this.props,isWishlistLoading=_this$props8.isWishlistLoading,isWishlistEmpty=_this$props8.isWishlistEmpty,isLoading=_this$props8.isLoading;if(isWishlistEmpty&&!isWishlistLoading){return this.renderNoProductsFound();}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"MyAccountMyWishlist\",elem:\"Products\",ref:this.productsRef},/*#__PURE__*/_checkBEM(React,Loader,{isLoading:isLoading}),this.renderProducts());}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"MyAccountMyWishlist\"},this.renderShareWishlist(),this.renderContent(),this.renderActionBar());}}]);return _MyAccountMyWishlist;}(Extensible(PureComponent));Object.defineProperty(_MyAccountMyWishlist,'name',{value:'MyAccountMyWishlist'});export var MyAccountMyWishlist=middleware(_MyAccountMyWishlist,\"Component/MyAccountMyWishlist/Component\");export default MyAccountMyWishlist;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/MyAccountMyWishlist/MyAccountMyWishlist.component.js"],"names":["createRef","PureComponent","Loader","ProductCard","ShareWishlistPopup","WishlistItem","ProductType","CSS","MyAccountMyWishlist","state","selectedIdMap","actionLineMobileRef","productsRef","handleSelectIdChange","id","isRemoveOnly","prevSelectedIdMap","selectIdIndex","findIndex","selectId","Array","from","splice","setState","push","handleRemoveButtonClick","removeSelectedFromWishlist","props","renderNoProductsFound","__","renderProduct","product","isEditingActive","loadingItemsMap","setActionLineHeight","prevProps","prevIsEditingActive","prevIsMobile","isMobile","prevActionLineHeight","actionLineHeight","current","setVariable","clientHeight","isWishlistLoading","isWishlistEmpty","wishlistItems","renderPlaceholders","Object","entries","map","removeAll","isActionsDisabled","likeLink","block","elem","addAllToCart","isDisabled","shareWishlist","disabled","isHollow","length","renderRemoveItemsButton","renderClearWishlist","renderActionBarAction","renderAddAllToCart","renderActionBarMobile","renderShareWishlistButton","_","i","isLoading","renderProducts","renderShareWishlist","renderContent","renderActionBar","defineProperty","_MyAccountMyWishlist","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\n\nimport Loader from 'Component/Loader';\nimport ProductCard from 'Component/ProductCard';\nimport ShareWishlistPopup from 'Component/ShareWishlistPopup';\nimport WishlistItem from 'Component/WishlistItem';\nimport { ProductType } from 'Type/ProductList';\nimport CSS from 'Util/CSS';\n\nimport './MyAccountMyWishlist.style';\n\n/** @namespace Component/MyAccountMyWishlist/Component */\nexport class MyAccountMyWishlist extends PureComponent {\n    static propTypes = {\n        isLoading: PropTypes.bool.isRequired,\n        isWishlistLoading: PropTypes.bool.isRequired,\n        removeAll: PropTypes.func.isRequired,\n        addAllToCart: PropTypes.func.isRequired,\n        shareWishlist: PropTypes.func.isRequired,\n        isWishlistEmpty: PropTypes.bool.isRequired,\n        wishlistItems: PropTypes.objectOf(ProductType).isRequired,\n        isActionsDisabled: PropTypes.bool.isRequired,\n        isEditingActive: PropTypes.bool.isRequired,\n        isMobile: PropTypes.bool.isRequired,\n        removeSelectedFromWishlist: PropTypes.func.isRequired,\n        loadingItemsMap: PropTypes.objectOf(Object).isRequired\n    };\n\n    state = {\n        selectedIdMap: []\n    };\n\n    actionLineMobileRef = createRef();\n\n    productsRef = createRef();\n\n    componentDidMount() {\n        this.setActionLineHeight();\n    }\n\n    componentDidUpdate(prevProps) {\n        const { isEditingActive: prevIsEditingActive, isMobile: prevIsMobile } = prevProps;\n        const { isEditingActive, isMobile } = this.props;\n        const { actionLineHeight: prevActionLineHeight } = this.state;\n        const { actionLineHeight } = this.state;\n\n        if ((prevIsEditingActive !== isEditingActive && prevActionLineHeight === actionLineHeight)\n            || isMobile !== prevIsMobile\n        ) {\n            this.setActionLineHeight();\n        }\n    }\n\n    setActionLineHeight() {\n        const { isMobile } = this.props;\n        const { current } = this.actionLineMobileRef;\n\n        if (!current) {\n            return;\n        }\n\n        CSS.setVariable(\n            this.productsRef,\n            'myaccount-wihslist-products-margin-bottom',\n            isMobile ? `${ current.clientHeight }px` : 0\n        );\n    }\n\n    handleSelectIdChange = (id, isRemoveOnly = false) => {\n        const { selectedIdMap: prevSelectedIdMap } = this.state;\n        const selectIdIndex = prevSelectedIdMap.findIndex((selectId) => selectId === id);\n        const selectedIdMap = Array.from(prevSelectedIdMap);\n\n        if (isRemoveOnly) {\n            if (selectIdIndex !== -1) {\n                selectedIdMap.splice(selectIdIndex, 1);\n\n                this.setState({ selectedIdMap });\n            }\n\n            return;\n        }\n\n        if (selectIdIndex === -1) {\n            selectedIdMap.push(id);\n        } else {\n            selectedIdMap.splice(selectIdIndex, 1);\n        }\n\n        this.setState({ selectedIdMap });\n    };\n\n    handleRemoveButtonClick = () => {\n        // Removes selected items from wishlist\n\n        const { removeSelectedFromWishlist } = this.props;\n        const { selectedIdMap } = this.state;\n\n        removeSelectedFromWishlist(selectedIdMap);\n\n        this.setState({ selectedIdMap: [] });\n    };\n\n    renderNoProductsFound = () => (\n        <div>\n            <p>{ __('Wishlist is empty!') }</p>\n        </div>\n    );\n\n    renderProduct = ([id, product]) => {\n        const { isEditingActive, loadingItemsMap } = this.props;\n\n        return (\n            <WishlistItem\n              key={ id }\n              product={ product }\n              isRemoving={ loadingItemsMap[id] }\n              isEditingActive={ isEditingActive }\n              handleSelectIdChange={ this.handleSelectIdChange }\n            />\n        );\n    };\n\n    renderProducts() {\n        const {\n            isWishlistLoading,\n            isWishlistEmpty,\n            wishlistItems\n        } = this.props;\n\n        if (isWishlistLoading && isWishlistEmpty) {\n            return this.renderPlaceholders();\n        }\n\n        return Object.entries(wishlistItems).map(this.renderProduct);\n    }\n\n    renderClearWishlist() {\n        const {\n            removeAll,\n            isActionsDisabled\n        } = this.props;\n\n        return (\n            <button\n              block=\"Button\"\n              mods={ { likeLink: true } }\n              mix={ { block: 'MyAccountMyWishlist', elem: 'ClearWishlistButton' } }\n              onClick={ removeAll }\n              disabled={ isActionsDisabled }\n            >\n                { __('Clear') }\n            </button>\n        );\n    }\n\n    renderAddAllToCart() {\n        const {\n            addAllToCart,\n            isActionsDisabled,\n            isEditingActive,\n            isMobile\n        } = this.props;\n\n        const isDisabled = (isMobile && isEditingActive) || isActionsDisabled;\n\n        return (\n            <button\n              block=\"Button\"\n              mix={ { block: 'MyAccountMyWishlist', elem: 'Button' } }\n              onClick={ addAllToCart }\n              disabled={ isDisabled }\n            >\n              { __('Add All to Cart') }\n            </button>\n        );\n    }\n\n    renderShareWishlistButton() {\n        const {\n            isWishlistLoading,\n            shareWishlist,\n            isWishlistEmpty\n        } = this.props;\n\n        const disabled = isWishlistLoading || isWishlistEmpty;\n\n        return (\n            <button\n              block=\"Button\"\n              mods={ { isHollow: true } }\n              mix={ { } }\n              onClick={ shareWishlist }\n              disabled={ disabled }\n            >\n                { __('Share') }\n            </button>\n        );\n    }\n\n    renderRemoveItemsButton() {\n        const { isActionsDisabled, isMobile } = this.props;\n        const { selectedIdMap } = this.state;\n\n        const isDisabled = isActionsDisabled || (isMobile && !selectedIdMap.length);\n\n        return (\n            <button\n              block=\"Button\"\n              mods={ { likeLink: true } }\n              mix={ { block: 'MyAccountMyWishlist', elem: 'ClearRemoveItemsButton' } }\n              onClick={ this.handleRemoveButtonClick }\n              disabled={ isDisabled }\n            >\n                { selectedIdMap.length === 1\n                    ? __('Remove item (%s)', 1)\n                    : __('Remove items (%s)', selectedIdMap.length) }\n            </button>\n        );\n    }\n\n    renderActionBarAction() {\n        const { isEditingActive } = this.props;\n\n        if (!isEditingActive) {\n            return null;\n        }\n\n        return (\n            <div block=\"MyAccountMyWishlist\" elem=\"ActionBarActionWrapper\">\n                { this.renderRemoveItemsButton() }\n                { this.renderClearWishlist() }\n            </div>\n        );\n    }\n\n    renderActionBarMobile() {\n        return (\n            <div\n              ref={ this.actionLineMobileRef }\n              block=\"MyAccountMyWishlist\"\n              elem=\"ActionBar\"\n            >\n                { this.renderActionBarAction() }\n                { this.renderAddAllToCart() }\n            </div>\n        );\n    }\n\n    renderActionBar() {\n        const { isMobile } = this.props;\n\n        if (isMobile) {\n            return this.renderActionBarMobile();\n        }\n\n        return (\n            <div block=\"MyAccountMyWishlist\" elem=\"ActionBar\">\n                { this.renderAddAllToCart() }\n                { this.renderShareWishlistButton() }\n                { this.renderClearWishlist() }\n            </div>\n        );\n    }\n\n    renderPlaceholders() {\n        return Array.from({ length: 2 }, (_, i) => <ProductCard key={ i } />);\n    }\n\n    renderShareWishlist() {\n        return <ShareWishlistPopup />;\n    }\n\n    renderContent() {\n        const {\n            isWishlistLoading,\n            isWishlistEmpty,\n            isLoading\n        } = this.props;\n\n        if (isWishlistEmpty && !isWishlistLoading) {\n            return this.renderNoProductsFound();\n        }\n\n        return (\n            <div block=\"MyAccountMyWishlist\" elem=\"Products\" ref={ this.productsRef }>\n                <Loader isLoading={ isLoading } />\n                { this.renderProducts() }\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div block=\"MyAccountMyWishlist\">\n                { this.renderShareWishlist() }\n                { this.renderContent() }\n                { this.renderActionBar() }\n            </div>\n        );\n    }\n}\n\nexport default MyAccountMyWishlist;\n"]},"metadata":{},"sourceType":"module"}