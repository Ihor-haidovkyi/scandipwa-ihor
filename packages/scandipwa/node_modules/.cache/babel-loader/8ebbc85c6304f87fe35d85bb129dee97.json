{"ast":null,"code":"var _jsxFileName = \"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductPrice/ProductPrice.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport TextPlaceholder from \"/home/marketihor/scandipwa/packages/scandipwa/src/component/TextPlaceholder\";\nimport { MixType } from \"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";\nimport { PriceType } from \"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";\nimport \"./ProductPrice.style\";\n/**\n * Product price\n * @class ProductPrice\n * @namespace Component/ProductPrice/Component\n */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport class _ProductPrice extends Extensible(PureComponent) {\n  renderPlaceholder() {\n    const {\n      mix\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"p\", {\n      block: \"ProductPrice\",\n      \"aria-label\": \"Product Price\",\n      mix: mix,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, TextPlaceholder, {\n      mix: {\n        block: 'ProductPrice',\n        elem: 'Placeholder'\n      },\n      length: \"custom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  getCurrencySchema() {\n    const {\n      isSchemaRequired,\n      priceCurrency\n    } = this.props;\n    return isSchemaRequired ? {\n      itemProp: 'priceCurrency',\n      content: priceCurrency\n    } : {};\n  }\n\n  getCurrentPriceSchema() {\n    const {\n      isSchemaRequired,\n      variantsCount,\n      price\n    } = this.props;\n    const content_price = price.minimum_price.final_price ? price.minimum_price.final_price.value : price.minimum_price.regular_price.value;\n\n    if (variantsCount > 1) {\n      return isSchemaRequired ? {\n        itemProp: 'lowPrice',\n        content: content_price\n      } : {};\n    }\n\n    return isSchemaRequired ? {\n      itemProp: 'price',\n      content: content_price\n    } : {};\n  }\n\n  renderCurrentPrice() {\n    const {\n      discountPercentage,\n      formattedFinalPrice\n    } = this.props;\n    const priceSchema = this.getCurrentPriceSchema(); // Use <ins></ins> <del></del> to represent new price and the old (deleted) one\n\n    const PriceSemanticElementName = discountPercentage > 0 ? 'ins' : 'span'; // force unequal comparatment - unsure of resulting type\n    // eslint-disable-next-line eqeqeq\n\n    if (formattedFinalPrice == 0) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, PriceSemanticElementName, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"span\", Object.assign({}, priceSchema, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }), formattedFinalPrice));\n  }\n\n  renderSubPrice() {\n    const {\n      formattedSubPrice\n    } = this.props;\n\n    if (!formattedSubPrice) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"span\", {\n      \"aria-label\": __('Current product price excl. tax'),\n      block: \"ProductPrice\",\n      elem: \"SubPrice\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, `${__('Excl. tax:')} ${formattedSubPrice}`);\n  }\n\n  renderOldPrice() {\n    const {\n      discountPercentage,\n      formattedDefaultFinalPriceExclTax,\n      defaultFinalPriceExclTax,\n      isSchemaRequired,\n      variantsCount\n    } = this.props;\n    const schema = isSchemaRequired && variantsCount > 1 ? {\n      itemProp: 'highPrice'\n    } : {};\n\n    if (discountPercentage === 0 || defaultFinalPriceExclTax === 0) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"del\", Object.assign({\n      block: \"ProductPrice\",\n      elem: \"HighPrice\",\n      \"aria-label\": __('Old product price')\n    }, schema, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }), formattedDefaultFinalPriceExclTax);\n  }\n\n  renderSchema() {\n    const {\n      isSchemaRequired\n    } = this.props;\n\n    if (isSchemaRequired) {\n      const currencySchema = this.getCurrencySchema();\n      return /*#__PURE__*/_checkBEM(React, \"meta\", Object.assign({}, currencySchema, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }\n      }));\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      price: {\n        minimum_price: {\n          final_price,\n          regular_price\n        } = {}\n      } = {},\n      discountPercentage,\n      formattedFinalPrice,\n      mix\n    } = this.props;\n\n    if (!final_price || !regular_price) {\n      return this.renderPlaceholder();\n    }\n\n    return /*#__PURE__*/_checkBEM(React, \"p\", {\n      block: \"ProductPrice\",\n      mods: {\n        hasDiscount: discountPercentage !== 0\n      },\n      mix: mix,\n      \"aria-label\": `Product price: ${formattedFinalPrice}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, this.renderCurrentPrice(), this.renderOldPrice(), this.renderSubPrice(), this.renderSchema());\n  }\n\n}\n_ProductPrice.propTypes = {\n  isSchemaRequired: PropTypes.bool,\n  roundedRegularPrice: PropTypes.string,\n  priceCurrency: PropTypes.string,\n  discountPercentage: PropTypes.number,\n  formattedFinalPrice: PropTypes.string,\n  formattedSubPrice: PropTypes.string,\n  defaultFinalPriceExclTax: PropTypes.number,\n  variantsCount: PropTypes.number,\n  price: PriceType,\n  formattedDefaultFinalPriceExclTax: PropTypes.number,\n  mix: MixType\n};\n_ProductPrice.defaultProps = {\n  isSchemaRequired: false,\n  roundedRegularPrice: '0',\n  priceCurrency: 'USD',\n  defaultFinalPriceExclTax: 0,\n  discountPercentage: 0,\n  formattedFinalPrice: '0',\n  formattedSubPrice: null,\n  variantsCount: 0,\n  formattedDefaultFinalPriceExclTax: 0,\n  mix: {},\n  price: {}\n};\nObject.defineProperty(_ProductPrice, 'name', {\n  value: 'ProductPrice'\n});\n\nexport const ProductPrice = middleware(_ProductPrice, \"Component/ProductPrice/Component\");\nexport default ProductPrice;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductPrice/ProductPrice.component.js"],"names":["PropTypes","PureComponent","TextPlaceholder","MixType","PriceType","ProductPrice","renderPlaceholder","mix","props","block","elem","getCurrencySchema","isSchemaRequired","priceCurrency","itemProp","content","getCurrentPriceSchema","variantsCount","price","content_price","minimum_price","final_price","value","regular_price","renderCurrentPrice","discountPercentage","formattedFinalPrice","priceSchema","PriceSemanticElementName","renderSubPrice","formattedSubPrice","__","renderOldPrice","formattedDefaultFinalPriceExclTax","defaultFinalPriceExclTax","schema","renderSchema","currencySchema","render","hasDiscount","propTypes","bool","roundedRegularPrice","string","number","defaultProps","Object","defineProperty","_ProductPrice"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport TextPlaceholder from 'Component/TextPlaceholder';\nimport { MixType } from 'Type/Common';\nimport { PriceType } from 'Type/ProductList';\n\nimport './ProductPrice.style';\n\n/**\n * Product price\n * @class ProductPrice\n * @namespace Component/ProductPrice/Component\n */\nexport class ProductPrice extends PureComponent {\n    static propTypes = {\n        isSchemaRequired: PropTypes.bool,\n        roundedRegularPrice: PropTypes.string,\n        priceCurrency: PropTypes.string,\n        discountPercentage: PropTypes.number,\n        formattedFinalPrice: PropTypes.string,\n        formattedSubPrice: PropTypes.string,\n        defaultFinalPriceExclTax: PropTypes.number,\n        variantsCount: PropTypes.number,\n        price: PriceType,\n        formattedDefaultFinalPriceExclTax: PropTypes.number,\n        mix: MixType\n    };\n\n    static defaultProps = {\n        isSchemaRequired: false,\n        roundedRegularPrice: '0',\n        priceCurrency: 'USD',\n        defaultFinalPriceExclTax: 0,\n        discountPercentage: 0,\n        formattedFinalPrice: '0',\n        formattedSubPrice: null,\n        variantsCount: 0,\n        formattedDefaultFinalPriceExclTax: 0,\n        mix: {},\n        price: {}\n    };\n\n    renderPlaceholder() {\n        const { mix } = this.props;\n\n        return (\n            <p block=\"ProductPrice\" aria-label=\"Product Price\" mix={ mix }>\n                <TextPlaceholder mix={ { block: 'ProductPrice', elem: 'Placeholder' } } length=\"custom\" />\n            </p>\n        );\n    }\n\n    getCurrencySchema() {\n        const { isSchemaRequired, priceCurrency } = this.props;\n        return isSchemaRequired ? { itemProp: 'priceCurrency', content: priceCurrency } : {};\n    }\n\n    getCurrentPriceSchema() {\n        const { isSchemaRequired, variantsCount, price } = this.props;\n        const content_price = price.minimum_price.final_price\n            ? price.minimum_price.final_price.value : price.minimum_price.regular_price.value;\n\n        if (variantsCount > 1) {\n            return isSchemaRequired ? { itemProp: 'lowPrice', content: content_price } : {};\n        }\n\n        return isSchemaRequired ? { itemProp: 'price', content: content_price } : {};\n    }\n\n    renderCurrentPrice() {\n        const {\n            discountPercentage,\n            formattedFinalPrice\n        } = this.props;\n\n        const priceSchema = this.getCurrentPriceSchema();\n\n        // Use <ins></ins> <del></del> to represent new price and the old (deleted) one\n        const PriceSemanticElementName = discountPercentage > 0 ? 'ins' : 'span';\n\n        // force unequal comparatment - unsure of resulting type\n        // eslint-disable-next-line eqeqeq\n        if (formattedFinalPrice == 0) {\n            return null;\n        }\n\n        return (\n            <PriceSemanticElementName>\n                <span { ...priceSchema }>{ formattedFinalPrice }</span>\n            </PriceSemanticElementName>\n        );\n    }\n\n    renderSubPrice() {\n        const { formattedSubPrice } = this.props;\n\n        if (!formattedSubPrice) {\n            return null;\n        }\n\n        return (\n            <span\n              aria-label={ __('Current product price excl. tax') }\n              block=\"ProductPrice\"\n              elem=\"SubPrice\"\n            >\n                { `${ __('Excl. tax:') } ${ formattedSubPrice }` }\n            </span>\n        );\n    }\n\n    renderOldPrice() {\n        const {\n            discountPercentage,\n            formattedDefaultFinalPriceExclTax,\n            defaultFinalPriceExclTax,\n            isSchemaRequired,\n            variantsCount\n        } = this.props;\n\n        const schema = isSchemaRequired && variantsCount > 1 ? { itemProp: 'highPrice' } : {};\n\n        if (discountPercentage === 0 || defaultFinalPriceExclTax === 0) {\n            return null;\n        }\n\n        return (\n            <del\n              block=\"ProductPrice\"\n              elem=\"HighPrice\"\n              aria-label={ __('Old product price') }\n              { ...schema }\n            >\n                { formattedDefaultFinalPriceExclTax }\n            </del>\n        );\n    }\n\n    renderSchema() {\n        const { isSchemaRequired } = this.props;\n\n        if (isSchemaRequired) {\n            const currencySchema = this.getCurrencySchema();\n            return (\n                <meta { ...currencySchema } />\n            );\n        }\n\n        return null;\n    }\n\n    render() {\n        const {\n            price: {\n                minimum_price: {\n                    final_price,\n                    regular_price\n                } = {}\n            } = {},\n            discountPercentage,\n            formattedFinalPrice,\n            mix\n        } = this.props;\n\n        if (!final_price || !regular_price) {\n            return this.renderPlaceholder();\n        }\n\n        return (\n            <p\n              block=\"ProductPrice\"\n              mods={ { hasDiscount: discountPercentage !== 0 } }\n              mix={ mix }\n              aria-label={ `Product price: ${formattedFinalPrice}` }\n            >\n                { this.renderCurrentPrice() }\n                { this.renderOldPrice() }\n                { this.renderSubPrice() }\n                { this.renderSchema() }\n            </p>\n        );\n    }\n}\n\nexport default ProductPrice;\n"]},"metadata":{},"sourceType":"module"}