{"ast":null,"code":"var _jsxFileName = \"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutGuestForm/CheckoutGuestForm.container.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { STATE_CREATE_ACCOUNT, STATE_FORGOT_PASSWORD, STATE_SIGN_IN } from \"/home/marketihor/scandipwa/packages/scandipwa/src/component/MyAccountOverlay/MyAccountOverlay.config\";\nimport { SHIPPING_STEP } from \"/home/marketihor/scandipwa/packages/scandipwa/src/route/Checkout/Checkout.config\";\nimport { showNotification } from \"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";\nimport { isSignedIn } from \"/home/marketihor/scandipwa/packages/scandipwa/src/util/Auth\";\nimport { getErrorMessage } from \"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";\nimport CheckoutGuestForm from \"./CheckoutGuestForm.component\";\nexport const MyAccountDispatcher = import(\n/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n\"/home/marketihor/scandipwa/packages/scandipwa/src/store/MyAccount/MyAccount.dispatcher\");\n/** @namespace Component/CheckoutGuestForm/Container/mapStateToProps */\n\nexport const mapStateToProps = middleware(function (state) {\n  return {\n    isEmailConfirmationRequired: state.ConfigReducer.is_email_confirmation_required,\n    emailValue: state.CheckoutReducer.email,\n    isEmailAvailable: state.CheckoutReducer.isEmailAvailable\n  };\n}, \"Component/CheckoutGuestForm/Container/mapStateToProps\");\n/** @namespace Component/CheckoutGuestForm/Container/mapDispatchToProps */\n\nexport const mapDispatchToProps = middleware(function (dispatch) {\n  return {\n    signIn: function (options) {\n      return MyAccountDispatcher.then(function ({\n        default: dispatcher\n      }) {\n        return dispatcher.signIn(options, dispatch);\n      });\n    },\n    showNotification: function (type, message) {\n      return dispatch(showNotification(type, message));\n    },\n    showErrorNotification: function (error) {\n      return dispatch(showNotification('error', getErrorMessage(error)));\n    }\n  };\n}, \"Component/CheckoutGuestForm/Container/mapDispatchToProps\");\n/** @namespace Component/CheckoutGuestForm/Container */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport class _CheckoutGuestFormContainer extends Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.state = {\n      isLoading: false,\n      signInState: ''\n    };\n    this.containerFunctions = {\n      handleEmailInput: this.handleEmailInput.bind(this),\n      handleCreateUser: this.handleCreateUser.bind(this),\n      handlePasswordInput: this.handlePasswordInput.bind(this),\n      handleForgotPassword: this.handleForgotPassword.bind(this),\n      handleSignIn: this.handleSignIn.bind(this),\n      handleCreateAccount: this.handleCreateAccount.bind(this),\n      onFormError: this.onFormError.bind(this),\n      setSignInState: this.setSignInState.bind(this),\n      setLoadingState: this.setLoadingState.bind(this)\n    };\n\n    this.containerProps = function () {\n      const {\n        emailValue\n      } = _this.props;\n      return {\n        formId: SHIPPING_STEP,\n        emailValue\n      };\n    };\n  }\n\n  onFormError() {\n    this.setState({\n      isLoading: false\n    });\n  }\n\n  handleForgotPassword(e) {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({\n      signInState: STATE_FORGOT_PASSWORD\n    });\n  }\n\n  handleSignIn(e) {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({\n      signInState: STATE_SIGN_IN\n    });\n  }\n\n  handleCreateAccount(e) {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({\n      signInState: STATE_CREATE_ACCOUNT\n    });\n  }\n\n  setSignInState(signInState) {\n    this.setState({\n      signInState\n    });\n  }\n\n  setLoadingState(isLoading) {\n    this.setState({\n      isLoading\n    });\n  }\n\n  handleEmailInput(email) {\n    const {\n      onEmailChange\n    } = this.props;\n    onEmailChange(email);\n  }\n\n  handleCreateUser() {\n    const {\n      onCreateUserChange\n    } = this.props;\n    onCreateUserChange();\n  }\n\n  handlePasswordInput(password) {\n    const {\n      onPasswordChange\n    } = this.props;\n    onPasswordChange(password);\n  }\n\n  render() {\n    const {\n      isGuestEmailSaved\n    } = this.props;\n\n    if (isSignedIn() || isGuestEmailSaved) {\n      return null;\n    }\n\n    return /*#__PURE__*/_checkBEM(React, CheckoutGuestForm, Object.assign({}, this.props, this.state, this.containerFunctions, this.containerProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n_CheckoutGuestFormContainer.propTypes = {\n  isCreateUser: PropTypes.bool.isRequired,\n  isGuestEmailSaved: PropTypes.bool,\n  showErrorNotification: PropTypes.func.isRequired,\n  onEmailChange: PropTypes.func.isRequired,\n  onCreateUserChange: PropTypes.func.isRequired,\n  onPasswordChange: PropTypes.func.isRequired,\n  emailValue: PropTypes.string,\n  onSignIn: PropTypes.func,\n  isEmailAvailable: PropTypes.bool.isRequired,\n  showNotification: PropTypes.func.isRequired,\n  signIn: PropTypes.func.isRequired\n};\n_CheckoutGuestFormContainer.defaultProps = {\n  emailValue: '',\n  isGuestEmailSaved: false,\n  onSignIn: function () {}\n};\nObject.defineProperty(_CheckoutGuestFormContainer, 'name', {\n  value: 'CheckoutGuestFormContainer'\n});\n\nexport const CheckoutGuestFormContainer = middleware(_CheckoutGuestFormContainer, \"Component/CheckoutGuestForm/Container\");\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutGuestFormContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutGuestForm/CheckoutGuestForm.container.js"],"names":["PropTypes","PureComponent","connect","STATE_CREATE_ACCOUNT","STATE_FORGOT_PASSWORD","STATE_SIGN_IN","SHIPPING_STEP","showNotification","isSignedIn","getErrorMessage","CheckoutGuestForm","MyAccountDispatcher","mapStateToProps","state","isEmailConfirmationRequired","ConfigReducer","is_email_confirmation_required","emailValue","CheckoutReducer","email","isEmailAvailable","mapDispatchToProps","dispatch","signIn","options","then","default","dispatcher","type","message","showErrorNotification","error","CheckoutGuestFormContainer","isLoading","signInState","containerFunctions","handleEmailInput","bind","handleCreateUser","handlePasswordInput","handleForgotPassword","handleSignIn","handleCreateAccount","onFormError","setSignInState","setLoadingState","containerProps","props","formId","setState","e","preventDefault","nativeEvent","stopImmediatePropagation","onEmailChange","onCreateUserChange","password","onPasswordChange","render","isGuestEmailSaved","propTypes","isCreateUser","bool","isRequired","func","string","onSignIn","defaultProps","Object","defineProperty","_CheckoutGuestFormContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n    STATE_CREATE_ACCOUNT,\n    STATE_FORGOT_PASSWORD,\n    STATE_SIGN_IN\n} from 'Component/MyAccountOverlay/MyAccountOverlay.config';\nimport { SHIPPING_STEP } from 'Route/Checkout/Checkout.config';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { isSignedIn } from 'Util/Auth';\nimport { getErrorMessage } from 'Util/Request';\n\nimport CheckoutGuestForm from './CheckoutGuestForm.component';\n\nexport const MyAccountDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/MyAccount/MyAccount.dispatcher'\n);\n\n/** @namespace Component/CheckoutGuestForm/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isEmailConfirmationRequired: state.ConfigReducer.is_email_confirmation_required,\n    emailValue: state.CheckoutReducer.email,\n    isEmailAvailable: state.CheckoutReducer.isEmailAvailable\n});\n\n/** @namespace Component/CheckoutGuestForm/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    signIn: (options) => MyAccountDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.signIn(options, dispatch)\n    ),\n    showNotification: (type, message) => dispatch(showNotification(type, message)),\n    showErrorNotification: (error) => dispatch(showNotification('error', getErrorMessage(error)))\n});\n\n/** @namespace Component/CheckoutGuestForm/Container */\nexport class CheckoutGuestFormContainer extends PureComponent {\n    static propTypes = {\n        isCreateUser: PropTypes.bool.isRequired,\n        isGuestEmailSaved: PropTypes.bool,\n        showErrorNotification: PropTypes.func.isRequired,\n        onEmailChange: PropTypes.func.isRequired,\n        onCreateUserChange: PropTypes.func.isRequired,\n        onPasswordChange: PropTypes.func.isRequired,\n        emailValue: PropTypes.string,\n        onSignIn: PropTypes.func,\n        isEmailAvailable: PropTypes.bool.isRequired,\n        showNotification: PropTypes.func.isRequired,\n        signIn: PropTypes.func.isRequired\n    };\n\n    static defaultProps = {\n        emailValue: '',\n        isGuestEmailSaved: false,\n        onSignIn: () => {}\n    };\n\n    state = {\n        isLoading: false,\n        signInState: ''\n    };\n\n    containerFunctions = {\n        handleEmailInput: this.handleEmailInput.bind(this),\n        handleCreateUser: this.handleCreateUser.bind(this),\n        handlePasswordInput: this.handlePasswordInput.bind(this),\n        handleForgotPassword: this.handleForgotPassword.bind(this),\n        handleSignIn: this.handleSignIn.bind(this),\n        handleCreateAccount: this.handleCreateAccount.bind(this),\n        onFormError: this.onFormError.bind(this),\n        setSignInState: this.setSignInState.bind(this),\n        setLoadingState: this.setLoadingState.bind(this)\n    };\n\n    containerProps = () => {\n        const { emailValue } = this.props;\n        return ({\n            formId: SHIPPING_STEP,\n            emailValue\n        });\n    };\n\n    onFormError() {\n        this.setState({ isLoading: false });\n    }\n\n    handleForgotPassword(e) {\n        e.preventDefault();\n        e.nativeEvent.stopImmediatePropagation();\n        this.setState({ signInState: STATE_FORGOT_PASSWORD });\n    }\n\n    handleSignIn(e) {\n        e.preventDefault();\n        e.nativeEvent.stopImmediatePropagation();\n        this.setState({ signInState: STATE_SIGN_IN });\n    }\n\n    handleCreateAccount(e) {\n        e.preventDefault();\n        e.nativeEvent.stopImmediatePropagation();\n        this.setState({ signInState: STATE_CREATE_ACCOUNT });\n    }\n\n    setSignInState(signInState) {\n        this.setState({ signInState });\n    }\n\n    setLoadingState(isLoading) {\n        this.setState({ isLoading });\n    }\n\n    handleEmailInput(email) {\n        const { onEmailChange } = this.props;\n        onEmailChange(email);\n    }\n\n    handleCreateUser() {\n        const { onCreateUserChange } = this.props;\n        onCreateUserChange();\n    }\n\n    handlePasswordInput(password) {\n        const { onPasswordChange } = this.props;\n        onPasswordChange(password);\n    }\n\n    render() {\n        const { isGuestEmailSaved } = this.props;\n        if (isSignedIn() || isGuestEmailSaved) {\n            return null;\n        }\n\n        return (\n            <CheckoutGuestForm\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutGuestFormContainer);\n"]},"metadata":{},"sourceType":"module"}