{"ast":null,"code":"import _asyncToGenerator from \"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCompareButton/ProductCompareButton.container.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport ProductCompareButton from \"./ProductCompareButton.component\";\nexport const ProductCompareDispatcher = import(\n/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductCompare/ProductCompare.dispatcher\");\n/** @namespace Component/ProductCompareButton/Container/mapStateToProps */\n\nexport const mapStateToProps = middleware(function (state) {\n  return {\n    comparedProducts: state.ProductCompareReducer.productIds\n  };\n}, \"Component/ProductCompareButton/Container/mapStateToProps\");\n/** @namespace Component/ProductCompareButton/Container/mapDispatchToProps */\n\nexport const mapDispatchToProps = middleware(function (dispatch) {\n  return {\n    addProductToCompare: function (productId) {\n      return ProductCompareDispatcher.then(function ({\n        default: dispatcher\n      }) {\n        return dispatcher.addProductToCompare(productId, dispatch);\n      });\n    },\n    removeComparedProduct: function (productId) {\n      return ProductCompareDispatcher.then(function ({\n        default: dispatcher\n      }) {\n        return dispatcher.removeComparedProduct(productId, dispatch);\n      });\n    }\n  };\n}, \"Component/ProductCompareButton/Container/mapDispatchToProps\");\n/** @namespace Component/ProductCompareButton/Container */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport class _ProductCompareButtonContainer extends Extensible(PureComponent) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.containerFunctions = {\n      handleClick: this.handleClick.bind(this)\n    };\n\n    this.containerProps = function () {\n      return {\n        isActive: _this.isActive()\n      };\n    };\n  }\n\n  isActive() {\n    const {\n      comparedProducts,\n      productId\n    } = this.props;\n    return comparedProducts.indexOf(productId) !== -1;\n  }\n\n  handleClick() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        productId,\n        addProductToCompare,\n        removeComparedProduct\n      } = _this2.props;\n\n      _this2.setState({\n        isLoading: true\n      });\n\n      if (_this2.isActive()) {\n        yield removeComparedProduct(productId);\n      } else {\n        yield addProductToCompare(productId);\n      }\n\n      _this2.setState({\n        isLoading: false\n      });\n    })();\n  }\n\n  render() {\n    return /*#__PURE__*/_checkBEM(React, ProductCompareButton, Object.assign({}, this.props, this.state, this.containerProps(), this.containerFunctions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n_ProductCompareButtonContainer.propTypes = {\n  productId: PropTypes.number,\n  addProductToCompare: PropTypes.func.isRequired,\n  removeComparedProduct: PropTypes.func.isRequired,\n  comparedProducts: PropTypes.arrayOf(PropTypes.number).isRequired\n};\n_ProductCompareButtonContainer.defaultProps = {\n  productId: null\n};\nObject.defineProperty(_ProductCompareButtonContainer, 'name', {\n  value: 'ProductCompareButtonContainer'\n});\n\nexport const ProductCompareButtonContainer = middleware(_ProductCompareButtonContainer, \"Component/ProductCompareButton/Container\");\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCompareButtonContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCompareButton/ProductCompareButton.container.js"],"names":["PropTypes","PureComponent","connect","ProductCompareButton","ProductCompareDispatcher","mapStateToProps","state","comparedProducts","ProductCompareReducer","productIds","mapDispatchToProps","dispatch","addProductToCompare","productId","then","default","dispatcher","removeComparedProduct","ProductCompareButtonContainer","containerFunctions","handleClick","bind","containerProps","isActive","props","indexOf","setState","isLoading","render","propTypes","number","func","isRequired","arrayOf","defaultProps","Object","defineProperty","_ProductCompareButtonContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport ProductCompareButton from './ProductCompareButton.component';\n\nexport const ProductCompareDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/ProductCompare/ProductCompare.dispatcher'\n);\n\n/** @namespace Component/ProductCompareButton/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    comparedProducts: state.ProductCompareReducer.productIds\n});\n\n/** @namespace Component/ProductCompareButton/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    addProductToCompare: (productId) => ProductCompareDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.addProductToCompare(productId, dispatch)\n    ),\n    removeComparedProduct: (productId) => ProductCompareDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.removeComparedProduct(productId, dispatch)\n    )\n});\n\n/** @namespace Component/ProductCompareButton/Container */\nexport class ProductCompareButtonContainer extends PureComponent {\n    static propTypes = {\n        productId: PropTypes.number,\n        addProductToCompare: PropTypes.func.isRequired,\n        removeComparedProduct: PropTypes.func.isRequired,\n        comparedProducts: PropTypes.arrayOf(PropTypes.number).isRequired\n    };\n\n    static defaultProps = {\n        productId: null\n    };\n\n    containerFunctions = {\n        handleClick: this.handleClick.bind(this)\n    };\n\n    containerProps = () => ({\n        isActive: this.isActive()\n    });\n\n    isActive() {\n        const { comparedProducts, productId } = this.props;\n        return comparedProducts.indexOf(productId) !== -1;\n    }\n\n    async handleClick() {\n        const {\n            productId,\n            addProductToCompare,\n            removeComparedProduct\n        } = this.props;\n\n        this.setState({ isLoading: true });\n\n        if (this.isActive()) {\n            await removeComparedProduct(productId);\n        } else {\n            await addProductToCompare(productId);\n        }\n\n        this.setState({ isLoading: false });\n    }\n\n    render() {\n        return (\n            <ProductCompareButton\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerProps() }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCompareButtonContainer);\n"]},"metadata":{},"sourceType":"module"}