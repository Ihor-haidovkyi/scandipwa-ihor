{"ast":null,"code":"import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{CATEGORY}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Header/Header.config\";import{MENU_TAB}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/NavigationTabs/NavigationTabs.config\";import{GRID_LAYOUT,LAYOUT_KEY,LIST_LAYOUT}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/CategoryPage/CategoryPage.config\";import{updateCurrentCategory}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Category/Category.action\";import{changeNavigationState as _changeNavigationState}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Navigation/Navigation.action\";import{BOTTOM_NAVIGATION_TYPE,TOP_NAVIGATION_TYPE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Navigation/Navigation.reducer\";import{setBigOfflineNotice as _setBigOfflineNotice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Offline/Offline.action\";import{toggleOverlayByKey as _toggleOverlayByKey}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Overlay/Overlay.action\";import{updateInfoLoadStatus}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductListInfo/ProductListInfo.action\";import{CategoryTreeType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Category\";import{HistoryType,LocationType,MatchType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";import BrowserDatabase from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/BrowserDatabase\";import{debounce}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";import{appendWithStoreCode,getQueryParam,setQueryParams}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Url\";import CategoryPage from\"./CategoryPage.component\";import{LOADING_TIME}from\"./CategoryPage.config\";export var ProductListInfoDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductListInfo/ProductListInfo.dispatcher\");export var BreadcrumbsDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Breadcrumbs/Breadcrumbs.dispatcher\");export var CategoryDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Category/Category.dispatcher\");export var MetaDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Meta/Meta.dispatcher\");export var NoMatchDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/NoMatch/NoMatch.dispatcher\");/** @namespace Route/CategoryPage/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{category:state.CategoryReducer.category,isOffline:state.OfflineReducer.isOffline,filters:state.ProductListInfoReducer.filters,sortFields:state.ProductListInfoReducer.sortFields,currentArgs:state.ProductListReducer.currentArgs,selectedInfoFilter:state.ProductListInfoReducer.selectedFilter,isInfoLoading:state.ProductListInfoReducer.isLoading,totalPages:state.ProductListReducer.totalPages,device:state.ConfigReducer.device,plpType:state.ConfigReducer.plp_list_mode,isMobile:state.ConfigReducer.device.isMobile};},\"Route/CategoryPage/Container/mapStateToProps\");/** @namespace Route/CategoryPage/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{toggleOverlayByKey:function toggleOverlayByKey(key){return dispatch(_toggleOverlayByKey(key));},changeHeaderState:function changeHeaderState(state){return dispatch(_changeNavigationState(TOP_NAVIGATION_TYPE,state));},changeNavigationState:function changeNavigationState(state){return dispatch(_changeNavigationState(BOTTOM_NAVIGATION_TYPE,state));},requestCategory:function requestCategory(options){return CategoryDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.handleData(dispatch,options);});},updateBreadcrumbs:function updateBreadcrumbs(breadcrumbs){return Object.keys(breadcrumbs).length?BreadcrumbsDispatcher.then(function(_ref2){var dispatcher=_ref2.default;return dispatcher.updateWithCategory(breadcrumbs,dispatch);}):BreadcrumbsDispatcher.then(function(_ref3){var dispatcher=_ref3.default;return dispatcher.update([],dispatch);});},requestProductListInfo:function requestProductListInfo(options){return ProductListInfoDispatcher.then(function(_ref4){var dispatcher=_ref4.default;return dispatcher.handleData(dispatch,options);});},updateLoadStatus:function updateLoadStatus(isLoading){return dispatch(updateInfoLoadStatus(isLoading));},updateNoMatch:function updateNoMatch(options){return NoMatchDispatcher.then(function(_ref5){var dispatcher=_ref5.default;return dispatcher.updateNoMatch(dispatch,options);});},setBigOfflineNotice:function setBigOfflineNotice(isBig){return dispatch(_setBigOfflineNotice(isBig));},updateMetaFromCategory:function updateMetaFromCategory(category){return MetaDispatcher.then(function(_ref6){var dispatcher=_ref6.default;return dispatcher.updateWithCategory(category,dispatch);});},clearCategory:function clearCategory(){return dispatch(updateCurrentCategory({}));}};},\"Route/CategoryPage/Container/mapDispatchToProps\");/** @namespace Route/CategoryPage/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CategoryPageContainer=/*#__PURE__*/function(_Extensible){_inherits(_CategoryPageContainer,_Extensible);var _super=_createSuper(_CategoryPageContainer);function _CategoryPageContainer(){var _this;_classCallCheck(this,_CategoryPageContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={currentCategoryIds:-1,breadcrumbsWereUpdated:false,selectedLayoutType:null};_this.config={sortKey:'name',sortDirection:'ASC'};_this.containerFunctions={onSortChange:_this.onSortChange.bind(_assertThisInitialized(_this)),onGridButtonClick:_this.onGridButtonClick.bind(_assertThisInitialized(_this)),onListButtonClick:_this.onListButtonClick.bind(_assertThisInitialized(_this))};_this.setOfflineNoticeSize=function(){var _this$props=_this.props,setBigOfflineNotice=_this$props.setBigOfflineNotice,isInfoLoading=_this$props.isInfoLoading;if(isInfoLoading){setBigOfflineNotice(true);}else{setBigOfflineNotice(false);}};_this.containerProps=function(){return{filter:_this.getFilter(),isCurrentCategoryLoaded:_this.isCurrentCategoryLoaded(),isMatchingListFilter:_this.getIsMatchingListFilter(),isMatchingInfoFilter:_this.getIsMatchingInfoFilter(),selectedSort:_this.getSelectedSortFromUrl(),selectedFilters:_this.getSelectedFiltersFromUrl(),isContentFiltered:_this.isContentFiltered(),defaultPlpType:_this.getDefaultPlpType(),plpTypes:_this.getPlpTypes()};};return _this;}_createClass(_CategoryPageContainer,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props2=this.props,categoryIds=_this$props2.categoryIds,id=_this$props2.category.id;window.scrollTo(0,0);/**\n         * Ensure transition PLP => homepage => PLP always having proper meta\n         */this.updateMeta();/**\n         * Always make sure the navigation show / hide mode (on scroll)\n         * is activated when entering the category page.\n         * */this.updateNavigationState();/**\n         * Always update the history, ensure the history contains category\n         */this.updateHistory();/**\n         * Make sure to update header state, if the category visited\n         * was already loaded.\n         */if(categoryIds===id){this.updateBreadcrumbs();this.updateHeaderState();}else{/**\n             * Still update header and breadcrumbs, but ignore\n             * the category data, as it is outdated\n             */this.updateHeaderState(true);this.updateBreadcrumbs(true);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props3=this.props,isOffline=_this$props3.isOffline,categoryIds=_this$props3.categoryIds,id=_this$props3.category.id,_this$props3$currentA=_this$props3.currentArgs;_this$props3$currentA=_this$props3$currentA===void 0?{}:_this$props3$currentA;var filter=_this$props3$currentA.filter;var breadcrumbsWereUpdated=this.state.breadcrumbsWereUpdated;var prevCategoryIds=prevProps.categoryIds,prevId=prevProps.category.id,_prevProps$currentArg=prevProps.currentArgs;_prevProps$currentArg=_prevProps$currentArg===void 0?{}:_prevProps$currentArg;var prevFilter=_prevProps$currentArg.filter;// TODO: category scrolls up when coming from PDP\nif(isOffline){debounce(this.setOfflineNoticeSize,LOADING_TIME)();}/**\n         * If the URL rewrite has been changed, make sure the category ID\n         * will persist in the history state.\n         */if(categoryIds!==prevCategoryIds){this.updateHistory();}/**\n         * If the currently loaded category ID does not match the ID of\n         * category from URL rewrite, request category.\n         */if(categoryIds!==id){this.requestCategory();}/**\n         * If category ID was changed => it is loaded => we need to\n         * update category specific information, i.e. breadcrumbs.\n         *\n         * Or if the breadcrumbs were not yet updated after category request,\n         * and the category ID expected to load was loaded, update data.\n         */var categoryChange=id!==prevId||!breadcrumbsWereUpdated&&id===categoryIds;if(categoryChange){this.checkIsActive();this.updateMeta();this.updateBreadcrumbs();this.updateHeaderState();}/*\n        ** if category wasn't changed we still need to update meta for correct robots meta tag [#928](https://github.com/scandipwa/base-theme/issues/928)\n        */if(!categoryChange&&filter&&prevFilter&&Object.keys(filter.customFilters).length!==Object.keys(prevFilter.customFilters).length){this.updateMeta();}}},{key:\"onGridButtonClick\",value:function onGridButtonClick(){BrowserDatabase.setItem(GRID_LAYOUT,LAYOUT_KEY);this.setState({selectedLayoutType:GRID_LAYOUT});}},{key:\"onListButtonClick\",value:function onListButtonClick(){BrowserDatabase.setItem(LIST_LAYOUT,LAYOUT_KEY);this.setState({selectedLayoutType:LIST_LAYOUT});}},{key:\"onSortChange\",value:function onSortChange(sortDirection,sortKey){var _this$props4=this.props,location=_this$props4.location,history=_this$props4.history;setQueryParams({sortKey:sortKey,sortDirection:sortDirection,page:''},location,history);this.updateMeta();}},{key:\"getIsMatchingListFilter\",value:function getIsMatchingListFilter(){var _this$props5=this.props,location=_this$props5.location,_this$props5$currentA=_this$props5.currentArgs;_this$props5$currentA=_this$props5$currentA===void 0?{}:_this$props5$currentA;var currentPage=_this$props5$currentA.currentPage,sort=_this$props5$currentA.sort,filter=_this$props5$currentA.filter;/**\n         * ? implementation bellow blinks, implementation with categoryIds check only does not show loading when selecting filters.\n         * TODO: resolve it to be a combination of these two behaviour\n         */ // Data used to request category matches current data\nreturn JSON.stringify(filter)===JSON.stringify(this.getFilter())&&JSON.stringify(sort)===JSON.stringify(this.getSelectedSortFromUrl())&&currentPage===+(getQueryParam('page',location)||1);}},{key:\"getIsMatchingInfoFilter\",value:function getIsMatchingInfoFilter(){var _this$props6=this.props,categoryIds=_this$props6.categoryIds,selectedCategoryIds=_this$props6.selectedInfoFilter.categoryIds;// Requested category is equal to current category\nreturn categoryIds===selectedCategoryIds;}},{key:\"isCurrentCategoryLoaded\",value:function isCurrentCategoryLoaded(){var _this$props7=this.props,categoryIds=_this$props7.categoryIds,id=_this$props7.category.id,isSearchPage=_this$props7.isSearchPage;return isSearchPage||categoryIds===id;}},{key:\"isContentFiltered\",value:function isContentFiltered(){var _this$urlStringToObje=this.urlStringToObject(),customFilters=_this$urlStringToObje.customFilters,priceMin=_this$urlStringToObje.priceMin,priceMax=_this$urlStringToObje.priceMax;return!!(customFilters||priceMin||priceMax);}},{key:\"urlStringToObject\",value:function urlStringToObject(){var search=this.props.location.search;return search.substr(1).split('&').reduce(function(acc,part){var _part$split=part.split('='),_part$split2=_slicedToArray(_part$split,2),key=_part$split2[0],value=_part$split2[1];return _objectSpread(_objectSpread({},acc),{},_defineProperty({},key,value));},{});}},{key:\"getSelectedFiltersFromUrl\",value:function getSelectedFiltersFromUrl(){var location=this.props.location;var selectedFiltersString=(getQueryParam('customFilters',location)||'').split(';');return selectedFiltersString.reduce(function(acc,filter){if(!filter){return acc;}var _filter$split=filter.split(':'),_filter$split2=_slicedToArray(_filter$split,2),key=_filter$split2[0],value=_filter$split2[1];return _objectSpread(_objectSpread({},acc),{},_defineProperty({},key,value.split(',')));},{});}},{key:\"getSelectedSortFromUrl\",value:function getSelectedSortFromUrl(){var _this$props8=this.props,location=_this$props8.location,default_sort_by=_this$props8.category.default_sort_by;var _this$config=this.config,globalDefaultSortKey=_this$config.sortKey,defaultSortDirection=_this$config.sortDirection;/**\n         * Default SORT DIRECTION is taken from (sequentially):\n         * - URL param \"sortDirection\"\n         * - CategoryPage class property \"config\"\n         * */var sortDirection=getQueryParam('sortDirection',location)||defaultSortDirection;/**\n         * Default SORT KEY is taken from (sequentially):\n         * - URL param \"sortKey\"\n         * - Category default sort key (Magento 2 configuration)\n         * - CategoryPage class property \"config\"\n         * */var defaultSortKey=default_sort_by||globalDefaultSortKey;var sortKey=getQueryParam('sortKey',location)||defaultSortKey;return{sortDirection:sortDirection,sortKey:sortKey};}},{key:\"getSelectedPriceRangeFromUrl\",value:function getSelectedPriceRangeFromUrl(){var location=this.props.location;var min=+getQueryParam('priceMin',location);var max=+getQueryParam('priceMax',location);return{min:min,max:max};}},{key:\"getDefaultPlpType\",value:function getDefaultPlpType(){var defaultPlpType=this.state.defaultPlpType;return defaultPlpType;}},{key:\"getPlpTypes\",value:function getPlpTypes(){var plpTypes=this.state.plpTypes;return plpTypes;}},{key:\"getFilter\",value:function getFilter(){var categoryIds=this.props.categoryIds;var customFilters=this.getSelectedFiltersFromUrl();var priceRange=this.getSelectedPriceRangeFromUrl();if(categoryIds===-1){return{priceRange:priceRange,customFilters:customFilters};}return{priceRange:priceRange,customFilters:customFilters,categoryIds:categoryIds};}},{key:\"updateHistory\",value:function updateHistory(){var _this$props9=this.props,history=_this$props9.history,location=_this$props9.location,categoryIds=_this$props9.categoryIds;var search=location.search,pathname=location.pathname,_location$state=location.state,state=_location$state===void 0?{}:_location$state;var category=state.category;/**\n         * Prevent pushing non-existent category into the state\n         */if(categoryIds===-1){return;}if(category!==categoryIds){history.replace({pathname:pathname,search:search,state:_objectSpread(_objectSpread({},state),{},{category:categoryIds})});}}},{key:\"checkIsActive\",value:function checkIsActive(){var _this$props10=this.props,is_active=_this$props10.category.is_active,updateNoMatch=_this$props10.updateNoMatch;if(!is_active){updateNoMatch({noMatch:true});}}},{key:\"updateMeta\",value:function updateMeta(){var _this$props11=this.props,updateMetaFromCategory=_this$props11.updateMetaFromCategory,category=_this$props11.category,history=_this$props11.history;var meta_robots=history.location.search?'':'follow, index';updateMetaFromCategory(_objectSpread(_objectSpread({},category),{},{meta_robots:meta_robots}));}},{key:\"updateBreadcrumbs\",value:function updateBreadcrumbs(){var isUnmatchedCategory=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var _this$props12=this.props,updateBreadcrumbs=_this$props12.updateBreadcrumbs,category=_this$props12.category;var breadcrumbs=isUnmatchedCategory?{}:category;updateBreadcrumbs(breadcrumbs);this.setState({breadcrumbsWereUpdated:true});}},{key:\"updateNavigationState\",value:function updateNavigationState(){var changeNavigationState=this.props.changeNavigationState;changeNavigationState({name:MENU_TAB,isVisibleOnScroll:true});}},{key:\"updateHeaderState\",value:function updateHeaderState(){var _history$location;var isUnmatchedCategory=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var _this$props13=this.props,changeHeaderState=_this$props13.changeHeaderState,name=_this$props13.category.name,history=_this$props13.history;var _ref7=(history===null||history===void 0?void 0:(_history$location=history.location)===null||_history$location===void 0?void 0:_history$location.state)||{},category=_ref7.category;var onBackClick=category?function(){return history.goBack();}:function(){return history.push(appendWithStoreCode('/menu'));};/**\n         * Ensure the name is not set if the category IDs do not\n         * match. Otherwise, the previous value is displayed.\n         */var title=isUnmatchedCategory?undefined:name;changeHeaderState({name:CATEGORY,title:title,onBackClick:onBackClick});}},{key:\"requestCategory\",value:function requestCategory(){var _this$props14=this.props,categoryIds=_this$props14.categoryIds,isSearchPage=_this$props14.isSearchPage,requestCategory=_this$props14.requestCategory;var currentCategoryIds=this.state.currentCategoryIds;/**\n         * Prevent non-existent category from being requested\n         */if(categoryIds===-1){return;}/**\n         * Do not request a category again! We are still waiting for\n         * a requested category to load!\n         */if(categoryIds===currentCategoryIds){return;}/**\n         * Update current category to track if it is loaded or not - useful,\n         * to prevent category from requesting itself multiple times.\n         */this.setState({currentCategoryIds:categoryIds,breadcrumbsWereUpdated:false});requestCategory({isSearchPage:isSearchPage,categoryIds:categoryIds});}},{key:\"render\",value:function render(){var pageSize=this.config.pageSize;var _this$state=this.state,defaultPlpType=_this$state.defaultPlpType,selectedLayoutType=_this$state.selectedLayoutType,activeLayoutType=_this$state.activeLayoutType;return/*#__PURE__*/_checkBEM(React,CategoryPage,Object.assign({},this.props,{pageSize:pageSize,defaultPlpType:defaultPlpType,selectedLayoutType:selectedLayoutType,activeLayoutType:activeLayoutType},this.containerFunctions,this.containerProps()));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var currentCategoryIds=state.currentCategoryIds,defaultPlpType=state.defaultPlpType,plpTypes=state.plpTypes;var id=props.category.id,plpType=props.plpType,isMobile=props.isMobile;var update={};/**\n         * Determine default plpType and the other ones\n         */if(!defaultPlpType||!plpTypes){if(plpType.match('-')){var _plpTypes=plpType.split('-');var defaultType=isMobile?GRID_LAYOUT:_plpTypes[0];Object.assign(update,{defaultPlpType:defaultType,plpTypes:_plpTypes});}else{var _defaultType=isMobile?GRID_LAYOUT:plpType;Object.assign(update,{defaultPlpType:_defaultType,plpTypes:[plpType]});}}/**\n         * If the category we expect to load is loaded - reset it\n         */if(currentCategoryIds===id){Object.assign(update,{currentCategoryIds:-1});}if(!Object.keys(update).length){return null;}return update;}}]);return _CategoryPageContainer;}(Extensible(PureComponent));_CategoryPageContainer.defaultProps={categoryIds:-1,isSearchPage:false,currentArgs:{},selectedInfoFilter:{},plpType:''};Object.defineProperty(_CategoryPageContainer,'name',{value:'CategoryPageContainer'});export var CategoryPageContainer=middleware(_CategoryPageContainer,\"Route/CategoryPage/Container\");export default connect(mapStateToProps,mapDispatchToProps)(CategoryPageContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/route/CategoryPage/CategoryPage.container.js"],"names":["PureComponent","connect","CATEGORY","MENU_TAB","GRID_LAYOUT","LAYOUT_KEY","LIST_LAYOUT","updateCurrentCategory","changeNavigationState","BOTTOM_NAVIGATION_TYPE","TOP_NAVIGATION_TYPE","setBigOfflineNotice","toggleOverlayByKey","updateInfoLoadStatus","CategoryTreeType","HistoryType","LocationType","MatchType","BrowserDatabase","debounce","appendWithStoreCode","getQueryParam","setQueryParams","CategoryPage","LOADING_TIME","ProductListInfoDispatcher","BreadcrumbsDispatcher","CategoryDispatcher","MetaDispatcher","NoMatchDispatcher","mapStateToProps","state","category","CategoryReducer","isOffline","OfflineReducer","filters","ProductListInfoReducer","sortFields","currentArgs","ProductListReducer","selectedInfoFilter","selectedFilter","isInfoLoading","isLoading","totalPages","device","ConfigReducer","plpType","plp_list_mode","isMobile","mapDispatchToProps","dispatch","key","changeHeaderState","requestCategory","options","then","dispatcher","default","handleData","updateBreadcrumbs","breadcrumbs","Object","keys","length","updateWithCategory","update","requestProductListInfo","updateLoadStatus","updateNoMatch","isBig","updateMetaFromCategory","clearCategory","CategoryPageContainer","currentCategoryIds","breadcrumbsWereUpdated","selectedLayoutType","config","sortKey","sortDirection","containerFunctions","onSortChange","bind","onGridButtonClick","onListButtonClick","setOfflineNoticeSize","props","containerProps","filter","getFilter","isCurrentCategoryLoaded","isMatchingListFilter","getIsMatchingListFilter","isMatchingInfoFilter","getIsMatchingInfoFilter","selectedSort","getSelectedSortFromUrl","selectedFilters","getSelectedFiltersFromUrl","isContentFiltered","defaultPlpType","getDefaultPlpType","plpTypes","getPlpTypes","categoryIds","id","window","scrollTo","updateMeta","updateNavigationState","updateHistory","updateHeaderState","prevProps","prevCategoryIds","prevId","prevFilter","categoryChange","checkIsActive","customFilters","setItem","setState","location","history","page","currentPage","sort","JSON","stringify","selectedCategoryIds","isSearchPage","urlStringToObject","priceMin","priceMax","search","substr","split","reduce","acc","part","value","selectedFiltersString","default_sort_by","globalDefaultSortKey","defaultSortDirection","defaultSortKey","min","max","priceRange","getSelectedPriceRangeFromUrl","pathname","replace","is_active","noMatch","meta_robots","isUnmatchedCategory","name","isVisibleOnScroll","onBackClick","goBack","push","title","undefined","pageSize","activeLayoutType","match","defaultType","assign","defaultProps","defineProperty","_CategoryPageContainer"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { CATEGORY } from 'Component/Header/Header.config';\nimport { MENU_TAB } from 'Component/NavigationTabs/NavigationTabs.config';\nimport { GRID_LAYOUT, LAYOUT_KEY, LIST_LAYOUT } from 'Route/CategoryPage/CategoryPage.config';\nimport { updateCurrentCategory } from 'Store/Category/Category.action';\nimport { changeNavigationState } from 'Store/Navigation/Navigation.action';\nimport { BOTTOM_NAVIGATION_TYPE, TOP_NAVIGATION_TYPE } from 'Store/Navigation/Navigation.reducer';\nimport { setBigOfflineNotice } from 'Store/Offline/Offline.action';\nimport { toggleOverlayByKey } from 'Store/Overlay/Overlay.action';\nimport {\n    updateInfoLoadStatus\n} from 'Store/ProductListInfo/ProductListInfo.action';\nimport { CategoryTreeType } from 'Type/Category';\nimport { HistoryType, LocationType, MatchType } from 'Type/Common';\nimport BrowserDatabase from 'Util/BrowserDatabase';\nimport { debounce } from 'Util/Request';\nimport {\n    appendWithStoreCode,\n    getQueryParam,\n    setQueryParams\n} from 'Util/Url';\n\nimport CategoryPage from './CategoryPage.component';\nimport { LOADING_TIME } from './CategoryPage.config';\n\nexport const ProductListInfoDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/ProductListInfo/ProductListInfo.dispatcher'\n);\n\nexport const BreadcrumbsDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Breadcrumbs/Breadcrumbs.dispatcher'\n);\n\nexport const CategoryDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Category/Category.dispatcher'\n);\n\nexport const MetaDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Meta/Meta.dispatcher'\n);\n\nexport const NoMatchDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/NoMatch/NoMatch.dispatcher'\n);\n\n/** @namespace Route/CategoryPage/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    category: state.CategoryReducer.category,\n    isOffline: state.OfflineReducer.isOffline,\n    filters: state.ProductListInfoReducer.filters,\n    sortFields: state.ProductListInfoReducer.sortFields,\n    currentArgs: state.ProductListReducer.currentArgs,\n    selectedInfoFilter: state.ProductListInfoReducer.selectedFilter,\n    isInfoLoading: state.ProductListInfoReducer.isLoading,\n    totalPages: state.ProductListReducer.totalPages,\n    device: state.ConfigReducer.device,\n    plpType: state.ConfigReducer.plp_list_mode,\n    isMobile: state.ConfigReducer.device.isMobile\n});\n\n/** @namespace Route/CategoryPage/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    toggleOverlayByKey: (key) => dispatch(toggleOverlayByKey(key)),\n    changeHeaderState: (state) => dispatch(changeNavigationState(TOP_NAVIGATION_TYPE, state)),\n    changeNavigationState: (state) => dispatch(changeNavigationState(BOTTOM_NAVIGATION_TYPE, state)),\n    requestCategory: (options) => CategoryDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.handleData(dispatch, options)\n    ),\n    updateBreadcrumbs: (breadcrumbs) => ((Object.keys(breadcrumbs).length)\n        ? BreadcrumbsDispatcher.then(\n            ({ default: dispatcher }) => dispatcher.updateWithCategory(breadcrumbs, dispatch)\n        )\n        : BreadcrumbsDispatcher.then(\n            ({ default: dispatcher }) => dispatcher.update([], dispatch)\n        )\n    ),\n    requestProductListInfo: (options) => ProductListInfoDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.handleData(dispatch, options)\n    ),\n    updateLoadStatus: (isLoading) => dispatch(updateInfoLoadStatus(isLoading)),\n    updateNoMatch: (options) => NoMatchDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.updateNoMatch(dispatch, options)\n    ),\n    setBigOfflineNotice: (isBig) => dispatch(setBigOfflineNotice(isBig)),\n    updateMetaFromCategory: (category) => MetaDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.updateWithCategory(category, dispatch)\n    ),\n    clearCategory: () => dispatch(updateCurrentCategory({}))\n});\n\n/** @namespace Route/CategoryPage/Container */\nexport class CategoryPageContainer extends PureComponent {\n    static propTypes = {\n        history: HistoryType.isRequired,\n        category: CategoryTreeType.isRequired,\n        location: LocationType.isRequired,\n        match: MatchType.isRequired,\n        requestCategory: PropTypes.func.isRequired,\n        changeHeaderState: PropTypes.func.isRequired,\n        changeNavigationState: PropTypes.func.isRequired,\n        requestProductListInfo: PropTypes.func.isRequired,\n        setBigOfflineNotice: PropTypes.func.isRequired,\n        updateMetaFromCategory: PropTypes.func.isRequired,\n        updateBreadcrumbs: PropTypes.func.isRequired,\n        updateLoadStatus: PropTypes.func.isRequired,\n        updateNoMatch: PropTypes.func.isRequired,\n        filters: PropTypes.objectOf(PropTypes.shape).isRequired,\n        sortFields: PropTypes.shape({\n            options: PropTypes.array\n        }).isRequired,\n        currentArgs: PropTypes.shape({\n            filter: PropTypes.shape({\n                categoryIds: PropTypes.number\n            })\n        }),\n        selectedInfoFilter: PropTypes.shape({\n            categoryIds: PropTypes.number\n        }),\n        isInfoLoading: PropTypes.bool.isRequired,\n        isOffline: PropTypes.bool.isRequired,\n        categoryIds: PropTypes.number,\n        isSearchPage: PropTypes.bool,\n        isMobile: PropTypes.bool.isRequired,\n        plpType: PropTypes.string\n    };\n\n    static defaultProps = {\n        categoryIds: -1,\n        isSearchPage: false,\n        currentArgs: {},\n        selectedInfoFilter: {},\n        plpType: ''\n    };\n\n    state = {\n        currentCategoryIds: -1,\n        breadcrumbsWereUpdated: false,\n        selectedLayoutType: null\n    };\n\n    config = {\n        sortKey: 'name',\n        sortDirection: 'ASC'\n    };\n\n    containerFunctions = {\n        onSortChange: this.onSortChange.bind(this),\n        onGridButtonClick: this.onGridButtonClick.bind(this),\n        onListButtonClick: this.onListButtonClick.bind(this)\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        const {\n            currentCategoryIds,\n            defaultPlpType,\n            plpTypes\n        } = state;\n\n        const {\n            category: { id },\n            plpType,\n            isMobile\n        } = props;\n\n        const update = {};\n\n        /**\n         * Determine default plpType and the other ones\n         */\n        if (!defaultPlpType || !plpTypes) {\n            if (plpType.match('-')) {\n                const plpTypes = plpType.split('-');\n                const defaultType = isMobile ? GRID_LAYOUT : plpTypes[0];\n\n                Object.assign(update, { defaultPlpType: defaultType, plpTypes });\n            } else {\n                const defaultType = isMobile ? GRID_LAYOUT : plpType;\n                Object.assign(update, { defaultPlpType: defaultType, plpTypes: [plpType] });\n            }\n        }\n\n        /**\n         * If the category we expect to load is loaded - reset it\n         */\n        if (currentCategoryIds === id) {\n            Object.assign(update, { currentCategoryIds: -1 });\n        }\n\n        if (!Object.keys(update).length) {\n            return null;\n        }\n\n        return update;\n    }\n\n    componentDidMount() {\n        const {\n            categoryIds,\n            category: {\n                id\n            }\n        } = this.props;\n\n        window.scrollTo(0, 0);\n\n        /**\n         * Ensure transition PLP => homepage => PLP always having proper meta\n         */\n        this.updateMeta();\n\n        /**\n         * Always make sure the navigation show / hide mode (on scroll)\n         * is activated when entering the category page.\n         * */\n        this.updateNavigationState();\n\n        /**\n         * Always update the history, ensure the history contains category\n         */\n        this.updateHistory();\n\n        /**\n         * Make sure to update header state, if the category visited\n         * was already loaded.\n         */\n        if (categoryIds === id) {\n            this.updateBreadcrumbs();\n            this.updateHeaderState();\n        } else {\n            /**\n             * Still update header and breadcrumbs, but ignore\n             * the category data, as it is outdated\n             */\n            this.updateHeaderState(true);\n            this.updateBreadcrumbs(true);\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            isOffline,\n            categoryIds,\n            category: {\n                id\n            },\n            currentArgs: {\n                filter\n            } = {}\n        } = this.props;\n\n        const {\n            breadcrumbsWereUpdated\n        } = this.state;\n\n        const {\n            categoryIds: prevCategoryIds,\n            category: {\n                id: prevId\n            },\n            currentArgs: {\n                filter: prevFilter\n            } = {}\n        } = prevProps;\n\n        // TODO: category scrolls up when coming from PDP\n\n        if (isOffline) {\n            debounce(this.setOfflineNoticeSize, LOADING_TIME)();\n        }\n\n        /**\n         * If the URL rewrite has been changed, make sure the category ID\n         * will persist in the history state.\n         */\n        if (categoryIds !== prevCategoryIds) {\n            this.updateHistory();\n        }\n\n        /**\n         * If the currently loaded category ID does not match the ID of\n         * category from URL rewrite, request category.\n         */\n        if (categoryIds !== id) {\n            this.requestCategory();\n        }\n\n        /**\n         * If category ID was changed => it is loaded => we need to\n         * update category specific information, i.e. breadcrumbs.\n         *\n         * Or if the breadcrumbs were not yet updated after category request,\n         * and the category ID expected to load was loaded, update data.\n         */\n        const categoryChange = id !== prevId || (!breadcrumbsWereUpdated && id === categoryIds);\n\n        if (categoryChange) {\n            this.checkIsActive();\n            this.updateMeta();\n            this.updateBreadcrumbs();\n            this.updateHeaderState();\n        }\n\n        /*\n        ** if category wasn't changed we still need to update meta for correct robots meta tag [#928](https://github.com/scandipwa/base-theme/issues/928)\n        */\n        if (!categoryChange\n            && filter\n            && prevFilter\n            && Object.keys(filter.customFilters).length !== Object.keys(prevFilter.customFilters).length\n        ) {\n            this.updateMeta();\n        }\n    }\n\n    onGridButtonClick() {\n        BrowserDatabase.setItem(GRID_LAYOUT, LAYOUT_KEY);\n        this.setState({ selectedLayoutType: GRID_LAYOUT });\n    }\n\n    onListButtonClick() {\n        BrowserDatabase.setItem(LIST_LAYOUT, LAYOUT_KEY);\n        this.setState({ selectedLayoutType: LIST_LAYOUT });\n    }\n\n    onSortChange(sortDirection, sortKey) {\n        const { location, history } = this.props;\n\n        setQueryParams({ sortKey, sortDirection, page: '' }, location, history);\n        this.updateMeta();\n    }\n\n    setOfflineNoticeSize = () => {\n        const { setBigOfflineNotice, isInfoLoading } = this.props;\n\n        if (isInfoLoading) {\n            setBigOfflineNotice(true);\n        } else {\n            setBigOfflineNotice(false);\n        }\n    };\n\n    getIsMatchingListFilter() {\n        const {\n            location,\n            currentArgs: {\n                currentPage,\n                sort,\n                filter\n            } = {}\n        } = this.props;\n\n        /**\n         * ? implementation bellow blinks, implementation with categoryIds check only does not show loading when selecting filters.\n         * TODO: resolve it to be a combination of these two behaviour\n         */\n\n        // Data used to request category matches current data\n        return JSON.stringify(filter) === JSON.stringify(this.getFilter())\n            && JSON.stringify(sort) === JSON.stringify(this.getSelectedSortFromUrl())\n            && currentPage === +(getQueryParam('page', location) || 1);\n    }\n\n    getIsMatchingInfoFilter() {\n        const {\n            categoryIds,\n            selectedInfoFilter: {\n                categoryIds: selectedCategoryIds\n            }\n        } = this.props;\n\n        // Requested category is equal to current category\n        return categoryIds === selectedCategoryIds;\n    }\n\n    isCurrentCategoryLoaded() {\n        const {\n            categoryIds,\n            category: {\n                id\n            },\n            isSearchPage\n        } = this.props;\n\n        return isSearchPage || categoryIds === id;\n    }\n\n    containerProps = () => ({\n        filter: this.getFilter(),\n        isCurrentCategoryLoaded: this.isCurrentCategoryLoaded(),\n        isMatchingListFilter: this.getIsMatchingListFilter(),\n        isMatchingInfoFilter: this.getIsMatchingInfoFilter(),\n        selectedSort: this.getSelectedSortFromUrl(),\n        selectedFilters: this.getSelectedFiltersFromUrl(),\n        isContentFiltered: this.isContentFiltered(),\n        defaultPlpType: this.getDefaultPlpType(),\n        plpTypes: this.getPlpTypes()\n    });\n\n    isContentFiltered() {\n        const {\n            customFilters,\n            priceMin,\n            priceMax\n        } = this.urlStringToObject();\n\n        return !!(customFilters || priceMin || priceMax);\n    }\n\n    urlStringToObject() {\n        const { location: { search } } = this.props;\n\n        return search.substr(1).split('&').reduce((acc, part) => {\n            const [key, value] = part.split('=');\n            return { ...acc, [key]: value };\n        }, {});\n    }\n\n    getSelectedFiltersFromUrl() {\n        const { location } = this.props;\n        const selectedFiltersString = (getQueryParam('customFilters', location) || '').split(';');\n\n        return selectedFiltersString.reduce((acc, filter) => {\n            if (!filter) {\n                return acc;\n            }\n            const [key, value] = filter.split(':');\n            return { ...acc, [key]: value.split(',') };\n        }, {});\n    }\n\n    getSelectedSortFromUrl() {\n        const {\n            location,\n            category: {\n                default_sort_by\n            }\n        } = this.props;\n\n        const {\n            sortKey: globalDefaultSortKey,\n            sortDirection: defaultSortDirection\n        } = this.config;\n\n        /**\n         * Default SORT DIRECTION is taken from (sequentially):\n         * - URL param \"sortDirection\"\n         * - CategoryPage class property \"config\"\n         * */\n        const sortDirection = getQueryParam('sortDirection', location) || defaultSortDirection;\n\n        /**\n         * Default SORT KEY is taken from (sequentially):\n         * - URL param \"sortKey\"\n         * - Category default sort key (Magento 2 configuration)\n         * - CategoryPage class property \"config\"\n         * */\n        const defaultSortKey = default_sort_by || globalDefaultSortKey;\n        const sortKey = getQueryParam('sortKey', location) || defaultSortKey;\n\n        return {\n            sortDirection,\n            sortKey\n        };\n    }\n\n    getSelectedPriceRangeFromUrl() {\n        const { location } = this.props;\n        const min = +getQueryParam('priceMin', location);\n        const max = +getQueryParam('priceMax', location);\n        return { min, max };\n    }\n\n    getDefaultPlpType() {\n        const { defaultPlpType } = this.state;\n\n        return defaultPlpType;\n    }\n\n    getPlpTypes() {\n        const { plpTypes } = this.state;\n\n        return plpTypes;\n    }\n\n    getFilter() {\n        const { categoryIds } = this.props;\n        const customFilters = this.getSelectedFiltersFromUrl();\n        const priceRange = this.getSelectedPriceRangeFromUrl();\n\n        if (categoryIds === -1) {\n            return {\n                priceRange,\n                customFilters\n            };\n        }\n\n        return {\n            priceRange,\n            customFilters,\n            categoryIds\n        };\n    }\n\n    updateHistory() {\n        const {\n            history,\n            location,\n            categoryIds\n        } = this.props;\n\n        const {\n            search,\n            pathname,\n            state = {}\n        } = location;\n\n        const { category } = state;\n\n        /**\n         * Prevent pushing non-existent category into the state\n         */\n        if (categoryIds === -1) {\n            return;\n        }\n\n        if (category !== categoryIds) {\n            history.replace({\n                pathname,\n                search,\n                state: {\n                    ...state,\n                    category: categoryIds\n                }\n            });\n        }\n    }\n\n    checkIsActive() {\n        const {\n            category: { is_active },\n            updateNoMatch\n        } = this.props;\n\n        if (!is_active) {\n            updateNoMatch({ noMatch: true });\n        }\n    }\n\n    updateMeta() {\n        const { updateMetaFromCategory, category, history } = this.props;\n        const meta_robots = history.location.search\n            ? ''\n            : 'follow, index';\n\n        updateMetaFromCategory({\n            ...category,\n            meta_robots\n        });\n    }\n\n    updateBreadcrumbs(isUnmatchedCategory = false) {\n        const { updateBreadcrumbs, category } = this.props;\n        const breadcrumbs = isUnmatchedCategory ? {} : category;\n        updateBreadcrumbs(breadcrumbs);\n\n        this.setState({ breadcrumbsWereUpdated: true });\n    }\n\n    updateNavigationState() {\n        const { changeNavigationState } = this.props;\n\n        changeNavigationState({\n            name: MENU_TAB,\n            isVisibleOnScroll: true\n        });\n    }\n\n    updateHeaderState(isUnmatchedCategory = false) {\n        const {\n            changeHeaderState,\n            category: {\n                name\n            },\n            history\n        } = this.props;\n\n        const { category } = history?.location?.state || {};\n\n        const onBackClick = category\n            ? () => history.goBack()\n            : () => history.push(appendWithStoreCode('/menu'));\n\n        /**\n         * Ensure the name is not set if the category IDs do not\n         * match. Otherwise, the previous value is displayed.\n         */\n        const title = isUnmatchedCategory ? undefined : name;\n\n        changeHeaderState({\n            name: CATEGORY,\n            title,\n            onBackClick\n        });\n    }\n\n    requestCategory() {\n        const {\n            categoryIds,\n            isSearchPage,\n            requestCategory\n        } = this.props;\n\n        const {\n            currentCategoryIds\n        } = this.state;\n\n        /**\n         * Prevent non-existent category from being requested\n         */\n        if (categoryIds === -1) {\n            return;\n        }\n\n        /**\n         * Do not request a category again! We are still waiting for\n         * a requested category to load!\n         */\n        if (categoryIds === currentCategoryIds) {\n            return;\n        }\n\n        /**\n         * Update current category to track if it is loaded or not - useful,\n         * to prevent category from requesting itself multiple times.\n         */\n        this.setState({\n            currentCategoryIds: categoryIds,\n            breadcrumbsWereUpdated: false\n        });\n\n        requestCategory({\n            isSearchPage,\n            categoryIds\n        });\n    }\n\n    render() {\n        const { pageSize } = this.config;\n        const {\n            defaultPlpType,\n            selectedLayoutType,\n            activeLayoutType\n        } = this.state;\n\n        return (\n            <CategoryPage\n              { ...this.props }\n              pageSize={ pageSize }\n              defaultPlpType={ defaultPlpType }\n              selectedLayoutType={ selectedLayoutType }\n              activeLayoutType={ activeLayoutType }\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoryPageContainer);\n"]},"metadata":{},"sourceType":"module"}