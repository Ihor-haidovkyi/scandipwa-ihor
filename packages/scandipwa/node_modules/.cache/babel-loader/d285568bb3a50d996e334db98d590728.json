{"ast":null,"code":"import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable no-magic-numbers */ /**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import Field from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Field\";import Html from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Html\";import{MixType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";import{AttributeType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import{STRING_ONLY_ATTRIBUTE_CODES}from\"./ProductAttributeValue.config\";import\"./ProductAttributeValue.style\";/** @namespace Component/ProductAttributeValue/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductAttributeValue=/*#__PURE__*/function(_Extensible){_inherits(_ProductAttributeValue,_Extensible);var _super=_createSuper(_ProductAttributeValue);function _ProductAttributeValue(){var _this;_classCallCheck(this,_ProductAttributeValue);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.clickHandler=_this.clickHandler.bind(_assertThisInitialized(_this));_this.getOptionLabel=_this.getOptionLabel.bind(_assertThisInitialized(_this));_this._getBooleanLabel=function(label){return+label?__('Yes'):__('No');};return _this;}_createClass(_ProductAttributeValue,[{key:\"getIsColorLight\",value:function getIsColorLight(hex){var color=hex.charAt(0)==='#'?hex.substring(1,7):hex;var r=parseInt(color.substring(0,2),16);// hexToR\nvar g=parseInt(color.substring(2,4),16);// hexToG\nvar b=parseInt(color.substring(4,6),16);// hexToB\nreturn r*0.299+g*0.587+b*0.114>186;}},{key:\"getOptionLabel\",value:function getOptionLabel(value){var _this$props=this.props,_this$props$attribute=_this$props.attribute,attribute_options=_this$props$attribute.attribute_options,is_boolean=_this$props$attribute.is_boolean,isProductCountVisible=_this$props.isProductCountVisible;if(attribute_options){var optionValues=attribute_options[value];if(optionValues){if(!isProductCountVisible){return optionValues;}var label=optionValues.label,_optionValues$count=optionValues.count,count=_optionValues$count===void 0?0:_optionValues$count;var adjustedLabel=is_boolean?this._getBooleanLabel(label):label;return _objectSpread(_objectSpread({},optionValues),{},{label:\"\".concat(adjustedLabel,\" (\").concat(count,\")\")});}}return{};}},{key:\"clickHandler\",value:function clickHandler(e){var _this$props2=this.props,onClick=_this$props2.onClick,attribute=_this$props2.attribute;e.preventDefault();onClick(attribute);}},{key:\"renderTextAttribute\",value:function renderTextAttribute(){var attribute_value=this.props.attribute.attribute_value;return this.renderStringValue(attribute_value);}},{key:\"renderBooleanAttribute\",value:function renderBooleanAttribute(){var attribute_value=this.props.attribute.attribute_value;return this.renderStringValue(attribute_value?__('Yes'):__('No'));}},{key:\"renderMultiSelectAttribute\",value:function renderMultiSelectAttribute(){var _this2=this;var attribute_value=this.props.attribute.attribute_value;var labelsArray=attribute_value.split(',').reduce(function(labels,value){var _this2$getOptionLabel=_this2.getOptionLabel(value),label=_this2$getOptionLabel.label;if(label){labels.push(label);}return labels;},[]);return this.renderStringValue(labelsArray.length?labelsArray.join(', '):__('N/A'));}},{key:\"renderSelectAttribute\",value:function renderSelectAttribute(){var _this$props$attribute2=this.props.attribute,attribute_value=_this$props$attribute2.attribute_value,attribute_code=_this$props$attribute2.attribute_code;var attributeOption=this.getOptionLabel(attribute_value);var label=attributeOption.label,swatch_data=attributeOption.swatch_data;if(!swatch_data||STRING_ONLY_ATTRIBUTE_CODES.includes(attribute_code)){return this.renderStringValue(label||__('N/A'));}var value=swatch_data.value,type=swatch_data.type;switch(type){case'0':return this.renderStringValue(value,label);case'1':return this.renderColorValue(value,label);case'2':return this.renderImageValue(value,label);default:return this.renderStringValue(label||__('N/A'));}}},{key:\"renderImageAttribute\",value:function renderImageAttribute(){var _this$props$attribute3=this.props.attribute,attribute_label=_this$props$attribute3.attribute_label,attribute_value=_this$props$attribute3.attribute_value;if(!attribute_value||attribute_value==='no_selection'){return this.renderPlaceholder();}return/*#__PURE__*/_checkBEM(React,\"img\",{block:\"ProductAttributeValue\",elem:\"MediaImage\",src:\"/media/catalog/product\".concat(attribute_value),alt:attribute_label});}},{key:\"renderTextAreaAttribute\",value:function renderTextAreaAttribute(){var attribute_value=this.props.attribute.attribute_value;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ProductAttributeValue\",elem:\"TextArea\"},/*#__PURE__*/_checkBEM(React,Html,{content:attribute_value}));}},{key:\"renderPlaceholder\",value:function renderPlaceholder(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ProductAttributeValue\",elem:\"Placeholder\"});}},{key:\"renderColorValue\",value:function renderColorValue(color,label){var _this$props3=this.props,isFormattedAsText=_this$props3.isFormattedAsText,isSelected=_this$props3.isSelected;var isLight=this.getIsColorLight(color);if(isFormattedAsText){return label||__('N/A');}var style={'--option-background-color':color,'--option-border-color':isLight?'#000':color,'--option-check-mark-background':isLight?'#000':'#fff',// stylelint-disable-next-line value-keyword-case\n'--option-is-selected':isSelected?1:0};return/*#__PURE__*/_checkBEM(React,\"data\",{block:\"ProductAttributeValue\",elem:\"Color\",value:label,title:label,style:style});}},{key:\"renderImageValue\",value:function renderImageValue(img,label){var _this$props4=this.props,isFormattedAsText=_this$props4.isFormattedAsText,isSelected=_this$props4.isSelected;if(isFormattedAsText){return label||__('N/A');}var style={// stylelint-disable-next-line value-keyword-case\n'--option-is-selected':isSelected?1:0};return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"img\",{block:\"ProductAttributeValue\",elem:\"Image\",src:\"/media/attribute/swatch\".concat(img),alt:label}),/*#__PURE__*/_checkBEM(React,\"data\",{block:\"ProductAttributeValue\",elem:\"Image-Overlay\",value:label,title:label,style:style}));}},{key:\"renderDropdown\",value:function renderDropdown(value){var isSelected=this.props.isSelected;return/*#__PURE__*/_checkBEM(React,Field,{id:value,name:value,type:\"checkbox\",label:value,value:value,mix:{block:'ProductAttributeValue',elem:'Text',mods:{isSelected:isSelected}},checked:isSelected});}},{key:\"renderStringValue\",value:function renderStringValue(value,label){var _this$props5=this.props,isFormattedAsText=_this$props5.isFormattedAsText,isSelected=_this$props5.isSelected;var isSwatch=label;if(isFormattedAsText){return label||value||__('N/A');}if(!isSwatch){return this.renderDropdown(value);}return/*#__PURE__*/_checkBEM(React,\"span\",{block:\"ProductAttributeValue\",elem:\"String\",mods:{isSelected:isSelected},title:label},value);}},{key:\"renderNumericAttribute\",value:function renderNumericAttribute(){var attribute_value=this.props.attribute.attribute_value;return this.renderStringValue(parseFloat(attribute_value).toFixed(2));}},{key:\"renderAttributeByType\",value:function renderAttributeByType(){var attribute_type=this.props.attribute.attribute_type;switch(attribute_type){case'select':return this.renderSelectAttribute();case'boolean':return this.renderBooleanAttribute();case'text':return this.renderTextAttribute();case'multiselect':return this.renderMultiSelectAttribute();case'media_image':return this.renderImageAttribute();case'textarea':return this.renderTextAreaAttribute();case'weight':return this.renderNumericAttribute();default:return this.renderPlaceholder();}}},{key:\"render\",value:function render(){var _this$props6=this.props,getLink=_this$props6.getLink,attribute=_this$props6.attribute,isAvailable=_this$props6.isAvailable,_this$props6$attribut=_this$props6.attribute,attribute_code=_this$props6$attribut.attribute_code,attribute_value=_this$props6$attribut.attribute_value,mix=_this$props6.mix,isFormattedAsText=_this$props6.isFormattedAsText;if(attribute_code&&!attribute_value){return null;}var href=getLink(attribute);// Invert to apply css rule without using not()\nvar isNotAvailable=!isAvailable;if(isFormattedAsText){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ProductAttributeValue\",mix:mix},this.renderAttributeByType());}return/*#__PURE__*/_checkBEM(React,\"a\",{href:href,block:\"ProductAttributeValue\",mods:{isNotAvailable:isNotAvailable},onClick:this.clickHandler,\"aria-hidden\":isNotAvailable,mix:mix},this.renderAttributeByType());}}]);return _ProductAttributeValue;}(Extensible(PureComponent));_ProductAttributeValue.defaultProps={isSelected:false,onClick:function onClick(){},getLink:function getLink(){},mix:{},isAvailable:true,isFormattedAsText:false,isProductCountVisible:false};Object.defineProperty(_ProductAttributeValue,'name',{value:'ProductAttributeValue'});export var ProductAttributeValue=middleware(_ProductAttributeValue,\"Component/ProductAttributeValue/Component\");export default ProductAttributeValue;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductAttributeValue/ProductAttributeValue.component.js"],"names":["PureComponent","Field","Html","MixType","AttributeType","STRING_ONLY_ATTRIBUTE_CODES","ProductAttributeValue","clickHandler","bind","getOptionLabel","_getBooleanLabel","label","__","hex","color","charAt","substring","r","parseInt","g","b","value","props","attribute","attribute_options","is_boolean","isProductCountVisible","optionValues","count","adjustedLabel","e","onClick","preventDefault","attribute_value","renderStringValue","labelsArray","split","reduce","labels","push","length","join","attribute_code","attributeOption","swatch_data","includes","type","renderColorValue","renderImageValue","attribute_label","renderPlaceholder","isFormattedAsText","isSelected","isLight","getIsColorLight","style","img","block","elem","mods","isSwatch","renderDropdown","parseFloat","toFixed","attribute_type","renderSelectAttribute","renderBooleanAttribute","renderTextAttribute","renderMultiSelectAttribute","renderImageAttribute","renderTextAreaAttribute","renderNumericAttribute","getLink","isAvailable","mix","href","isNotAvailable","renderAttributeByType","defaultProps","Object","defineProperty","_ProductAttributeValue"],"mappings":"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","sourcesContent":["/* eslint-disable no-magic-numbers */\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport Field from 'Component/Field';\nimport Html from 'Component/Html';\nimport { MixType } from 'Type/Common';\nimport { AttributeType } from 'Type/ProductList';\n\nimport { STRING_ONLY_ATTRIBUTE_CODES } from './ProductAttributeValue.config';\n\nimport './ProductAttributeValue.style';\n\n/** @namespace Component/ProductAttributeValue/Component */\nexport class ProductAttributeValue extends PureComponent {\n    static propTypes = {\n        getLink: PropTypes.func,\n        onClick: PropTypes.func,\n        attribute: AttributeType.isRequired,\n        isSelected: PropTypes.bool,\n        isAvailable: PropTypes.bool,\n        mix: MixType,\n        isFormattedAsText: PropTypes.bool,\n        isProductCountVisible: PropTypes.bool\n    };\n\n    static defaultProps = {\n        isSelected: false,\n        onClick: () => {},\n        getLink: () => {},\n        mix: {},\n        isAvailable: true,\n        isFormattedAsText: false,\n        isProductCountVisible: false\n    };\n\n    clickHandler = this.clickHandler.bind(this);\n\n    getOptionLabel = this.getOptionLabel.bind(this);\n\n    getIsColorLight(hex) {\n        const color = (hex.charAt(0) === '#') ? hex.substring(1, 7) : hex;\n        const r = parseInt(color.substring(0, 2), 16); // hexToR\n        const g = parseInt(color.substring(2, 4), 16); // hexToG\n        const b = parseInt(color.substring(4, 6), 16); // hexToB\n        return ((r * 0.299) + (g * 0.587) + (b * 0.114)) > 186;\n    }\n\n    _getBooleanLabel = (label) => (+label ? __('Yes') : __('No'));\n\n    getOptionLabel(value) {\n        const {\n            attribute: {\n                attribute_options,\n                is_boolean\n            },\n            isProductCountVisible\n        } = this.props;\n\n        if (attribute_options) {\n            const optionValues = attribute_options[value];\n            if (optionValues) {\n                if (!isProductCountVisible) {\n                    return optionValues;\n                }\n\n                const { label, count = 0 } = optionValues;\n                const adjustedLabel = is_boolean ? this._getBooleanLabel(label) : label;\n\n                return {\n                    ...optionValues,\n                    label: `${adjustedLabel} (${count})`\n                };\n            }\n        }\n\n        return {};\n    }\n\n    clickHandler(e) {\n        const { onClick, attribute } = this.props;\n\n        e.preventDefault();\n        onClick(attribute);\n    }\n\n    renderTextAttribute() {\n        const { attribute: { attribute_value } } = this.props;\n        return this.renderStringValue(attribute_value);\n    }\n\n    renderBooleanAttribute() {\n        const { attribute: { attribute_value } } = this.props;\n        return this.renderStringValue(attribute_value ? __('Yes') : __('No'));\n    }\n\n    renderMultiSelectAttribute() {\n        const { attribute: { attribute_value } } = this.props;\n\n        const labelsArray = attribute_value.split(',').reduce((labels, value) => {\n            const { label } = this.getOptionLabel(value);\n            if (label) {\n                labels.push(label);\n            }\n\n            return labels;\n        }, []);\n\n        return this.renderStringValue(labelsArray.length ? labelsArray.join(', ') : __('N/A'));\n    }\n\n    renderSelectAttribute() {\n        const { attribute: { attribute_value, attribute_code } } = this.props;\n        const attributeOption = this.getOptionLabel(attribute_value);\n        const { label, swatch_data } = attributeOption;\n\n        if (!swatch_data || STRING_ONLY_ATTRIBUTE_CODES.includes(attribute_code)) {\n            return this.renderStringValue(label || __('N/A'));\n        }\n\n        const { value, type } = swatch_data;\n\n        switch (type) {\n        case '0':\n            return this.renderStringValue(value, label);\n        case '1':\n            return this.renderColorValue(value, label);\n        case '2':\n            return this.renderImageValue(value, label);\n        default:\n            return this.renderStringValue(label || __('N/A'));\n        }\n    }\n\n    renderImageAttribute() {\n        const {\n            attribute: {\n                attribute_label,\n                attribute_value\n            }\n        } = this.props;\n\n        if (!attribute_value || attribute_value === 'no_selection') {\n            return this.renderPlaceholder();\n        }\n\n        return (\n            <img\n              block=\"ProductAttributeValue\"\n              elem=\"MediaImage\"\n              src={ `/media/catalog/product${attribute_value}` }\n              alt={ attribute_label }\n            />\n        );\n    }\n\n    renderTextAreaAttribute() {\n        const {\n            attribute: { attribute_value }\n        } = this.props;\n\n        return (\n            <div\n              block=\"ProductAttributeValue\"\n              elem=\"TextArea\"\n            >\n                <Html content={ attribute_value } />\n            </div>\n        );\n    }\n\n    renderPlaceholder() {\n        return (\n            <div\n              block=\"ProductAttributeValue\"\n              elem=\"Placeholder\"\n            />\n        );\n    }\n\n    renderColorValue(color, label) {\n        const { isFormattedAsText, isSelected } = this.props;\n        const isLight = this.getIsColorLight(color);\n\n        if (isFormattedAsText) {\n            return label || __('N/A');\n        }\n\n        const style = {\n            '--option-background-color': color,\n            '--option-border-color': isLight ? '#000' : color,\n            '--option-check-mark-background': isLight ? '#000' : '#fff',\n            // stylelint-disable-next-line value-keyword-case\n            '--option-is-selected': isSelected ? 1 : 0\n        };\n\n        return (\n            <data\n              block=\"ProductAttributeValue\"\n              elem=\"Color\"\n              value={ label }\n              title={ label }\n              style={ style }\n            />\n        );\n    }\n\n    renderImageValue(img, label) {\n        const { isFormattedAsText, isSelected } = this.props;\n\n        if (isFormattedAsText) {\n            return label || __('N/A');\n        }\n\n        const style = {\n            // stylelint-disable-next-line value-keyword-case\n            '--option-is-selected': isSelected ? 1 : 0\n        };\n\n        return (\n            <>\n                <img\n                  block=\"ProductAttributeValue\"\n                  elem=\"Image\"\n                  src={ `/media/attribute/swatch${img}` }\n                  alt={ label }\n                />\n                <data\n                  block=\"ProductAttributeValue\"\n                  elem=\"Image-Overlay\"\n                  value={ label }\n                  title={ label }\n                  style={ style }\n                />\n            </>\n        );\n    }\n\n    renderDropdown(value) {\n        const { isSelected } = this.props;\n\n        return (\n            <Field\n              id={ value }\n              name={ value }\n              type=\"checkbox\"\n              label={ value }\n              value={ value }\n              mix={ {\n                  block: 'ProductAttributeValue',\n                  elem: 'Text',\n                  mods: { isSelected }\n              } }\n              checked={ isSelected }\n            />\n        );\n    }\n\n    renderStringValue(value, label) {\n        const { isFormattedAsText, isSelected } = this.props;\n        const isSwatch = label;\n\n        if (isFormattedAsText) {\n            return label || value || __('N/A');\n        }\n\n        if (!isSwatch) {\n            return this.renderDropdown(value);\n        }\n\n        return (\n            <span\n              block=\"ProductAttributeValue\"\n              elem=\"String\"\n              mods={ { isSelected } }\n              title={ label }\n            >\n                { value }\n            </span>\n        );\n    }\n\n    renderNumericAttribute() {\n        const { attribute: { attribute_value } } = this.props;\n        return this.renderStringValue(parseFloat(attribute_value).toFixed(2));\n    }\n\n    renderAttributeByType() {\n        const { attribute: { attribute_type } } = this.props;\n\n        switch (attribute_type) {\n        case 'select':\n            return this.renderSelectAttribute();\n        case 'boolean':\n            return this.renderBooleanAttribute();\n        case 'text':\n            return this.renderTextAttribute();\n        case 'multiselect':\n            return this.renderMultiSelectAttribute();\n        case 'media_image':\n            return this.renderImageAttribute();\n        case 'textarea':\n            return this.renderTextAreaAttribute();\n        case 'weight':\n            return this.renderNumericAttribute();\n        default:\n            return this.renderPlaceholder();\n        }\n    }\n\n    render() {\n        const {\n            getLink,\n            attribute,\n            isAvailable,\n            attribute: { attribute_code, attribute_value },\n            mix,\n            isFormattedAsText\n        } = this.props;\n\n        if (attribute_code && !attribute_value) {\n            return null;\n        }\n\n        const href = getLink(attribute);\n        // Invert to apply css rule without using not()\n        const isNotAvailable = !isAvailable;\n\n        if (isFormattedAsText) {\n            return (\n                <div\n                  block=\"ProductAttributeValue\"\n                  mix={ mix }\n                >\n                    { this.renderAttributeByType() }\n                </div>\n            );\n        }\n\n        return (\n            <a\n              href={ href }\n              block=\"ProductAttributeValue\"\n              mods={ { isNotAvailable } }\n              onClick={ this.clickHandler }\n              aria-hidden={ isNotAvailable }\n              mix={ mix }\n            >\n                { this.renderAttributeByType() }\n            </a>\n        );\n    }\n}\n\nexport default ProductAttributeValue;\n"]},"metadata":{},"sourceType":"module"}