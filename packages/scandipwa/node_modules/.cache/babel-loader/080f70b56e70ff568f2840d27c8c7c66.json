{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{Container}from'unstated';export var sharedTransitionInitialState={sharedElementDestination:null,sharedElement:null,destinationPosition:{},startingPosition:{}};/** @namespace Component/SharedTransition/Unstated */export var _SharedTransitionUnstated=/*#__PURE__*/function(_Extensible){_inherits(_SharedTransitionUnstated,_Extensible);var _super=_createSuper(_SharedTransitionUnstated);function _SharedTransitionUnstated(){var _this;_classCallCheck(this,_SharedTransitionUnstated);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state=sharedTransitionInitialState;_this._parseRectangle=function(val){return JSON.parse(JSON.stringify(val));};_this.cleanUpTransition=function(){_this.setState(sharedTransitionInitialState);};_this.registerSharedElementDestination=function(_ref){var current=_ref.current;if(current){_this.setState(function(_ref2){var sharedElementDestination=_ref2.sharedElementDestination;if(sharedElementDestination){return{};}return{sharedElementDestination:current,destinationPosition:_this._parseRectangle(current.getBoundingClientRect())};});}};_this.registerSharedElement=function(_ref3){var current=_ref3.current;if(current){var clone=current.cloneNode(true);_this.setState({sharedElement:clone,sharedElementDestination:null,destinationPosition:{},startingPosition:_this._parseRectangle(current.getBoundingClientRect())});}};return _this;}return _SharedTransitionUnstated;}(Extensible(Container));Object.defineProperty(_SharedTransitionUnstated,'name',{value:'SharedTransitionUnstated'});export var SharedTransitionUnstated=middleware(_SharedTransitionUnstated,\"Component/SharedTransition/Unstated\");export default new SharedTransitionUnstated();","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/SharedTransition/SharedTransition.unstated.js"],"names":["Container","sharedTransitionInitialState","sharedElementDestination","sharedElement","destinationPosition","startingPosition","SharedTransitionUnstated","state","_parseRectangle","val","JSON","parse","stringify","cleanUpTransition","setState","registerSharedElementDestination","current","getBoundingClientRect","registerSharedElement","clone","cloneNode","Object","defineProperty","_SharedTransitionUnstated","value"],"mappings":"uaAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,OAASA,SAAT,KAA0B,UAA1B,CAEA,MAAO,IAAMC,CAAAA,4BAA4B,CAAG,CACxCC,wBAAwB,CAAE,IADc,CAExCC,aAAa,CAAE,IAFyB,CAGxCC,mBAAmB,CAAE,EAHmB,CAIxCC,gBAAgB,CAAE,EAJsB,CAArC,CAOP,qDACA,UAAaC,CAAAA,yBAAb,yYACIC,KADJ,CACYN,4BADZ,OAGIO,eAHJ,CAGsB,SAACC,GAAD,QAASC,CAAAA,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeH,GAAf,CAAX,CAAT,EAHtB,OAKII,iBALJ,CAKwB,UAAM,CACtB,MAAKC,QAAL,CAAcb,4BAAd,EACH,CAPL,OASIc,gCATJ,CASuC,cAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CAChD,GAAIA,OAAJ,CAAa,CACT,MAAKF,QAAL,CAAc,eAAkC,IAA/BZ,CAAAA,wBAA+B,OAA/BA,wBAA+B,CAC5C,GAAIA,wBAAJ,CAA8B,CAC1B,MAAO,EAAP,CACH,CAED,MAAO,CACHA,wBAAwB,CAAEc,OADvB,CAEHZ,mBAAmB,CAAE,MAAKI,eAAL,CAAqBQ,OAAO,CAACC,qBAAR,EAArB,CAFlB,CAAP,CAIH,CATD,EAUH,CACJ,CAtBL,OAwBIC,qBAxBJ,CAwB4B,eAAiB,IAAdF,CAAAA,OAAc,OAAdA,OAAc,CACrC,GAAIA,OAAJ,CAAa,CACT,GAAMG,CAAAA,KAAK,CAAGH,OAAO,CAACI,SAAR,CAAkB,IAAlB,CAAd,CAEA,MAAKN,QAAL,CAAc,CACVX,aAAa,CAAEgB,KADL,CAEVjB,wBAAwB,CAAE,IAFhB,CAGVE,mBAAmB,CAAE,EAHX,CAIVC,gBAAgB,CAAE,MAAKG,eAAL,CAAqBQ,OAAO,CAACC,qBAAR,EAArB,CAJR,CAAd,EAMH,CACJ,CAnCL,yEArBAI,MAAM,CAACC,cAAP,CAAsBC,yBAAtB,CAAiD,MAAjD,CAAyD,CAAEC,KAAK,CAAE,0BAAT,CAAzD,E,gHA2DA,cAAe,IAAIlB,CAAAA,wBAAJ,EAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { Container } from 'unstated';\n\nexport const sharedTransitionInitialState = {\n    sharedElementDestination: null,\n    sharedElement: null,\n    destinationPosition: {},\n    startingPosition: {}\n};\n\n/** @namespace Component/SharedTransition/Unstated */\nexport class SharedTransitionUnstated extends Container {\n    state = sharedTransitionInitialState;\n\n    _parseRectangle = (val) => JSON.parse(JSON.stringify(val));\n\n    cleanUpTransition = () => {\n        this.setState(sharedTransitionInitialState);\n    };\n\n    registerSharedElementDestination = ({ current }) => {\n        if (current) {\n            this.setState(({ sharedElementDestination }) => {\n                if (sharedElementDestination) {\n                    return {};\n                }\n\n                return {\n                    sharedElementDestination: current,\n                    destinationPosition: this._parseRectangle(current.getBoundingClientRect())\n                };\n            });\n        }\n    };\n\n    registerSharedElement = ({ current }) => {\n        if (current) {\n            const clone = current.cloneNode(true);\n\n            this.setState({\n                sharedElement: clone,\n                sharedElementDestination: null,\n                destinationPosition: {},\n                startingPosition: this._parseRectangle(current.getBoundingClientRect())\n            });\n        }\n    };\n}\n\nexport default new SharedTransitionUnstated();\n"]},"metadata":{},"sourceType":"module"}