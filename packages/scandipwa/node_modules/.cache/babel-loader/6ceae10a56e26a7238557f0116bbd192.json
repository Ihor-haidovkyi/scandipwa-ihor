{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{createRef,PureComponent}from'react';import CarouselScrollArrow from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CarouselScrollArrow\";import CarouselScrollItem from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CarouselScrollItem\";import{ChildrenType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";import CSS from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/CSS\";import\"./CarouselScroll.style\";/** @namespace Component/CarouselScroll/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CarouselScroll=/*#__PURE__*/function(_Extensible){_inherits(_CarouselScroll,_Extensible);var _super=_createSuper(_CarouselScroll);function _CarouselScroll(){var _this;_classCallCheck(this,_CarouselScroll);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activeItemId:0};_this.itemRef=/*#__PURE__*/createRef();_this.carouselRef=/*#__PURE__*/createRef();_this.handleArrowClick=function(isNextArrow){var children=_this.props.children;var prevActiveItemId=_this.state.activeItemId;var activeItemId=prevActiveItemId+(isNextArrow?1:-1);if(children.length-1<activeItemId||activeItemId<0){return;}_this.handleChange(activeItemId);};_this.handleChange=function(nextId){var onChange=_this.props.onChange;_this.setTranslate(nextId);_this.setState({activeItemId:nextId});onChange(nextId);};_this.renderContentItem=function(child,key){var activeItemId=_this.state.activeItemId;return/*#__PURE__*/_checkBEM(React,CarouselScrollItem,{key:key,position:key,onClick:_this.handleChange,itemRef:_this.itemRef,isActive:key===activeItemId},child);};return _this;}_createClass(_CarouselScroll,[{key:\"componentDidMount\",value:function componentDidMount(){var showedItemCount=this.props.showedItemCount;var heightSize=100;var height=\"\".concat(heightSize/showedItemCount,\"%\");CSS.setVariable(this.carouselRef,'carousel-item-height',height);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevChildrenLength=prevProps.children.length;var _this$props=this.props,activeItemId=_this$props.activeItemId,childrenLength=_this$props.children.length;var prevActiveItemId=this.state.activeItemId;if(prevChildrenLength!==childrenLength){this.handleReset();return;}if(activeItemId!==null&&activeItemId!==prevActiveItemId){this.handleChange(activeItemId);}}},{key:\"getNextTranslate\",value:function getNextTranslate(nextId){var _this$props2=this.props,showedItemCount=_this$props2.showedItemCount,showedActiveItemNr=_this$props2.showedActiveItemNr,childrenLength=_this$props2.children.length;var offsetHeight=this.itemRef.current.offsetHeight;// When selected item isnt reached wanted position\nif(nextId<showedActiveItemNr-1||childrenLength<=showedItemCount){return 0;}var isEndReached=showedItemCount-showedActiveItemNr+nextId+1>childrenLength;var position=isEndReached?childrenLength-showedItemCount:nextId-(showedActiveItemNr-1);return\"\".concat(-position*offsetHeight,\"px\");}},{key:\"setTranslate\",value:function setTranslate(nextId){var _this$props3=this.props,childrenLength=_this$props3.children.length,showedItemCount=_this$props3.showedItemCount;if(childrenLength<=showedItemCount){return;}var translate=this.getNextTranslate(nextId);CSS.setVariable(this.carouselRef,'translateY',translate);}},{key:\"handleReset\",value:function handleReset(){var onChange=this.props.onChange;var activeItemId=0;CSS.setVariable(this.carouselRef,'translateY',0);onChange(activeItemId);this.setState({activeItemId:activeItemId});}},{key:\"renderArrow\",value:function renderArrow(){var isNextArrow=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var _this$props4=this.props,showArrow=_this$props4.showArrow,childrenLength=_this$props4.children.length,showedItemCount=_this$props4.showedItemCount;var activeItemId=this.state.activeItemId;if(!showArrow||childrenLength<=showedItemCount){return null;}var isDisabled=isNextArrow?activeItemId===childrenLength-1:!activeItemId;return/*#__PURE__*/_checkBEM(React,CarouselScrollArrow,{isNextArrow:isNextArrow,isDisabled:isDisabled,onClick:this.handleArrowClick});}},{key:\"renderContent\",value:function renderContent(){var children=this.props.children;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CarouselScroll\",elem:\"ContentWrapper\"},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CarouselScroll\",elem:\"Content\"},children.map(this.renderContentItem)));}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CarouselScroll\",ref:this.carouselRef},this.renderArrow(),this.renderContent(),this.renderArrow(true));}}]);return _CarouselScroll;}(Extensible(PureComponent));_CarouselScroll.defaultProps={showArrow:true,showedItemCount:1,showedActiveItemNr:2,onChange:function onChange(){},activeItemId:null};Object.defineProperty(_CarouselScroll,'name',{value:'CarouselScroll'});export var CarouselScroll=middleware(_CarouselScroll,\"Component/CarouselScroll/Component\");export default CarouselScroll;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CarouselScroll/CarouselScroll.component.js"],"names":["createRef","PureComponent","CarouselScrollArrow","CarouselScrollItem","ChildrenType","CSS","CarouselScroll","state","activeItemId","itemRef","carouselRef","handleArrowClick","isNextArrow","children","props","prevActiveItemId","length","handleChange","nextId","onChange","setTranslate","setState","renderContentItem","child","key","showedItemCount","heightSize","height","setVariable","prevProps","prevChildrenLength","childrenLength","handleReset","showedActiveItemNr","offsetHeight","current","isEndReached","position","translate","getNextTranslate","showArrow","isDisabled","map","renderArrow","renderContent","defaultProps","Object","defineProperty","_CarouselScroll","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\n\nimport CarouselScrollArrow from 'Component/CarouselScrollArrow';\nimport CarouselScrollItem from 'Component/CarouselScrollItem';\nimport { ChildrenType } from 'Type/Common';\nimport CSS from 'Util/CSS';\n\nimport './CarouselScroll.style';\n\n/** @namespace Component/CarouselScroll/Component */\nexport class CarouselScroll extends PureComponent {\n    static propTypes = {\n        children: ChildrenType.isRequired,\n        showArrow: PropTypes.bool,\n        showedItemCount: PropTypes.number,\n        showedActiveItemNr: PropTypes.number,\n        onChange: PropTypes.func,\n        activeItemId: PropTypes.number\n    };\n\n    static defaultProps = {\n        showArrow: true,\n        showedItemCount: 1,\n        showedActiveItemNr: 2,\n        onChange: () => {},\n        activeItemId: null\n    };\n\n    state = {\n        activeItemId: 0\n    };\n\n    itemRef = createRef();\n\n    carouselRef = createRef();\n\n    componentDidMount() {\n        const { showedItemCount } = this.props;\n\n        const heightSize = 100;\n        const height = `${ heightSize / showedItemCount }%`;\n\n        CSS.setVariable(this.carouselRef, 'carousel-item-height', height);\n    }\n\n    componentDidUpdate(prevProps) {\n        const { children: { length: prevChildrenLength } } = prevProps;\n        const { activeItemId, children: { length: childrenLength } } = this.props;\n        const { activeItemId: prevActiveItemId } = this.state;\n\n        if (prevChildrenLength !== childrenLength) {\n            this.handleReset();\n\n            return;\n        }\n\n        if (activeItemId !== null && activeItemId !== prevActiveItemId) {\n            this.handleChange(activeItemId);\n        }\n    }\n\n    getNextTranslate(nextId) {\n        const { showedItemCount, showedActiveItemNr, children: { length: childrenLength } } = this.props;\n        const { offsetHeight } = this.itemRef.current;\n\n        // When selected item isnt reached wanted position\n        if (nextId < (showedActiveItemNr - 1) || childrenLength <= showedItemCount) {\n            return 0;\n        }\n\n        const isEndReached = (showedItemCount - showedActiveItemNr) + nextId + 1 > childrenLength;\n\n        const position = isEndReached\n            ? childrenLength - showedItemCount\n            : nextId - (showedActiveItemNr - 1);\n\n        return `${ -position * offsetHeight }px`;\n    }\n\n    setTranslate(nextId) {\n        const { children: { length: childrenLength }, showedItemCount } = this.props;\n\n        if (childrenLength <= showedItemCount) {\n            return;\n        }\n\n        const translate = this.getNextTranslate(nextId);\n        CSS.setVariable(this.carouselRef, 'translateY', translate);\n    }\n\n    handleArrowClick = (isNextArrow) => {\n        const { children } = this.props;\n        const { activeItemId: prevActiveItemId } = this.state;\n\n        const activeItemId = prevActiveItemId + (isNextArrow ? 1 : -1);\n\n        if (children.length - 1 < activeItemId || activeItemId < 0) {\n            return;\n        }\n\n        this.handleChange(activeItemId);\n    };\n\n    handleChange = (nextId) => {\n        const { onChange } = this.props;\n\n        this.setTranslate(nextId);\n        this.setState({ activeItemId: nextId });\n        onChange(nextId);\n    };\n\n    handleReset() {\n        const { onChange } = this.props;\n\n        const activeItemId = 0;\n\n        CSS.setVariable(this.carouselRef, 'translateY', 0);\n\n        onChange(activeItemId);\n        this.setState({ activeItemId });\n    }\n\n    renderArrow(isNextArrow = false) {\n        const { showArrow, children: { length: childrenLength }, showedItemCount } = this.props;\n        const { activeItemId } = this.state;\n\n        if (!showArrow || childrenLength <= showedItemCount) {\n            return null;\n        }\n\n        const isDisabled = isNextArrow\n            ? activeItemId === childrenLength - 1\n            : !activeItemId;\n\n        return (\n            <CarouselScrollArrow\n              isNextArrow={ isNextArrow }\n              isDisabled={ isDisabled }\n              onClick={ this.handleArrowClick }\n            />\n        );\n    }\n\n    renderContentItem = (child, key) => {\n        const { activeItemId } = this.state;\n\n        return (\n            <CarouselScrollItem\n              key={ key }\n              position={ key }\n              onClick={ this.handleChange }\n              itemRef={ this.itemRef }\n              isActive={ key === activeItemId }\n            >\n                { child }\n            </CarouselScrollItem>\n        );\n    };\n\n    renderContent() {\n        const { children } = this.props;\n\n        return (\n            <div block=\"CarouselScroll\" elem=\"ContentWrapper\">\n                <div block=\"CarouselScroll\" elem=\"Content\">\n                    { children.map(this.renderContentItem) }\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div block=\"CarouselScroll\" ref={ this.carouselRef }>\n                { this.renderArrow() }\n                { this.renderContent() }\n                { this.renderArrow(true) }\n            </div>\n        );\n    }\n}\n\nexport default CarouselScroll;\n"]},"metadata":{},"sourceType":"module"}