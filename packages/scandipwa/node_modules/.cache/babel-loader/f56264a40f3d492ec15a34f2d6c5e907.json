{"ast":null,"code":"import _toConsumableArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _get from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{CUSTOMER}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/MyAccount/MyAccount.dispatcher\";import BrowserDatabase from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/BrowserDatabase\";import{Field,Fragment}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Query\";/**\n * Product List Query\n * @class ProductListQuery\n * @namespace Query/ProductList\n */export var _ProductListQuery=/*#__PURE__*/function(_Extensible){_inherits(_ProductListQuery,_Extensible);var _super=_createSuper(_ProductListQuery);function _ProductListQuery(){var _this;_classCallCheck(this,_ProductListQuery);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this._getCustomFilters=function(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return Object.entries(filters).reduce(function(acc,_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],attribute=_ref2[1];if(!attribute.length){return acc;}if(key==='price'){return _objectSpread(_objectSpread({},acc),_this._getPriceFilter(key,attribute));}return _objectSpread(_objectSpread({},acc),{},_defineProperty({},key,{in:attribute}));},{});};return _this;}_createClass(_ProductListQuery,[{key:\"__construct\",value:function __construct(){_get(_getPrototypeOf(_ProductListQuery.prototype),\"__construct\",this).call(this);this.options={};}},{key:\"getQuery\",value:function getQuery(options){if(!options){throw new Error('Missing argument `options`');}this.options=options;return this._getProductsField();}},{key:\"_getProductsField\",value:function _getProductsField(){var products=new Field('products').addFieldList(this._getProductFields());this._getProductArguments().forEach(function(arg){return products.addArgument.apply(products,_toConsumableArray(arg));});return products;}},{key:\"_getPriceFilter\",value:function _getPriceFilter(key,value){var _value$0$split=value[0].split('_'),_value$0$split2=_slicedToArray(_value$0$split,2),from=_value$0$split2[0],to=_value$0$split2[1];if(from==='*'){return _defineProperty({},key,{to:to});}if(to==='*'){return _defineProperty({},key,{from:from});}return _defineProperty({},key,{from:from,to:to});}},{key:\"_getFilterArgumentMap\",value:function _getFilterArgumentMap(){return{categoryIds:function categoryIds(id){return{category_id:{eq:id}};},categoryUrlPath:function categoryUrlPath(url){return{category_url_path:{eq:url}};},priceRange:function priceRange(_ref6){var min=_ref6.min,max=_ref6.max;var price={};if(min){price.from=min;}if(max){price.to=max;}return{price:price};},productsSkuArray:function productsSkuArray(sku){return{sku:{in:sku}};},productSKU:function productSKU(sku){return{sku:{eq:sku}};},productUrlPath:function productUrlPath(url){return{url_key:{eq:url}};},customFilters:this._getCustomFilters,newToDate:function newToDate(date){return{news_to_date:{gteq:date}};},conditions:function conditions(_conditions){return{conditions:{eq:_conditions}};},customerGroupId:function customerGroupId(id){return{customer_group_id:{eq:id}};}};}},{key:\"_getArgumentsMap\",value:function _getArgumentsMap(){var requireInfo=this.options.requireInfo;var filterArgumentMap=this._getFilterArgumentMap();return{currentPage:{type:'Int!'},pageSize:{type:'Int!',handler:function handler(option){return requireInfo?1:option;}},search:{type:'String!',handler:function handler(option){return option;}},sort:{type:'ProductAttributeSortInput!',handler:function handler(_ref7){var sortKey=_ref7.sortKey,sortDirection=_ref7.sortDirection;return _defineProperty({},sortKey,sortDirection||'ASC');}},filter:{type:'ProductAttributeFilterInput!',handler:function handler(){var initialOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};// add customer group by default to all requests\nvar _ref9=BrowserDatabase.getItem(CUSTOMER)||{},group_id=_ref9.group_id;var options=_objectSpread(_objectSpread({},initialOptions),{},{customerGroupId:group_id||'0'});var _options$customFilter=options.customFilters;_options$customFilter=_options$customFilter===void 0?{}:_options$customFilter;var category_id=_options$customFilter.category_id;/**\n                     * Remove category ID from select, if there is a custom filter\n                     * of category already selected in filtering options.\n                     */if(category_id){// eslint-disable-next-line fp/no-delete\noptions.categoryIds=undefined;}var parsedOptions=Object.entries(options).reduce(function(acc,_ref10){var _ref11=_slicedToArray(_ref10,2),key=_ref11[0],option=_ref11[1];// if there is no value, or if the key is just not present in options object\nif(!option||!filterArgumentMap[key]){return acc;}return _objectSpread(_objectSpread({},acc),filterArgumentMap[key](option));},{});return parsedOptions;}}};}},{key:\"_getProductArguments\",value:function _getProductArguments(){var args=this.options.args;var argumentMap=this._getArgumentsMap();return Object.entries(args).reduce(function(acc,_ref12){var _ref13=_slicedToArray(_ref12,2),key=_ref13[0],arg=_ref13[1];if(!arg){return acc;}var _argumentMap$key=argumentMap[key],type=_argumentMap$key.type,_argumentMap$key$hand=_argumentMap$key.handler,handler=_argumentMap$key$hand===void 0?function(option){return option;}:_argumentMap$key$hand;return[].concat(_toConsumableArray(acc),[[key,type,handler(arg)]]);},[]);}},{key:\"_getProductFields\",value:function _getProductFields(){var _this$options=this.options,requireInfo=_this$options.requireInfo,isSingleProduct=_this$options.isSingleProduct,notRequireInfo=_this$options.notRequireInfo;// do not request total count for PDP\nif(isSingleProduct||notRequireInfo){return[this._getItemsField()];}// for filters only request\nif(requireInfo){return[this._getSortField(),this._getAggregationsField()];}return['total_count',this._getItemsField(),this._getPageInfoField()];}},{key:\"_getProductInterfaceFields\",value:function _getProductInterfaceFields(isVariant){var isForLinkedProducts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _this$options2=this.options,isSingleProduct=_this$options2.isSingleProduct,_this$options2$noAttr=_this$options2.noAttributes,noAttributes=_this$options2$noAttr===void 0?false:_this$options2$noAttr,_this$options2$noVari=_this$options2.noVariants,noVariants=_this$options2$noVari===void 0?false:_this$options2$noVari,_this$options2$noVari2=_this$options2.noVariantAttributes,noVariantAttributes=_this$options2$noVari2===void 0?false:_this$options2$noVari2;var fields=['id','sku','name','type_id','stock_status',this._getPriceRangeField(),this._getProductImageField(),this._getProductThumbnailField(),this._getProductSmallField(),this._getShortDescriptionField(),'special_from_date','special_to_date',this._getTierPricesField()];// if it is normal product and we need attributes\n// or if, it is variant, but we need variant attributes or variants them-self\nif(!isVariant&&!noAttributes||isVariant&&!noVariantAttributes&&!noVariants){fields.push(this._getAttributesField(isVariant));}// to all products (non-variants)\nif(!isVariant){fields.push('url',this._getUrlRewritesFields(),this._getReviewCountField(),this._getRatingSummaryField());// if variants are not needed\nif(!noVariants){fields.push(this._getConfigurableProductFragment(),this._getBundleProductFragment());}}// prevent linked products from looping\nif(isForLinkedProducts){fields.push(this._getProductLinksField());}// additional information to PDP loads\nif(isSingleProduct){fields.push('stock_status','meta_title','meta_keyword','canonical_url','meta_description',this._getDescriptionField(),this._getMediaGalleryField(),this._getSimpleProductFragment(),this._getProductLinksField(),this._getCustomizableProductFragment());// for variants of PDP requested product\nif(!isVariant){fields.push(this._getCategoriesField(),this._getReviewsField(),this._getVirtualProductFragment(),this._getCustomizableProductFragment());}}return fields;}/**\n     * For grouped products, returns the subfields of the elements of the `items` field\n     * @returns {*[]}\n     * @private\n     */},{key:\"_getGroupedProductItemFields\",value:function _getGroupedProductItemFields(){return[this._getProductField(),'position','qty'];}/**\n     * A GroupedProduct-specific field that queries the products that are grouped under this product\n     * @returns {Field}\n     * @private\n     */},{key:\"_getGroupedProductItems\",value:function _getGroupedProductItems(){return new Fragment('GroupedProduct').addField(new Field('items').addFieldList(this._getGroupedProductItemFields()));}/**\n     * A DownloadableProduct-specific field that queries the links and samples\n     * @returns {Field}\n     * @private\n     */},{key:\"_getDownloadableProductFields\",value:function _getDownloadableProductFields(){return new Fragment('DownloadableProduct').addFieldList(this._getDownloadableProductLinks());}},{key:\"_getDownloadableProductLinks\",value:function _getDownloadableProductLinks(){return['links_title','samples_title','links_purchased_separately',this._getDownloadableProductLinkField(),this._getDownloadableProductSampleField()];}},{key:\"_getDownloadableProductLinkField\",value:function _getDownloadableProductLinkField(){return new Field('downloadable_product_links').addFieldList(this._getDownloadableProductLinkFields());}},{key:\"_getDownloadableProductLinkFields\",value:function _getDownloadableProductLinkFields(){return['sample_url','sort_order','title','id','price'];}},{key:\"_getDownloadableProductSampleField\",value:function _getDownloadableProductSampleField(){return new Field('downloadable_product_samples').addFieldList(this._getDownloadableProductSampleFields());}},{key:\"_getDownloadableProductSampleFields\",value:function _getDownloadableProductSampleFields(){return['title','sort_order','sample_url'];}},{key:\"_getItemsField\",value:function _getItemsField(){var isSingleProduct=this.options.isSingleProduct;var items=new Field('items').addFieldList(this._getProductInterfaceFields());if(isSingleProduct){items.addField(this._getGroupedProductItems());items.addField(this._getDownloadableProductFields());}return items;}},{key:\"_getProductField\",value:function _getProductField(){var isForLinkedProducts=this.options.isForLinkedProducts;return new Field('product').addFieldList(this._getProductInterfaceFields(true,isForLinkedProducts));}},{key:\"_getShortDescriptionFields\",value:function _getShortDescriptionFields(){return['html'];}},{key:\"_getShortDescriptionField\",value:function _getShortDescriptionField(){return new Field('short_description').addFieldList(this._getShortDescriptionFields());}},{key:\"_getStockItemField\",value:function _getStockItemField(){return new Field('stock_item').addFieldList(this._getStockItemFields());}},{key:\"_getStockItemFields\",value:function _getStockItemFields(){return['min_sale_qty','max_sale_qty'];}},{key:\"_getBreadcrumbFields\",value:function _getBreadcrumbFields(){return['category_id','category_name','category_level','category_url','category_is_active'];}},{key:\"_getBreadcrumbsField\",value:function _getBreadcrumbsField(){return new Field('breadcrumbs').addFieldList(this._getBreadcrumbFields());}},{key:\"_getCategoryFields\",value:function _getCategoryFields(){return['id','name','url',this._getBreadcrumbsField()];}},{key:\"_getCategoriesField\",value:function _getCategoriesField(){return new Field('categories').addFieldList(this._getCategoryFields());}},{key:\"_getMinimalPriceFields\",value:function _getMinimalPriceFields(){return[this._getDiscountField(),this._getFinalPriceField(),this._getFinalPriceExclTaxField(),this._getRegularPriceField(),this._getRegularPriceExclTaxField(),this._getDefaultPriceField(),this._getDefaultFinalPriceField(),this._getDefaultFinalPriceExclTaxField()];}},{key:\"_getMinimalPriceField\",value:function _getMinimalPriceField(){return new Field('minimum_price').addFieldList(this._getMinimalPriceFields());}},{key:\"_getMaximalPriceField\",value:function _getMaximalPriceField(){return new Field('maximum_price').addFieldList(this._getMinimalPriceFields());}},{key:\"_getPriceRangeFields\",value:function _getPriceRangeFields(){// Using an array as potentially would want to add maximum price\nreturn[this._getMinimalPriceField(),this._getMaximalPriceField()];}},{key:\"_getPriceRangeField\",value:function _getPriceRangeField(){return new Field('price_range').addFieldList(this._getPriceRangeFields());}/**\n     * @returns {[string]} an array representing the subfields of the product thumbnail\n     * @private\n     */},{key:\"_getProductThumbnailFields\",value:function _getProductThumbnailFields(){return['path','url'// 'label'\n];}},{key:\"_getProductSmallFields\",value:function _getProductSmallFields(){return this._getProductThumbnailFields();}/**\n     * Returns the field for fetching the thumbnail of a product.\n     * Not to be confused with the media thumbnail field, which has the same name but is a subfield of media_gallery_entries\n     * @returns {Field}\n     * @private\n     */},{key:\"_getProductThumbnailField\",value:function _getProductThumbnailField(){return new Field('thumbnail').addFieldList(this._getProductThumbnailFields());}},{key:\"_getProductSmallField\",value:function _getProductSmallField(){return new Field('small_image').addFieldList(this._getProductSmallFields());}},{key:\"_getProductImageField\",value:function _getProductImageField(){return new Field('image').addFieldList(this._getProductThumbnailFields());}},{key:\"_getAttributeOptionField\",value:function _getAttributeOptionField(){return['label','value',this._getSwatchDataField()];}},{key:\"_getAttributeOptionsField\",value:function _getAttributeOptionsField(){return new Field('attribute_options').addFieldList(this._getAttributeOptionField());}},{key:\"_getAttributeFields\",value:function _getAttributeFields(isVariant){return['attribute_id','attribute_value','attribute_code','attribute_type','attribute_label','attribute_group_id','attribute_group_code','attribute_group_name'].concat(_toConsumableArray(!isVariant?[this._getAttributeOptionsField()]:[]));}},{key:\"_getAttributesField\",value:function _getAttributesField(isVariant){return new Field('s_attributes').setAlias('attributes').addFieldList(this._getAttributeFields(isVariant));}},{key:\"_getMediaGalleryFields\",value:function _getMediaGalleryFields(){return['id','file','label','position','disabled','media_type','types',this._getVideoContentField(),this._getMediaThumbnailField(),this._getMediaBaseField(),this._getMediaLargeField()];}/**\n     * Returns a field querying video-specific data for a media gallery entry.\n     * @returns {Field} the video_content field\n     * @private\n     */},{key:\"_getVideoContentField\",value:function _getVideoContentField(){return new Field('video_content').addFieldList(['media_type','video_description','video_metadata','video_provider','video_title','video_url']);}/**\n     * Returns a field querying the thumbnail of a media gallery entry.\n     * Not to be confused with the product thumbnail field, which has the same name but is a direct subfield of the product\n     * @returns {Field}\n     * @private\n     */},{key:\"_getMediaThumbnailField\",value:function _getMediaThumbnailField(){return new Field('thumbnail').addField('url');}},{key:\"_getMediaBaseField\",value:function _getMediaBaseField(){return new Field('base').addField('url');}},{key:\"_getMediaLargeField\",value:function _getMediaLargeField(){return new Field('large').addField('url');}},{key:\"_getMediaGalleryField\",value:function _getMediaGalleryField(){return new Field('media_gallery_entries').addFieldList(this._getMediaGalleryFields());}},{key:\"_getProductLinksField\",value:function _getProductLinksField(){return new Field('product_links').addFieldList(this._getProductLinkFields());}},{key:\"_getDescriptionFields\",value:function _getDescriptionFields(){return['html'];}},{key:\"_getDescriptionField\",value:function _getDescriptionField(){return new Field('description').addFieldList(this._getDescriptionFields());}},{key:\"_getUrlRewritesFields\",value:function _getUrlRewritesFields(){return new Field('url_rewrites').addFieldList(['url']);}},{key:\"_getProductLinkFields\",value:function _getProductLinkFields(){return['position','link_type','linked_product_sku'];}},{key:\"_getRatingsBreakdownFields\",value:function _getRatingsBreakdownFields(){return[new Field('name').setAlias('rating_code'),'value'];}},{key:\"_getRatingsBreakdownField\",value:function _getRatingsBreakdownField(){return new Field('ratings_breakdown').setAlias('rating_votes').addFieldList(this._getRatingsBreakdownFields());}},{key:\"_getReviewItemsFields\",value:function _getReviewItemsFields(){return['average_rating','nickname',new Field('summary').setAlias('title'),new Field('text').setAlias('detail'),'created_at',this._getRatingsBreakdownField()];}},{key:\"_getReviewItemsField\",value:function _getReviewItemsField(){return new Field('items').addFieldList(this._getReviewItemsFields());}},{key:\"_getReviewsFields\",value:function _getReviewsFields(){return[this._getReviewItemsField()];}},{key:\"_getReviewsField\",value:function _getReviewsField(){return new Field('reviews')// Hard-coded pages, it will be very hard to\n// paginate using current implementation\n// eslint-disable-next-line no-magic-numbers\n.addArgument('pageSize','Int',20).addArgument('currentPage','Int',1).addFieldList(this._getReviewsFields());}},{key:\"_getReviewCountField\",value:function _getReviewCountField(){return new Field('review_count');}},{key:\"_getRatingSummaryField\",value:function _getRatingSummaryField(){return new Field('rating_summary');}},{key:\"_getBundleOptionsFields\",value:function _getBundleOptionsFields(){return['id','label','quantity','position','is_default','price','price_type','can_change_quantity',this._getProductField()];}},{key:\"_getBundleOptionsField\",value:function _getBundleOptionsField(){return new Field('options').addFieldList(this._getBundleOptionsFields());}},{key:\"_getBundleItemsFields\",value:function _getBundleItemsFields(){return['option_id','title','required','type','position','sku',this._getBundleOptionsField()];}},{key:\"_getBundleItemsField\",value:function _getBundleItemsField(){return new Field('items').addFieldList(this._getBundleItemsFields());}},{key:\"_getBundlePriceOptionSelectionFields\",value:function _getBundlePriceOptionSelectionFields(){return['selection_id','final_option_price','final_option_price_excl_tax','regular_option_price','regular_option_price_excl_tax'];}},{key:\"_getBundlePriceOptionFields\",value:function _getBundlePriceOptionFields(){return['option_id',new Field('selection_details').addFieldList(this._getBundlePriceOptionSelectionFields())];}},{key:\"_getBundlePriceOptionsField\",value:function _getBundlePriceOptionsField(){return new Field('bundle_options').addFieldList(this._getBundlePriceOptionFields());}},{key:\"_getBundleProductFragmentFields\",value:function _getBundleProductFragmentFields(){return['price_view','dynamic_price','dynamic_sku','ship_bundle_items','dynamic_weight',this._getBundleItemsField(),this._getBundlePriceOptionsField()];}},{key:\"_getValueFields\",value:function _getValueFields(){return['value_index'];}},{key:\"_getValuesField\",value:function _getValuesField(){return new Field('values').addFieldList(this._getValueFields());}},{key:\"_getConfigurableOptionFields\",value:function _getConfigurableOptionFields(){return['attribute_code',this._getValuesField()];}},{key:\"_getConfigurableOptionsField\",value:function _getConfigurableOptionsField(){return new Field('configurable_options').addFieldList(this._getConfigurableOptionFields());}},{key:\"_getVariantFields\",value:function _getVariantFields(){return[this._getProductField()];}},{key:\"_getVariantsField\",value:function _getVariantsField(){return new Field('variants').addFieldList(this._getVariantFields());}},{key:\"_getConfigurableProductFragmentFields\",value:function _getConfigurableProductFragmentFields(){return[this._getConfigurableOptionsField(),this._getVariantsField()];}},{key:\"_getCustomizableTextValueFields\",value:function _getCustomizableTextValueFields(){return['price','price_type','currency','sku','max_characters'];}},{key:\"_getCustomizableTextValueField\",value:function _getCustomizableTextValueField(alias){return new Field('value').addFieldList(this._getCustomizableTextValueFields()).setAlias(alias);}},{key:\"_getCustomizableTextFields\",value:function _getCustomizableTextFields(alias){return[this._getCustomizableTextValueField(alias),'product_sku'];}},{key:\"_getCustomizableFileValueField\",value:function _getCustomizableFileValueField(alias){return new Field('value').addFieldList(['price','price_type','currency','sku','file_extension']).setAlias(alias);}},{key:\"_getCustomizableAreaOption\",value:function _getCustomizableAreaOption(){return new Fragment('CustomizableAreaOption').addFieldList(this._getCustomizableTextFields('areaValues'));}},{key:\"_getCustomizableFieldOption\",value:function _getCustomizableFieldOption(){return new Fragment('CustomizableFieldOption').addFieldList(this._getCustomizableTextFields('fieldValues'));}},{key:\"_getCustomizableFileOption\",value:function _getCustomizableFileOption(){return new Fragment('CustomizableFileOption').addFieldList([this._getCustomizableFileValueField('fileValues')]);}},{key:\"_getCustomizableSelectionValueFields\",value:function _getCustomizableSelectionValueFields(){return['option_type_id','price','price_type','currency','sku','title','sort_order'];}},{key:\"_getCustomizableSelectionValueField\",value:function _getCustomizableSelectionValueField(alias){return new Field('value').addFieldList(this._getCustomizableSelectionValueFields()).setAlias(alias);}},{key:\"_getCustomizableCheckboxOption\",value:function _getCustomizableCheckboxOption(){return new Fragment('CustomizableCheckboxOption').addFieldList([this._getCustomizableSelectionValueField('checkboxValues')]);}},{key:\"_getCustomizableMultiOption\",value:function _getCustomizableMultiOption(){return new Fragment('CustomizableMultipleOption').addFieldList([this._getCustomizableSelectionValueField('checkboxValues')]);// same as checkbox\n}},{key:\"_getCustomizableDropdownOption\",value:function _getCustomizableDropdownOption(){return new Fragment('CustomizableDropDownOption').addFieldList([this._getCustomizableSelectionValueField('dropdownValues')]);}},{key:\"_getCustomizableRadioOption\",value:function _getCustomizableRadioOption(){return new Fragment('CustomizableRadioOption').addFieldList([this._getCustomizableSelectionValueField('dropdownValues')]);// same as dropdown\n}},{key:\"_getCustomizableProductFragmentOptionsFields\",value:function _getCustomizableProductFragmentOptionsFields(){return[this._getCustomizableDropdownOption(),this._getCustomizableRadioOption(),this._getCustomizableCheckboxOption(),this._getCustomizableMultiOption(),this._getCustomizableFieldOption(),this._getCustomizableAreaOption(),this._getCustomizableFileOption(),'title','required','sort_order','option_id'];}},{key:\"_getCustomizableProductFragmentOptionsField\",value:function _getCustomizableProductFragmentOptionsField(){return new Field('options').addFieldList(this._getCustomizableProductFragmentOptionsFields());}},{key:\"_getCustomizableProductFragment\",value:function _getCustomizableProductFragment(){return new Fragment('CustomizableProductInterface').addFieldList([this._getCustomizableProductFragmentOptionsField()]);}},{key:\"_getSimpleProductFragmentFields\",value:function _getSimpleProductFragmentFields(){return[this._getTierPricesField()];}},{key:\"_getVirtualProductFragmentFields\",value:function _getVirtualProductFragmentFields(){return[this._getTierPricesField()];}},{key:\"_getTierPricesField\",value:function _getTierPricesField(){return new Field('price_tiers').addFieldList(this._getTierPricesFields());}},{key:\"_getTierPricesFields\",value:function _getTierPricesFields(){return[this._getDiscountField(),this._getFinalPriceField(),'quantity'];}},{key:\"_getDiscountField\",value:function _getDiscountField(){return new Field('discount').addField('amount_off').addField('percent_off');}},{key:\"_getFinalPriceField\",value:function _getFinalPriceField(){return new Field('final_price').addField('currency').addField('value');}},{key:\"_getFinalPriceExclTaxField\",value:function _getFinalPriceExclTaxField(){return new Field('final_price_excl_tax').addField('currency').addField('value');}},{key:\"_getRegularPriceField\",value:function _getRegularPriceField(){return new Field('regular_price').addField('currency').addField('value');}},{key:\"_getRegularPriceExclTaxField\",value:function _getRegularPriceExclTaxField(){return new Field('regular_price_excl_tax').addField('currency').addField('value');}},{key:\"_getDefaultFinalPriceExclTaxField\",value:function _getDefaultFinalPriceExclTaxField(){return new Field('default_final_price_excl_tax').addField('currency').addField('value');}},{key:\"_getDefaultPriceField\",value:function _getDefaultPriceField(){return new Field('default_price').addField('currency').addField('value');}},{key:\"_getDefaultFinalPriceField\",value:function _getDefaultFinalPriceField(){return new Field('default_final_price').addField('currency').addField('value');}},{key:\"_getBundleProductFragment\",value:function _getBundleProductFragment(){return new Fragment('BundleProduct').addFieldList(this._getBundleProductFragmentFields());}},{key:\"_getConfigurableProductFragment\",value:function _getConfigurableProductFragment(){return new Fragment('ConfigurableProduct').addFieldList(this._getConfigurableProductFragmentFields());}},{key:\"_getSimpleProductFragment\",value:function _getSimpleProductFragment(){return new Fragment('SimpleProduct').addFieldList(this._getSimpleProductFragmentFields());}},{key:\"_getVirtualProductFragment\",value:function _getVirtualProductFragment(){return new Fragment('VirtualProduct').addFieldList(this._getVirtualProductFragmentFields());}},{key:\"_getSortOptionFields\",value:function _getSortOptionFields(){return['value','label'];}},{key:\"_getSortOptionsField\",value:function _getSortOptionsField(){return new Field('options').addFieldList(this._getSortOptionFields());}},{key:\"_getSortFields\",value:function _getSortFields(){return[this._getSortOptionsField()];}},{key:\"_getSortField\",value:function _getSortField(){return new Field('sort_fields').addFieldList(this._getSortFields());}},{key:\"_getSwatchDataFields\",value:function _getSwatchDataFields(){return['type','value'];}},{key:\"_getSwatchDataField\",value:function _getSwatchDataField(){return new Field('swatch_data').addFieldList(this._getSwatchDataFields());}},{key:\"_getAggregationsField\",value:function _getAggregationsField(){return new Field('aggregations').setAlias('filters').addFieldList(this._getAggregationsFields());}},{key:\"_getAggregationsFields\",value:function _getAggregationsFields(){return[new Field('label').setAlias('name'),new Field('attribute_code').setAlias('request_var'),new Field('is_boolean'),'position',this._getAggregationsOptionsField()];}},{key:\"_getAggregationsOptionsField\",value:function _getAggregationsOptionsField(){return new Field('options').setAlias('filter_items').addFieldList(this._getAggregationsOptionsFields());}},{key:\"_getAggregationsOptionsFields\",value:function _getAggregationsOptionsFields(){return['label','count',new Field('value').setAlias('value_string'),this._getSwatchDataField()];}},{key:\"_getPageInfoField\",value:function _getPageInfoField(){return new Field('page_info').addField('current_page').addField('total_pages');}}]);return _ProductListQuery;}(Extensible());Object.defineProperty(_ProductListQuery,'name',{value:'ProductListQuery'});export var ProductListQuery=middleware(_ProductListQuery,\"Query/ProductList\");export default new ProductListQuery();","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/query/ProductList.query.js"],"names":["CUSTOMER","BrowserDatabase","Field","Fragment","ProductListQuery","_getCustomFilters","filters","Object","entries","reduce","acc","key","attribute","length","_getPriceFilter","in","options","Error","_getProductsField","products","addFieldList","_getProductFields","_getProductArguments","forEach","arg","addArgument","value","split","from","to","categoryIds","id","category_id","eq","categoryUrlPath","url","category_url_path","priceRange","min","max","price","productsSkuArray","sku","productSKU","productUrlPath","url_key","customFilters","newToDate","date","news_to_date","gteq","conditions","customerGroupId","customer_group_id","requireInfo","filterArgumentMap","_getFilterArgumentMap","currentPage","type","pageSize","handler","option","search","sort","sortKey","sortDirection","filter","initialOptions","getItem","group_id","undefined","parsedOptions","args","argumentMap","_getArgumentsMap","isSingleProduct","notRequireInfo","_getItemsField","_getSortField","_getAggregationsField","_getPageInfoField","isVariant","isForLinkedProducts","noAttributes","noVariants","noVariantAttributes","fields","_getPriceRangeField","_getProductImageField","_getProductThumbnailField","_getProductSmallField","_getShortDescriptionField","_getTierPricesField","push","_getAttributesField","_getUrlRewritesFields","_getReviewCountField","_getRatingSummaryField","_getConfigurableProductFragment","_getBundleProductFragment","_getProductLinksField","_getDescriptionField","_getMediaGalleryField","_getSimpleProductFragment","_getCustomizableProductFragment","_getCategoriesField","_getReviewsField","_getVirtualProductFragment","_getProductField","addField","_getGroupedProductItemFields","_getDownloadableProductLinks","_getDownloadableProductLinkField","_getDownloadableProductSampleField","_getDownloadableProductLinkFields","_getDownloadableProductSampleFields","items","_getProductInterfaceFields","_getGroupedProductItems","_getDownloadableProductFields","_getShortDescriptionFields","_getStockItemFields","_getBreadcrumbFields","_getBreadcrumbsField","_getCategoryFields","_getDiscountField","_getFinalPriceField","_getFinalPriceExclTaxField","_getRegularPriceField","_getRegularPriceExclTaxField","_getDefaultPriceField","_getDefaultFinalPriceField","_getDefaultFinalPriceExclTaxField","_getMinimalPriceFields","_getMinimalPriceField","_getMaximalPriceField","_getPriceRangeFields","_getProductThumbnailFields","_getProductSmallFields","_getSwatchDataField","_getAttributeOptionField","_getAttributeOptionsField","setAlias","_getAttributeFields","_getVideoContentField","_getMediaThumbnailField","_getMediaBaseField","_getMediaLargeField","_getMediaGalleryFields","_getProductLinkFields","_getDescriptionFields","_getRatingsBreakdownFields","_getRatingsBreakdownField","_getReviewItemsFields","_getReviewItemsField","_getReviewsFields","_getBundleOptionsFields","_getBundleOptionsField","_getBundleItemsFields","_getBundlePriceOptionSelectionFields","_getBundlePriceOptionFields","_getBundleItemsField","_getBundlePriceOptionsField","_getValueFields","_getValuesField","_getConfigurableOptionFields","_getVariantFields","_getConfigurableOptionsField","_getVariantsField","alias","_getCustomizableTextValueFields","_getCustomizableTextValueField","_getCustomizableTextFields","_getCustomizableFileValueField","_getCustomizableSelectionValueFields","_getCustomizableSelectionValueField","_getCustomizableDropdownOption","_getCustomizableRadioOption","_getCustomizableCheckboxOption","_getCustomizableMultiOption","_getCustomizableFieldOption","_getCustomizableAreaOption","_getCustomizableFileOption","_getCustomizableProductFragmentOptionsFields","_getCustomizableProductFragmentOptionsField","_getTierPricesFields","_getBundleProductFragmentFields","_getConfigurableProductFragmentFields","_getSimpleProductFragmentFields","_getVirtualProductFragmentFields","_getSortOptionFields","_getSortOptionsField","_getSortFields","_getSwatchDataFields","_getAggregationsFields","_getAggregationsOptionsField","_getAggregationsOptionsFields","defineProperty","_ProductListQuery"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { CUSTOMER } from 'Store/MyAccount/MyAccount.dispatcher';\nimport BrowserDatabase from 'Util/BrowserDatabase';\nimport { Field, Fragment } from 'Util/Query';\n\n/**\n * Product List Query\n * @class ProductListQuery\n * @namespace Query/ProductList\n */\nexport class ProductListQuery {\n    __construct() {\n        super.__construct();\n        this.options = {};\n    }\n\n    getQuery(options) {\n        if (!options) {\n            throw new Error('Missing argument `options`');\n        }\n\n        this.options = options;\n\n        return this._getProductsField();\n    }\n\n    _getProductsField() {\n        const products = new Field('products')\n            .addFieldList(this._getProductFields());\n\n        this._getProductArguments().forEach((arg) => products.addArgument(...arg));\n\n        return products;\n    }\n\n    _getPriceFilter(key, value) {\n        const [from, to] = value[0].split('_');\n\n        if (from === '*') {\n            return { [key]: { to } };\n        }\n\n        if (to === '*') {\n            return { [key]: { from } };\n        }\n\n        return {\n            [key]: { from, to }\n        };\n    }\n\n    _getCustomFilters = (filters = {}) => (\n        Object.entries(filters).reduce((acc, [key, attribute]) => {\n            if (!attribute.length) {\n                return acc;\n            }\n\n            if (key === 'price') {\n                return {\n                    ...acc,\n                    ...this._getPriceFilter(key, attribute)\n                };\n            }\n\n            return {\n                ...acc,\n                [key]: { in: attribute }\n            };\n        }, {})\n    );\n\n    _getFilterArgumentMap() {\n        return {\n            categoryIds: (id) => ({ category_id: { eq: id } }),\n            categoryUrlPath: (url) => ({ category_url_path: { eq: url } }),\n            priceRange: ({ min, max }) => {\n                const price = {};\n\n                if (min) {\n                    price.from = min;\n                }\n\n                if (max) {\n                    price.to = max;\n                }\n\n                return { price };\n            },\n            productsSkuArray: (sku) => ({ sku: { in: sku } }),\n            productSKU: (sku) => ({ sku: { eq: sku } }),\n            productUrlPath: (url) => ({ url_key: { eq: url } }),\n            customFilters: this._getCustomFilters,\n            newToDate: (date) => ({ news_to_date: { gteq: date } }),\n            conditions: (conditions) => ({ conditions: { eq: conditions } }),\n            customerGroupId: (id) => ({ customer_group_id: { eq: id } })\n        };\n    }\n\n    _getArgumentsMap() {\n        const { requireInfo } = this.options;\n        const filterArgumentMap = this._getFilterArgumentMap();\n\n        return {\n            currentPage: { type: 'Int!' },\n            pageSize: {\n                type: 'Int!',\n                handler: (option) => (requireInfo ? 1 : option)\n            },\n            search: {\n                type: 'String!',\n                handler: (option) => option\n            },\n            sort: {\n                type: 'ProductAttributeSortInput!',\n                handler: ({ sortKey, sortDirection }) => ({ [sortKey]: sortDirection || 'ASC' })\n            },\n            filter: {\n                type: 'ProductAttributeFilterInput!',\n                handler: (initialOptions = {}) => {\n                    // add customer group by default to all requests\n                    const { group_id } = BrowserDatabase.getItem(CUSTOMER) || {};\n\n                    const options = {\n                        ...initialOptions,\n                        customerGroupId: group_id || '0'\n                    };\n\n                    const {\n                        customFilters: { category_id } = {}\n                    } = options;\n\n                    /**\n                     * Remove category ID from select, if there is a custom filter\n                     * of category already selected in filtering options.\n                     */\n                    if (category_id) {\n                        // eslint-disable-next-line fp/no-delete\n                        options.categoryIds = undefined;\n                    }\n\n                    const parsedOptions = Object.entries(options).reduce(\n                        (acc, [key, option]) => {\n                            // if there is no value, or if the key is just not present in options object\n                            if (!option || !filterArgumentMap[key]) {\n                                return acc;\n                            }\n\n                            return { ...acc, ...filterArgumentMap[key](option) };\n                        },\n                        {}\n                    );\n\n                    return parsedOptions;\n                }\n            }\n        };\n    }\n\n    _getProductArguments() {\n        const { args } = this.options;\n        const argumentMap = this._getArgumentsMap();\n\n        return Object.entries(args).reduce((acc, [key, arg]) => {\n            if (!arg) {\n                return acc;\n            }\n            const { type, handler = (option) => option } = argumentMap[key];\n            return [...acc, [key, type, handler(arg)]];\n        }, []);\n    }\n\n    _getProductFields() {\n        const { requireInfo, isSingleProduct, notRequireInfo } = this.options;\n\n        // do not request total count for PDP\n        if (isSingleProduct || notRequireInfo) {\n            return [\n                this._getItemsField()\n            ];\n        }\n\n        // for filters only request\n        if (requireInfo) {\n            return [\n                this._getSortField(),\n                this._getAggregationsField()\n            ];\n        }\n\n        return [\n            'total_count',\n            this._getItemsField(),\n            this._getPageInfoField()\n        ];\n    }\n\n    _getProductInterfaceFields(isVariant, isForLinkedProducts = false) {\n        const {\n            isSingleProduct,\n            noAttributes = false,\n            noVariants = false,\n            noVariantAttributes = false\n        } = this.options;\n\n        const fields = [\n            'id',\n            'sku',\n            'name',\n            'type_id',\n            'stock_status',\n            this._getPriceRangeField(),\n            this._getProductImageField(),\n            this._getProductThumbnailField(),\n            this._getProductSmallField(),\n            this._getShortDescriptionField(),\n            'special_from_date',\n            'special_to_date',\n            this._getTierPricesField()\n        ];\n\n        // if it is normal product and we need attributes\n        // or if, it is variant, but we need variant attributes or variants them-self\n        if ((!isVariant && !noAttributes) || (isVariant && !noVariantAttributes && !noVariants)) {\n            fields.push(this._getAttributesField(isVariant));\n        }\n\n        // to all products (non-variants)\n        if (!isVariant) {\n            fields.push(\n                'url',\n                this._getUrlRewritesFields(),\n                this._getReviewCountField(),\n                this._getRatingSummaryField()\n            );\n\n            // if variants are not needed\n            if (!noVariants) {\n                fields.push(\n                    this._getConfigurableProductFragment(),\n                    this._getBundleProductFragment()\n                );\n            }\n        }\n\n        // prevent linked products from looping\n        if (isForLinkedProducts) {\n            fields.push(this._getProductLinksField());\n        }\n\n        // additional information to PDP loads\n        if (isSingleProduct) {\n            fields.push(\n                'stock_status',\n                'meta_title',\n                'meta_keyword',\n                'canonical_url',\n                'meta_description',\n                this._getDescriptionField(),\n                this._getMediaGalleryField(),\n                this._getSimpleProductFragment(),\n                this._getProductLinksField(),\n                this._getCustomizableProductFragment()\n            );\n\n            // for variants of PDP requested product\n            if (!isVariant) {\n                fields.push(\n                    this._getCategoriesField(),\n                    this._getReviewsField(),\n                    this._getVirtualProductFragment(),\n                    this._getCustomizableProductFragment()\n                );\n            }\n        }\n\n        return fields;\n    }\n\n    /**\n     * For grouped products, returns the subfields of the elements of the `items` field\n     * @returns {*[]}\n     * @private\n     */\n    _getGroupedProductItemFields() {\n        return [\n            this._getProductField(),\n            'position',\n            'qty'\n        ];\n    }\n\n    /**\n     * A GroupedProduct-specific field that queries the products that are grouped under this product\n     * @returns {Field}\n     * @private\n     */\n    _getGroupedProductItems() {\n        return new Fragment('GroupedProduct').addField(\n            new Field('items')\n                .addFieldList(this._getGroupedProductItemFields())\n        );\n    }\n\n    /**\n     * A DownloadableProduct-specific field that queries the links and samples\n     * @returns {Field}\n     * @private\n     */\n    _getDownloadableProductFields() {\n        return new Fragment('DownloadableProduct')\n            .addFieldList(this._getDownloadableProductLinks());\n    }\n\n    _getDownloadableProductLinks() {\n        return [\n            'links_title',\n            'samples_title',\n            'links_purchased_separately',\n            this._getDownloadableProductLinkField(),\n            this._getDownloadableProductSampleField()\n        ];\n    }\n\n    _getDownloadableProductLinkField() {\n        return new Field('downloadable_product_links')\n            .addFieldList(this._getDownloadableProductLinkFields());\n    }\n\n    _getDownloadableProductLinkFields() {\n        return [\n            'sample_url',\n            'sort_order',\n            'title',\n            'id',\n            'price'\n        ];\n    }\n\n    _getDownloadableProductSampleField() {\n        return new Field('downloadable_product_samples')\n            .addFieldList(this._getDownloadableProductSampleFields());\n    }\n\n    _getDownloadableProductSampleFields() {\n        return [\n            'title',\n            'sort_order',\n            'sample_url'\n        ];\n    }\n\n    _getItemsField() {\n        const { isSingleProduct } = this.options;\n\n        const items = new Field('items')\n            .addFieldList(this._getProductInterfaceFields());\n\n        if (isSingleProduct) {\n            items.addField(this._getGroupedProductItems());\n            items.addField(this._getDownloadableProductFields());\n        }\n\n        return items;\n    }\n\n    _getProductField() {\n        const { isForLinkedProducts } = this.options;\n\n        return new Field('product')\n            .addFieldList(this._getProductInterfaceFields(true, isForLinkedProducts));\n    }\n\n    _getShortDescriptionFields() {\n        return [\n            'html'\n        ];\n    }\n\n    _getShortDescriptionField() {\n        return new Field('short_description')\n            .addFieldList(this._getShortDescriptionFields());\n    }\n\n    _getStockItemField() {\n        return new Field('stock_item')\n            .addFieldList(this._getStockItemFields());\n    }\n\n    _getStockItemFields() {\n        return [\n            'min_sale_qty',\n            'max_sale_qty'\n        ];\n    }\n\n    _getBreadcrumbFields() {\n        return [\n            'category_id',\n            'category_name',\n            'category_level',\n            'category_url',\n            'category_is_active'\n        ];\n    }\n\n    _getBreadcrumbsField() {\n        return new Field('breadcrumbs')\n            .addFieldList(this._getBreadcrumbFields());\n    }\n\n    _getCategoryFields() {\n        return [\n            'id',\n            'name',\n            'url',\n            this._getBreadcrumbsField()\n        ];\n    }\n\n    _getCategoriesField() {\n        return new Field('categories')\n            .addFieldList(this._getCategoryFields());\n    }\n\n    _getMinimalPriceFields() {\n        return [\n            this._getDiscountField(),\n            this._getFinalPriceField(),\n            this._getFinalPriceExclTaxField(),\n            this._getRegularPriceField(),\n            this._getRegularPriceExclTaxField(),\n            this._getDefaultPriceField(),\n            this._getDefaultFinalPriceField(),\n            this._getDefaultFinalPriceExclTaxField()\n        ];\n    }\n\n    _getMinimalPriceField() {\n        return new Field('minimum_price')\n            .addFieldList(this._getMinimalPriceFields());\n    }\n\n    _getMaximalPriceField() {\n        return new Field('maximum_price')\n            .addFieldList(this._getMinimalPriceFields());\n    }\n\n    _getPriceRangeFields() {\n        // Using an array as potentially would want to add maximum price\n        return [\n            this._getMinimalPriceField(),\n            this._getMaximalPriceField()\n        ];\n    }\n\n    _getPriceRangeField() {\n        return new Field('price_range')\n            .addFieldList(this._getPriceRangeFields());\n    }\n\n    /**\n     * @returns {[string]} an array representing the subfields of the product thumbnail\n     * @private\n     */\n    _getProductThumbnailFields() {\n        return [\n            'path',\n            'url'\n            // 'label'\n        ];\n    }\n\n    _getProductSmallFields() {\n        return this._getProductThumbnailFields();\n    }\n\n    /**\n     * Returns the field for fetching the thumbnail of a product.\n     * Not to be confused with the media thumbnail field, which has the same name but is a subfield of media_gallery_entries\n     * @returns {Field}\n     * @private\n     */\n    _getProductThumbnailField() {\n        return new Field('thumbnail')\n            .addFieldList(this._getProductThumbnailFields());\n    }\n\n    _getProductSmallField() {\n        return new Field('small_image')\n            .addFieldList(this._getProductSmallFields());\n    }\n\n    _getProductImageField() {\n        return new Field('image')\n            .addFieldList(this._getProductThumbnailFields());\n    }\n\n    _getAttributeOptionField() {\n        return [\n            'label',\n            'value',\n            this._getSwatchDataField()\n        ];\n    }\n\n    _getAttributeOptionsField() {\n        return new Field('attribute_options')\n            .addFieldList(this._getAttributeOptionField());\n    }\n\n    _getAttributeFields(isVariant) {\n        return [\n            'attribute_id',\n            'attribute_value',\n            'attribute_code',\n            'attribute_type',\n            'attribute_label',\n            'attribute_group_id',\n            'attribute_group_code',\n            'attribute_group_name',\n            ...(!isVariant\n                ? [\n                    this._getAttributeOptionsField()\n                ]\n                : []\n            )\n        ];\n    }\n\n    _getAttributesField(isVariant) {\n        return new Field('s_attributes')\n            .setAlias('attributes')\n            .addFieldList(this._getAttributeFields(isVariant));\n    }\n\n    _getMediaGalleryFields() {\n        return [\n            'id',\n            'file',\n            'label',\n            'position',\n            'disabled',\n            'media_type',\n            'types',\n            this._getVideoContentField(),\n            this._getMediaThumbnailField(),\n            this._getMediaBaseField(),\n            this._getMediaLargeField()\n        ];\n    }\n\n    /**\n     * Returns a field querying video-specific data for a media gallery entry.\n     * @returns {Field} the video_content field\n     * @private\n     */\n    _getVideoContentField() {\n        return new Field('video_content').addFieldList([\n            'media_type',\n            'video_description',\n            'video_metadata',\n            'video_provider',\n            'video_title',\n            'video_url'\n        ]);\n    }\n\n    /**\n     * Returns a field querying the thumbnail of a media gallery entry.\n     * Not to be confused with the product thumbnail field, which has the same name but is a direct subfield of the product\n     * @returns {Field}\n     * @private\n     */\n    _getMediaThumbnailField() {\n        return new Field('thumbnail').addField('url');\n    }\n\n    _getMediaBaseField() {\n        return new Field('base').addField('url');\n    }\n\n    _getMediaLargeField() {\n        return new Field('large').addField('url');\n    }\n\n    _getMediaGalleryField() {\n        return new Field('media_gallery_entries')\n            .addFieldList(this._getMediaGalleryFields());\n    }\n\n    _getProductLinksField() {\n        return new Field('product_links')\n            .addFieldList(this._getProductLinkFields());\n    }\n\n    _getDescriptionFields() {\n        return [\n            'html'\n        ];\n    }\n\n    _getDescriptionField() {\n        return new Field('description')\n            .addFieldList(this._getDescriptionFields());\n    }\n\n    _getUrlRewritesFields() {\n        return new Field('url_rewrites')\n            .addFieldList(['url']);\n    }\n\n    _getProductLinkFields() {\n        return [\n            'position',\n            'link_type',\n            'linked_product_sku'\n        ];\n    }\n\n    _getRatingsBreakdownFields() {\n        return [\n            new Field('name').setAlias('rating_code'),\n            'value'\n        ];\n    }\n\n    _getRatingsBreakdownField() {\n        return new Field('ratings_breakdown')\n            .setAlias('rating_votes')\n            .addFieldList(this._getRatingsBreakdownFields());\n    }\n\n    _getReviewItemsFields() {\n        return [\n            'average_rating',\n            'nickname',\n            new Field('summary').setAlias('title'),\n            new Field('text').setAlias('detail'),\n            'created_at',\n            this._getRatingsBreakdownField()\n        ];\n    }\n\n    _getReviewItemsField() {\n        return new Field('items')\n            .addFieldList(this._getReviewItemsFields());\n    }\n\n    _getReviewsFields() {\n        return [\n            this._getReviewItemsField()\n        ];\n    }\n\n    _getReviewsField() {\n        return new Field('reviews')\n            // Hard-coded pages, it will be very hard to\n            // paginate using current implementation\n            // eslint-disable-next-line no-magic-numbers\n            .addArgument('pageSize', 'Int', 20)\n            .addArgument('currentPage', 'Int', 1)\n            .addFieldList(this._getReviewsFields());\n    }\n\n    _getReviewCountField() {\n        return new Field('review_count');\n    }\n\n    _getRatingSummaryField() {\n        return new Field('rating_summary');\n    }\n\n    _getBundleOptionsFields() {\n        return [\n            'id',\n            'label',\n            'quantity',\n            'position',\n            'is_default',\n            'price',\n            'price_type',\n            'can_change_quantity',\n            this._getProductField()\n        ];\n    }\n\n    _getBundleOptionsField() {\n        return new Field('options')\n            .addFieldList(this._getBundleOptionsFields());\n    }\n\n    _getBundleItemsFields() {\n        return [\n            'option_id',\n            'title',\n            'required',\n            'type',\n            'position',\n            'sku',\n            this._getBundleOptionsField()\n        ];\n    }\n\n    _getBundleItemsField() {\n        return new Field('items')\n            .addFieldList(this._getBundleItemsFields());\n    }\n\n    _getBundlePriceOptionSelectionFields() {\n        return [\n            'selection_id',\n            'final_option_price',\n            'final_option_price_excl_tax',\n            'regular_option_price',\n            'regular_option_price_excl_tax'\n        ];\n    }\n\n    _getBundlePriceOptionFields() {\n        return [\n            'option_id',\n            new Field('selection_details')\n                .addFieldList(this._getBundlePriceOptionSelectionFields())\n        ];\n    }\n\n    _getBundlePriceOptionsField() {\n        return new Field('bundle_options')\n            .addFieldList(this._getBundlePriceOptionFields());\n    }\n\n    _getBundleProductFragmentFields() {\n        return [\n            'price_view',\n            'dynamic_price',\n            'dynamic_sku',\n            'ship_bundle_items',\n            'dynamic_weight',\n            this._getBundleItemsField(),\n            this._getBundlePriceOptionsField()\n        ];\n    }\n\n    _getValueFields() {\n        return [\n            'value_index'\n        ];\n    }\n\n    _getValuesField() {\n        return new Field('values')\n            .addFieldList(this._getValueFields());\n    }\n\n    _getConfigurableOptionFields() {\n        return [\n            'attribute_code',\n            this._getValuesField()\n        ];\n    }\n\n    _getConfigurableOptionsField() {\n        return new Field('configurable_options')\n            .addFieldList(this._getConfigurableOptionFields());\n    }\n\n    _getVariantFields() {\n        return [\n            this._getProductField()\n        ];\n    }\n\n    _getVariantsField() {\n        return new Field('variants')\n            .addFieldList(this._getVariantFields());\n    }\n\n    _getConfigurableProductFragmentFields() {\n        return [\n            this._getConfigurableOptionsField(),\n            this._getVariantsField()\n        ];\n    }\n\n    _getCustomizableTextValueFields() {\n        return [\n            'price',\n            'price_type',\n            'currency',\n            'sku',\n            'max_characters'\n        ];\n    }\n\n    _getCustomizableTextValueField(alias) {\n        return new Field('value')\n            .addFieldList(this._getCustomizableTextValueFields())\n            .setAlias(alias);\n    }\n\n    _getCustomizableTextFields(alias) {\n        return [\n            this._getCustomizableTextValueField(alias),\n            'product_sku'\n        ];\n    }\n\n    _getCustomizableFileValueField(alias) {\n        return new Field('value')\n            .addFieldList([\n                'price',\n                'price_type',\n                'currency',\n                'sku',\n                'file_extension'\n            ])\n            .setAlias(alias);\n    }\n\n    _getCustomizableAreaOption() {\n        return new Fragment('CustomizableAreaOption')\n            .addFieldList(this._getCustomizableTextFields('areaValues'));\n    }\n\n    _getCustomizableFieldOption() {\n        return new Fragment('CustomizableFieldOption')\n            .addFieldList(this._getCustomizableTextFields('fieldValues'));\n    }\n\n    _getCustomizableFileOption() {\n        return new Fragment('CustomizableFileOption')\n            .addFieldList([this._getCustomizableFileValueField('fileValues')]);\n    }\n\n    _getCustomizableSelectionValueFields() {\n        return [\n            'option_type_id',\n            'price',\n            'price_type',\n            'currency',\n            'sku',\n            'title',\n            'sort_order'\n        ];\n    }\n\n    _getCustomizableSelectionValueField(alias) {\n        return new Field('value')\n            .addFieldList(this._getCustomizableSelectionValueFields())\n            .setAlias(alias);\n    }\n\n    _getCustomizableCheckboxOption() {\n        return new Fragment('CustomizableCheckboxOption')\n            .addFieldList([this._getCustomizableSelectionValueField('checkboxValues')]);\n    }\n\n    _getCustomizableMultiOption() {\n        return new Fragment('CustomizableMultipleOption')\n            .addFieldList([this._getCustomizableSelectionValueField('checkboxValues')]); // same as checkbox\n    }\n\n    _getCustomizableDropdownOption() {\n        return new Fragment('CustomizableDropDownOption')\n            .addFieldList([this._getCustomizableSelectionValueField('dropdownValues')]);\n    }\n\n    _getCustomizableRadioOption() {\n        return new Fragment('CustomizableRadioOption')\n            .addFieldList([this._getCustomizableSelectionValueField('dropdownValues')]); // same as dropdown\n    }\n\n    _getCustomizableProductFragmentOptionsFields() {\n        return [\n            this._getCustomizableDropdownOption(),\n            this._getCustomizableRadioOption(),\n            this._getCustomizableCheckboxOption(),\n            this._getCustomizableMultiOption(),\n            this._getCustomizableFieldOption(),\n            this._getCustomizableAreaOption(),\n            this._getCustomizableFileOption(),\n            'title',\n            'required',\n            'sort_order',\n            'option_id'\n        ];\n    }\n\n    _getCustomizableProductFragmentOptionsField() {\n        return new Field('options')\n            .addFieldList(this._getCustomizableProductFragmentOptionsFields());\n    }\n\n    _getCustomizableProductFragment() {\n        return new Fragment('CustomizableProductInterface')\n            .addFieldList([this._getCustomizableProductFragmentOptionsField()]);\n    }\n\n    _getSimpleProductFragmentFields() {\n        return [\n            this._getTierPricesField()\n        ];\n    }\n\n    _getVirtualProductFragmentFields() {\n        return [\n            this._getTierPricesField()\n        ];\n    }\n\n    _getTierPricesField() {\n        return new Field('price_tiers')\n            .addFieldList(this._getTierPricesFields());\n    }\n\n    _getTierPricesFields() {\n        return [\n            this._getDiscountField(),\n            this._getFinalPriceField(),\n            'quantity'\n        ];\n    }\n\n    _getDiscountField() {\n        return new Field('discount')\n            .addField('amount_off')\n            .addField('percent_off');\n    }\n\n    _getFinalPriceField() {\n        return new Field('final_price')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getFinalPriceExclTaxField() {\n        return new Field('final_price_excl_tax')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getRegularPriceField() {\n        return new Field('regular_price')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getRegularPriceExclTaxField() {\n        return new Field('regular_price_excl_tax')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getDefaultFinalPriceExclTaxField() {\n        return new Field('default_final_price_excl_tax')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getDefaultPriceField() {\n        return new Field('default_price')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getDefaultFinalPriceField() {\n        return new Field('default_final_price')\n            .addField('currency')\n            .addField('value');\n    }\n\n    _getBundleProductFragment() {\n        return new Fragment('BundleProduct')\n            .addFieldList(this._getBundleProductFragmentFields());\n    }\n\n    _getConfigurableProductFragment() {\n        return new Fragment('ConfigurableProduct')\n            .addFieldList(this._getConfigurableProductFragmentFields());\n    }\n\n    _getSimpleProductFragment() {\n        return new Fragment('SimpleProduct')\n            .addFieldList(this._getSimpleProductFragmentFields());\n    }\n\n    _getVirtualProductFragment() {\n        return new Fragment('VirtualProduct')\n            .addFieldList(this._getVirtualProductFragmentFields());\n    }\n\n    _getSortOptionFields() {\n        return [\n            'value',\n            'label'\n        ];\n    }\n\n    _getSortOptionsField() {\n        return new Field('options')\n            .addFieldList(this._getSortOptionFields());\n    }\n\n    _getSortFields() {\n        return [\n            this._getSortOptionsField()\n        ];\n    }\n\n    _getSortField() {\n        return new Field('sort_fields')\n            .addFieldList(this._getSortFields());\n    }\n\n    _getSwatchDataFields() {\n        return [\n            'type',\n            'value'\n        ];\n    }\n\n    _getSwatchDataField() {\n        return new Field('swatch_data')\n            .addFieldList(this._getSwatchDataFields());\n    }\n\n    _getAggregationsField() {\n        return new Field('aggregations')\n            .setAlias('filters')\n            .addFieldList(this._getAggregationsFields());\n    }\n\n    _getAggregationsFields() {\n        return [\n            new Field('label').setAlias('name'),\n            new Field('attribute_code').setAlias('request_var'),\n            new Field('is_boolean'),\n            'position',\n            this._getAggregationsOptionsField()\n        ];\n    }\n\n    _getAggregationsOptionsField() {\n        return new Field('options')\n            .setAlias('filter_items')\n            .addFieldList(this._getAggregationsOptionsFields());\n    }\n\n    _getAggregationsOptionsFields() {\n        return [\n            'label',\n            'count',\n            new Field('value').setAlias('value_string'),\n            this._getSwatchDataField()\n        ];\n    }\n\n    _getPageInfoField() {\n        return new Field('page_info')\n            .addField('current_page')\n            .addField('total_pages');\n    }\n}\n\nexport default new ProductListQuery();\n"]},"metadata":{},"sourceType":"module"}