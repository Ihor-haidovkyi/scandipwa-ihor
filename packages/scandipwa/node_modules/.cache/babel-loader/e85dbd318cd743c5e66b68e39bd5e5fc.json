{"ast":null,"code":"import _toConsumableArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{Field}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Query\";/**\n * Order Query\n * @class OrderQuery\n * @namespace Query/Order\n */export var _OrderQuery=/*#__PURE__*/function(_Extensible){_inherits(_OrderQuery,_Extensible);var _super=_createSuper(_OrderQuery);function _OrderQuery(){_classCallCheck(this,_OrderQuery);return _super.apply(this,arguments);}_createClass(_OrderQuery,[{key:\"getOrderListQuery\",value:function getOrderListQuery(){return new Field('getOrderList').addFieldList(this._getOrderListFields(true));}},{key:\"getDownloadableQuery\",value:function getDownloadableQuery(){return new Field('customerDownloadableProducts').addField(this._getDownloadableField());}},{key:\"getOrderByIdQuery\",value:function getOrderByIdQuery(orderId){return this._getOrderByIdField(orderId);}},{key:\"linkOrderMutation\",value:function linkOrderMutation(customerEmail){return new Field('linkOrder').addArgument('customer_email','String!',customerEmail);}},{key:\"_getOrderListFields\",value:function _getOrderListFields(isList){return[this._getOrderItemsField(isList)];}},{key:\"_getOrderByIdField\",value:function _getOrderByIdField(orderId){return new Field('getOrderById').addArgument('id','Int!',orderId).addFieldList(this._getOrderItemsFields());}},{key:\"_getOrderProductsField\",value:function _getOrderProductsField(){return new Field('order_products').addFieldList(this._getOrderProductsFields());}},{key:\"_getOrderProductsFields\",value:function _getOrderProductsFields(){return[].concat(_toConsumableArray(this._getDefaultFields()),_toConsumableArray(this._prepareImageFields()),[this._prepareAttributes()]);}},{key:\"_prepareImageFields\",value:function _prepareImageFields(){return[new Field('thumbnail').addFieldList(this._prepareThumbnailFields()),new Field('small_image').addFieldList(this._prepareSmallImageFields())];}},{key:\"_prepareSmallImageFields\",value:function _prepareSmallImageFields(){return['url','label','path'];}},{key:\"_prepareThumbnailFields\",value:function _prepareThumbnailFields(){return['url','label','path'];}},{key:\"_prepareAttributes\",value:function _prepareAttributes(){return new Field('s_attributes').setAlias('attributes').addFieldList(this._prepareAttributesFields());}},{key:\"_prepareAttributesFields\",value:function _prepareAttributesFields(){return['attribute_value','attribute_code','attribute_type','attribute_label',this._getAttributeOptions()];}},{key:\"_getAttributeOptions\",value:function _getAttributeOptions(){return new Field('attribute_options').addFieldList(this._getAttributeOptionsFields());}},{key:\"_getAttributeOptionsFields\",value:function _getAttributeOptionsFields(){return['label','value',new Field('swatch_data').addField('value')];}},{key:\"_getDefaultFields\",value:function _getDefaultFields(){return['id','name',new Field('short_description').addField('html'),'sku','qty','row_total','original_price','license_key'];}},{key:\"_prepareShippingInfo\",value:function _prepareShippingInfo(){return new Field('shipping_info').addFieldList(this._prepareShippingInfoFields());}},{key:\"_prepareShippingInfoFields\",value:function _prepareShippingInfoFields(){return['shipping_method','shipping_description','shipping_incl_tax','shipping_amount','tracking_numbers',this._prepareOrderCustomerAddressInfo()];}},{key:\"_prepareOrderCustomerAddressInfo\",value:function _prepareOrderCustomerAddressInfo(){return new Field('shipping_address').addFieldList(this._prepareOrderCustomerAddressInfoFields());}},{key:\"_prepareOrderCustomerAddressInfoFields\",value:function _prepareOrderCustomerAddressInfoFields(){return['city','company','firstname','lastname','middlename','telephone','district','house_number','apartment_number','postomat_code','store_pickup_code','post_office_code','postcode','street','is_b2b','region','organizationname','organizationbin','organizationaddress','organizationiic','organizationbik'];}},{key:\"_getBaseOrderInfoField\",value:function _getBaseOrderInfoField(isList){return new Field('base_order_info').addFieldList(this._getBaseOrderInfoFields(isList));}},{key:\"_getBaseOrderInfoFields\",value:function _getBaseOrderInfoFields(isList){return['id','increment_id','created_at','status_label','grand_total','currency_code'].concat(_toConsumableArray(isList?[]:['sub_total']));}},{key:\"_getPaymentInfoField\",value:function _getPaymentInfoField(){return new Field('payment_info').addFieldList(this._getPaymentInfoFields());}},{key:\"_getPaymentInfoFields\",value:function _getPaymentInfoFields(){return['method',this._getAdditionalInformationField()];}},{key:\"_getAdditionalInformationField\",value:function _getAdditionalInformationField(){return new Field('additional_information').addFieldList(this._getAdditionalInformationFields());}},{key:\"_getAdditionalInformationFields\",value:function _getAdditionalInformationFields(){return['bank','method_title','credit_type','month',this._getCustomerInfoField()];}},{key:\"_getCustomerInfoField\",value:function _getCustomerInfoField(){return new Field('customer_info').addFieldList(this._getCustomerInfoFields());}},{key:\"_getCustomerInfoFields\",value:function _getCustomerInfoFields(){return['first_name','last_name','phone'];}},{key:\"_getOrderItemsField\",value:function _getOrderItemsField(isList){return new Field('items').addFieldList(this._getOrderItemsFields(isList));}},{key:\"_getOrderItemsFields\",value:function _getOrderItemsFields(isList){return[this._getBaseOrderInfoField(isList)].concat(_toConsumableArray(!isList?[this._getPaymentInfoField(),this._prepareShippingInfo(),this._getOrderProductsField()]:[]));}},{key:\"_getDownloadableField\",value:function _getDownloadableField(){return new Field('items').addFieldList(this._getDownloadableFields());}},{key:\"_getDownloadableFields\",value:function _getDownloadableFields(){return['order_increment_id','date','status','download_url','link_title','remaining_downloads','title'];}}]);return _OrderQuery;}(Extensible());Object.defineProperty(_OrderQuery,'name',{value:'OrderQuery'});export var OrderQuery=middleware(_OrderQuery,\"Query/Order\");export default new OrderQuery();","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/query/Order.query.js"],"names":["Field","OrderQuery","addFieldList","_getOrderListFields","addField","_getDownloadableField","orderId","_getOrderByIdField","customerEmail","addArgument","isList","_getOrderItemsField","_getOrderItemsFields","_getOrderProductsFields","_getDefaultFields","_prepareImageFields","_prepareAttributes","_prepareThumbnailFields","_prepareSmallImageFields","setAlias","_prepareAttributesFields","_getAttributeOptions","_getAttributeOptionsFields","_prepareShippingInfoFields","_prepareOrderCustomerAddressInfo","_prepareOrderCustomerAddressInfoFields","_getBaseOrderInfoFields","_getPaymentInfoFields","_getAdditionalInformationField","_getAdditionalInformationFields","_getCustomerInfoField","_getCustomerInfoFields","_getBaseOrderInfoField","_getPaymentInfoField","_prepareShippingInfo","_getOrderProductsField","_getDownloadableFields","Object","defineProperty","_OrderQuery","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport { Field } from 'Util/Query';\n\n/**\n * Order Query\n * @class OrderQuery\n * @namespace Query/Order\n */\nexport class OrderQuery {\n    getOrderListQuery() {\n        return new Field('getOrderList')\n            .addFieldList(this._getOrderListFields(true));\n    }\n\n    getDownloadableQuery() {\n        return new Field('customerDownloadableProducts')\n            .addField(this._getDownloadableField());\n    }\n\n    getOrderByIdQuery(orderId) {\n        return this._getOrderByIdField(orderId);\n    }\n\n    linkOrderMutation(customerEmail) {\n        return new Field('linkOrder')\n            .addArgument('customer_email', 'String!', customerEmail);\n    }\n\n    _getOrderListFields(isList) {\n        return [\n            this._getOrderItemsField(isList)\n        ];\n    }\n\n    _getOrderByIdField(orderId) {\n        return new Field('getOrderById')\n            .addArgument('id', 'Int!', orderId)\n            .addFieldList(this._getOrderItemsFields());\n    }\n\n    _getOrderProductsField() {\n        return new Field('order_products')\n            .addFieldList(this._getOrderProductsFields());\n    }\n\n    _getOrderProductsFields() {\n        return [\n            ...this._getDefaultFields(),\n            ...this._prepareImageFields(),\n            this._prepareAttributes()\n        ];\n    }\n\n    _prepareImageFields() {\n        return [\n            new Field('thumbnail')\n                .addFieldList(this._prepareThumbnailFields()),\n            new Field('small_image')\n                .addFieldList(this._prepareSmallImageFields())\n        ];\n    }\n\n    _prepareSmallImageFields() {\n        return [\n            'url',\n            'label',\n            'path'\n        ];\n    }\n\n    _prepareThumbnailFields() {\n        return [\n            'url',\n            'label',\n            'path'\n        ];\n    }\n\n    _prepareAttributes() {\n        return new Field('s_attributes')\n            .setAlias('attributes')\n            .addFieldList(this._prepareAttributesFields());\n    }\n\n    _prepareAttributesFields() {\n        return [\n            'attribute_value',\n            'attribute_code',\n            'attribute_type',\n            'attribute_label',\n            this._getAttributeOptions()\n        ];\n    }\n\n    _getAttributeOptions() {\n        return new Field('attribute_options')\n            .addFieldList(this._getAttributeOptionsFields());\n    }\n\n    _getAttributeOptionsFields() {\n        return [\n            'label',\n            'value',\n            new Field('swatch_data')\n                .addField('value')\n        ];\n    }\n\n    _getDefaultFields() {\n        return [\n            'id',\n            'name',\n            (new Field('short_description').addField('html')),\n            'sku',\n            'qty',\n            'row_total',\n            'original_price',\n            'license_key'\n        ];\n    }\n\n    _prepareShippingInfo() {\n        return new Field('shipping_info')\n            .addFieldList(this._prepareShippingInfoFields());\n    }\n\n    _prepareShippingInfoFields() {\n        return [\n            'shipping_method',\n            'shipping_description',\n            'shipping_incl_tax',\n            'shipping_amount',\n            'tracking_numbers',\n            this._prepareOrderCustomerAddressInfo()\n        ];\n    }\n\n    _prepareOrderCustomerAddressInfo() {\n        return new Field('shipping_address')\n            .addFieldList(this._prepareOrderCustomerAddressInfoFields());\n    }\n\n    _prepareOrderCustomerAddressInfoFields() {\n        return [\n            'city',\n            'company',\n            'firstname',\n            'lastname',\n            'middlename',\n            'telephone',\n            'district',\n            'house_number',\n            'apartment_number',\n            'postomat_code',\n            'store_pickup_code',\n            'post_office_code',\n            'postcode',\n            'street',\n            'is_b2b',\n            'region',\n            'organizationname',\n            'organizationbin',\n            'organizationaddress',\n            'organizationiic',\n            'organizationbik'\n        ];\n    }\n\n    _getBaseOrderInfoField(isList) {\n        return new Field('base_order_info')\n            .addFieldList(this._getBaseOrderInfoFields(isList));\n    }\n\n    _getBaseOrderInfoFields(isList) {\n        return [\n            'id',\n            'increment_id',\n            'created_at',\n            'status_label',\n            'grand_total',\n            'currency_code',\n            ...(isList ? [] : ['sub_total'])\n        ];\n    }\n\n    _getPaymentInfoField() {\n        return new Field('payment_info')\n            .addFieldList(this._getPaymentInfoFields());\n    }\n\n    _getPaymentInfoFields() {\n        return [\n            'method',\n            this._getAdditionalInformationField()\n        ];\n    }\n\n    _getAdditionalInformationField() {\n        return new Field('additional_information')\n            .addFieldList(this._getAdditionalInformationFields());\n    }\n\n    _getAdditionalInformationFields() {\n        return [\n            'bank',\n            'method_title',\n            'credit_type',\n            'month',\n            this._getCustomerInfoField()\n        ];\n    }\n\n    _getCustomerInfoField() {\n        return new Field('customer_info')\n            .addFieldList(this._getCustomerInfoFields());\n    }\n\n    _getCustomerInfoFields() {\n        return [\n            'first_name',\n            'last_name',\n            'phone'\n        ];\n    }\n\n    _getOrderItemsField(isList) {\n        return new Field('items')\n            .addFieldList(this._getOrderItemsFields(isList));\n    }\n\n    _getOrderItemsFields(isList) {\n        return [\n            this._getBaseOrderInfoField(isList),\n            ...(!isList ? [\n                this._getPaymentInfoField(),\n                this._prepareShippingInfo(),\n                this._getOrderProductsField()\n            ] : [])\n        ];\n    }\n\n    _getDownloadableField() {\n        return new Field('items')\n            .addFieldList(this._getDownloadableFields());\n    }\n\n    _getDownloadableFields() {\n        return [\n            'order_increment_id',\n            'date',\n            'status',\n            'download_url',\n            'link_title',\n            'remaining_downloads',\n            'title'\n        ];\n    }\n}\n\nexport default new OrderQuery();\n"]},"metadata":{},"sourceType":"module"}