{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport Form from \"/home/marketihor/scandipwa/packages/scandipwa/src/component/Form/Form.component\";\n/** @namespace Component/FormPortal/Component */\n\nexport class _FormPortal extends Extensible(Form) {\n  componentDidUpdate(prevProps) {\n    const {\n      id: prevId\n    } = prevProps;\n    const {\n      id,\n      name\n    } = this.props;\n\n    if (id !== prevId) {\n      this.unsubscribeToFormPortalCollector(prevId, name);\n      this.subscribeToFormPortalCollector(id, name);\n    }\n  }\n\n  subscribeToFormPortalCollector(id, name) {\n    if (window.formPortalCollector) {\n      window.formPortalCollector.subscribe(id, this.collectFieldsInformation, name);\n    }\n  }\n\n  unsubscribeToFormPortalCollector(id, name) {\n    if (window.formPortalCollector) {\n      window.formPortalCollector.unsubscribe(id, name);\n    }\n  }\n\n  componentWillUnmount() {\n    const {\n      id,\n      name\n    } = this.props;\n    this.unsubscribeToFormPortalCollector(id, name);\n  }\n\n  componentDidMount() {\n    const {\n      id,\n      name\n    } = this.props;\n\n    if (!id) {\n      throw new Error('Can not create a FormPortal without assignment to the Form ID!');\n    }\n\n    this.subscribeToFormPortalCollector(id, name);\n  }\n\n  render() {\n    const {\n      children\n    } = this.state;\n    return children;\n  }\n\n}\n_FormPortal.propTypes = { ...Form.propTypes,\n  name: PropTypes.string.isRequired\n};\nObject.defineProperty(_FormPortal, 'name', {\n  value: 'FormPortal'\n});\n\nexport const FormPortal = middleware(_FormPortal, \"Component/FormPortal/Component\");\nexport default FormPortal;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/FormPortal/FormPortal.component.js"],"names":["PropTypes","Form","FormPortal","componentDidUpdate","prevProps","id","prevId","name","props","unsubscribeToFormPortalCollector","subscribeToFormPortalCollector","window","formPortalCollector","subscribe","collectFieldsInformation","unsubscribe","componentWillUnmount","componentDidMount","Error","render","children","state","propTypes","string","isRequired","Object","defineProperty","_FormPortal","value"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,SAAP,MAAsB,YAAtB;AAEA,OAAOC,IAAP;AAEA;;AACA,OAAO,MAAMC,WAAN,0BAA8B;AAMjCC,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAC1B,UAAM;AAAEC,MAAAA,EAAE,EAAEC;AAAN,QAAiBF,SAAvB;AACA,UAAM;AAAEC,MAAAA,EAAF;AAAME,MAAAA;AAAN,QAAe,KAAKC,KAA1B;;AAEA,QAAIH,EAAE,KAAKC,MAAX,EAAmB;AACf,WAAKG,gCAAL,CAAsCH,MAAtC,EAA8CC,IAA9C;AACA,WAAKG,8BAAL,CAAoCL,EAApC,EAAwCE,IAAxC;AACH;AACJ;;AAEDG,EAAAA,8BAA8B,CAACL,EAAD,EAAKE,IAAL,EAAW;AACrC,QAAII,MAAM,CAACC,mBAAX,EAAgC;AAC5BD,MAAAA,MAAM,CAACC,mBAAP,CAA2BC,SAA3B,CAAqCR,EAArC,EAAyC,KAAKS,wBAA9C,EAAwEP,IAAxE;AACH;AACJ;;AAEDE,EAAAA,gCAAgC,CAACJ,EAAD,EAAKE,IAAL,EAAW;AACvC,QAAII,MAAM,CAACC,mBAAX,EAAgC;AAC5BD,MAAAA,MAAM,CAACC,mBAAP,CAA2BG,WAA3B,CAAuCV,EAAvC,EAA2CE,IAA3C;AACH;AACJ;;AAEDS,EAAAA,oBAAoB,GAAG;AACnB,UAAM;AAAEX,MAAAA,EAAF;AAAME,MAAAA;AAAN,QAAe,KAAKC,KAA1B;AACA,SAAKC,gCAAL,CAAsCJ,EAAtC,EAA0CE,IAA1C;AACH;;AAEDU,EAAAA,iBAAiB,GAAG;AAChB,UAAM;AAAEZ,MAAAA,EAAF;AAAME,MAAAA;AAAN,QAAe,KAAKC,KAA1B;;AACA,QAAI,CAACH,EAAL,EAAS;AACL,YAAM,IAAIa,KAAJ,CAAU,gEAAV,CAAN;AACH;;AACD,SAAKR,8BAAL,CAAoCL,EAApC,EAAwCE,IAAxC;AACH;;AAEDY,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEC,MAAAA;AAAF,QAAe,KAAKC,KAA1B;AACA,WAAOD,QAAP;AACH;;AA5CgC;AAAxBlB,W,CACFoB,S,GAAY,EACf,GAAGrB,IAAI,CAACqB,SADO;AAEff,EAAAA,IAAI,EAAEP,SAAS,CAACuB,MAAV,CAAiBC;AAFR,C;AAjBvBC,MAAM,CAACC,cAAP,CAAsBC,WAAtB,EAAmC,MAAnC,EAA2C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA3C;;;AA+DA,eAAe1B,UAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\n\nimport Form from 'Component/Form/Form.component';\n\n/** @namespace Component/FormPortal/Component */\nexport class FormPortal extends Form {\n    static propTypes = {\n        ...Form.propTypes,\n        name: PropTypes.string.isRequired\n    };\n\n    componentDidUpdate(prevProps) {\n        const { id: prevId } = prevProps;\n        const { id, name } = this.props;\n\n        if (id !== prevId) {\n            this.unsubscribeToFormPortalCollector(prevId, name);\n            this.subscribeToFormPortalCollector(id, name);\n        }\n    }\n\n    subscribeToFormPortalCollector(id, name) {\n        if (window.formPortalCollector) {\n            window.formPortalCollector.subscribe(id, this.collectFieldsInformation, name);\n        }\n    }\n\n    unsubscribeToFormPortalCollector(id, name) {\n        if (window.formPortalCollector) {\n            window.formPortalCollector.unsubscribe(id, name);\n        }\n    }\n\n    componentWillUnmount() {\n        const { id, name } = this.props;\n        this.unsubscribeToFormPortalCollector(id, name);\n    }\n\n    componentDidMount() {\n        const { id, name } = this.props;\n        if (!id) {\n            throw new Error('Can not create a FormPortal without assignment to the Form ID!');\n        }\n        this.subscribeToFormPortalCollector(id, name);\n    }\n\n    render() {\n        const { children } = this.state;\n        return children;\n    }\n}\n\nexport default FormPortal;\n"]},"metadata":{},"sourceType":"module"}