{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _get from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import PropTypes from'prop-types';import{connect}from'react-redux';import{CMS_PAGE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Header/Header.config\";import CmsPageQuery from\"/home/marketihor/scandipwa/packages/scandipwa/src/query/CmsPage.query\";import{toggleBreadcrumbs as _toggleBreadcrumbs}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Breadcrumbs/Breadcrumbs.action\";import{updateMeta as _updateMeta}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Meta/Meta.action\";import{changeNavigationState}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Navigation/Navigation.action\";import{TOP_NAVIGATION_TYPE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Navigation/Navigation.reducer\";import{setBigOfflineNotice as _setBigOfflineNotice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Offline/Offline.action\";import{LocationType,MatchType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";import history from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/History\";import{debounce}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";import DataContainer from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request/DataContainer\";import{appendWithStoreCode,getUrlParam}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Url\";import CmsPage from\"./CmsPage.component\";import{LOADING_TIME}from\"./CmsPage.config\";export var BreadcrumbsDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Breadcrumbs/Breadcrumbs.dispatcher\");/** @namespace Route/CmsPage/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{isOffline:state.OfflineReducer.isOffline};},\"Route/CmsPage/Container/mapStateToProps\");/** @namespace Route/CmsPage/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{updateBreadcrumbs:function updateBreadcrumbs(breadcrumbs){return BreadcrumbsDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.updateWithCmsPage(breadcrumbs,dispatch);});},setHeaderState:function setHeaderState(stateName){return dispatch(changeNavigationState(TOP_NAVIGATION_TYPE,stateName));},setBigOfflineNotice:function setBigOfflineNotice(isBig){return dispatch(_setBigOfflineNotice(isBig));},updateMeta:function updateMeta(meta){return dispatch(_updateMeta(meta));},toggleBreadcrumbs:function toggleBreadcrumbs(isActive){BreadcrumbsDispatcher.then(function(_ref2){var dispatcher=_ref2.default;return dispatcher.update([],dispatch);});dispatch(_toggleBreadcrumbs(isActive));}};},\"Route/CmsPage/Container/mapDispatchToProps\");/** @namespace Route/CmsPage/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CmsPageContainer=/*#__PURE__*/function(_Extensible){_inherits(_CmsPageContainer,_Extensible);var _super=_createSuper(_CmsPageContainer);function _CmsPageContainer(){var _this;_classCallCheck(this,_CmsPageContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={page:{},isLoading:true,isPageLoaded:false};_this.setOfflineNoticeSize=function(){var setBigOfflineNotice=_this.props.setBigOfflineNotice;var isLoading=_this.state.isLoading;if(isLoading){setBigOfflineNotice(true);}else{setBigOfflineNotice(false);}};_this.onPageLoad=function(_ref3){var page=_ref3.cmsPage;var _this$props=_this.props,pathname=_this$props.location.pathname,updateMeta=_this$props.updateMeta,setHeaderState=_this$props.setHeaderState,updateBreadcrumbs=_this$props.updateBreadcrumbs;var content_heading=page.content_heading,meta_title=page.meta_title,title=page.title,meta_description=page.meta_description,meta_keywords=page.meta_keywords;debounce(_this.setOfflineNoticeSize,LOADING_TIME)();updateBreadcrumbs(page);updateMeta({title:meta_title||title,description:meta_description,keywords:meta_keywords,canonical_url:window.location.href});if(pathname!==appendWithStoreCode('/')&&pathname!=='/'){setHeaderState({name:CMS_PAGE,title:content_heading,onBackClick:function onBackClick(){return history.goBack();}});}_this.setState({page:page,isLoading:false,isPageLoaded:true});};return _this;}_createClass(_CmsPageContainer,[{key:\"__construct\",value:function __construct(props){_get(_getPrototypeOf(_CmsPageContainer.prototype),\"__construct\",this).call(this,props);this.updateBreadcrumbs();}},{key:\"updateBreadcrumbs\",value:function updateBreadcrumbs(){var _this$props2=this.props,toggleBreadcrumbs=_this$props2.toggleBreadcrumbs,isBreadcrumbsActive=_this$props2.isBreadcrumbsActive;toggleBreadcrumbs(isBreadcrumbsActive);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this$props3=this.props,isOffline=_this$props3.isOffline,isOnlyPlaceholder=_this$props3.isOnlyPlaceholder;window.scrollTo(0,0);var isLoading=this.state.isLoading;if(isOffline&&isLoading){debounce(this.setOfflineNoticeSize,LOADING_TIME)();}if(!isOnlyPlaceholder){this.requestPage();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props4=this.props,pathname=_this$props4.location.pathname,pageIdentifiers=_this$props4.pageIdentifiers,pageIds=_this$props4.pageIds;var prevPathname=prevProps.location.pathname,prevPageIdentifiers=prevProps.pageIdentifiers,prevPageIds=prevProps.pageIds;if(pathname!==prevPathname||pageIds!==prevPageIds||pageIdentifiers!==prevPageIdentifiers){this.requestPage();}}},{key:\"getRequestQueryParams\",value:function getRequestQueryParams(){var _this$props5=this.props,location=_this$props5.location,match=_this$props5.match,identifier=_this$props5.pageIdentifiers,id=_this$props5.pageIds;if(identifier){return{identifier:identifier};}if(id!==-1){return{id:id};}var urlKey=getUrlParam(match,location);return{identifier:urlKey};}},{key:\"requestPage\",value:function requestPage(){var _this2=this;var params=this.getRequestQueryParams();var id=params.id,identifier=params.identifier;if(!id&&!identifier){return;}this.setState({isLoading:true});this.fetchData([CmsPageQuery.getQuery(params)],this.onPageLoad,function(){return _this2.setState({isLoading:false});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,CmsPage,Object.assign({},this.props,this.state));}}]);return _CmsPageContainer;}(Extensible(DataContainer));_CmsPageContainer.propTypes={match:MatchType.isRequired,setHeaderState:PropTypes.func.isRequired,updateBreadcrumbs:PropTypes.func.isRequired,setBigOfflineNotice:PropTypes.func.isRequired,location:LocationType.isRequired,toggleBreadcrumbs:PropTypes.func.isRequired,pageIds:PropTypes.number,pageIdentifiers:PropTypes.string,isOnlyPlaceholder:PropTypes.bool,isBreadcrumbsActive:PropTypes.bool};_CmsPageContainer.defaultProps={pageIds:-1,pageIdentifiers:'',isOnlyPlaceholder:false,isBreadcrumbsActive:true};Object.defineProperty(_CmsPageContainer,'name',{value:'CmsPageContainer'});export var CmsPageContainer=middleware(_CmsPageContainer,\"Route/CmsPage/Container\");export default connect(mapStateToProps,mapDispatchToProps)(CmsPageContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/route/CmsPage/CmsPage.container.js"],"names":["PropTypes","connect","CMS_PAGE","CmsPageQuery","toggleBreadcrumbs","updateMeta","changeNavigationState","TOP_NAVIGATION_TYPE","setBigOfflineNotice","LocationType","MatchType","history","debounce","DataContainer","appendWithStoreCode","getUrlParam","CmsPage","LOADING_TIME","BreadcrumbsDispatcher","mapStateToProps","state","isOffline","OfflineReducer","mapDispatchToProps","dispatch","updateBreadcrumbs","breadcrumbs","then","dispatcher","default","updateWithCmsPage","setHeaderState","stateName","isBig","meta","isActive","update","CmsPageContainer","page","isLoading","isPageLoaded","setOfflineNoticeSize","props","onPageLoad","cmsPage","pathname","location","content_heading","meta_title","title","meta_description","meta_keywords","description","keywords","canonical_url","window","href","name","onBackClick","goBack","setState","isBreadcrumbsActive","isOnlyPlaceholder","scrollTo","requestPage","prevProps","pageIdentifiers","pageIds","prevPathname","prevPageIdentifiers","prevPageIds","match","identifier","id","urlKey","params","getRequestQueryParams","fetchData","getQuery","propTypes","isRequired","func","number","string","bool","defaultProps","Object","defineProperty","_CmsPageContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { CMS_PAGE } from 'Component/Header/Header.config';\nimport CmsPageQuery from 'Query/CmsPage.query';\nimport { toggleBreadcrumbs } from 'Store/Breadcrumbs/Breadcrumbs.action';\nimport { updateMeta } from 'Store/Meta/Meta.action';\nimport { changeNavigationState } from 'Store/Navigation/Navigation.action';\nimport { TOP_NAVIGATION_TYPE } from 'Store/Navigation/Navigation.reducer';\nimport { setBigOfflineNotice } from 'Store/Offline/Offline.action';\nimport { LocationType, MatchType } from 'Type/Common';\nimport history from 'Util/History';\nimport { debounce } from 'Util/Request';\nimport DataContainer from 'Util/Request/DataContainer';\nimport { appendWithStoreCode, getUrlParam } from 'Util/Url';\n\nimport CmsPage from './CmsPage.component';\nimport { LOADING_TIME } from './CmsPage.config';\n\nexport const BreadcrumbsDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/Breadcrumbs/Breadcrumbs.dispatcher'\n);\n\n/** @namespace Route/CmsPage/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isOffline: state.OfflineReducer.isOffline\n});\n\n/** @namespace Route/CmsPage/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    updateBreadcrumbs: (breadcrumbs) => BreadcrumbsDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.updateWithCmsPage(breadcrumbs, dispatch)\n    ),\n    setHeaderState: (stateName) => dispatch(changeNavigationState(TOP_NAVIGATION_TYPE, stateName)),\n    setBigOfflineNotice: (isBig) => dispatch(setBigOfflineNotice(isBig)),\n    updateMeta: (meta) => dispatch(updateMeta(meta)),\n    toggleBreadcrumbs: (isActive) => {\n        BreadcrumbsDispatcher.then(\n            ({ default: dispatcher }) => dispatcher.update([], dispatch)\n        );\n        dispatch(toggleBreadcrumbs(isActive));\n    }\n});\n\n/** @namespace Route/CmsPage/Container */\nexport class CmsPageContainer extends DataContainer {\n    static propTypes = {\n        match: MatchType.isRequired,\n        setHeaderState: PropTypes.func.isRequired,\n        updateBreadcrumbs: PropTypes.func.isRequired,\n        setBigOfflineNotice: PropTypes.func.isRequired,\n        location: LocationType.isRequired,\n        toggleBreadcrumbs: PropTypes.func.isRequired,\n        pageIds: PropTypes.number,\n        pageIdentifiers: PropTypes.string,\n        isOnlyPlaceholder: PropTypes.bool,\n        isBreadcrumbsActive: PropTypes.bool\n    };\n\n    static defaultProps = {\n        pageIds: -1,\n        pageIdentifiers: '',\n        isOnlyPlaceholder: false,\n        isBreadcrumbsActive: true\n    };\n\n    state = {\n        page: {},\n        isLoading: true,\n        isPageLoaded: false\n    };\n\n    __construct(props) {\n        super.__construct(props);\n\n        this.updateBreadcrumbs();\n    }\n\n    updateBreadcrumbs() {\n        const {\n            toggleBreadcrumbs,\n            isBreadcrumbsActive\n        } = this.props;\n\n        toggleBreadcrumbs(isBreadcrumbsActive);\n    }\n\n    componentDidMount() {\n        const {\n            isOffline,\n            isOnlyPlaceholder\n        } = this.props;\n\n        window.scrollTo(0, 0);\n\n        const { isLoading } = this.state;\n\n        if (isOffline && isLoading) {\n            debounce(this.setOfflineNoticeSize, LOADING_TIME)();\n        }\n\n        if (!isOnlyPlaceholder) {\n            this.requestPage();\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            location: { pathname },\n            pageIdentifiers,\n            pageIds\n        } = this.props;\n\n        const {\n            location: { pathname: prevPathname },\n            pageIdentifiers: prevPageIdentifiers,\n            pageIds: prevPageIds\n        } = prevProps;\n\n        if (\n            pathname !== prevPathname\n            || pageIds !== prevPageIds\n            || pageIdentifiers !== prevPageIdentifiers\n        ) {\n            this.requestPage();\n        }\n    }\n\n    setOfflineNoticeSize = () => {\n        const { setBigOfflineNotice } = this.props;\n        const { isLoading } = this.state;\n\n        if (isLoading) {\n            setBigOfflineNotice(true);\n        } else {\n            setBigOfflineNotice(false);\n        }\n    };\n\n    onPageLoad = ({ cmsPage: page }) => {\n        const {\n            location: { pathname },\n            updateMeta,\n            setHeaderState,\n            updateBreadcrumbs\n        } = this.props;\n\n        const {\n            content_heading,\n            meta_title,\n            title,\n            meta_description,\n            meta_keywords\n        } = page;\n\n        debounce(this.setOfflineNoticeSize, LOADING_TIME)();\n\n        updateBreadcrumbs(page);\n        updateMeta({\n            title: meta_title || title,\n            description: meta_description,\n            keywords: meta_keywords,\n            canonical_url: window.location.href\n        });\n\n        if (\n            pathname !== appendWithStoreCode('/')\n            && pathname !== '/'\n        ) {\n            setHeaderState({\n                name: CMS_PAGE,\n                title: content_heading,\n                onBackClick: () => history.goBack()\n            });\n        }\n\n        this.setState({ page, isLoading: false, isPageLoaded: true });\n    };\n\n    getRequestQueryParams() {\n        const {\n            location,\n            match,\n            pageIdentifiers: identifier,\n            pageIds: id\n        } = this.props;\n\n        if (identifier) {\n            return { identifier };\n        }\n\n        if (id !== -1) {\n            return { id };\n        }\n\n        const urlKey = getUrlParam(match, location);\n\n        return {\n            identifier: urlKey\n        };\n    }\n\n    requestPage() {\n        const params = this.getRequestQueryParams();\n        const { id, identifier } = params;\n\n        if (!id && !identifier) {\n            return;\n        }\n\n        this.setState({ isLoading: true });\n\n        this.fetchData(\n            [CmsPageQuery.getQuery(params)],\n            this.onPageLoad,\n            () => this.setState({ isLoading: false })\n        );\n    }\n\n    render() {\n        return (\n            <CmsPage\n              { ...this.props }\n              { ...this.state }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CmsPageContainer);\n"]},"metadata":{},"sourceType":"module"}