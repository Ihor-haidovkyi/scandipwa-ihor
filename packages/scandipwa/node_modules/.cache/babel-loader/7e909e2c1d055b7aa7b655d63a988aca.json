{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CartCoupon from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CartCoupon\";import CartItem from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CartItem\";import CheckoutOrderSummaryPriceLine from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutOrderSummaryPriceLine\";import ExpandableContent from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ExpandableContent\";import{BILLING_STEP,SHIPPING_STEP}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/Checkout/Checkout.config\";import{TotalsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/MiniCart\";import\"./CheckoutOrderSummary.style\";/**\n * Checkout Order Summary component\n * @namespace Component/CheckoutOrderSummary/Component\n */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CheckoutOrderSummary=/*#__PURE__*/function(_Extensible){_inherits(_CheckoutOrderSummary,_Extensible);var _super=_createSuper(_CheckoutOrderSummary);function _CheckoutOrderSummary(){var _this;_classCallCheck(this,_CheckoutOrderSummary);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.renderItem=function(item){var quote_currency_code=_this.props.totals.quote_currency_code;var item_id=item.item_id;return/*#__PURE__*/_checkBEM(React,CartItem,{key:item_id,item:item,currency_code:quote_currency_code});};return _this;}_createClass(_CheckoutOrderSummary,[{key:\"renderPriceLine\",value:function renderPriceLine(price,title,mods){if(!price){return null;}var quote_currency_code=this.props.totals.quote_currency_code;return/*#__PURE__*/_checkBEM(React,CheckoutOrderSummaryPriceLine,{price:price,currency:quote_currency_code,title:title,mods:mods});}},{key:\"renderDiscount\",value:function renderDiscount(){var _this$props$totals=this.props.totals,applied_rule_ids=_this$props$totals.applied_rule_ids,discount_amount=_this$props$totals.discount_amount,coupon_code=_this$props$totals.coupon_code;if(!applied_rule_ids){return null;}if(!coupon_code){return this.renderPriceLine(-Math.abs(discount_amount),__('Discount %s:',''));}return this.renderPriceLine(-Math.abs(discount_amount),__('Discount/Coupon %s:',coupon_code.toUpperCase()));}},{key:\"renderItems\",value:function renderItems(){var _this$props$totals$it=this.props.totals.items,items=_this$props$totals$it===void 0?[]:_this$props$totals$it;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutOrderSummary\",elem:\"OrderItems\"},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutOrderSummary\",elem:\"CartItemList\"},items.map(this.renderItem)));}},{key:\"renderHeading\",value:function renderHeading(){var items_qty=this.props.totals.items_qty;return/*#__PURE__*/_checkBEM(React,\"h3\",{block:\"CheckoutOrderSummary\",elem:\"Header\",mix:{block:'CheckoutPage',elem:'Heading',mods:{hasDivider:true}}},/*#__PURE__*/_checkBEM(React,\"span\",null,__('Order Summary')),/*#__PURE__*/_checkBEM(React,\"p\",{block:\"CheckoutOrderSummary\",elem:\"ItemsInCart\"},__('%s Item(s) In Cart',items_qty)));}},{key:\"renderSubTotal\",value:function renderSubTotal(){var _this$props=this.props,quote_currency_code=_this$props.totals.quote_currency_code,cartSubtotal=_this$props.cartSubtotal,cartSubtotalSubPrice=_this$props.cartSubtotalSubPrice;var title=__('Cart Subtotal');if(cartSubtotalSubPrice){return/*#__PURE__*/_checkBEM(React,CheckoutOrderSummaryPriceLine,{price:cartSubtotal,currency:quote_currency_code,title:title,subPrice:cartSubtotalSubPrice});}return this.renderPriceLine(cartSubtotal,title);}},{key:\"getShippingLabel\",value:function getShippingLabel(){var checkoutStep=this.props.checkoutStep;if(checkoutStep===BILLING_STEP){return __('Shipping');}return __('Estimated Shipping');}},{key:\"renderShipping\",value:function renderShipping(){var _this$props2=this.props,quote_currency_code=_this$props2.totals.quote_currency_code,cartShippingPrice=_this$props2.cartShippingPrice,cartShippingSubPrice=_this$props2.cartShippingSubPrice;var title=this.getShippingLabel();var mods={divider:true};if(!cartShippingSubPrice){return this.renderPriceLine(cartShippingPrice,title,mods);}return/*#__PURE__*/_checkBEM(React,CheckoutOrderSummaryPriceLine,{price:cartShippingPrice,currency:quote_currency_code,title:title,mods:mods,subPrice:cartShippingSubPrice});}},{key:\"renderOrderTotal\",value:function renderOrderTotal(){var _this$props3=this.props,_this$props3$totals=_this$props3.totals,grand_total=_this$props3$totals.grand_total,quote_currency_code=_this$props3$totals.quote_currency_code,cartTotalSubPrice=_this$props3.cartTotalSubPrice;var title=__('Order total');if(cartTotalSubPrice){return/*#__PURE__*/_checkBEM(React,CheckoutOrderSummaryPriceLine,{price:grand_total,currency:quote_currency_code,title:title,subPrice:cartTotalSubPrice});}return this.renderPriceLine(grand_total,title);}},{key:\"renderTaxFullSummary\",value:function renderTaxFullSummary(){var _this$props4=this.props,_this$props4$totals$a=_this$props4.totals.applied_taxes,applied_taxes=_this$props4$totals$a===void 0?[]:_this$props4$totals$a,_this$props4$cartDisp=_this$props4.cartDisplayConfig;_this$props4$cartDisp=_this$props4$cartDisp===void 0?{}:_this$props4$cartDisp;var display_full_tax_summary=_this$props4$cartDisp.display_full_tax_summary;if(!display_full_tax_summary||!applied_taxes.length){return null;}return applied_taxes.map(function(_ref){var rates=_ref.rates;return rates;}).reduce(function(rates,rate){return rates.concat(rate);},[]).map(function(_ref2,i){var percent=_ref2.percent,title=_ref2.title;return/*#__PURE__*/ (// eslint-disable-next-line react/no-array-index-key\n_checkBEM(React,\"div\",{block:\"CheckoutOrderSummary\",elem:\"AppendedContent\",key:i},\"\".concat(title,\" (\").concat(percent,\"%)\")));});}},{key:\"renderTax\",value:function renderTax(){var _this$props5=this.props,_this$props5$totals=_this$props5.totals,_this$props5$totals$t=_this$props5$totals.tax_amount,tax_amount=_this$props5$totals$t===void 0?0:_this$props5$totals$t,quote_currency_code=_this$props5$totals.quote_currency_code,_this$props5$cartDisp=_this$props5.cartDisplayConfig;_this$props5$cartDisp=_this$props5$cartDisp===void 0?{}:_this$props5$cartDisp;var display_full_tax_summary=_this$props5$cartDisp.display_full_tax_summary,display_zero_tax_subtotal=_this$props5$cartDisp.display_zero_tax_subtotal;if(!tax_amount&&!display_zero_tax_subtotal){return null;}return/*#__PURE__*/_checkBEM(React,CheckoutOrderSummaryPriceLine,{price:tax_amount.toFixed(2)// since we display tax even if value is 0\n,currency:quote_currency_code,title:__('Tax'),mods:{withAppendedContent:display_full_tax_summary}},this.renderTaxFullSummary());}},{key:\"renderTotals\",value:function renderTotals(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutOrderSummary\",elem:\"OrderTotals\"},/*#__PURE__*/_checkBEM(React,\"ul\",null,this.renderSubTotal(),this.renderShipping(),this.renderDiscount(),this.renderTax(),this.renderOrderTotal()));}},{key:\"renderCoupon\",value:function renderCoupon(){var _this$props6=this.props,couponCode=_this$props6.couponCode,onCouponCodeUpdate=_this$props6.onCouponCodeUpdate,checkoutStep=_this$props6.checkoutStep;if(checkoutStep===SHIPPING_STEP){return null;}return/*#__PURE__*/_checkBEM(React,CartCoupon,{couponCode:couponCode,mix:{block:'CheckoutOrderSummary',elem:'Coupon'},title:__('Have a discount code?'),onCouponCodeUpdate:onCouponCodeUpdate});}},{key:\"renderCmsBlock\",value:function renderCmsBlock(){var renderCmsBlock=this.props.renderCmsBlock;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutOrderSummary\",elem:\"CmsBlock\"},renderCmsBlock());}},{key:\"renderExpandableContent\",value:function renderExpandableContent(){return/*#__PURE__*/_checkBEM(React,ExpandableContent,{heading:__('Order summary'),mix:{block:'CheckoutOrderSummary',elem:'ExpandableContent'}},this.renderItems(),this.renderCmsBlock(),this.renderCoupon(),this.renderTotals());}},{key:\"renderContent\",value:function renderContent(){var isExpandable=this.props.isExpandable;if(isExpandable){return this.renderExpandableContent();}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,this.renderHeading(),this.renderItems(),this.renderTotals());}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,\"article\",{block:\"CheckoutOrderSummary\",\"aria-label\":\"Order Summary\"},this.renderContent());}}]);return _CheckoutOrderSummary;}(Extensible(PureComponent));_CheckoutOrderSummary.defaultProps={totals:{},couponCode:'',renderCmsBlock:function renderCmsBlock(){},isExpandable:false,cartSubtotal:0,cartSubtotalSubPrice:null,cartShippingPrice:0,cartShippingSubPrice:null,cartTotalSubPrice:null,onCouponCodeUpdate:function onCouponCodeUpdate(){}};Object.defineProperty(_CheckoutOrderSummary,'name',{value:'CheckoutOrderSummary'});export var CheckoutOrderSummary=middleware(_CheckoutOrderSummary,\"Component/CheckoutOrderSummary/Component\");export default CheckoutOrderSummary;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutOrderSummary/CheckoutOrderSummary.component.js"],"names":["PureComponent","CartCoupon","CartItem","CheckoutOrderSummaryPriceLine","ExpandableContent","BILLING_STEP","SHIPPING_STEP","TotalsType","CheckoutOrderSummary","renderItem","item","quote_currency_code","props","totals","item_id","price","title","mods","applied_rule_ids","discount_amount","coupon_code","renderPriceLine","Math","abs","__","toUpperCase","items","map","items_qty","block","elem","hasDivider","cartSubtotal","cartSubtotalSubPrice","checkoutStep","cartShippingPrice","cartShippingSubPrice","getShippingLabel","divider","grand_total","cartTotalSubPrice","applied_taxes","cartDisplayConfig","display_full_tax_summary","length","rates","reduce","rate","concat","i","percent","tax_amount","display_zero_tax_subtotal","toFixed","withAppendedContent","renderTaxFullSummary","renderSubTotal","renderShipping","renderDiscount","renderTax","renderOrderTotal","couponCode","onCouponCodeUpdate","renderCmsBlock","renderItems","renderCoupon","renderTotals","isExpandable","renderExpandableContent","renderHeading","renderContent","defaultProps","Object","defineProperty","_CheckoutOrderSummary","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CartCoupon from 'Component/CartCoupon';\nimport CartItem from 'Component/CartItem';\nimport CheckoutOrderSummaryPriceLine from 'Component/CheckoutOrderSummaryPriceLine';\nimport ExpandableContent from 'Component/ExpandableContent';\nimport { BILLING_STEP, SHIPPING_STEP } from 'Route/Checkout/Checkout.config';\nimport { TotalsType } from 'Type/MiniCart';\n\nimport './CheckoutOrderSummary.style';\n\n/**\n * Checkout Order Summary component\n * @namespace Component/CheckoutOrderSummary/Component\n */\nexport class CheckoutOrderSummary extends PureComponent {\n    static propTypes = {\n        totals: TotalsType,\n        checkoutStep: PropTypes.string.isRequired,\n        couponCode: PropTypes.string,\n        renderCmsBlock: PropTypes.func,\n        isExpandable: PropTypes.bool,\n        cartDisplayConfig: PropTypes.object.isRequired,\n        cartSubtotal: PropTypes.number,\n        cartSubtotalSubPrice: PropTypes.number,\n        cartShippingPrice: PropTypes.number,\n        cartShippingSubPrice: PropTypes.number,\n        cartTotalSubPrice: PropTypes.number,\n        onCouponCodeUpdate: PropTypes.func\n    };\n\n    static defaultProps = {\n        totals: {},\n        couponCode: '',\n        renderCmsBlock: () => {},\n        isExpandable: false,\n        cartSubtotal: 0,\n        cartSubtotalSubPrice: null,\n        cartShippingPrice: 0,\n        cartShippingSubPrice: null,\n        cartTotalSubPrice: null,\n        onCouponCodeUpdate: () => {}\n    };\n\n    renderPriceLine(price, title, mods) {\n        if (!price) {\n            return null;\n        }\n\n        const { totals: { quote_currency_code } } = this.props;\n\n        return (\n            <CheckoutOrderSummaryPriceLine\n              price={ price }\n              currency={ quote_currency_code }\n              title={ title }\n              mods={ mods }\n            />\n        );\n    }\n\n    renderItem = (item) => {\n        const {\n            totals: {\n                quote_currency_code\n            }\n        } = this.props;\n\n        const { item_id } = item;\n\n        return (\n            <CartItem\n              key={ item_id }\n              item={ item }\n              currency_code={ quote_currency_code }\n            />\n        );\n    };\n\n    renderDiscount() {\n        const {\n            totals: {\n                applied_rule_ids,\n                discount_amount,\n                coupon_code\n            }\n        } = this.props;\n\n        if (!applied_rule_ids) {\n            return null;\n        }\n\n        if (!coupon_code) {\n            return this.renderPriceLine(\n                -Math.abs(discount_amount),\n                __('Discount %s:', '')\n            );\n        }\n\n        return this.renderPriceLine(\n            -Math.abs(discount_amount),\n            __('Discount/Coupon %s:', coupon_code.toUpperCase())\n        );\n    }\n\n    renderItems() {\n        const { totals: { items = [] } } = this.props;\n\n        return (\n            <div block=\"CheckoutOrderSummary\" elem=\"OrderItems\">\n                <div block=\"CheckoutOrderSummary\" elem=\"CartItemList\">\n                    { items.map(this.renderItem) }\n                </div>\n            </div>\n        );\n    }\n\n    renderHeading() {\n        const { totals: { items_qty } } = this.props;\n\n        return (\n            <h3\n              block=\"CheckoutOrderSummary\"\n              elem=\"Header\"\n              mix={ { block: 'CheckoutPage', elem: 'Heading', mods: { hasDivider: true } } }\n            >\n                <span>{ __('Order Summary') }</span>\n                <p block=\"CheckoutOrderSummary\" elem=\"ItemsInCart\">{ __('%s Item(s) In Cart', items_qty) }</p>\n            </h3>\n        );\n    }\n\n    renderSubTotal() {\n        const {\n            totals: {\n                quote_currency_code\n            },\n            cartSubtotal,\n            cartSubtotalSubPrice\n        } = this.props;\n        const title = __('Cart Subtotal');\n\n        if (cartSubtotalSubPrice) {\n            return (\n                <CheckoutOrderSummaryPriceLine\n                  price={ cartSubtotal }\n                  currency={ quote_currency_code }\n                  title={ title }\n                  subPrice={ cartSubtotalSubPrice }\n                />\n            );\n        }\n\n        return this.renderPriceLine(cartSubtotal, title);\n    }\n\n    getShippingLabel() {\n        const { checkoutStep } = this.props;\n\n        if (checkoutStep === BILLING_STEP) {\n            return __('Shipping');\n        }\n\n        return __('Estimated Shipping');\n    }\n\n    renderShipping() {\n        const {\n            totals: {\n                quote_currency_code\n            },\n            cartShippingPrice,\n            cartShippingSubPrice\n        } = this.props;\n        const title = this.getShippingLabel();\n        const mods = { divider: true };\n\n        if (!cartShippingSubPrice) {\n            return this.renderPriceLine(cartShippingPrice, title, mods);\n        }\n\n        return (\n            <CheckoutOrderSummaryPriceLine\n              price={ cartShippingPrice }\n              currency={ quote_currency_code }\n              title={ title }\n              mods={ mods }\n              subPrice={ cartShippingSubPrice }\n            />\n        );\n    }\n\n    renderOrderTotal() {\n        const {\n            totals: {\n                grand_total,\n                quote_currency_code\n            },\n            cartTotalSubPrice\n        } = this.props;\n        const title = __('Order total');\n\n        if (cartTotalSubPrice) {\n            return (\n                <CheckoutOrderSummaryPriceLine\n                  price={ grand_total }\n                  currency={ quote_currency_code }\n                  title={ title }\n                  subPrice={ cartTotalSubPrice }\n                />\n            );\n        }\n\n        return this.renderPriceLine(grand_total, title);\n    }\n\n    renderTaxFullSummary() {\n        const {\n            totals: {\n                applied_taxes = []\n            },\n            cartDisplayConfig: {\n                display_full_tax_summary\n            } = {}\n        } = this.props;\n\n        if (!display_full_tax_summary || !applied_taxes.length) {\n            return null;\n        }\n\n        return applied_taxes\n            .map(({ rates }) => rates)\n            .reduce((rates, rate) => rates.concat(rate), [])\n            .map(({ percent, title }, i) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <div block=\"CheckoutOrderSummary\" elem=\"AppendedContent\" key={ i }>\n                    { `${title} (${percent}%)` }\n                </div>\n            ));\n    }\n\n    renderTax() {\n        const {\n            totals: {\n                tax_amount = 0,\n                quote_currency_code\n            },\n            cartDisplayConfig: {\n                display_full_tax_summary,\n                display_zero_tax_subtotal\n            } = {}\n        } = this.props;\n\n        if (!tax_amount && !display_zero_tax_subtotal) {\n            return null;\n        }\n\n        return (\n            <CheckoutOrderSummaryPriceLine\n              price={ tax_amount.toFixed(2) } // since we display tax even if value is 0\n              currency={ quote_currency_code }\n              title={ __('Tax') }\n              mods={ { withAppendedContent: display_full_tax_summary } }\n            >\n                { this.renderTaxFullSummary() }\n            </CheckoutOrderSummaryPriceLine>\n        );\n    }\n\n    renderTotals() {\n        return (\n            <div block=\"CheckoutOrderSummary\" elem=\"OrderTotals\">\n                <ul>\n                    { this.renderSubTotal() }\n                    { this.renderShipping() }\n                    { this.renderDiscount() }\n                    { this.renderTax() }\n                    { this.renderOrderTotal() }\n                </ul>\n            </div>\n        );\n    }\n\n    renderCoupon() {\n        const { couponCode, onCouponCodeUpdate, checkoutStep } = this.props;\n\n        if (checkoutStep === SHIPPING_STEP) {\n            return null;\n        }\n\n        return (\n            <CartCoupon\n              couponCode={ couponCode }\n              mix={ { block: 'CheckoutOrderSummary', elem: 'Coupon' } }\n              title={ __('Have a discount code?') }\n              onCouponCodeUpdate={ onCouponCodeUpdate }\n            />\n        );\n    }\n\n    renderCmsBlock() {\n        const { renderCmsBlock } = this.props;\n\n        return (\n            <div\n              block=\"CheckoutOrderSummary\"\n              elem=\"CmsBlock\"\n            >\n                { renderCmsBlock() }\n            </div>\n        );\n    }\n\n    renderExpandableContent() {\n        return (\n            <ExpandableContent\n              heading={ __('Order summary') }\n              mix={ { block: 'CheckoutOrderSummary', elem: 'ExpandableContent' } }\n            >\n                { this.renderItems() }\n                { this.renderCmsBlock() }\n                { this.renderCoupon() }\n                { this.renderTotals() }\n            </ExpandableContent>\n        );\n    }\n\n    renderContent() {\n        const { isExpandable } = this.props;\n\n        if (isExpandable) {\n            return this.renderExpandableContent();\n        }\n\n        return (\n            <>\n                { this.renderHeading() }\n                { this.renderItems() }\n                { this.renderTotals() }\n            </>\n        );\n    }\n\n    render() {\n        return (\n            <article block=\"CheckoutOrderSummary\" aria-label=\"Order Summary\">\n                { this.renderContent() }\n            </article>\n        );\n    }\n}\n\nexport default CheckoutOrderSummary;\n"]},"metadata":{},"sourceType":"module"}