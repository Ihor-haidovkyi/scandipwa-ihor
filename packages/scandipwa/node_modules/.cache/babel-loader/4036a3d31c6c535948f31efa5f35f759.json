{"ast":null,"code":"import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable no-console */ /**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CheckoutPayment from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutPayment\";import Klarna from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Klarna\";import NotSupportedPayment from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/NotSupportedPayment\";import{PurchaseOrder}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/PurchaseOrder/PurchaseOrder.component\";import{BILLING_STEP}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/Checkout/Checkout.config\";import{paymentMethodsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Checkout\";import{KLARNA,PURCHASE_ORDER}from\"./CheckoutPayments.config\";import\"./CheckoutPayments.style\";/** @namespace Component/CheckoutPayments/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CheckoutPayments=/*#__PURE__*/function(_Extensible){_inherits(_CheckoutPayments,_Extensible);var _super=_createSuper(_CheckoutPayments);function _CheckoutPayments(){var _this$paymentRenderMa;var _this;_classCallCheck(this,_CheckoutPayments);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.paymentRenderMap=(_this$paymentRenderMa={},_defineProperty(_this$paymentRenderMa,KLARNA,_this.renderKlarnaPayment.bind(_assertThisInitialized(_this))),_defineProperty(_this$paymentRenderMa,PURCHASE_ORDER,_this.renderPurchaseOrderPayment.bind(_assertThisInitialized(_this))),_this$paymentRenderMa);_this.state={hasError:false};_this.renderPayment=function(method){var _this$props=_this.props,selectPaymentMethod=_this$props.selectPaymentMethod,selectedPaymentCode=_this$props.selectedPaymentCode;var code=method.code;var isSelected=selectedPaymentCode===code;return/*#__PURE__*/_checkBEM(React,CheckoutPayment,{key:code,isSelected:isSelected,method:method,onClick:selectPaymentMethod});};return _this;}_createClass(_CheckoutPayments,[{key:\"componentDidCatch\",value:function componentDidCatch(error,info){var _this$props2=this.props,showError=_this$props2.showError,setOrderButtonEnableStatus=_this$props2.setOrderButtonEnableStatus;console.groupCollapsed('Suppressed error log:');console.error(error.toString(),info.toString());console.groupEnd();this.setState({hasError:true},function(){setOrderButtonEnableStatus(false);showError(\"\".concat(error,\" Please try again later\"));});}},{key:\"renderKlarnaPayment\",value:function renderKlarnaPayment(){var setOrderButtonEnableStatus=this.props.setOrderButtonEnableStatus;return/*#__PURE__*/_checkBEM(React,Klarna,{setOrderButtonEnableStatus:setOrderButtonEnableStatus});}},{key:\"renderPurchaseOrderPayment\",value:function renderPurchaseOrderPayment(){return/*#__PURE__*/_checkBEM(React,PurchaseOrder,{id:BILLING_STEP});}},{key:\"renderNotSupported\",value:function renderNotSupported(){var setOrderButtonEnableStatus=this.props.setOrderButtonEnableStatus;return/*#__PURE__*/_checkBEM(React,NotSupportedPayment,{disableButton:setOrderButtonEnableStatus});}},{key:\"renderPayments\",value:function renderPayments(){var paymentMethods=this.props.paymentMethods;return paymentMethods.map(this.renderPayment);}},{key:\"renderSelectedPayment\",value:function renderSelectedPayment(){var selectedPaymentCode=this.props.selectedPaymentCode;var render=this.paymentRenderMap[selectedPaymentCode];if(!render){return null;}return render();}},{key:\"renderHeading\",value:function renderHeading(){return/*#__PURE__*/_checkBEM(React,\"h2\",{block:\"Checkout\",elem:\"Heading\"},__('Select payment method'));}},{key:\"renderContent\",value:function renderContent(){var hasError=this.state.hasError;if(hasError){return/*#__PURE__*/_checkBEM(React,\"p\",null,__('The error occurred during initializing payment methods. Please try again later!'));}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,this.renderHeading(),/*#__PURE__*/_checkBEM(React,\"ul\",{block:\"CheckoutPayments\",elem:\"Methods\"},this.renderPayments()),this.renderSelectedPayment());}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutPayments\"},this.renderContent());}}]);return _CheckoutPayments;}(Extensible(PureComponent));Object.defineProperty(_CheckoutPayments,'name',{value:'CheckoutPayments'});export var CheckoutPayments=middleware(_CheckoutPayments,\"Component/CheckoutPayments/Component\");export default CheckoutPayments;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutPayments/CheckoutPayments.component.js"],"names":["PureComponent","CheckoutPayment","Klarna","NotSupportedPayment","PurchaseOrder","BILLING_STEP","paymentMethodsType","KLARNA","PURCHASE_ORDER","CheckoutPayments","paymentRenderMap","renderKlarnaPayment","bind","renderPurchaseOrderPayment","state","hasError","renderPayment","method","props","selectPaymentMethod","selectedPaymentCode","code","isSelected","error","info","showError","setOrderButtonEnableStatus","console","groupCollapsed","toString","groupEnd","setState","paymentMethods","map","render","__","renderHeading","renderPayments","renderSelectedPayment","renderContent","Object","defineProperty","_CheckoutPayments","value"],"mappings":"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","sourcesContent":["/* eslint-disable no-console */\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CheckoutPayment from 'Component/CheckoutPayment';\nimport Klarna from 'Component/Klarna';\nimport NotSupportedPayment from 'Component/NotSupportedPayment';\nimport { PurchaseOrder } from 'Component/PurchaseOrder/PurchaseOrder.component';\nimport { BILLING_STEP } from 'Route/Checkout/Checkout.config';\nimport { paymentMethodsType } from 'Type/Checkout';\n\nimport { KLARNA, PURCHASE_ORDER } from './CheckoutPayments.config';\n\nimport './CheckoutPayments.style';\n\n/** @namespace Component/CheckoutPayments/Component */\nexport class CheckoutPayments extends PureComponent {\n    static propTypes = {\n        showError: PropTypes.func.isRequired,\n        selectPaymentMethod: PropTypes.func.isRequired,\n        paymentMethods: paymentMethodsType.isRequired,\n        setOrderButtonEnableStatus: PropTypes.func.isRequired,\n        selectedPaymentCode: PropTypes.string.isRequired,\n        billingAddress: PropTypes.shape({\n            city: PropTypes.string,\n            company: PropTypes.string,\n            country_id: PropTypes.string,\n            email: PropTypes.string,\n            firstname: PropTypes.string,\n            lastname: PropTypes.string,\n            postcode: PropTypes.string,\n            region_id: PropTypes.oneOfType([\n                PropTypes.number,\n                PropTypes.string\n            ]),\n            region: PropTypes.oneOfType([\n                PropTypes.object,\n                PropTypes.string\n            ]),\n            street: PropTypes.oneOfType([\n                PropTypes.string,\n                PropTypes.array\n            ]),\n            telephone: PropTypes.string\n        }).isRequired\n    };\n\n    paymentRenderMap = {\n        [KLARNA]: this.renderKlarnaPayment.bind(this),\n        [PURCHASE_ORDER]: this.renderPurchaseOrderPayment.bind(this)\n    };\n\n    state = {\n        hasError: false\n    };\n\n    componentDidCatch(error, info) {\n        const { showError, setOrderButtonEnableStatus } = this.props;\n\n        console.groupCollapsed('Suppressed error log:');\n        console.error(error.toString(), info.toString());\n        console.groupEnd();\n\n        this.setState(\n            { hasError: true },\n            () => {\n                setOrderButtonEnableStatus(false);\n                showError(`${error} Please try again later`);\n            }\n        );\n    }\n\n    renderKlarnaPayment() {\n        const { setOrderButtonEnableStatus } = this.props;\n        return <Klarna setOrderButtonEnableStatus={ setOrderButtonEnableStatus } />;\n    }\n\n    renderPurchaseOrderPayment() {\n        return <PurchaseOrder id={ BILLING_STEP } />;\n    }\n\n    renderNotSupported() {\n        const { setOrderButtonEnableStatus } = this.props;\n        return <NotSupportedPayment disableButton={ setOrderButtonEnableStatus } />;\n    }\n\n    renderPayment = (method) => {\n        const {\n            selectPaymentMethod,\n            selectedPaymentCode\n        } = this.props;\n\n        const { code } = method;\n        const isSelected = selectedPaymentCode === code;\n\n        return (\n            <CheckoutPayment\n              key={ code }\n              isSelected={ isSelected }\n              method={ method }\n              onClick={ selectPaymentMethod }\n            />\n        );\n    };\n\n    renderPayments() {\n        const { paymentMethods } = this.props;\n        return paymentMethods.map(this.renderPayment);\n    }\n\n    renderSelectedPayment() {\n        const { selectedPaymentCode } = this.props;\n        const render = this.paymentRenderMap[selectedPaymentCode];\n        if (!render) {\n            return null;\n        }\n\n        return render();\n    }\n\n    renderHeading() {\n        return (\n            <h2 block=\"Checkout\" elem=\"Heading\">\n                { __('Select payment method') }\n            </h2>\n        );\n    }\n\n    renderContent() {\n        const { hasError } = this.state;\n\n        if (hasError) {\n            return (\n                <p>{ __('The error occurred during initializing payment methods. Please try again later!') }</p>\n            );\n        }\n\n        return (\n            <>\n                { this.renderHeading() }\n                <ul block=\"CheckoutPayments\" elem=\"Methods\">\n                    { this.renderPayments() }\n                </ul>\n                { this.renderSelectedPayment() }\n            </>\n        );\n    }\n\n    render() {\n        return (\n            <div block=\"CheckoutPayments\">\n                { this.renderContent() }\n            </div>\n        );\n    }\n}\n\nexport default CheckoutPayments;\n"]},"metadata":{},"sourceType":"module"}