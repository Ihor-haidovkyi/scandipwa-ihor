{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CheckoutAddressBook from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutAddressBook\";import CheckoutPayments from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutPayments\";import CheckoutTermsAndConditionsPopup from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutTermsAndConditionsPopup\";import Field from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Field\";import Form from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Form\";import{STORE_IN_PICK_UP_METHOD_CODE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/StoreInPickUp/StoreInPickUp.config\";import{BILLING_STEP}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/Checkout/Checkout.config\";import{addressType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Account\";import{paymentMethodsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Checkout\";import{TotalsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/MiniCart\";import{formatPrice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Price\";import\"./CheckoutBilling.style\";/** @namespace Component/CheckoutBilling/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CheckoutBilling=/*#__PURE__*/function(_Extensible){_inherits(_CheckoutBilling,_Extensible);var _super=_createSuper(_CheckoutBilling);function _CheckoutBilling(){var _this;_classCallCheck(this,_CheckoutBilling);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isOrderButtonVisible:true,isOrderButtonEnabled:true,isTermsAndConditionsAccepted:false};_this.setOrderButtonVisibility=function(isOrderButtonVisible){_this.setState({isOrderButtonVisible:isOrderButtonVisible});};_this.setOrderButtonEnableStatus=function(isOrderButtonEnabled){_this.setState({isOrderButtonEnabled:isOrderButtonEnabled});};_this.setTACAccepted=function(){_this.setState(function(_ref){var oldIsTACAccepted=_ref.isTermsAndConditionsAccepted;return{isTermsAndConditionsAccepted:!oldIsTACAccepted};});};_this.handleShowPopup=function(e){var showPopup=_this.props.showPopup;e.preventDefault();showPopup();};return _this;}_createClass(_CheckoutBilling,[{key:\"componentDidMount\",value:function componentDidMount(){var termsAreEnabled=this.props.termsAreEnabled;if(!termsAreEnabled){this.setState({isOrderButtonEnabled:true});}}},{key:\"renderTermsAndConditions\",value:function renderTermsAndConditions(){var _this$props=this.props,termsAreEnabled=_this$props.termsAreEnabled,termsAndConditions=_this$props.termsAndConditions;var _ref2=termsAndConditions[0]||{},_ref2$checkbox_text=_ref2.checkbox_text,checkbox_text=_ref2$checkbox_text===void 0?__('I agree to terms and conditions'):_ref2$checkbox_text;var isTermsAndConditionsAccepted=this.state.isTermsAndConditionsAccepted;if(!termsAreEnabled){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"CheckoutBilling\",elem:\"TermsAndConditions\"},/*#__PURE__*/_checkBEM(React,\"label\",{block:\"CheckoutBilling\",elem:\"TACLabel\",htmlFor:\"termsAndConditions\"},checkbox_text,/*#__PURE__*/_checkBEM(React,\"button\",{block:\"CheckoutBilling\",elem:\"TACLink\",onClick:this.handleShowPopup},__('read more'))),/*#__PURE__*/_checkBEM(React,Field,{id:\"termsAndConditions\",name:\"termsAndConditions\",type:\"checkbox\",value:\"termsAndConditions\",mix:{block:'CheckoutBilling',elem:'TermsAndConditions-Checkbox'},checked:isTermsAndConditionsAccepted,onChange:this.setTACAccepted}));}},{key:\"renderOrderTotalExlTax\",value:function renderOrderTotalExlTax(){var _this$props2=this.props,cartTotalSubPrice=_this$props2.cartTotalSubPrice,quote_currency_code=_this$props2.totals.quote_currency_code;if(!cartTotalSubPrice){return null;}var orderTotalExlTax=formatPrice(cartTotalSubPrice,quote_currency_code);return/*#__PURE__*/_checkBEM(React,\"span\",null,\"\".concat(__('Excl. tax:'),\" \").concat(orderTotalExlTax));}},{key:\"renderOrderTotal\",value:function renderOrderTotal(){var _this$props$totals=this.props.totals,grand_total=_this$props$totals.grand_total,quote_currency_code=_this$props$totals.quote_currency_code;var orderTotal=formatPrice(grand_total,quote_currency_code);return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"Checkout\",elem:\"OrderTotal\"},/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Order total:')),/*#__PURE__*/_checkBEM(React,\"dd\",null,orderTotal,this.renderOrderTotalExlTax()));}},{key:\"renderActions\",value:function renderActions(){var _this$state=this.state,isOrderButtonVisible=_this$state.isOrderButtonVisible,isOrderButtonEnabled=_this$state.isOrderButtonEnabled,isTermsAndConditionsAccepted=_this$state.isTermsAndConditionsAccepted;var termsAreEnabled=this.props.termsAreEnabled;if(!isOrderButtonVisible){return null;}// if terms and conditions are enabled, validate for acceptance\nvar isDisabled=termsAreEnabled?!isOrderButtonEnabled||!isTermsAndConditionsAccepted:!isOrderButtonEnabled;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Checkout\",elem:\"StickyButtonWrapper\"},this.renderOrderTotal(),/*#__PURE__*/_checkBEM(React,\"button\",{type:\"submit\",block:\"Button\",disabled:isDisabled,mix:{block:'CheckoutBilling',elem:'Button'}},__('Complete order')));}},{key:\"renderAddressBook\",value:function renderAddressBook(){var _this$props3=this.props,onAddressSelect=_this$props3.onAddressSelect,isSameAsShipping=_this$props3.isSameAsShipping,is_virtual=_this$props3.totals.is_virtual;if(isSameAsShipping&&!is_virtual){return null;}return/*#__PURE__*/_checkBEM(React,CheckoutAddressBook,{onAddressSelect:onAddressSelect,isBilling:true});}},{key:\"renderSameAsShippingCheckbox\",value:function renderSameAsShippingCheckbox(){var _this$props4=this.props,isSameAsShipping=_this$props4.isSameAsShipping,onSameAsShippingChange=_this$props4.onSameAsShippingChange,is_virtual=_this$props4.totals.is_virtual,selectedShippingMethod=_this$props4.selectedShippingMethod;if(is_virtual){return null;}return/*#__PURE__*/_checkBEM(React,Field,{id:\"sameAsShippingAddress\",name:\"sameAsShippingAddress\",type:\"checkbox\",label:__('My billing and shipping are the same'),value:\"sameAsShippingAddress\",mix:{block:'CheckoutBilling',elem:'Checkbox'},checked:isSameAsShipping&&selectedShippingMethod!==STORE_IN_PICK_UP_METHOD_CODE,onChange:onSameAsShippingChange,isDisabled:selectedShippingMethod===STORE_IN_PICK_UP_METHOD_CODE});}},{key:\"renderAddresses\",value:function renderAddresses(){return/*#__PURE__*/_checkBEM(React,React.Fragment,null,this.renderSameAsShippingCheckbox(),this.renderAddressBook());}},{key:\"renderPayments\",value:function renderPayments(){var _this$props5=this.props,paymentMethods=_this$props5.paymentMethods,onPaymentMethodSelect=_this$props5.onPaymentMethodSelect,setLoading=_this$props5.setLoading,setDetailsStep=_this$props5.setDetailsStep,shippingAddress=_this$props5.shippingAddress;if(!paymentMethods.length){return null;}return/*#__PURE__*/_checkBEM(React,CheckoutPayments,{setLoading:setLoading,setDetailsStep:setDetailsStep,paymentMethods:paymentMethods,onPaymentMethodSelect:onPaymentMethodSelect,setOrderButtonVisibility:this.setOrderButtonVisibility,billingAddress:shippingAddress,setOrderButtonEnableStatus:this.setOrderButtonEnableStatus});}},{key:\"renderPopup\",value:function renderPopup(){return/*#__PURE__*/_checkBEM(React,CheckoutTermsAndConditionsPopup,null);}},{key:\"render\",value:function render(){var _this$props6=this.props,onBillingSuccess=_this$props6.onBillingSuccess,onBillingError=_this$props6.onBillingError;return/*#__PURE__*/_checkBEM(React,Form,{mix:{block:'CheckoutBilling'},id:BILLING_STEP,onSubmitError:onBillingError,onSubmitSuccess:onBillingSuccess},this.renderAddresses(),this.renderPayments(),this.renderTermsAndConditions(),this.renderActions(),this.renderPopup());}}]);return _CheckoutBilling;}(Extensible(PureComponent));_CheckoutBilling.defaultProps={termsAreEnabled:false,cartTotalSubPrice:null};Object.defineProperty(_CheckoutBilling,'name',{value:'CheckoutBilling'});export var CheckoutBilling=middleware(_CheckoutBilling,\"Component/CheckoutBilling/Component\");export default CheckoutBilling;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutBilling/CheckoutBilling.component.js"],"names":["PureComponent","CheckoutAddressBook","CheckoutPayments","CheckoutTermsAndConditionsPopup","Field","Form","STORE_IN_PICK_UP_METHOD_CODE","BILLING_STEP","addressType","paymentMethodsType","TotalsType","formatPrice","CheckoutBilling","state","isOrderButtonVisible","isOrderButtonEnabled","isTermsAndConditionsAccepted","setOrderButtonVisibility","setState","setOrderButtonEnableStatus","setTACAccepted","oldIsTACAccepted","handleShowPopup","e","showPopup","props","preventDefault","termsAreEnabled","termsAndConditions","checkbox_text","__","block","elem","cartTotalSubPrice","quote_currency_code","totals","orderTotalExlTax","grand_total","orderTotal","renderOrderTotalExlTax","isDisabled","renderOrderTotal","onAddressSelect","isSameAsShipping","is_virtual","onSameAsShippingChange","selectedShippingMethod","renderSameAsShippingCheckbox","renderAddressBook","paymentMethods","onPaymentMethodSelect","setLoading","setDetailsStep","shippingAddress","length","onBillingSuccess","onBillingError","renderAddresses","renderPayments","renderTermsAndConditions","renderActions","renderPopup","defaultProps","Object","defineProperty","_CheckoutBilling","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CheckoutAddressBook from 'Component/CheckoutAddressBook';\nimport CheckoutPayments from 'Component/CheckoutPayments';\nimport CheckoutTermsAndConditionsPopup from 'Component/CheckoutTermsAndConditionsPopup';\nimport Field from 'Component/Field';\nimport Form from 'Component/Form';\nimport { STORE_IN_PICK_UP_METHOD_CODE } from 'Component/StoreInPickUp/StoreInPickUp.config';\nimport { BILLING_STEP } from 'Route/Checkout/Checkout.config';\nimport { addressType } from 'Type/Account';\nimport { paymentMethodsType } from 'Type/Checkout';\nimport { TotalsType } from 'Type/MiniCart';\nimport { formatPrice } from 'Util/Price';\n\nimport './CheckoutBilling.style';\n\n/** @namespace Component/CheckoutBilling/Component */\nexport class CheckoutBilling extends PureComponent {\n    state = {\n        isOrderButtonVisible: true,\n        isOrderButtonEnabled: true,\n        isTermsAndConditionsAccepted: false\n    };\n\n    static propTypes = {\n        setLoading: PropTypes.func.isRequired,\n        setDetailsStep: PropTypes.func.isRequired,\n        isSameAsShipping: PropTypes.bool.isRequired,\n        termsAreEnabled: PropTypes.bool,\n        onSameAsShippingChange: PropTypes.func.isRequired,\n        onPaymentMethodSelect: PropTypes.func.isRequired,\n        onBillingSuccess: PropTypes.func.isRequired,\n        onBillingError: PropTypes.func.isRequired,\n        onAddressSelect: PropTypes.func.isRequired,\n        showPopup: PropTypes.func.isRequired,\n        paymentMethods: paymentMethodsType.isRequired,\n        totals: TotalsType.isRequired,\n        cartTotalSubPrice: PropTypes.number,\n        shippingAddress: addressType.isRequired,\n        termsAndConditions: PropTypes.arrayOf(PropTypes.shape({\n            checkbox_text: PropTypes.string\n        })).isRequired,\n        selectedShippingMethod: PropTypes.string.isRequired\n    };\n\n    static defaultProps = {\n        termsAreEnabled: false,\n        cartTotalSubPrice: null\n    };\n\n    componentDidMount() {\n        const { termsAreEnabled } = this.props;\n        if (!termsAreEnabled) {\n            this.setState({ isOrderButtonEnabled: true });\n        }\n    }\n\n    setOrderButtonVisibility = (isOrderButtonVisible) => {\n        this.setState({ isOrderButtonVisible });\n    };\n\n    setOrderButtonEnableStatus = (isOrderButtonEnabled) => {\n        this.setState({ isOrderButtonEnabled });\n    };\n\n    setTACAccepted = () => {\n        this.setState(({ isTermsAndConditionsAccepted: oldIsTACAccepted }) => ({\n            isTermsAndConditionsAccepted: !oldIsTACAccepted\n        }));\n    };\n\n    handleShowPopup = (e) => {\n        const { showPopup } = this.props;\n        e.preventDefault();\n        showPopup();\n    };\n\n    renderTermsAndConditions() {\n        const {\n            termsAreEnabled,\n            termsAndConditions\n        } = this.props;\n\n        const {\n            checkbox_text = __('I agree to terms and conditions')\n        } = termsAndConditions[0] || {};\n\n        const { isTermsAndConditionsAccepted } = this.state;\n\n        if (!termsAreEnabled) {\n            return null;\n        }\n\n        return (\n            <div\n              block=\"CheckoutBilling\"\n              elem=\"TermsAndConditions\"\n            >\n                <label\n                  block=\"CheckoutBilling\"\n                  elem=\"TACLabel\"\n                  htmlFor=\"termsAndConditions\"\n                >\n                    { checkbox_text }\n                    <button\n                      block=\"CheckoutBilling\"\n                      elem=\"TACLink\"\n                      onClick={ this.handleShowPopup }\n                    >\n                        { __('read more') }\n                    </button>\n                </label>\n                <Field\n                  id=\"termsAndConditions\"\n                  name=\"termsAndConditions\"\n                  type=\"checkbox\"\n                  value=\"termsAndConditions\"\n                  mix={ { block: 'CheckoutBilling', elem: 'TermsAndConditions-Checkbox' } }\n                  checked={ isTermsAndConditionsAccepted }\n                  onChange={ this.setTACAccepted }\n                />\n            </div>\n        );\n    }\n\n    renderOrderTotalExlTax() {\n        const {\n            cartTotalSubPrice,\n            totals: { quote_currency_code }\n        } = this.props;\n\n        if (!cartTotalSubPrice) {\n            return null;\n        }\n\n        const orderTotalExlTax = formatPrice(cartTotalSubPrice, quote_currency_code);\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ orderTotalExlTax }` }\n            </span>\n        );\n    }\n\n    renderOrderTotal() {\n        const { totals: { grand_total, quote_currency_code } } = this.props;\n\n        const orderTotal = formatPrice(grand_total, quote_currency_code);\n\n        return (\n            <dl block=\"Checkout\" elem=\"OrderTotal\">\n                <dt>\n                    { __('Order total:') }\n                </dt>\n                <dd>\n                    { orderTotal }\n                    { this.renderOrderTotalExlTax() }\n                </dd>\n            </dl>\n        );\n    }\n\n    renderActions() {\n        const {\n            isOrderButtonVisible,\n            isOrderButtonEnabled,\n            isTermsAndConditionsAccepted\n        } = this.state;\n\n        const { termsAreEnabled } = this.props;\n\n        if (!isOrderButtonVisible) {\n            return null;\n        }\n\n        // if terms and conditions are enabled, validate for acceptance\n        const isDisabled = termsAreEnabled\n            ? !isOrderButtonEnabled || !isTermsAndConditionsAccepted\n            : !isOrderButtonEnabled;\n\n        return (\n            <div block=\"Checkout\" elem=\"StickyButtonWrapper\">\n                { this.renderOrderTotal() }\n                <button\n                  type=\"submit\"\n                  block=\"Button\"\n                  disabled={ isDisabled }\n                  mix={ { block: 'CheckoutBilling', elem: 'Button' } }\n                >\n                    { __('Complete order') }\n                </button>\n            </div>\n        );\n    }\n\n    renderAddressBook() {\n        const {\n            onAddressSelect,\n            isSameAsShipping,\n            totals: { is_virtual }\n        } = this.props;\n\n        if (isSameAsShipping && !is_virtual) {\n            return null;\n        }\n\n        return (\n            <CheckoutAddressBook\n              onAddressSelect={ onAddressSelect }\n              isBilling\n            />\n        );\n    }\n\n    renderSameAsShippingCheckbox() {\n        const {\n            isSameAsShipping,\n            onSameAsShippingChange,\n            totals: { is_virtual },\n            selectedShippingMethod\n        } = this.props;\n\n        if (is_virtual) {\n            return null;\n        }\n\n        return (\n            <Field\n              id=\"sameAsShippingAddress\"\n              name=\"sameAsShippingAddress\"\n              type=\"checkbox\"\n              label={ __('My billing and shipping are the same') }\n              value=\"sameAsShippingAddress\"\n              mix={ { block: 'CheckoutBilling', elem: 'Checkbox' } }\n              checked={ isSameAsShipping && selectedShippingMethod !== STORE_IN_PICK_UP_METHOD_CODE }\n              onChange={ onSameAsShippingChange }\n              isDisabled={ selectedShippingMethod === STORE_IN_PICK_UP_METHOD_CODE }\n            />\n        );\n    }\n\n    renderAddresses() {\n        return (\n            <>\n                { this.renderSameAsShippingCheckbox() }\n                { this.renderAddressBook() }\n            </>\n        );\n    }\n\n    renderPayments() {\n        const {\n            paymentMethods,\n            onPaymentMethodSelect,\n            setLoading,\n            setDetailsStep,\n            shippingAddress\n        } = this.props;\n\n        if (!paymentMethods.length) {\n            return null;\n        }\n\n        return (\n            <CheckoutPayments\n              setLoading={ setLoading }\n              setDetailsStep={ setDetailsStep }\n              paymentMethods={ paymentMethods }\n              onPaymentMethodSelect={ onPaymentMethodSelect }\n              setOrderButtonVisibility={ this.setOrderButtonVisibility }\n              billingAddress={ shippingAddress }\n              setOrderButtonEnableStatus={ this.setOrderButtonEnableStatus }\n            />\n        );\n    }\n\n    renderPopup() {\n        return <CheckoutTermsAndConditionsPopup />;\n    }\n\n    render() {\n        const { onBillingSuccess, onBillingError } = this.props;\n\n        return (\n            <Form\n              mix={ { block: 'CheckoutBilling' } }\n              id={ BILLING_STEP }\n              onSubmitError={ onBillingError }\n              onSubmitSuccess={ onBillingSuccess }\n            >\n                { this.renderAddresses() }\n                { this.renderPayments() }\n                { this.renderTermsAndConditions() }\n                { this.renderActions() }\n                { this.renderPopup() }\n            </Form>\n        );\n    }\n}\n\nexport default CheckoutBilling;\n"]},"metadata":{},"sourceType":"module"}