{"ast":null,"code":"import _regeneratorRuntime from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import ProductCompareButton from\"./ProductCompareButton.component\";export var ProductCompareDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductCompare/ProductCompare.dispatcher\");/** @namespace Component/ProductCompareButton/Container/mapStateToProps */export var mapStateToProps=middleware(function(state){return{comparedProducts:state.ProductCompareReducer.productIds};},\"Component/ProductCompareButton/Container/mapStateToProps\");/** @namespace Component/ProductCompareButton/Container/mapDispatchToProps */export var mapDispatchToProps=middleware(function(dispatch){return{addProductToCompare:function addProductToCompare(productId){return ProductCompareDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.addProductToCompare(productId,dispatch);});},removeComparedProduct:function removeComparedProduct(productId){return ProductCompareDispatcher.then(function(_ref2){var dispatcher=_ref2.default;return dispatcher.removeComparedProduct(productId,dispatch);});}};},\"Component/ProductCompareButton/Container/mapDispatchToProps\");/** @namespace Component/ProductCompareButton/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductCompareButtonContainer=/*#__PURE__*/function(_Extensible){_inherits(_ProductCompareButtonContainer,_Extensible);var _super=_createSuper(_ProductCompareButtonContainer);function _ProductCompareButtonContainer(){var _this;_classCallCheck(this,_ProductCompareButtonContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.containerFunctions={handleClick:_this.handleClick.bind(_assertThisInitialized(_this))};_this.containerProps=function(){return{isActive:_this.isActive()};};return _this;}_createClass(_ProductCompareButtonContainer,[{key:\"isActive\",value:function isActive(){var _this$props=this.props,comparedProducts=_this$props.comparedProducts,productId=_this$props.productId;return comparedProducts.indexOf(productId)!==-1;}},{key:\"handleClick\",value:function(){var _handleClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props2,productId,addProductToCompare,removeComparedProduct;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props2=this.props,productId=_this$props2.productId,addProductToCompare=_this$props2.addProductToCompare,removeComparedProduct=_this$props2.removeComparedProduct;this.setState({isLoading:true});if(!this.isActive()){_context.next=7;break;}_context.next=5;return removeComparedProduct(productId);case 5:_context.next=9;break;case 7:_context.next=9;return addProductToCompare(productId);case 9:this.setState({isLoading:false});case 10:case\"end\":return _context.stop();}}},_callee,this);}));function handleClick(){return _handleClick.apply(this,arguments);}return handleClick;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,ProductCompareButton,Object.assign({},this.props,this.state,this.containerProps(),this.containerFunctions));}}]);return _ProductCompareButtonContainer;}(Extensible(PureComponent));_ProductCompareButtonContainer.defaultProps={productId:null};Object.defineProperty(_ProductCompareButtonContainer,'name',{value:'ProductCompareButtonContainer'});export var ProductCompareButtonContainer=middleware(_ProductCompareButtonContainer,\"Component/ProductCompareButton/Container\");export default connect(mapStateToProps,mapDispatchToProps)(ProductCompareButtonContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCompareButton/ProductCompareButton.container.js"],"names":["PureComponent","connect","ProductCompareButton","ProductCompareDispatcher","mapStateToProps","state","comparedProducts","ProductCompareReducer","productIds","mapDispatchToProps","dispatch","addProductToCompare","productId","then","dispatcher","default","removeComparedProduct","ProductCompareButtonContainer","containerFunctions","handleClick","bind","containerProps","isActive","props","indexOf","setState","isLoading","defaultProps","Object","defineProperty","_ProductCompareButtonContainer","value"],"mappings":"o/BAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAGA,OAASA,aAAT,KAA8B,OAA9B,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,MAAOC,CAAAA,oBAAP,wCAEA,MAAO,IAAMC,CAAAA,wBAAwB,CAAG,OACpC,0DADoC,mGAAjC,CAKP,0EACA,MAAO,IAAMC,CAAAA,eAAe,YAAG,SAACC,KAAD,QAAY,CACvCC,gBAAgB,CAAED,KAAK,CAACE,qBAAN,CAA4BC,UADP,CAAZ,EAAH,4DAArB,CAIP,6EACA,MAAO,IAAMC,CAAAA,kBAAkB,YAAG,SAACC,QAAD,QAAe,CAC7CC,mBAAmB,CAAE,6BAACC,SAAD,QAAeT,CAAAA,wBAAwB,CAACU,IAAzB,CAChC,kBAAYC,CAAAA,UAAZ,MAAGC,OAAH,OAA6BD,CAAAA,UAAU,CAACH,mBAAX,CAA+BC,SAA/B,CAA0CF,QAA1C,CAA7B,EADgC,CAAf,EADwB,CAI7CM,qBAAqB,CAAE,+BAACJ,SAAD,QAAeT,CAAAA,wBAAwB,CAACU,IAAzB,CAClC,mBAAYC,CAAAA,UAAZ,OAAGC,OAAH,OAA6BD,CAAAA,UAAU,CAACE,qBAAX,CAAiCJ,SAAjC,CAA4CF,QAA5C,CAA7B,EADkC,CAAf,EAJsB,CAAf,EAAH,+DAAxB,CASP,0D,wEACA,UAAaO,CAAAA,8BAAb,6ZAYIC,kBAZJ,CAYyB,CACjBC,WAAW,CAAE,MAAKA,WAAL,CAAiBC,IAAjB,+BADI,CAZzB,OAgBIC,cAhBJ,CAgBqB,iBAAO,CACpBC,QAAQ,CAAE,MAAKA,QAAL,EADU,CAAP,EAhBrB,kFAoBI,mBAAW,iBACiC,KAAKC,KADtC,CACCjB,gBADD,aACCA,gBADD,CACmBM,SADnB,aACmBA,SADnB,CAEP,MAAON,CAAAA,gBAAgB,CAACkB,OAAjB,CAAyBZ,SAAzB,IAAwC,CAAC,CAAhD,CACH,CAvBL,+GAyBI,qNAKQ,KAAKW,KALb,CAEQX,SAFR,cAEQA,SAFR,CAGQD,mBAHR,cAGQA,mBAHR,CAIQK,qBAJR,cAIQA,qBAJR,CAOI,KAAKS,QAAL,CAAc,CAAEC,SAAS,CAAE,IAAb,CAAd,EAPJ,IASQ,KAAKJ,QAAL,EATR,+CAUcN,CAAAA,qBAAqB,CAACJ,SAAD,CAVnC,2DAYcD,CAAAA,mBAAmB,CAACC,SAAD,CAZjC,QAeI,KAAKa,QAAL,CAAc,CAAEC,SAAS,CAAE,KAAb,CAAd,EAfJ,4DAzBJ,iHA2CI,iBAAS,CACL,mCACK,oBADL,kBAEW,KAAKH,KAFhB,CAGW,KAAKlB,KAHhB,CAIW,KAAKgB,cAAL,EAJX,CAKW,KAAKH,kBALhB,GAQH,CApDL,uEAAaD,8B,CAQFU,Y,CAAe,CAClBf,SAAS,CAAE,IADO,C,CA9C1BgB,MAAM,CAACC,cAAP,CAAsBC,8BAAtB,CAAsD,MAAtD,CAA8D,CAAEC,KAAK,CAAE,+BAAT,CAA9D,E,+HA6FA,cAAe9B,CAAAA,OAAO,CAACG,eAAD,CAAkBK,kBAAlB,CAAP,CAA6CQ,6BAA7C,CAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport ProductCompareButton from './ProductCompareButton.component';\n\nexport const ProductCompareDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/ProductCompare/ProductCompare.dispatcher'\n);\n\n/** @namespace Component/ProductCompareButton/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    comparedProducts: state.ProductCompareReducer.productIds\n});\n\n/** @namespace Component/ProductCompareButton/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    addProductToCompare: (productId) => ProductCompareDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.addProductToCompare(productId, dispatch)\n    ),\n    removeComparedProduct: (productId) => ProductCompareDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.removeComparedProduct(productId, dispatch)\n    )\n});\n\n/** @namespace Component/ProductCompareButton/Container */\nexport class ProductCompareButtonContainer extends PureComponent {\n    static propTypes = {\n        productId: PropTypes.number,\n        addProductToCompare: PropTypes.func.isRequired,\n        removeComparedProduct: PropTypes.func.isRequired,\n        comparedProducts: PropTypes.arrayOf(PropTypes.number).isRequired\n    };\n\n    static defaultProps = {\n        productId: null\n    };\n\n    containerFunctions = {\n        handleClick: this.handleClick.bind(this)\n    };\n\n    containerProps = () => ({\n        isActive: this.isActive()\n    });\n\n    isActive() {\n        const { comparedProducts, productId } = this.props;\n        return comparedProducts.indexOf(productId) !== -1;\n    }\n\n    async handleClick() {\n        const {\n            productId,\n            addProductToCompare,\n            removeComparedProduct\n        } = this.props;\n\n        this.setState({ isLoading: true });\n\n        if (this.isActive()) {\n            await removeComparedProduct(productId);\n        } else {\n            await addProductToCompare(productId);\n        }\n\n        this.setState({ isLoading: false });\n    }\n\n    render() {\n        return (\n            <ProductCompareButton\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerProps() }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductCompareButtonContainer);\n"]},"metadata":{},"sourceType":"module"}