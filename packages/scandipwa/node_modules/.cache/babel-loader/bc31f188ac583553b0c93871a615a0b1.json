{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _get from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import ProductListQuery from\"/home/marketihor/scandipwa/packages/scandipwa/src/query/ProductList.query\";import{updateNoMatch}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/NoMatch/NoMatch.action\";import{showNotification}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";import{appendPage,updateLoadStatus,updatePageLoadingStatus,updateProductListItems}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductList/ProductList.action\";import{QueryDispatcher}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";/**\n * Product List Dispatcher\n * @class ProductListDispatcher\n * @extends QueryDispatcher\n * @namespace Store/ProductList/Dispatcher\n */export var _ProductListDispatcher=/*#__PURE__*/function(_Extensible){_inherits(_ProductListDispatcher,_Extensible);var _super=_createSuper(_ProductListDispatcher);function _ProductListDispatcher(){_classCallCheck(this,_ProductListDispatcher);return _super.apply(this,arguments);}_createClass(_ProductListDispatcher,[{key:\"__construct\",value:function __construct(){_get(_getPrototypeOf(_ProductListDispatcher.prototype),\"__construct\",this).call(this,'ProductList');}},{key:\"onSuccess\",value:function onSuccess(data,dispatch,options){var _data$products=data.products;_data$products=_data$products===void 0?{}:_data$products;var items=_data$products.items,total_count=_data$products.total_count,_data$products$page_i=_data$products.page_info;_data$products$page_i=_data$products$page_i===void 0?{}:_data$products$page_i;var total_pages=_data$products$page_i.total_pages;var args=options.args,isNext=options.isNext;var currentPage=args.currentPage;if(isNext){return dispatch(appendPage(items,currentPage));}return dispatch(updateProductListItems(items,currentPage,total_count,total_pages,args));}},{key:\"onError\",value:function onError(error,dispatch){dispatch(showNotification('error',__('Error fetching Product List!'),error));dispatch(updateNoMatch(true));}},{key:\"prepareRequest\",value:function prepareRequest(options,dispatch){var isNext=options.isNext;if(!isNext){dispatch(updateLoadStatus(true));}else{dispatch(updatePageLoadingStatus());}return ProductListQuery.getQuery(options);}}]);return _ProductListDispatcher;}(Extensible(QueryDispatcher));Object.defineProperty(_ProductListDispatcher,'name',{value:'ProductListDispatcher'});export var ProductListDispatcher=middleware(_ProductListDispatcher,\"Store/ProductList/Dispatcher\");export default new ProductListDispatcher();","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/store/ProductList/ProductList.dispatcher.js"],"names":["ProductListQuery","updateNoMatch","showNotification","appendPage","updateLoadStatus","updatePageLoadingStatus","updateProductListItems","QueryDispatcher","ProductListDispatcher","data","dispatch","options","products","items","total_count","page_info","total_pages","args","isNext","currentPage","error","__","getQuery","Object","defineProperty","_ProductListDispatcher","value"],"mappings":"o0BAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,MAAOA,CAAAA,gBAAP,iFACA,OAASC,aAAT,sFACA,OAASC,gBAAT,gGACA,OACIC,UADJ,CAEIC,gBAFJ,CAGIC,uBAHJ,CAIIC,sBAJJ,8FAMA,OAASC,eAAT,sEAEA;AACA;AACA;AACA;AACA;AACA,GACA,UAAaC,CAAAA,sBAAb,oTACI,sBAAc,CACV,qFAAkB,aAAlB,EACH,CAHL,yBAKI,mBAAUC,IAAV,CAAgBC,QAAhB,CAA0BC,OAA1B,CAAmC,oBAO3BF,IAP2B,CAE3BG,QAF2B,wCAMvB,EANuB,mBAGvBC,CAAAA,KAHuB,gBAGvBA,KAHuB,CAIvBC,WAJuB,gBAIvBA,WAJuB,sCAKvBC,SALuB,sDAKM,EALN,0BAKVC,CAAAA,WALU,uBAKVA,WALU,IASvBC,CAAAA,IATuB,CASNN,OATM,CASvBM,IATuB,CASjBC,MATiB,CASNP,OATM,CASjBO,MATiB,IAUvBC,CAAAA,WAVuB,CAUPF,IAVO,CAUvBE,WAVuB,CAY/B,GAAID,MAAJ,CAAY,CACR,MAAOR,CAAAA,QAAQ,CACXP,UAAU,CACNU,KADM,CAENM,WAFM,CADC,CAAf,CAMH,CAED,MAAOT,CAAAA,QAAQ,CACXJ,sBAAsB,CAClBO,KADkB,CAElBM,WAFkB,CAGlBL,WAHkB,CAIlBE,WAJkB,CAKlBC,IALkB,CADX,CAAf,CASH,CAnCL,uBAqCI,iBAAQG,KAAR,CAAeV,QAAf,CAAyB,CACrBA,QAAQ,CAACR,gBAAgB,CAAC,OAAD,CAAUmB,EAAE,CAAC,8BAAD,CAAZ,CAA8CD,KAA9C,CAAjB,CAAR,CACAV,QAAQ,CAACT,aAAa,CAAC,IAAD,CAAd,CAAR,CACH,CAxCL,8BA0CI,wBAAeU,OAAf,CAAwBD,QAAxB,CAAkC,IACtBQ,CAAAA,MADsB,CACXP,OADW,CACtBO,MADsB,CAG9B,GAAI,CAACA,MAAL,CAAa,CACTR,QAAQ,CAACN,gBAAgB,CAAC,IAAD,CAAjB,CAAR,CACH,CAFD,IAEO,CACHM,QAAQ,CAACL,uBAAuB,EAAxB,CAAR,CACH,CAED,MAAOL,CAAAA,gBAAgB,CAACsB,QAAjB,CAA0BX,OAA1B,CAAP,CACH,CApDL,iEA5BAY,MAAM,CAACC,cAAP,CAAsBC,sBAAtB,CAA8C,MAA9C,CAAsD,CAAEC,KAAK,CAAE,uBAAT,CAAtD,E,mGAmFA,cAAe,IAAIlB,CAAAA,qBAAJ,EAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport ProductListQuery from 'Query/ProductList.query';\nimport { updateNoMatch } from 'Store/NoMatch/NoMatch.action';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport {\n    appendPage,\n    updateLoadStatus,\n    updatePageLoadingStatus,\n    updateProductListItems\n} from 'Store/ProductList/ProductList.action';\nimport { QueryDispatcher } from 'Util/Request';\n\n/**\n * Product List Dispatcher\n * @class ProductListDispatcher\n * @extends QueryDispatcher\n * @namespace Store/ProductList/Dispatcher\n */\nexport class ProductListDispatcher extends QueryDispatcher {\n    __construct() {\n        super.__construct('ProductList');\n    }\n\n    onSuccess(data, dispatch, options) {\n        const {\n            products: {\n                items,\n                total_count,\n                page_info: { total_pages } = {}\n            } = {}\n        } = data;\n\n        const { args, isNext } = options;\n        const { currentPage } = args;\n\n        if (isNext) {\n            return dispatch(\n                appendPage(\n                    items,\n                    currentPage\n                )\n            );\n        }\n\n        return dispatch(\n            updateProductListItems(\n                items,\n                currentPage,\n                total_count,\n                total_pages,\n                args\n            )\n        );\n    }\n\n    onError(error, dispatch) {\n        dispatch(showNotification('error', __('Error fetching Product List!'), error));\n        dispatch(updateNoMatch(true));\n    }\n\n    prepareRequest(options, dispatch) {\n        const { isNext } = options;\n\n        if (!isNext) {\n            dispatch(updateLoadStatus(true));\n        } else {\n            dispatch(updatePageLoadingStatus());\n        }\n\n        return ProductListQuery.getQuery(options);\n    }\n}\n\nexport default new ProductListDispatcher();\n"]},"metadata":{},"sourceType":"module"}