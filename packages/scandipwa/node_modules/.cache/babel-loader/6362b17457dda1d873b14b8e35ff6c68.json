{"ast":null,"code":"import _slicedToArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable jsx-a11y/click-events-have-key-events */ /**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CmsBlock from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CmsBlock\";import CurrencySwitcher from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CurrencySwitcher\";import Link from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Link\";import MenuItem from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/MenuItem\";import StoreSwitcher from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/StoreSwitcher\";import{DeviceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Device\";import{MenuType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Menu\";import{getSortedItems}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Menu\";import{debounce}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";import{HEADER_CMS_BLOCK,SCROLL_DEBOUNCE_DELAY}from\"./Menu.config\";import\"./Menu.style\";/** @namespace Component/Menu/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _Menu=/*#__PURE__*/function(_Extensible){_inherits(_Menu,_Extensible);var _super=_createSuper(_Menu);function _Menu(){var _this;_classCallCheck(this,_Menu);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.renderSubLevelItems=function(item){var _this$props=_this.props,handleSubcategoryClick=_this$props.handleSubcategoryClick,activeMenuItemsStack=_this$props.activeMenuItemsStack,onCategoryHover=_this$props.onCategoryHover,closeMenu=_this$props.closeMenu,device=_this$props.device;var item_id=item.item_id,children=item.children,item_class=item.item_class;var isBanner=item_class==='Menu-ItemFigure_type_banner';var isHideOnDesktop=item_class==='Menu-ItemFigure_type_hideOnDesktop';var mods={isBanner:!!isBanner,isHideOnDesktop:!!isHideOnDesktop};var childrenArray=Object.values(children);var subcategoryMods={type:'subcategory'};if(childrenArray.length&&device.isMobile){return/*#__PURE__*/_checkBEM(React,\"div\",{key:item_id// TODO: split into smaller components\n// eslint-disable-next-line react/jsx-no-bind\n,onClick:function onClick(e){return handleSubcategoryClick(e,item);},tabIndex:\"0\",role:\"button\"},/*#__PURE__*/_checkBEM(React,MenuItem,{activeMenuItemsStack:activeMenuItemsStack,item:item,itemMods:subcategoryMods,onCategoryHover:onCategoryHover,closeMenu:closeMenu}),_this.renderSubLevel(item));}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"SubItemWrapper\",key:item_id,mods:mods},/*#__PURE__*/_checkBEM(React,MenuItem,{activeMenuItemsStack:activeMenuItemsStack,item:item,closeMenu:closeMenu,isLink:true}),_this.renderDesktopSubLevel(item));};_this.renderSubMenuDesktopItems=function(item){var item_id=item.item_id,children=item.children;if(!Object.keys(children).length){return null;}var _this$props2=_this.props,activeMenuItemsStack=_this$props2.activeMenuItemsStack,closeMenu=_this$props2.closeMenu;var isVisible=activeMenuItemsStack.includes(item_id);if(!isVisible){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"SubCategoriesWrapper\",mods:{isVisible:isVisible},key:item_id},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"SubCategoriesWrapperInner\",mods:{isVisible:isVisible}},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"SubCategories\"},_this.renderSubLevel(item)),_this.renderAdditionalInformation()),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"Overlay\",mods:{isVisible:isVisible},onMouseEnter:closeMenu}));};_this.renderFirstLevel=function(item){var item_id=item.item_id,item_class=item.item_class;var isHideOnDesktop=item_class==='Menu-ItemFigure_type_hideOnDesktop';return/*#__PURE__*/_checkBEM(React,\"li\",{block:\"Menu\",elem:\"Item\",key:item_id,mods:{isHideOnDesktop:isHideOnDesktop}},_this.renderFirstLevelItems(item));};return _this;}_createClass(_Menu,[{key:\"componentDidMount\",value:function componentDidMount(){var closeMenu=this.props.closeMenu;this.debouncedCloseMenu=debounce(closeMenu,SCROLL_DEBOUNCE_DELAY);window.addEventListener('scroll',this.debouncedCloseMenu);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('scroll',this.debouncedCloseMenu);}},{key:\"renderDesktopSubLevelItems\",value:function renderDesktopSubLevelItems(item,mods){var item_id=item.item_id,item_class=item.item_class;var _this$props3=this.props,closeMenu=_this$props3.closeMenu,activeMenuItemsStack=_this$props3.activeMenuItemsStack;var isHideOnDesktop=item_class==='Menu-ItemFigure_type_hideOnDesktop';var itemMods=_objectSpread(_objectSpread({},mods),{},{isHideOnDesktop:isHideOnDesktop});return/*#__PURE__*/_checkBEM(React,MenuItem,{activeMenuItemsStack:activeMenuItemsStack,item:item,itemMods:itemMods,closeMenu:closeMenu,isLink:true,key:item_id});}},{key:\"renderDesktopSubLevel\",value:function renderDesktopSubLevel(category){var _this2=this;var device=this.props.device;var children=category.children,item_class=category.item_class,item_id=category.item_id;var childrenArray=getSortedItems(Object.values(children));if(device.isMobile||!childrenArray.length){return null;}var isBanner=item_class==='Menu-ItemFigure_type_banner';var isLogo=item_class==='Menu-ItemFigure_type_logo';var mods={isBanner:!!isBanner,isLogo:!!isLogo};return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"SubLevelDesktop\",key:item_id},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"ItemList\",mods:_objectSpread({},mods)},childrenArray.map(function(item){return _this2.renderDesktopSubLevelItems(item,mods);})));}},{key:\"renderSubLevel\",value:function renderSubLevel(category){var activeMenuItemsStack=this.props.activeMenuItemsStack;var item_id=category.item_id,children=category.children;var childrenArray=getSortedItems(Object.values(children));var isVisible=activeMenuItemsStack.includes(item_id);var subcategoryMods={type:'subcategory'};return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"SubMenu\",mods:{isVisible:isVisible},key:item_id},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"ItemList\",mods:_objectSpread({},subcategoryMods)},childrenArray.map(this.renderSubLevelItems)));}},{key:\"renderPromotionCms\",value:function renderPromotionCms(){var closeMenu=this.props.closeMenu;var _window$contentConfig=window.contentConfiguration.header_content;_window$contentConfig=_window$contentConfig===void 0?{}:_window$contentConfig;var header_cms=_window$contentConfig.header_cms;if(header_cms){return/*#__PURE__*/_checkBEM(React,CmsBlock,{identifier:header_cms,blockType:HEADER_CMS_BLOCK});}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"Promotion\"},/*#__PURE__*/_checkBEM(React,\"h3\",{block:\"Menu\",elem:\"PageLink\"},/*#__PURE__*/_checkBEM(React,Link,{to:\"/about-us\",onClick:closeMenu,block:\"Menu\",elem:\"Link\"},__('ABOUT US'))),/*#__PURE__*/_checkBEM(React,\"h3\",{block:\"Menu\",elem:\"PageLink\"},/*#__PURE__*/_checkBEM(React,Link,{to:\"/about-us\",onClick:closeMenu,block:\"Menu\",elem:\"Link\"},__('CONTACTS'))),/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"Social\"},/*#__PURE__*/_checkBEM(React,CmsBlock,{identifier:\"social-links\"})));}},{key:\"renderSubMenuDesktop\",value:function renderSubMenuDesktop(itemList){var device=this.props.device;if(device.isMobile){return null;}var childrenArray=getSortedItems(Object.values(itemList));return childrenArray.map(this.renderSubMenuDesktopItems);}},{key:\"renderAdditionalInformation\",value:function renderAdditionalInformation(){var checkMobile=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var device=this.props.device;if(checkMobile&&!device.isMobile){return null;}return/*#__PURE__*/_checkBEM(React,React.Fragment,null,this.renderStoreSwitcher(),this.renderCurrencySwitcher(),this.renderComparePageLink(),this.renderPromotionCms());}},{key:\"renderFirstLevelItems\",value:function renderFirstLevelItems(item){var _this$props4=this.props,activeMenuItemsStack=_this$props4.activeMenuItemsStack,handleSubcategoryClick=_this$props4.handleSubcategoryClick,onCategoryHover=_this$props4.onCategoryHover,closeMenu=_this$props4.closeMenu,device=_this$props4.device;var children=item.children;var childrenArray=Object.values(children);var itemMods={type:'main'};if(childrenArray.length&&device.isMobile){return/*#__PURE__*/_checkBEM(React,\"div\",{// TODO: split into smaller components\n// eslint-disable-next-line react/jsx-no-bind\nonClick:function onClick(e){return handleSubcategoryClick(e,item);},tabIndex:\"0\",block:\"Menu\",elem:\"SubCatLink\",role:\"button\"},/*#__PURE__*/_checkBEM(React,MenuItem,{activeMenuItemsStack:activeMenuItemsStack,item:item,itemMods:itemMods,onCategoryHover:onCategoryHover,closeMenu:closeMenu}),this.renderSubLevel(item));}return/*#__PURE__*/_checkBEM(React,MenuItem,{activeMenuItemsStack:activeMenuItemsStack,item:item,itemMods:itemMods,onCategoryHover:onCategoryHover,closeMenu:closeMenu,isLink:true});}},{key:\"renderTopLevel\",value:function renderTopLevel(){var menu=this.props.menu;var categoryArray=Object.values(menu);if(!categoryArray.length){return null;}var _categoryArray=_slicedToArray(categoryArray,1),_categoryArray$=_categoryArray[0],children=_categoryArray$.children,mainCategoriesTitle=_categoryArray$.title;var childrenArray=getSortedItems(Object.values(children));return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"MainCategories\"},/*#__PURE__*/_checkBEM(React,\"ul\",{block:\"Menu\",elem:\"ItemList\",mods:{type:'main'},\"aria-label\":mainCategoriesTitle},childrenArray.map(this.renderFirstLevel)),this.renderAdditionalInformation(true)),this.renderSubMenuDesktop(children));}},{key:\"renderCurrencySwitcher\",value:function renderCurrencySwitcher(){var device=this.props.device;if(!device.isMobile){return null;}return/*#__PURE__*/_checkBEM(React,CurrencySwitcher,null);}},{key:\"renderStoreSwitcher\",value:function renderStoreSwitcher(){var device=this.props.device;if(!device.isMobile){return null;}return/*#__PURE__*/_checkBEM(React,StoreSwitcher,null);}},{key:\"renderComparePageLink\",value:function renderComparePageLink(){var device=this.props.device;if(!device.isMobile){return null;}return/*#__PURE__*/_checkBEM(React,\"h3\",{block:\"Menu\",elem:\"CompareLinkWrapper\"},/*#__PURE__*/_checkBEM(React,Link,{to:\"compare\",block:\"Menu\",elem:\"CompareLink\"},__('Compare')));}},{key:\"render\",value:function render(){var closeMenu=this.props.closeMenu;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Menu\",elem:\"MenuWrapper\",onMouseLeave:closeMenu},this.renderTopLevel());}}]);return _Menu;}(Extensible(PureComponent));Object.defineProperty(_Menu,'name',{value:'Menu'});export var Menu=middleware(_Menu,\"Component/Menu/Component\");export default Menu;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/Menu/Menu.component.js"],"names":["PureComponent","CmsBlock","CurrencySwitcher","Link","MenuItem","StoreSwitcher","DeviceType","MenuType","getSortedItems","debounce","HEADER_CMS_BLOCK","SCROLL_DEBOUNCE_DELAY","Menu","renderSubLevelItems","item","props","handleSubcategoryClick","activeMenuItemsStack","onCategoryHover","closeMenu","device","item_id","children","item_class","isBanner","isHideOnDesktop","mods","childrenArray","Object","values","subcategoryMods","type","length","isMobile","e","renderSubLevel","renderDesktopSubLevel","renderSubMenuDesktopItems","keys","isVisible","includes","renderAdditionalInformation","renderFirstLevel","renderFirstLevelItems","debouncedCloseMenu","window","addEventListener","removeEventListener","itemMods","category","isLogo","map","renderDesktopSubLevelItems","contentConfiguration","header_content","header_cms","__","itemList","checkMobile","renderStoreSwitcher","renderCurrencySwitcher","renderComparePageLink","renderPromotionCms","menu","categoryArray","mainCategoriesTitle","title","renderSubMenuDesktop","renderTopLevel","defineProperty","_Menu","value"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CmsBlock from 'Component/CmsBlock';\nimport CurrencySwitcher from 'Component/CurrencySwitcher';\nimport Link from 'Component/Link';\nimport MenuItem from 'Component/MenuItem';\nimport StoreSwitcher from 'Component/StoreSwitcher';\nimport { DeviceType } from 'Type/Device';\nimport { MenuType } from 'Type/Menu';\nimport { getSortedItems } from 'Util/Menu';\nimport { debounce } from 'Util/Request';\n\nimport { HEADER_CMS_BLOCK, SCROLL_DEBOUNCE_DELAY } from './Menu.config';\n\nimport './Menu.style';\n\n/** @namespace Component/Menu/Component */\nexport class Menu extends PureComponent {\n    static propTypes = {\n        menu: MenuType.isRequired,\n        activeMenuItemsStack: PropTypes.array.isRequired,\n        handleSubcategoryClick: PropTypes.func.isRequired,\n        closeMenu: PropTypes.func.isRequired,\n        onCategoryHover: PropTypes.func.isRequired,\n        device: DeviceType.isRequired\n    };\n\n    componentDidMount() {\n        const { closeMenu } = this.props;\n\n        this.debouncedCloseMenu = debounce(closeMenu, SCROLL_DEBOUNCE_DELAY);\n\n        window.addEventListener('scroll', this.debouncedCloseMenu);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.debouncedCloseMenu);\n    }\n\n    renderDesktopSubLevelItems(item, mods) {\n        const { item_id, item_class } = item;\n        const { closeMenu, activeMenuItemsStack } = this.props;\n\n        const isHideOnDesktop = item_class === 'Menu-ItemFigure_type_hideOnDesktop';\n        const itemMods = { ...mods, isHideOnDesktop };\n\n        return (\n            <MenuItem\n              activeMenuItemsStack={ activeMenuItemsStack }\n              item={ item }\n              itemMods={ itemMods }\n              closeMenu={ closeMenu }\n              isLink\n              key={ item_id }\n            />\n        );\n    }\n\n    renderDesktopSubLevel(category) {\n        const { device } = this.props;\n        const { children, item_class, item_id } = category;\n        const childrenArray = getSortedItems(Object.values(children));\n\n        if (device.isMobile || !childrenArray.length) {\n            return null;\n        }\n\n        const isBanner = item_class === 'Menu-ItemFigure_type_banner';\n        const isLogo = item_class === 'Menu-ItemFigure_type_logo';\n        const mods = {\n            isBanner: !!isBanner,\n            isLogo: !!isLogo\n        };\n\n        return (\n            <div\n              block=\"Menu\"\n              elem=\"SubLevelDesktop\"\n              key={ item_id }\n            >\n                <div\n                  block=\"Menu\"\n                  elem=\"ItemList\"\n                  mods={ { ...mods } }\n                >\n                    { childrenArray.map((item) => this.renderDesktopSubLevelItems(item, mods)) }\n                </div>\n            </div>\n        );\n    }\n\n    renderSubLevelItems = (item) => {\n        const {\n            handleSubcategoryClick,\n            activeMenuItemsStack,\n            onCategoryHover,\n            closeMenu,\n            device\n        } = this.props;\n\n        const {\n            item_id,\n            children,\n            item_class\n        } = item;\n\n        const isBanner = item_class === 'Menu-ItemFigure_type_banner';\n        const isHideOnDesktop = item_class === 'Menu-ItemFigure_type_hideOnDesktop';\n        const mods = {\n            isBanner: !!isBanner,\n            isHideOnDesktop: !!isHideOnDesktop\n        };\n\n        const childrenArray = Object.values(children);\n        const subcategoryMods = { type: 'subcategory' };\n\n        if (childrenArray.length && device.isMobile) {\n            return (\n                <div\n                  key={ item_id }\n                  // TODO: split into smaller components\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={ (e) => handleSubcategoryClick(e, item) }\n                  tabIndex=\"0\"\n                  role=\"button\"\n                >\n                    <MenuItem\n                      activeMenuItemsStack={ activeMenuItemsStack }\n                      item={ item }\n                      itemMods={ subcategoryMods }\n                      onCategoryHover={ onCategoryHover }\n                      closeMenu={ closeMenu }\n                    />\n                    { this.renderSubLevel(item) }\n                </div>\n            );\n        }\n\n        return (\n            <div\n              block=\"Menu\"\n              elem=\"SubItemWrapper\"\n              key={ item_id }\n              mods={ mods }\n            >\n                <MenuItem\n                  activeMenuItemsStack={ activeMenuItemsStack }\n                  item={ item }\n                  closeMenu={ closeMenu }\n                  isLink\n                />\n                { this.renderDesktopSubLevel(item) }\n            </div>\n        );\n    };\n\n    renderSubLevel(category) {\n        const { activeMenuItemsStack } = this.props;\n        const { item_id, children } = category;\n        const childrenArray = getSortedItems(Object.values(children));\n        const isVisible = activeMenuItemsStack.includes(item_id);\n        const subcategoryMods = { type: 'subcategory' };\n\n        return (\n            <div\n              block=\"Menu\"\n              elem=\"SubMenu\"\n              mods={ { isVisible } }\n              key={ item_id }\n            >\n                <div\n                  block=\"Menu\"\n                  elem=\"ItemList\"\n                  mods={ { ...subcategoryMods } }\n                >\n                    { childrenArray.map(this.renderSubLevelItems) }\n                </div>\n            </div>\n        );\n    }\n\n    renderPromotionCms() {\n        const { closeMenu } = this.props;\n        const { header_content: { header_cms } = {} } = window.contentConfiguration;\n\n        if (header_cms) {\n            return <CmsBlock identifier={ header_cms } blockType={ HEADER_CMS_BLOCK } />;\n        }\n\n        return (\n            <div block=\"Menu\" elem=\"Promotion\">\n                <h3 block=\"Menu\" elem=\"PageLink\">\n                    <Link\n                      to=\"/about-us\"\n                      onClick={ closeMenu }\n                      block=\"Menu\"\n                      elem=\"Link\"\n                    >\n                        { __('ABOUT US') }\n                    </Link>\n                </h3>\n                <h3 block=\"Menu\" elem=\"PageLink\">\n                    <Link\n                      to=\"/about-us\"\n                      onClick={ closeMenu }\n                      block=\"Menu\"\n                      elem=\"Link\"\n                    >\n                        { __('CONTACTS') }\n                    </Link>\n                </h3>\n                <div block=\"Menu\" elem=\"Social\">\n                    <CmsBlock identifier=\"social-links\" />\n                </div>\n            </div>\n        );\n    }\n\n    renderSubMenuDesktopItems = (item) => {\n        const { item_id, children } = item;\n\n        if (!Object.keys(children).length) {\n            return null;\n        }\n\n        const { activeMenuItemsStack, closeMenu } = this.props;\n        const isVisible = activeMenuItemsStack.includes(item_id);\n\n        if (!isVisible) {\n            return null;\n        }\n\n        return (\n            <div\n              block=\"Menu\"\n              elem=\"SubCategoriesWrapper\"\n              mods={ { isVisible } }\n              key={ item_id }\n            >\n                <div\n                  block=\"Menu\"\n                  elem=\"SubCategoriesWrapperInner\"\n                  mods={ { isVisible } }\n                >\n                    <div\n                      block=\"Menu\"\n                      elem=\"SubCategories\"\n                    >\n                        { this.renderSubLevel(item) }\n                    </div>\n                    { this.renderAdditionalInformation() }\n                </div>\n                <div\n                  block=\"Menu\"\n                  elem=\"Overlay\"\n                  mods={ { isVisible } }\n                  onMouseEnter={ closeMenu }\n                />\n            </div>\n        );\n    };\n\n    renderSubMenuDesktop(itemList) {\n        const { device } = this.props;\n        if (device.isMobile) {\n            return null;\n        }\n\n        const childrenArray = getSortedItems(Object.values(itemList));\n\n        return childrenArray.map(this.renderSubMenuDesktopItems);\n    }\n\n    renderAdditionalInformation(checkMobile = false) {\n        const { device } = this.props;\n        if (checkMobile && !device.isMobile) {\n            return null;\n        }\n\n        return (\n            <>\n                { this.renderStoreSwitcher() }\n                { this.renderCurrencySwitcher() }\n                { this.renderComparePageLink() }\n                { this.renderPromotionCms() }\n            </>\n        );\n    }\n\n    renderFirstLevelItems(item) {\n        const {\n            activeMenuItemsStack,\n            handleSubcategoryClick,\n            onCategoryHover,\n            closeMenu,\n            device\n        } = this.props;\n\n        const { children } = item;\n        const childrenArray = Object.values(children);\n        const itemMods = { type: 'main' };\n\n        if (childrenArray.length && device.isMobile) {\n            return (\n                <div\n                  // TODO: split into smaller components\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={ (e) => handleSubcategoryClick(e, item) }\n                  tabIndex=\"0\"\n                  block=\"Menu\"\n                  elem=\"SubCatLink\"\n                  role=\"button\"\n                >\n                    <MenuItem\n                      activeMenuItemsStack={ activeMenuItemsStack }\n                      item={ item }\n                      itemMods={ itemMods }\n                      onCategoryHover={ onCategoryHover }\n                      closeMenu={ closeMenu }\n                    />\n                    { this.renderSubLevel(item) }\n                </div>\n            );\n        }\n\n        return (\n            <MenuItem\n              activeMenuItemsStack={ activeMenuItemsStack }\n              item={ item }\n              itemMods={ itemMods }\n              onCategoryHover={ onCategoryHover }\n              closeMenu={ closeMenu }\n              isLink\n            />\n        );\n    }\n\n    renderFirstLevel = (item) => {\n        const { item_id, item_class } = item;\n\n        const isHideOnDesktop = item_class === 'Menu-ItemFigure_type_hideOnDesktop';\n\n        return (\n            <li\n              block=\"Menu\"\n              elem=\"Item\"\n              key={ item_id }\n              mods={ { isHideOnDesktop } }\n            >\n                { this.renderFirstLevelItems(item) }\n            </li>\n        );\n    };\n\n    renderTopLevel() {\n        const { menu } = this.props;\n        const categoryArray = Object.values(menu);\n\n        if (!categoryArray.length) {\n            return null;\n        }\n\n        const [{ children, title: mainCategoriesTitle }] = categoryArray;\n        const childrenArray = getSortedItems(Object.values(children));\n\n        return (\n            <>\n                <div block=\"Menu\" elem=\"MainCategories\">\n                    <ul\n                      block=\"Menu\"\n                      elem=\"ItemList\"\n                      mods={ { type: 'main' } }\n                      aria-label={ mainCategoriesTitle }\n                    >\n                        { childrenArray.map(this.renderFirstLevel) }\n                    </ul>\n                    { this.renderAdditionalInformation(true) }\n                </div>\n                { this.renderSubMenuDesktop(children) }\n            </>\n        );\n    }\n\n    renderCurrencySwitcher() {\n        const { device } = this.props;\n        if (!device.isMobile) {\n            return null;\n        }\n\n        return <CurrencySwitcher />;\n    }\n\n    renderStoreSwitcher() {\n        const { device } = this.props;\n        if (!device.isMobile) {\n            return null;\n        }\n\n        return <StoreSwitcher />;\n    }\n\n    renderComparePageLink() {\n        const { device } = this.props;\n        if (!device.isMobile) {\n            return null;\n        }\n\n        return (\n            <h3 block=\"Menu\" elem=\"CompareLinkWrapper\">\n                <Link to=\"compare\" block=\"Menu\" elem=\"CompareLink\">\n                    { __('Compare') }\n                </Link>\n            </h3>\n        );\n    }\n\n    render() {\n        const { closeMenu } = this.props;\n\n        return (\n            <div\n              block=\"Menu\"\n              elem=\"MenuWrapper\"\n              onMouseLeave={ closeMenu }\n            >\n                { this.renderTopLevel() }\n            </div>\n        );\n    }\n}\n\nexport default Menu;\n"]},"metadata":{},"sourceType":"module"}