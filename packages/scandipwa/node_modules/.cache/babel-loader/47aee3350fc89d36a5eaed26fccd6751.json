{"ast":null,"code":"/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport NewsletterSubscriptionQuery from \"D:\\\\task\\\\magento2\\\\ScandiPWA\\\\packages\\\\scandipwa\\\\src\\\\query/NewsletterSubscription.query\";\nimport { showNotification } from \"D:\\\\task\\\\magento2\\\\ScandiPWA\\\\packages\\\\scandipwa\\\\src\\\\store/Notification/Notification.action\";\nimport { fetchMutation, getErrorMessage } from \"D:\\\\task\\\\magento2\\\\ScandiPWA\\\\packages\\\\scandipwa\\\\src\\\\util/Request\";\nexport const NOT_ACTIVE = 'NOT_ACTIVE';\n/**\n * Product Cart Dispatcher\n * @class NewsletterSubscriptionDispatcher\n * @namespace Store/NewsletterSubscription/Dispatcher\n */\n\nexport class _NewsletterSubscriptionDispatcher extends Extensible() {\n  subscribeToNewsletter(dispatch, email) {\n    return fetchMutation(NewsletterSubscriptionQuery.getSubscribeToNewsletterMutation(email)).then(\n    /** @namespace Store/NewsletterSubscription/Dispatcher/fetchMutationThen */\n    middleware(function ({\n      subscribeEmailToNewsletter: {\n        status\n      }\n    }) {\n      // `NOT_ACTIVE` response status corresponds to `newsletter_subscription_confirm` magento setting\n      const message = status === NOT_ACTIVE ? __('Confirmation request has been sent.') : __('Thank you for your subscription.');\n      return dispatch(showNotification('success', message));\n    }, \"Store/NewsletterSubscription/Dispatcher/fetchMutationThen\"),\n    /** @namespace Store/NewsletterSubscription/Dispatcher/fetchMutationSuccess */\n    middleware(function (error) {\n      return dispatch(showNotification('error', getErrorMessage(error)));\n    }, \"Store/NewsletterSubscription/Dispatcher/fetchMutationSuccess\"));\n  }\n\n}\nObject.defineProperty(_NewsletterSubscriptionDispatcher, 'name', {\n  value: 'NewsletterSubscriptionDispatcher'\n});\n\nexport const NewsletterSubscriptionDispatcher = middleware(_NewsletterSubscriptionDispatcher, \"Store/NewsletterSubscription/Dispatcher\");\nexport default new NewsletterSubscriptionDispatcher();","map":{"version":3,"sources":["D:/task/magento2/ScandiPWA/packages/scandipwa/src/store/NewsletterSubscription/NewsletterSubscription.dispatcher.js"],"names":["NewsletterSubscriptionQuery","showNotification","fetchMutation","getErrorMessage","NOT_ACTIVE","NewsletterSubscriptionDispatcher","subscribeToNewsletter","dispatch","email","getSubscribeToNewsletterMutation","then","subscribeEmailToNewsletter","status","message","__","error","Object","defineProperty","_NewsletterSubscriptionDispatcher","value"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,2BAAP;AACA,SAASC,gBAAT;AACA,SAASC,aAAT,EAAwBC,eAAxB;AAEA,OAAO,MAAMC,UAAU,GAAG,YAAnB;AAEP;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,iCAAN,sBAAuC;AAC1CC,EAAAA,qBAAqB,CAACC,QAAD,EAAWC,KAAX,EAAkB;AACnC,WAAON,aAAa,CAACF,2BAA2B,CAACS,gCAA5B,CAA6DD,KAA7D,CAAD,CAAb,CAAmFE,IAAnF;AACH;AADG,eAEH,UAAC;AAAEC,MAAAA,0BAA0B,EAAE;AAAEC,QAAAA;AAAF;AAA9B,KAAD,EAAgD;AAC5C;AACA,YAAMC,OAAO,GAAGD,MAAM,KAAKR,UAAX,GACVU,EAAE,CAAC,qCAAD,CADQ,GAEVA,EAAE,CAAC,kCAAD,CAFR;AAIA,aAAOP,QAAQ,CAACN,gBAAgB,CAAC,SAAD,EAAYY,OAAZ,CAAjB,CAAf;AACH,KATE;AAUH;AAVG,eAWH,UAACE,KAAD;AAAA,aAAWR,QAAQ,CAACN,gBAAgB,CAAC,OAAD,EAAUE,eAAe,CAACY,KAAD,CAAzB,CAAjB,CAAnB;AAAA,KAXG,kEAAP;AAaH;;AAfyC;AAtB9CC,MAAM,CAACC,cAAP,CAAsBC,iCAAtB,EAAyD,MAAzD,EAAiE;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAAjE;;;AAwCA,eAAe,IAAId,gCAAJ,EAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport NewsletterSubscriptionQuery from 'Query/NewsletterSubscription.query';\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { fetchMutation, getErrorMessage } from 'Util/Request';\n\nexport const NOT_ACTIVE = 'NOT_ACTIVE';\n\n/**\n * Product Cart Dispatcher\n * @class NewsletterSubscriptionDispatcher\n * @namespace Store/NewsletterSubscription/Dispatcher\n */\nexport class NewsletterSubscriptionDispatcher {\n    subscribeToNewsletter(dispatch, email) {\n        return fetchMutation(NewsletterSubscriptionQuery.getSubscribeToNewsletterMutation(email)).then(\n            /** @namespace Store/NewsletterSubscription/Dispatcher/fetchMutationThen */\n            ({ subscribeEmailToNewsletter: { status } }) => {\n                // `NOT_ACTIVE` response status corresponds to `newsletter_subscription_confirm` magento setting\n                const message = status === NOT_ACTIVE\n                    ? __('Confirmation request has been sent.')\n                    : __('Thank you for your subscription.');\n\n                return dispatch(showNotification('success', message));\n            },\n            /** @namespace Store/NewsletterSubscription/Dispatcher/fetchMutationSuccess */\n            (error) => dispatch(showNotification('error', getErrorMessage(error)))\n        );\n    }\n}\n\nexport default new NewsletterSubscriptionDispatcher();\n"]},"metadata":{},"sourceType":"module"}