{"ast":null,"code":"import _toConsumableArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import PropTypes from'prop-types';import ProductCustomizableOptionsContainer from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCustomizableOptions/ProductCustomizableOptions.container\";import{ProductItemsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/ProductList\";import ProductBundleItems from\"./ProductBundleItems.component\";/** @namespace Component/ProductBundleItems/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductBundleItemsContainer=/*#__PURE__*/function(_Extensible){_inherits(_ProductBundleItemsContainer,_Extensible);var _super=_createSuper(_ProductBundleItemsContainer);function _ProductBundleItemsContainer(){var _this;_classCallCheck(this,_ProductBundleItemsContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.containerFunctions=_objectSpread(_objectSpread({},_this.containerFunctions),{},{updateQuantity:_this.updateQuantity.bind(_assertThisInitialized(_this))});_this.getItemsPrice=function(item){var _this$state=_this.state,_this$state$selectedD=_this$state.selectedDropdownOptions,selectedDropdownOptions=_this$state$selectedD===void 0?[]:_this$state$selectedD,_this$state$selectedC=_this$state.selectedCheckboxValues,selectedCheckboxValues=_this$state$selectedC===void 0?[]:_this$state$selectedC;var values=[].concat(_toConsumableArray(selectedCheckboxValues),_toConsumableArray(selectedDropdownOptions));if(values.length){return _this.getOptionPrice(item,values);}return{price:0,priceExclTax:0,initialPrice:0};};return _this;}_createClass(_ProductBundleItemsContainer,[{key:\"componentDidMount\",value:function componentDidMount(){var items=this.props.items;if(items){this.stopLoading();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(_,prevState){var items=this.props.items;var _this$state2=this.state,selectedCheckboxValues=_this$state2.selectedCheckboxValues,selectedDropdownOptions=_this$state2.selectedDropdownOptions,isLoading=_this$state2.isLoading;var prevSelectedCheckboxValues=prevState.selectedCheckboxValues,prevSelectedDropdownOptions=prevState.selectedDropdownOptions;if(items&&isLoading){this.stopLoading();}if(selectedDropdownOptions!==prevSelectedDropdownOptions||selectedCheckboxValues!==prevSelectedCheckboxValues){this.updateSelectedOptions();}}},{key:\"stopLoading\",value:function stopLoading(){this.setState({isLoading:false});}},{key:\"getOptionPrice\",value:function getOptionPrice(item,selectedValues){var option_id=item.option_id,options=item.options;return selectedValues.filter(function(_ref){var id=_ref.id;return id===option_id;}).reduce(function(acc,_ref2){var quantity=_ref2.quantity,value=_ref2.value;var price=acc.price,priceExclTax=acc.priceExclTax,initialPrice=acc.initialPrice;var selectedOption=options.find(function(option){return JSON.stringify(value)===JSON.stringify([option.id.toString()])&&option.product!==null;});if(!selectedOption){return acc;}var finalOptionPrice=selectedOption.finalOptionPrice,finalOptionPriceExclTax=selectedOption.finalOptionPriceExclTax,regularOptionPrice=selectedOption.regularOptionPrice;return{price:price+finalOptionPrice*quantity,priceExclTax:priceExclTax+finalOptionPriceExclTax*quantity,initialPrice:initialPrice+regularOptionPrice*quantity};},{price:0,priceExclTax:0,initialPrice:0});}},{key:\"getTotalPrice\",value:function getTotalPrice(){var items=this.props.items;return items.map(this.getItemsPrice).reduce(function(_ref3,item){var price=_ref3.price,finalPrice=_ref3.finalPrice,priceExclTax=_ref3.priceExclTax;return{price:price+item.initialPrice,finalPrice:finalPrice+item.price,priceExclTax:priceExclTax+item.priceExclTax};},{price:0,finalPrice:0,priceExclTax:0});}},{key:\"updateSelectedOptions\",value:function updateSelectedOptions(){var _this$props=this.props,getSelectedCustomizableOptions=_this$props.getSelectedCustomizableOptions,setBundlePrice=_this$props.setBundlePrice;var _this$state3=this.state,selectedDropdownOptions=_this$state3.selectedDropdownOptions,selectedCheckboxValues=_this$state3.selectedCheckboxValues;var bundleOptions=[];var bundlePrices=this.getTotalPrice();bundleOptions.push.apply(bundleOptions,bundleOptions.concat(_toConsumableArray(selectedCheckboxValues),_toConsumableArray(selectedDropdownOptions)));getSelectedCustomizableOptions(bundleOptions);setBundlePrice(bundlePrices);}},{key:\"setSelectedDropdownValue\",value:function setSelectedDropdownValue(id,option){var selectedDropdownOptions=this.state.selectedDropdownOptions;var value=option.value,quantity=option.quantity,option_id=option.option_id;if(!id){var filteredOptions=selectedDropdownOptions.filter(function(item){return item.id!==option_id;});this.setState({selectedDropdownOptions:filteredOptions});return;}var optionData={id:id,quantity:quantity,value:[value]};if(selectedDropdownOptions.some(function(_ref4){var val=_ref4.id;return val===id;})){var filteredItems=selectedDropdownOptions.filter(function(item){return item.id!==id;});this.setState({selectedDropdownOptions:filteredItems.concat(optionData)});return;}var newItemData=selectedDropdownOptions;newItemData.push(optionData);this.setState({selectedDropdownOptions:Array.from(newItemData)});}},{key:\"updateQuantity\",value:function updateQuantity(value,quantity){var selectedCheckboxValues=this.state.selectedCheckboxValues;this.setState({selectedCheckboxValues:selectedCheckboxValues.map(function(el){return JSON.stringify(el.value)===JSON.stringify(value)?_objectSpread(_objectSpread({},el),{},{quantity:quantity}):el;})});}},{key:\"setSelectedCheckboxValues\",value:function setSelectedCheckboxValues(id,optionData){var selectedCheckboxValues=this.state.selectedCheckboxValues;var value=optionData.value,quantity=optionData.quantity;var selectedValue={id:id,quantity:quantity,value:[value]};if(selectedCheckboxValues.some(function(_ref5){var val=_ref5.value;return JSON.stringify([value])===JSON.stringify(val);})){this.setState({selectedCheckboxValues:selectedCheckboxValues.filter(function(item){return JSON.stringify(item.value)!==JSON.stringify([value]);})||[]});return;}var newItemData=selectedCheckboxValues;newItemData.push(selectedValue);this.setState({selectedCheckboxValues:Array.from(newItemData)});}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,ProductBundleItems,Object.assign({},this.props,this.state,this.containerFunctions));}}]);return _ProductBundleItemsContainer;}(Extensible(ProductCustomizableOptionsContainer));_ProductBundleItemsContainer.propTypes=_objectSpread(_objectSpread({},ProductCustomizableOptionsContainer.propTypes),{},{items:ProductItemsType,setBundlePrice:PropTypes.func.isRequired});_ProductBundleItemsContainer.defaultProps={items:[]};Object.defineProperty(_ProductBundleItemsContainer,'name',{value:'ProductBundleItemsContainer'});export var ProductBundleItemsContainer=middleware(_ProductBundleItemsContainer,\"Component/ProductBundleItems/Container\");export default ProductBundleItemsContainer;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductBundleItems/ProductBundleItems.container.js"],"names":["PropTypes","ProductCustomizableOptionsContainer","ProductItemsType","ProductBundleItems","ProductBundleItemsContainer","containerFunctions","updateQuantity","bind","getItemsPrice","item","state","selectedDropdownOptions","selectedCheckboxValues","values","length","getOptionPrice","price","priceExclTax","initialPrice","items","props","stopLoading","_","prevState","isLoading","prevSelectedCheckboxValues","prevSelectedDropdownOptions","updateSelectedOptions","setState","selectedValues","option_id","options","filter","id","reduce","acc","quantity","value","selectedOption","find","option","JSON","stringify","toString","product","finalOptionPrice","finalOptionPriceExclTax","regularOptionPrice","map","finalPrice","getSelectedCustomizableOptions","setBundlePrice","bundleOptions","bundlePrices","getTotalPrice","push","filteredOptions","optionData","some","val","filteredItems","concat","newItemData","Array","from","el","selectedValue","propTypes","func","isRequired","defaultProps","Object","defineProperty","_ProductBundleItemsContainer"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright Â© Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\n\nimport ProductCustomizableOptionsContainer\n    from 'Component/ProductCustomizableOptions/ProductCustomizableOptions.container';\nimport { ProductItemsType } from 'Type/ProductList';\n\nimport ProductBundleItems from './ProductBundleItems.component';\n\n/** @namespace Component/ProductBundleItems/Container */\nexport class ProductBundleItemsContainer extends ProductCustomizableOptionsContainer {\n    static propTypes = {\n        ...ProductCustomizableOptionsContainer.propTypes,\n        items: ProductItemsType,\n        setBundlePrice: PropTypes.func.isRequired\n    };\n\n    static defaultProps = {\n        items: []\n    };\n\n    containerFunctions = {\n        ...this.containerFunctions,\n        updateQuantity: this.updateQuantity.bind(this)\n    };\n\n    componentDidMount() {\n        const { items } = this.props;\n\n        if (items) {\n            this.stopLoading();\n        }\n    }\n\n    componentDidUpdate(_, prevState) {\n        const { items } = this.props;\n        const {\n            selectedCheckboxValues,\n            selectedDropdownOptions,\n            isLoading\n        } = this.state;\n\n        const {\n            selectedCheckboxValues: prevSelectedCheckboxValues,\n            selectedDropdownOptions: prevSelectedDropdownOptions\n        } = prevState;\n\n        if (items && isLoading) {\n            this.stopLoading();\n        }\n\n        if (\n            selectedDropdownOptions !== prevSelectedDropdownOptions\n            || selectedCheckboxValues !== prevSelectedCheckboxValues\n        ) {\n            this.updateSelectedOptions();\n        }\n    }\n\n    stopLoading() {\n        this.setState({ isLoading: false });\n    }\n\n    getOptionPrice(item, selectedValues) {\n        const { option_id, options } = item;\n\n        return selectedValues\n            .filter(({ id }) => id === option_id)\n            .reduce((acc, { quantity, value }) => {\n                const { price, priceExclTax, initialPrice } = acc;\n                const selectedOption = options.find(\n                    (option) => JSON.stringify(value) === JSON.stringify([option.id.toString()])\n                        && option.product !== null\n                );\n\n                if (!selectedOption) {\n                    return acc;\n                }\n\n                const {\n                    finalOptionPrice,\n                    finalOptionPriceExclTax,\n                    regularOptionPrice\n                } = selectedOption;\n\n                return {\n                    price: price + finalOptionPrice * quantity,\n                    priceExclTax: priceExclTax + finalOptionPriceExclTax * quantity,\n                    initialPrice: initialPrice + regularOptionPrice * quantity\n                };\n            }, { price: 0, priceExclTax: 0, initialPrice: 0 });\n    }\n\n    getItemsPrice = (item) => {\n        const {\n            selectedDropdownOptions = [],\n            selectedCheckboxValues = []\n        } = this.state;\n\n        const values = [...selectedCheckboxValues, ...selectedDropdownOptions];\n\n        if (values.length) {\n            return this.getOptionPrice(item, values);\n        }\n\n        return { price: 0, priceExclTax: 0, initialPrice: 0 };\n    };\n\n    getTotalPrice() {\n        const { items } = this.props;\n\n        return items\n            .map(this.getItemsPrice)\n            .reduce(\n                ({ price, finalPrice, priceExclTax }, item) => ({\n                    price: price + item.initialPrice,\n                    finalPrice: finalPrice + item.price,\n                    priceExclTax: priceExclTax + item.priceExclTax\n                }),\n                { price: 0, finalPrice: 0, priceExclTax: 0 }\n            );\n    }\n\n    updateSelectedOptions() {\n        const { getSelectedCustomizableOptions, setBundlePrice } = this.props;\n        const { selectedDropdownOptions, selectedCheckboxValues } = this.state;\n        const bundleOptions = [];\n        const bundlePrices = this.getTotalPrice();\n\n        bundleOptions.push(\n            ...bundleOptions,\n            ...selectedCheckboxValues,\n            ...selectedDropdownOptions\n        );\n\n        getSelectedCustomizableOptions(bundleOptions);\n        setBundlePrice(bundlePrices);\n    }\n\n    setSelectedDropdownValue(id, option) {\n        const { selectedDropdownOptions } = this.state;\n        const { value, quantity, option_id } = option;\n\n        if (!id) {\n            const filteredOptions = selectedDropdownOptions.filter((item) => item.id !== option_id);\n            this.setState({ selectedDropdownOptions: filteredOptions });\n\n            return;\n        }\n\n        const optionData = { id, quantity, value: [value] };\n\n        if (selectedDropdownOptions.some(({ id: val }) => val === id)) {\n            const filteredItems = selectedDropdownOptions.filter((item) => item.id !== id);\n            this.setState({ selectedDropdownOptions: filteredItems.concat(optionData) });\n\n            return;\n        }\n\n        const newItemData = selectedDropdownOptions;\n        newItemData.push(optionData);\n\n        this.setState({\n            selectedDropdownOptions: Array.from(newItemData)\n        });\n    }\n\n    updateQuantity(value, quantity) {\n        const { selectedCheckboxValues } = this.state;\n\n        this.setState({\n            selectedCheckboxValues: selectedCheckboxValues.map((el) => (\n                JSON.stringify(el.value) === JSON.stringify(value) ? { ...el, quantity } : el\n            ))\n        });\n    }\n\n    setSelectedCheckboxValues(id, optionData) {\n        const { selectedCheckboxValues } = this.state;\n        const { value, quantity } = optionData;\n        const selectedValue = { id, quantity, value: [value] };\n\n        if (selectedCheckboxValues.some(({ value: val }) => JSON.stringify([value]) === JSON.stringify(val))) {\n            this.setState({\n                selectedCheckboxValues: selectedCheckboxValues.filter(\n                    (item) => JSON.stringify(item.value) !== JSON.stringify([value])\n                ) || []\n            });\n\n            return;\n        }\n\n        const newItemData = selectedCheckboxValues;\n        newItemData.push(selectedValue);\n\n        this.setState({\n            selectedCheckboxValues: Array.from(newItemData)\n        });\n    }\n\n    render() {\n        return (\n            <ProductBundleItems\n              { ...this.props }\n              { ...this.state }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default ProductBundleItemsContainer;\n"]},"metadata":{},"sourceType":"module"}