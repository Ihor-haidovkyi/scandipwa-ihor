{"ast":null,"code":"import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import BrowserDatabase from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/BrowserDatabase\";import{UPDATE_LINKED_PRODUCTS}from\"./LinkedProducts.action\";import{LINKED_PRODUCTS}from\"./LinkedProducts.dispatcher\";export var UPSELL='upsell';export var RELATED='related';export var CROSS_SELL='crosssell';/** @namespace Store/LinkedProducts/Reducer/getInitialState */export var getInitialState=middleware(function(){return{linkedProducts:BrowserDatabase.getItem(LINKED_PRODUCTS)||{upsell:{},related:{},crosssell:{}}};},\"Store/LinkedProducts/Reducer/getInitialState\");/** @namespace Store/LinkedProducts/Reducer */export var LinkedProductsReducer=middleware(function(){var _linkedProducts2;var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getInitialState();var action=arguments.length>1?arguments[1]:undefined;var type=action.type;if(type!==UPDATE_LINKED_PRODUCTS){return state;}var _action$linkedProduct=action.linkedProducts,upsell=_action$linkedProduct[UPSELL],related=_action$linkedProduct[RELATED],crosssell=_action$linkedProduct[CROSS_SELL],_action$linkedProduct2=_action$linkedProduct.updateCrossSell,updateCrossSell=_action$linkedProduct2===void 0?false:_action$linkedProduct2;var prevCrossSell=state.linkedProducts[CROSS_SELL];if(updateCrossSell){var _linkedProducts;return _objectSpread(_objectSpread({},state),{},{linkedProducts:(_linkedProducts={},_defineProperty(_linkedProducts,UPSELL,upsell),_defineProperty(_linkedProducts,RELATED,related),_defineProperty(_linkedProducts,CROSS_SELL,crosssell),_linkedProducts)});}return _objectSpread(_objectSpread({},state),{},{linkedProducts:(_linkedProducts2={},_defineProperty(_linkedProducts2,UPSELL,upsell),_defineProperty(_linkedProducts2,RELATED,related),_defineProperty(_linkedProducts2,CROSS_SELL,_objectSpread(_objectSpread(_objectSpread({},prevCrossSell),related),{},{items:Object.values(_objectSpread(_objectSpread({},prevCrossSell.items),crosssell.items))})),_linkedProducts2)});},\"Store/LinkedProducts/Reducer\");export default LinkedProductsReducer;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/store/LinkedProducts/LinkedProducts.reducer.js"],"names":["BrowserDatabase","UPDATE_LINKED_PRODUCTS","LINKED_PRODUCTS","UPSELL","RELATED","CROSS_SELL","getInitialState","linkedProducts","getItem","upsell","related","crosssell","LinkedProductsReducer","state","action","type","updateCrossSell","prevCrossSell","items","Object","values"],"mappings":"mSAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,MAAOA,CAAAA,eAAP,8EAEA,OAASC,sBAAT,+BACA,OAASC,eAAT,mCAEA,MAAO,IAAMC,CAAAA,MAAM,CAAG,QAAf,CACP,MAAO,IAAMC,CAAAA,OAAO,CAAG,SAAhB,CACP,MAAO,IAAMC,CAAAA,UAAU,CAAG,WAAnB,CAEP,8DACA,MAAO,IAAMC,CAAAA,eAAe,YAAG,iBAAO,CAClCC,cAAc,CAAEP,eAAe,CAACQ,OAAhB,CAAwBN,eAAxB,GAA4C,CACxDO,MAAM,CAAE,EADgD,CAExDC,OAAO,CAAE,EAF+C,CAGxDC,SAAS,CAAE,EAH6C,CAD1B,CAAP,EAAH,gDAArB,CAQP,8CACA,MAAO,IAAMC,CAAAA,qBAAqB,YAAG,UAGhC,yBAFDC,CAAAA,KAEC,2DAFOP,eAAe,EAEtB,IADDQ,CAAAA,MACC,8CACOC,CAAAA,IADP,CACgBD,MADhB,CACOC,IADP,CAGD,GAAIA,IAAI,GAAKd,sBAAb,CAAqC,CACjC,MAAOY,CAAAA,KAAP,CACH,CALA,0BAcGC,MAdH,CAQGP,cARH,CASiBE,MATjB,uBASQN,MATR,EAUkBO,OAVlB,uBAUQN,OAVR,EAWqBO,SAXrB,uBAWQN,UAXR,+CAYOW,eAZP,CAYOA,eAZP,iCAYyB,KAZzB,2BAkBqBC,CAAAA,aAlBrB,CAoBGJ,KApBH,CAiBGN,cAjBH,CAkBQF,UAlBR,EAsBD,GAAIW,eAAJ,CAAqB,qBACjB,sCACOH,KADP,MAEIN,cAAc,qDACTJ,MADS,CACAM,MADA,kCAETL,OAFS,CAECM,OAFD,kCAGTL,UAHS,CAGIM,SAHJ,kBAFlB,GAQH,CAED,sCACOE,KADP,MAEIN,cAAc,uDACTJ,MADS,CACAM,MADA,mCAETL,OAFS,CAECM,OAFD,mCAGTL,UAHS,8CAIHY,aAJG,EAKHP,OALG,MAMNQ,KAAK,CAAEC,MAAM,CAACC,MAAP,gCACAH,aAAa,CAACC,KADd,EAEAP,SAAS,CAACO,KAFV,EAND,qBAFlB,GAeH,CAnDiC,gCAA3B,CAqDP,cAAeN,CAAAA,qBAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport BrowserDatabase from 'Util/BrowserDatabase';\n\nimport { UPDATE_LINKED_PRODUCTS } from './LinkedProducts.action';\nimport { LINKED_PRODUCTS } from './LinkedProducts.dispatcher';\n\nexport const UPSELL = 'upsell';\nexport const RELATED = 'related';\nexport const CROSS_SELL = 'crosssell';\n\n/** @namespace Store/LinkedProducts/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    linkedProducts: BrowserDatabase.getItem(LINKED_PRODUCTS) || {\n        upsell: {},\n        related: {},\n        crosssell: {}\n    }\n});\n\n/** @namespace Store/LinkedProducts/Reducer */\nexport const LinkedProductsReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const { type } = action;\n\n    if (type !== UPDATE_LINKED_PRODUCTS) {\n        return state;\n    }\n\n    const {\n        linkedProducts: {\n            [UPSELL]: upsell,\n            [RELATED]: related,\n            [CROSS_SELL]: crosssell,\n            updateCrossSell = false\n        }\n    } = action;\n\n    const {\n        linkedProducts: {\n            [CROSS_SELL]: prevCrossSell\n        }\n    } = state;\n\n    if (updateCrossSell) {\n        return {\n            ...state,\n            linkedProducts: {\n                [UPSELL]: upsell,\n                [RELATED]: related,\n                [CROSS_SELL]: crosssell\n            }\n        };\n    }\n\n    return {\n        ...state,\n        linkedProducts: {\n            [UPSELL]: upsell,\n            [RELATED]: related,\n            [CROSS_SELL]: {\n                ...prevCrossSell,\n                ...related,\n                items: Object.values({\n                    ...prevCrossSell.items,\n                    ...crosssell.items\n                })\n            }\n        }\n    };\n};\n\nexport default LinkedProductsReducer;\n"]},"metadata":{},"sourceType":"module"}