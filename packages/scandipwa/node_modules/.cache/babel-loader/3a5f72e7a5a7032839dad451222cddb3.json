{"ast":null,"code":"import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import PropTypes from'prop-types';import Field from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Field\";import{PRICE_TYPE_PERCENT}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductBundleItem/ProductBundleItem.config\";import ProductCustomizableOption from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCustomizableOption/ProductCustomizableOption.component\";import{CHECKBOX,MULTI,RADIO,SELECT}from\"./ProductBundleItem.config\";import\"./ProductBundleItem.style\";/** @namespace Component/ProductBundleItem/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _ProductBundleItem=/*#__PURE__*/function(_Extensible){_inherits(_ProductBundleItem,_Extensible);var _super=_createSuper(_ProductBundleItem);function _ProductBundleItem(){var _this$renderMap;var _this;_classCallCheck(this,_ProductBundleItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.renderMap=(_this$renderMap={},_defineProperty(_this$renderMap,CHECKBOX,_this.renderCheckboxValues.bind(_assertThisInitialized(_this))),_defineProperty(_this$renderMap,MULTI,_this.renderCheckboxValues.bind(_assertThisInitialized(_this))),_defineProperty(_this$renderMap,RADIO,_this.renderDropdownValues.bind(_assertThisInitialized(_this))),_defineProperty(_this$renderMap,SELECT,_this.renderDropdownValues.bind(_assertThisInitialized(_this))),_this$renderMap);_this.renderOptionCheckboxValue=function(item){var _this$props=_this.props,currencyCode=_this$props.currencyCode,getSelectedCheckboxValue=_this$props.getSelectedCheckboxValue,renderOptionLabel=_this$props.renderOptionLabel;if(!item.product){return null;}var id=item.id,label=item.label,price_type=item.price_type,quantity=item.quantity,is_default=item.is_default,finalOptionPrice=item.finalOptionPrice,price=item.price;var finalPrice=price_type===PRICE_TYPE_PERCENT?price:finalOptionPrice;var priceLabel=renderOptionLabel(price_type,finalPrice,currencyCode);return/*#__PURE__*/_checkBEM(React,\"div\",{key:id},/*#__PURE__*/_checkBEM(React,Field,{type:\"checkbox\",label:_this.renderHeading(label,priceLabel,quantity),id:\"option-\".concat(id),name:\"option-\".concat(id),value:id,checked:is_default,onChange:getSelectedCheckboxValue}));};_this.renderQtyInput=function(item){var _this$props2=_this.props,selectedDropdownValue=_this$props2.selectedDropdownValue,setDropdownItemQuantity=_this$props2.setDropdownItemQuantity,maxQuantity=_this$props2.maxQuantity;var id=item.id,quantity=item.quantity,can_change_quantity=item.can_change_quantity;if(id!==selectedDropdownValue||!can_change_quantity){return null;}return/*#__PURE__*/_checkBEM(React,Field,{key:id,id:\"item_qty\",name:\"item_qty\",type:\"number\",value:quantity,max:maxQuantity,min:1,mix:{block:'ProductBundleItems',elem:'Qty'},onChange:setDropdownItemQuantity});};return _this;}_createClass(_ProductBundleItem,[{key:\"renderHeading\",value:function renderHeading(mainTitle,titleBold,quantity){return/*#__PURE__*/_checkBEM(React,React.Fragment,null,/*#__PURE__*/_checkBEM(React,\"span\",{block:\"ProductBundleItem\",elem:\"Heading\"},\"\".concat(quantity,\" x \").concat(mainTitle,\" + \")),/*#__PURE__*/_checkBEM(React,\"span\",{block:\"ProductBundleItem\",elem:\"HeadingBold\"},titleBold));}},{key:\"renderOptionDropdownValues\",value:function renderOptionDropdownValues(values){var _this$props3=this.props,options=_this$props3.option.options,getDropdownOptions=_this$props3.getDropdownOptions,selectedDropdownValue=_this$props3.selectedDropdownValue,setDropdownValue=_this$props3.setDropdownValue;var dropdownOptions=getDropdownOptions(values);return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ProductBundleItem\",elem:\"DropdownWrapper\"},/*#__PURE__*/_checkBEM(React,Field,{id:\"bundle-options-dropdown\",name:\"bundle-options-dropdown\",type:\"select\",mix:{block:'ProductBundleItem',elem:'Select'},placeholder:__('Choose Option'),selectOptions:dropdownOptions,value:selectedDropdownValue,onChange:setDropdownValue}),options.map(this.renderQtyInput));}},{key:\"renderCheckboxValues\",value:function renderCheckboxValues(){var _this$props$option=this.props.option,required=_this$props$option.required,options=_this$props$option.options;return/*#__PURE__*/_checkBEM(React,React.Fragment,null,options.map(this.renderOptionCheckboxValue),this.renderRequired(required));}},{key:\"renderDropdownValues\",value:function renderDropdownValues(){var _this$props$option2=this.props.option,required=_this$props$option2.required,options=_this$props$option2.options;return/*#__PURE__*/_checkBEM(React,React.Fragment,null,this.renderOptionDropdownValues(options),this.renderRequired(required));}},{key:\"render\",value:function render(){var optionType=this.props.optionType;var render=this.renderMap[optionType];if(!render){return null;}var title=this.props.option.title;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ProductBundleItem\",elem:\"Wrapper\"},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"ProductBundleItem\",elem:\"Title\"},title),render());}}]);return _ProductBundleItem;}(Extensible(ProductCustomizableOption));_ProductBundleItem.propTypes=_objectSpread(_objectSpread({},ProductCustomizableOption.propTypes),{},{maxQuantity:PropTypes.number.isRequired,setDropdownItemQuantity:PropTypes.func.isRequired});Object.defineProperty(_ProductBundleItem,'name',{value:'ProductBundleItem'});export var ProductBundleItem=middleware(_ProductBundleItem,\"Component/ProductBundleItem/Component\");export default ProductBundleItem;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductBundleItem/ProductBundleItem.component.js"],"names":["PropTypes","Field","PRICE_TYPE_PERCENT","ProductCustomizableOption","CHECKBOX","MULTI","RADIO","SELECT","ProductBundleItem","renderMap","renderCheckboxValues","bind","renderDropdownValues","renderOptionCheckboxValue","item","props","currencyCode","getSelectedCheckboxValue","renderOptionLabel","product","id","label","price_type","quantity","is_default","finalOptionPrice","price","finalPrice","priceLabel","renderHeading","renderQtyInput","selectedDropdownValue","setDropdownItemQuantity","maxQuantity","can_change_quantity","block","elem","mainTitle","titleBold","values","options","option","getDropdownOptions","setDropdownValue","dropdownOptions","__","map","required","renderRequired","renderOptionDropdownValues","optionType","render","title","propTypes","number","isRequired","func","Object","defineProperty","_ProductBundleItem","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\n\nimport Field from 'Component/Field';\nimport { PRICE_TYPE_PERCENT } from 'Component/ProductBundleItem/ProductBundleItem.config';\nimport ProductCustomizableOption from 'Component/ProductCustomizableOption/ProductCustomizableOption.component';\n\nimport {\n    CHECKBOX,\n    MULTI,\n    RADIO,\n    SELECT\n} from './ProductBundleItem.config';\n\nimport './ProductBundleItem.style';\n\n/** @namespace Component/ProductBundleItem/Component */\nexport class ProductBundleItem extends ProductCustomizableOption {\n    static propTypes = {\n        ...ProductCustomizableOption.propTypes,\n        maxQuantity: PropTypes.number.isRequired,\n        setDropdownItemQuantity: PropTypes.func.isRequired\n    };\n\n    renderMap = {\n        [CHECKBOX]: this.renderCheckboxValues.bind(this),\n        [MULTI]: this.renderCheckboxValues.bind(this),\n        [RADIO]: this.renderDropdownValues.bind(this),\n        [SELECT]: this.renderDropdownValues.bind(this)\n    };\n\n    renderHeading(mainTitle, titleBold, quantity) {\n        return (\n            <>\n                <span\n                  block=\"ProductBundleItem\"\n                  elem=\"Heading\"\n                >\n                    { `${ quantity } x ${ mainTitle } + ` }\n                </span>\n                <span\n                  block=\"ProductBundleItem\"\n                  elem=\"HeadingBold\"\n                >\n                    { titleBold }\n                </span>\n            </>\n        );\n    }\n\n    renderOptionCheckboxValue = (item) => {\n        const {\n            currencyCode,\n            getSelectedCheckboxValue,\n            renderOptionLabel\n        } = this.props;\n\n        if (!item.product) {\n            return null;\n        }\n\n        const {\n            id,\n            label,\n            price_type,\n            quantity,\n            is_default,\n            finalOptionPrice,\n            price\n        } = item;\n\n        const finalPrice = price_type === PRICE_TYPE_PERCENT ? price : finalOptionPrice;\n\n        const priceLabel = renderOptionLabel(price_type, finalPrice, currencyCode);\n\n        return (\n            <div key={ id }>\n                <Field\n                  type=\"checkbox\"\n                  label={ this.renderHeading(label, priceLabel, quantity) }\n                  id={ `option-${ id }` }\n                  name={ `option-${ id }` }\n                  value={ id }\n                  checked={ is_default }\n                  onChange={ getSelectedCheckboxValue }\n                />\n            </div>\n        );\n    };\n\n    renderQtyInput = (item) => {\n        const {\n            selectedDropdownValue,\n            setDropdownItemQuantity,\n            maxQuantity\n        } = this.props;\n        const { id, quantity, can_change_quantity } = item;\n\n        if (id !== selectedDropdownValue || !can_change_quantity) {\n            return null;\n        }\n\n        return (\n            <Field\n              key={ id }\n              id=\"item_qty\"\n              name=\"item_qty\"\n              type=\"number\"\n              value={ quantity }\n              max={ maxQuantity }\n              min={ 1 }\n              mix={ { block: 'ProductBundleItems', elem: 'Qty' } }\n              onChange={ setDropdownItemQuantity }\n            />\n        );\n    };\n\n    renderOptionDropdownValues(values) {\n        const {\n            option: { options },\n            getDropdownOptions,\n            selectedDropdownValue,\n            setDropdownValue\n        } = this.props;\n        const dropdownOptions = getDropdownOptions(values);\n\n        return (\n            <div block=\"ProductBundleItem\" elem=\"DropdownWrapper\">\n                <Field\n                  id=\"bundle-options-dropdown\"\n                  name=\"bundle-options-dropdown\"\n                  type=\"select\"\n                  mix={ { block: 'ProductBundleItem', elem: 'Select' } }\n                  placeholder={ __('Choose Option') }\n                  selectOptions={ dropdownOptions }\n                  value={ selectedDropdownValue }\n                  onChange={ setDropdownValue }\n                />\n                { options.map(this.renderQtyInput) }\n            </div>\n        );\n    }\n\n    renderCheckboxValues() {\n        const { option: { required, options } } = this.props;\n\n        return (\n            <>\n                { options.map(this.renderOptionCheckboxValue) }\n                { this.renderRequired(required) }\n            </>\n        );\n    }\n\n    renderDropdownValues() {\n        const { option: { required, options } } = this.props;\n\n        return (\n            <>\n                { this.renderOptionDropdownValues(options) }\n                { this.renderRequired(required) }\n            </>\n        );\n    }\n\n    render() {\n        const { optionType } = this.props;\n        const render = this.renderMap[optionType];\n\n        if (!render) {\n            return null;\n        }\n\n        const { option: { title } } = this.props;\n\n        return (\n            <div block=\"ProductBundleItem\" elem=\"Wrapper\">\n                <div block=\"ProductBundleItem\" elem=\"Title\">\n                    { title }\n                </div>\n                { render() }\n            </div>\n        );\n    }\n}\n\nexport default ProductBundleItem;\n"]},"metadata":{},"sourceType":"module"}