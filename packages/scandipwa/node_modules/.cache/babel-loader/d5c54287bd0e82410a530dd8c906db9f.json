{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import CheckoutAddressBook from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutAddressBook\";import CheckoutDeliveryOptions from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutDeliveryOptions\";import Form from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Form\";import Loader from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Loader\";import{STORE_IN_PICK_UP_METHOD_CODE}from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/StoreInPickUp/StoreInPickUp.config\";import{SHIPPING_STEP}from\"/home/marketihor/scandipwa/packages/scandipwa/src/route/Checkout/Checkout.config\";import{addressType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Account\";import{shippingMethodsType,shippingMethodType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Checkout\";import{TotalsType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/MiniCart\";import{formatPrice}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Price\";import\"./CheckoutShipping.style\";/** @namespace Component/CheckoutShipping/Component */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _CheckoutShipping=/*#__PURE__*/function(_Extensible){_inherits(_CheckoutShipping,_Extensible);var _super=_createSuper(_CheckoutShipping);function _CheckoutShipping(){_classCallCheck(this,_CheckoutShipping);return _super.apply(this,arguments);}_createClass(_CheckoutShipping,[{key:\"renderOrderTotalExlTax\",value:function renderOrderTotalExlTax(){var _this$props=this.props,cartTotalSubPrice=_this$props.cartTotalSubPrice,quote_currency_code=_this$props.totals.quote_currency_code;if(!cartTotalSubPrice){return null;}var orderTotalExlTax=formatPrice(cartTotalSubPrice,quote_currency_code);return/*#__PURE__*/_checkBEM(React,\"span\",null,\"\".concat(__('Excl. tax:'),\" \").concat(orderTotalExlTax));}},{key:\"renderOrderTotal\",value:function renderOrderTotal(){var _this$props$totals=this.props.totals,grand_total=_this$props$totals.grand_total,quote_currency_code=_this$props$totals.quote_currency_code;var orderTotal=formatPrice(grand_total,quote_currency_code);return/*#__PURE__*/_checkBEM(React,\"dl\",{block:\"Checkout\",elem:\"OrderTotal\"},/*#__PURE__*/_checkBEM(React,\"dt\",null,__('Order total:')),/*#__PURE__*/_checkBEM(React,\"dt\",null,orderTotal,this.renderOrderTotalExlTax()));}},{key:\"renderActions\",value:function renderActions(){var _this$props2=this.props,selectedShippingMethod=_this$props2.selectedShippingMethod,selectedStoreAddress=_this$props2.selectedStoreAddress;var method_code=selectedShippingMethod.method_code;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Checkout\",elem:\"StickyButtonWrapper\"},this.renderOrderTotal(),/*#__PURE__*/_checkBEM(React,\"button\",{type:\"submit\",block:\"Button\",disabled:!selectedShippingMethod||method_code===STORE_IN_PICK_UP_METHOD_CODE&&!Object.keys(selectedStoreAddress).length,mix:{block:'CheckoutShipping',elem:'Button'}},__('Proceed to billing')));}},{key:\"renderDelivery\",value:function renderDelivery(){var _this$props3=this.props,shippingMethods=_this$props3.shippingMethods,onShippingMethodSelect=_this$props3.onShippingMethodSelect,estimateAddress=_this$props3.estimateAddress,onStoreSelect=_this$props3.onStoreSelect;return/*#__PURE__*/_checkBEM(React,CheckoutDeliveryOptions,{shippingMethods:shippingMethods,onShippingMethodSelect:onShippingMethodSelect,estimateAddress:estimateAddress,onStoreSelect:onStoreSelect});}},{key:\"renderAddressBook\",value:function renderAddressBook(){var _this$props4=this.props,onAddressSelect=_this$props4.onAddressSelect,onShippingEstimationFieldsChange=_this$props4.onShippingEstimationFieldsChange,isSubmitted=_this$props4.isSubmitted;return/*#__PURE__*/_checkBEM(React,CheckoutAddressBook,{onAddressSelect:onAddressSelect,onShippingEstimationFieldsChange:onShippingEstimationFieldsChange,isSubmitted:isSubmitted});}},{key:\"render\",value:function render(){var _this$props5=this.props,onShippingSuccess=_this$props5.onShippingSuccess,onShippingError=_this$props5.onShippingError,isLoading=_this$props5.isLoading;return/*#__PURE__*/_checkBEM(React,Form,{id:SHIPPING_STEP,mix:{block:'CheckoutShipping'},onSubmitError:onShippingError,onSubmitSuccess:onShippingSuccess},this.renderAddressBook(),/*#__PURE__*/_checkBEM(React,\"div\",null,/*#__PURE__*/_checkBEM(React,Loader,{isLoading:isLoading}),this.renderDelivery(),this.renderActions()));}}]);return _CheckoutShipping;}(Extensible(PureComponent));_CheckoutShipping.defaultProps={selectedShippingMethod:null,isSubmitted:false,cartTotalSubPrice:null,selectedStoreAddress:{}};Object.defineProperty(_CheckoutShipping,'name',{value:'CheckoutShipping'});export var CheckoutShipping=middleware(_CheckoutShipping,\"Component/CheckoutShipping/Component\");export default CheckoutShipping;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/CheckoutShipping/CheckoutShipping.component.js"],"names":["PureComponent","CheckoutAddressBook","CheckoutDeliveryOptions","Form","Loader","STORE_IN_PICK_UP_METHOD_CODE","SHIPPING_STEP","addressType","shippingMethodsType","shippingMethodType","TotalsType","formatPrice","CheckoutShipping","props","cartTotalSubPrice","quote_currency_code","totals","orderTotalExlTax","__","grand_total","orderTotal","renderOrderTotalExlTax","selectedShippingMethod","selectedStoreAddress","method_code","renderOrderTotal","Object","keys","length","block","elem","shippingMethods","onShippingMethodSelect","estimateAddress","onStoreSelect","onAddressSelect","onShippingEstimationFieldsChange","isSubmitted","onShippingSuccess","onShippingError","isLoading","renderAddressBook","renderDelivery","renderActions","defaultProps","defineProperty","_CheckoutShipping","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CheckoutAddressBook from 'Component/CheckoutAddressBook';\nimport CheckoutDeliveryOptions from 'Component/CheckoutDeliveryOptions';\nimport Form from 'Component/Form';\nimport Loader from 'Component/Loader';\nimport { STORE_IN_PICK_UP_METHOD_CODE } from 'Component/StoreInPickUp/StoreInPickUp.config';\nimport { SHIPPING_STEP } from 'Route/Checkout/Checkout.config';\nimport { addressType } from 'Type/Account';\nimport { shippingMethodsType, shippingMethodType } from 'Type/Checkout';\nimport { TotalsType } from 'Type/MiniCart';\nimport { formatPrice } from 'Util/Price';\n\nimport './CheckoutShipping.style';\n\n/** @namespace Component/CheckoutShipping/Component */\nexport class CheckoutShipping extends PureComponent {\n    static propTypes = {\n        totals: TotalsType.isRequired,\n        cartTotalSubPrice: PropTypes.number,\n        onShippingSuccess: PropTypes.func.isRequired,\n        onShippingError: PropTypes.func.isRequired,\n        onShippingEstimationFieldsChange: PropTypes.func.isRequired,\n        shippingMethods: shippingMethodsType.isRequired,\n        onShippingMethodSelect: PropTypes.func.isRequired,\n        selectedShippingMethod: shippingMethodType,\n        onAddressSelect: PropTypes.func.isRequired,\n        isLoading: PropTypes.bool.isRequired,\n        isSubmitted: PropTypes.bool,\n        onStoreSelect: PropTypes.func.isRequired,\n        estimateAddress: addressType.isRequired,\n        selectedStoreAddress: addressType\n    };\n\n    static defaultProps = {\n        selectedShippingMethod: null,\n        isSubmitted: false,\n        cartTotalSubPrice: null,\n        selectedStoreAddress: {}\n    };\n\n    renderOrderTotalExlTax() {\n        const {\n            cartTotalSubPrice,\n            totals: { quote_currency_code }\n        } = this.props;\n\n        if (!cartTotalSubPrice) {\n            return null;\n        }\n\n        const orderTotalExlTax = formatPrice(cartTotalSubPrice, quote_currency_code);\n\n        return (\n            <span>\n                { `${ __('Excl. tax:') } ${ orderTotalExlTax }` }\n            </span>\n        );\n    }\n\n    renderOrderTotal() {\n        const {\n            totals: {\n                grand_total,\n                quote_currency_code\n            }\n        } = this.props;\n\n        const orderTotal = formatPrice(grand_total, quote_currency_code);\n\n        return (\n            <dl block=\"Checkout\" elem=\"OrderTotal\">\n                <dt>\n                    { __('Order total:') }\n                </dt>\n                <dt>\n                    { orderTotal }\n                    { this.renderOrderTotalExlTax() }\n                </dt>\n            </dl>\n        );\n    }\n\n    renderActions() {\n        const { selectedShippingMethod, selectedStoreAddress } = this.props;\n        const { method_code } = selectedShippingMethod;\n\n        return (\n            <div block=\"Checkout\" elem=\"StickyButtonWrapper\">\n                { this.renderOrderTotal() }\n                <button\n                  type=\"submit\"\n                  block=\"Button\"\n                  disabled={ !selectedShippingMethod\n                      || (method_code === STORE_IN_PICK_UP_METHOD_CODE && !Object.keys(selectedStoreAddress).length) }\n                  mix={ { block: 'CheckoutShipping', elem: 'Button' } }\n                >\n                    { __('Proceed to billing') }\n                </button>\n            </div>\n        );\n    }\n\n    renderDelivery() {\n        const {\n            shippingMethods,\n            onShippingMethodSelect,\n            estimateAddress,\n            onStoreSelect\n        } = this.props;\n\n        return (\n            <CheckoutDeliveryOptions\n              shippingMethods={ shippingMethods }\n              onShippingMethodSelect={ onShippingMethodSelect }\n              estimateAddress={ estimateAddress }\n              onStoreSelect={ onStoreSelect }\n            />\n        );\n    }\n\n    renderAddressBook() {\n        const {\n            onAddressSelect,\n            onShippingEstimationFieldsChange,\n            isSubmitted\n        } = this.props;\n\n        return (\n            <CheckoutAddressBook\n              onAddressSelect={ onAddressSelect }\n              onShippingEstimationFieldsChange={ onShippingEstimationFieldsChange }\n              isSubmitted={ isSubmitted }\n            />\n        );\n    }\n\n    render() {\n        const {\n            onShippingSuccess,\n            onShippingError,\n            isLoading\n        } = this.props;\n\n        return (\n            <Form\n              id={ SHIPPING_STEP }\n              mix={ { block: 'CheckoutShipping' } }\n              onSubmitError={ onShippingError }\n              onSubmitSuccess={ onShippingSuccess }\n            >\n                { this.renderAddressBook() }\n                <div>\n                    <Loader isLoading={ isLoading } />\n                    { this.renderDelivery() }\n                    { this.renderActions() }\n                </div>\n            </Form>\n        );\n    }\n}\n\nexport default CheckoutShipping;\n"]},"metadata":{},"sourceType":"module"}