{"ast":null,"code":"var _jsxFileName = \"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductBundleItem/ProductBundleItem.component.js\";\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\nimport PropTypes from 'prop-types';\nimport Field from \"/home/marketihor/scandipwa/packages/scandipwa/src/component/Field\";\nimport { PRICE_TYPE_PERCENT } from \"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductBundleItem/ProductBundleItem.config\";\nimport ProductCustomizableOption from \"/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductCustomizableOption/ProductCustomizableOption.component\";\nimport { CHECKBOX, MULTI, RADIO, SELECT } from \"./ProductBundleItem.config\";\nimport \"./ProductBundleItem.style\";\n/** @namespace Component/ProductBundleItem/Component */\n\nvar _checkBEM = require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;\n\nexport class _ProductBundleItem extends Extensible(ProductCustomizableOption) {\n  constructor(...args) {\n    var _this;\n\n    super(...args);\n    _this = this;\n    this.renderMap = {\n      [CHECKBOX]: this.renderCheckboxValues.bind(this),\n      [MULTI]: this.renderCheckboxValues.bind(this),\n      [RADIO]: this.renderDropdownValues.bind(this),\n      [SELECT]: this.renderDropdownValues.bind(this)\n    };\n\n    this.renderOptionCheckboxValue = function (item) {\n      const {\n        currencyCode,\n        getSelectedCheckboxValue,\n        renderOptionLabel\n      } = _this.props;\n\n      if (!item.product) {\n        return null;\n      }\n\n      const {\n        id,\n        label,\n        price_type,\n        quantity,\n        is_default,\n        finalOptionPrice,\n        price\n      } = item;\n      const finalPrice = price_type === PRICE_TYPE_PERCENT ? price : finalOptionPrice;\n      const priceLabel = renderOptionLabel(price_type, finalPrice, currencyCode);\n      return /*#__PURE__*/_checkBEM(React, \"div\", {\n        key: id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/_checkBEM(React, Field, {\n        type: \"checkbox\",\n        label: _this.renderHeading(label, priceLabel, quantity),\n        id: `option-${id}`,\n        name: `option-${id}`,\n        value: id,\n        checked: is_default,\n        onChange: getSelectedCheckboxValue,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }\n      }));\n    };\n\n    this.renderQtyInput = function (item) {\n      const {\n        selectedDropdownValue,\n        setDropdownItemQuantity,\n        maxQuantity\n      } = _this.props;\n      const {\n        id,\n        quantity,\n        can_change_quantity\n      } = item;\n\n      if (id !== selectedDropdownValue || !can_change_quantity) {\n        return null;\n      }\n\n      return /*#__PURE__*/_checkBEM(React, Field, {\n        key: id,\n        id: \"item_qty\",\n        name: \"item_qty\",\n        type: \"number\",\n        value: quantity,\n        max: maxQuantity,\n        min: 1,\n        mix: {\n          block: 'ProductBundleItems',\n          elem: 'Qty'\n        },\n        onChange: setDropdownItemQuantity,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      });\n    };\n  }\n\n  renderHeading(mainTitle, titleBold, quantity) {\n    return /*#__PURE__*/_checkBEM(React, React.Fragment, null, /*#__PURE__*/_checkBEM(React, \"span\", {\n      block: \"ProductBundleItem\",\n      elem: \"Heading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }\n    }, `${quantity} x ${mainTitle} + `), /*#__PURE__*/_checkBEM(React, \"span\", {\n      block: \"ProductBundleItem\",\n      elem: \"HeadingBold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, titleBold));\n  }\n\n  renderOptionDropdownValues(values) {\n    const {\n      option: {\n        options\n      },\n      getDropdownOptions,\n      selectedDropdownValue,\n      setDropdownValue\n    } = this.props;\n    const dropdownOptions = getDropdownOptions(values);\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"ProductBundleItem\",\n      elem: \"DropdownWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, Field, {\n      id: \"bundle-options-dropdown\",\n      name: \"bundle-options-dropdown\",\n      type: \"select\",\n      mix: {\n        block: 'ProductBundleItem',\n        elem: 'Select'\n      },\n      placeholder: __('Choose Option'),\n      selectOptions: dropdownOptions,\n      value: selectedDropdownValue,\n      onChange: setDropdownValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }), options.map(this.renderQtyInput));\n  }\n\n  renderCheckboxValues() {\n    const {\n      option: {\n        required,\n        options\n      }\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, React.Fragment, null, options.map(this.renderOptionCheckboxValue), this.renderRequired(required));\n  }\n\n  renderDropdownValues() {\n    const {\n      option: {\n        required,\n        options\n      }\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, React.Fragment, null, this.renderOptionDropdownValues(options), this.renderRequired(required));\n  }\n\n  render() {\n    const {\n      optionType\n    } = this.props;\n    const render = this.renderMap[optionType];\n\n    if (!render) {\n      return null;\n    }\n\n    const {\n      option: {\n        title\n      }\n    } = this.props;\n    return /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"ProductBundleItem\",\n      elem: \"Wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/_checkBEM(React, \"div\", {\n      block: \"ProductBundleItem\",\n      elem: \"Title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, title), render());\n  }\n\n}\n_ProductBundleItem.propTypes = { ...ProductCustomizableOption.propTypes,\n  maxQuantity: PropTypes.number.isRequired,\n  setDropdownItemQuantity: PropTypes.func.isRequired\n};\nObject.defineProperty(_ProductBundleItem, 'name', {\n  value: 'ProductBundleItem'\n});\n\nexport const ProductBundleItem = middleware(_ProductBundleItem, \"Component/ProductBundleItem/Component\");\nexport default ProductBundleItem;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/ProductBundleItem/ProductBundleItem.component.js"],"names":["PropTypes","Field","PRICE_TYPE_PERCENT","ProductCustomizableOption","CHECKBOX","MULTI","RADIO","SELECT","ProductBundleItem","renderMap","renderCheckboxValues","bind","renderDropdownValues","renderOptionCheckboxValue","item","currencyCode","getSelectedCheckboxValue","renderOptionLabel","props","product","id","label","price_type","quantity","is_default","finalOptionPrice","price","finalPrice","priceLabel","renderHeading","renderQtyInput","selectedDropdownValue","setDropdownItemQuantity","maxQuantity","can_change_quantity","block","elem","mainTitle","titleBold","renderOptionDropdownValues","values","option","options","getDropdownOptions","setDropdownValue","dropdownOptions","__","map","required","renderRequired","render","optionType","title","propTypes","number","isRequired","func","Object","defineProperty","_ProductBundleItem","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\n\nimport Field from 'Component/Field';\nimport { PRICE_TYPE_PERCENT } from 'Component/ProductBundleItem/ProductBundleItem.config';\nimport ProductCustomizableOption from 'Component/ProductCustomizableOption/ProductCustomizableOption.component';\n\nimport {\n    CHECKBOX,\n    MULTI,\n    RADIO,\n    SELECT\n} from './ProductBundleItem.config';\n\nimport './ProductBundleItem.style';\n\n/** @namespace Component/ProductBundleItem/Component */\nexport class ProductBundleItem extends ProductCustomizableOption {\n    static propTypes = {\n        ...ProductCustomizableOption.propTypes,\n        maxQuantity: PropTypes.number.isRequired,\n        setDropdownItemQuantity: PropTypes.func.isRequired\n    };\n\n    renderMap = {\n        [CHECKBOX]: this.renderCheckboxValues.bind(this),\n        [MULTI]: this.renderCheckboxValues.bind(this),\n        [RADIO]: this.renderDropdownValues.bind(this),\n        [SELECT]: this.renderDropdownValues.bind(this)\n    };\n\n    renderHeading(mainTitle, titleBold, quantity) {\n        return (\n            <>\n                <span\n                  block=\"ProductBundleItem\"\n                  elem=\"Heading\"\n                >\n                    { `${ quantity } x ${ mainTitle } + ` }\n                </span>\n                <span\n                  block=\"ProductBundleItem\"\n                  elem=\"HeadingBold\"\n                >\n                    { titleBold }\n                </span>\n            </>\n        );\n    }\n\n    renderOptionCheckboxValue = (item) => {\n        const {\n            currencyCode,\n            getSelectedCheckboxValue,\n            renderOptionLabel\n        } = this.props;\n\n        if (!item.product) {\n            return null;\n        }\n\n        const {\n            id,\n            label,\n            price_type,\n            quantity,\n            is_default,\n            finalOptionPrice,\n            price\n        } = item;\n\n        const finalPrice = price_type === PRICE_TYPE_PERCENT ? price : finalOptionPrice;\n\n        const priceLabel = renderOptionLabel(price_type, finalPrice, currencyCode);\n\n        return (\n            <div key={ id }>\n                <Field\n                  type=\"checkbox\"\n                  label={ this.renderHeading(label, priceLabel, quantity) }\n                  id={ `option-${ id }` }\n                  name={ `option-${ id }` }\n                  value={ id }\n                  checked={ is_default }\n                  onChange={ getSelectedCheckboxValue }\n                />\n            </div>\n        );\n    };\n\n    renderQtyInput = (item) => {\n        const {\n            selectedDropdownValue,\n            setDropdownItemQuantity,\n            maxQuantity\n        } = this.props;\n        const { id, quantity, can_change_quantity } = item;\n\n        if (id !== selectedDropdownValue || !can_change_quantity) {\n            return null;\n        }\n\n        return (\n            <Field\n              key={ id }\n              id=\"item_qty\"\n              name=\"item_qty\"\n              type=\"number\"\n              value={ quantity }\n              max={ maxQuantity }\n              min={ 1 }\n              mix={ { block: 'ProductBundleItems', elem: 'Qty' } }\n              onChange={ setDropdownItemQuantity }\n            />\n        );\n    };\n\n    renderOptionDropdownValues(values) {\n        const {\n            option: { options },\n            getDropdownOptions,\n            selectedDropdownValue,\n            setDropdownValue\n        } = this.props;\n        const dropdownOptions = getDropdownOptions(values);\n\n        return (\n            <div block=\"ProductBundleItem\" elem=\"DropdownWrapper\">\n                <Field\n                  id=\"bundle-options-dropdown\"\n                  name=\"bundle-options-dropdown\"\n                  type=\"select\"\n                  mix={ { block: 'ProductBundleItem', elem: 'Select' } }\n                  placeholder={ __('Choose Option') }\n                  selectOptions={ dropdownOptions }\n                  value={ selectedDropdownValue }\n                  onChange={ setDropdownValue }\n                />\n                { options.map(this.renderQtyInput) }\n            </div>\n        );\n    }\n\n    renderCheckboxValues() {\n        const { option: { required, options } } = this.props;\n\n        return (\n            <>\n                { options.map(this.renderOptionCheckboxValue) }\n                { this.renderRequired(required) }\n            </>\n        );\n    }\n\n    renderDropdownValues() {\n        const { option: { required, options } } = this.props;\n\n        return (\n            <>\n                { this.renderOptionDropdownValues(options) }\n                { this.renderRequired(required) }\n            </>\n        );\n    }\n\n    render() {\n        const { optionType } = this.props;\n        const render = this.renderMap[optionType];\n\n        if (!render) {\n            return null;\n        }\n\n        const { option: { title } } = this.props;\n\n        return (\n            <div block=\"ProductBundleItem\" elem=\"Wrapper\">\n                <div block=\"ProductBundleItem\" elem=\"Title\">\n                    { title }\n                </div>\n                { render() }\n            </div>\n        );\n    }\n}\n\nexport default ProductBundleItem;\n"]},"metadata":{},"sourceType":"module"}