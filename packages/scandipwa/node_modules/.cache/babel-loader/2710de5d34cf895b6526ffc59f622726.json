{"ast":null,"code":"import _regeneratorRuntime from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{PureComponent}from'react';import{connect}from'react-redux';import{showNotification as _showNotification}from\"/home/marketihor/scandipwa/packages/scandipwa/src/store/Notification/Notification.action\";import{getErrorMessage}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request\";import MyAccountSignIn from\"./MyAccountSignIn.component\";export var MyAccountDispatcher=import(/* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\"/home/marketihor/scandipwa/packages/scandipwa/src/store/MyAccount/MyAccount.dispatcher\");/** @namespace Component/MyAccountSignIn/Container/mapStateToProps */ // eslint-disable-next-line no-unused-vars\nexport var mapStateToProps=middleware(function(state){return{isEmailAvailable:state.CheckoutReducer.isEmailAvailable};},\"Component/MyAccountSignIn/Container/mapStateToProps\");/** @namespace Component/MyAccountSignIn/Container/mapDispatchtoProps */ // eslint-disable-next-line no-unused-vars\nexport var mapDispatchToProps=middleware(function(dispatch){return{signIn:function signIn(options){return MyAccountDispatcher.then(function(_ref){var dispatcher=_ref.default;return dispatcher.signIn(options,dispatch);});},showNotification:function showNotification(type,message){return dispatch(_showNotification(type,message));}};},\"Component/MyAccountSignIn/Container/mapDispatchtoProps\");/** @namespace Component/MyAccountSignIn/Container */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _MyAccountSignInContainer=/*#__PURE__*/function(_Extensible){_inherits(_MyAccountSignInContainer,_Extensible);var _super=_createSuper(_MyAccountSignInContainer);function _MyAccountSignInContainer(){var _this;_classCallCheck(this,_MyAccountSignInContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.containerFunctions={onSignInSuccess:_this.onSignInSuccess.bind(_assertThisInitialized(_this)),onSignInAttempt:_this.onSignInAttempt.bind(_assertThisInitialized(_this))};_this.containerProps=function(){var _this$props=_this.props,state=_this$props.state,onFormError=_this$props.onFormError,handleForgotPassword=_this$props.handleForgotPassword,handleCreateAccount=_this$props.handleCreateAccount,isCheckout=_this$props.isCheckout,setLoadingState=_this$props.setLoadingState,emailValue=_this$props.emailValue,handleEmailInput=_this$props.handleEmailInput;return{state:state,onFormError:onFormError,handleForgotPassword:handleForgotPassword,handleCreateAccount:handleCreateAccount,isCheckout:isCheckout,setLoadingState:setLoadingState,emailValue:emailValue,handleEmailInput:handleEmailInput};};return _this;}_createClass(_MyAccountSignInContainer,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props2=this.props,isCheckout=_this$props2.isCheckout,isEmailAvailable=_this$props2.isEmailAvailable,setSignInState=_this$props2.setSignInState;var prevIsEmailAvailable=prevProps.isEmailAvailable;if(isCheckout&&isEmailAvailable&&!prevIsEmailAvailable){setSignInState('');}}},{key:\"onSignInSuccess\",value:function(){var _onSignInSuccess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(fields){var _this$props3,signIn,showNotification,onSignIn,setLoadingState;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props3=this.props,signIn=_this$props3.signIn,showNotification=_this$props3.showNotification,onSignIn=_this$props3.onSignIn,setLoadingState=_this$props3.setLoadingState;_context.prev=1;_context.next=4;return signIn(fields);case 4:onSignIn();_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);showNotification('error',getErrorMessage(_context.t0));case 10:setLoadingState(false);case 11:case\"end\":return _context.stop();}}},_callee,this,[[1,7]]);}));function onSignInSuccess(_x){return _onSignInSuccess.apply(this,arguments);}return onSignInSuccess;}()},{key:\"onSignInAttempt\",value:function onSignInAttempt(){var setLoadingState=this.props.setLoadingState;setLoadingState(true);}},{key:\"render\",value:function render(){return/*#__PURE__*/_checkBEM(React,MyAccountSignIn,Object.assign({},this.containerFunctions,this.containerProps()));}}]);return _MyAccountSignInContainer;}(Extensible(PureComponent));_MyAccountSignInContainer.defaultProps={emailValue:'',isEmailAvailable:true,setSignInState:function setSignInState(){},handleEmailInput:function handleEmailInput(){}};Object.defineProperty(_MyAccountSignInContainer,'name',{value:'MyAccountSignInContainer'});export var MyAccountSignInContainer=middleware(_MyAccountSignInContainer,\"Component/MyAccountSignIn/Container\");export default connect(mapStateToProps,mapDispatchToProps)(MyAccountSignInContainer);","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/MyAccountSignIn/MyAccountSignIn.container.js"],"names":["PureComponent","connect","showNotification","getErrorMessage","MyAccountSignIn","MyAccountDispatcher","mapStateToProps","state","isEmailAvailable","CheckoutReducer","mapDispatchToProps","dispatch","signIn","options","then","dispatcher","default","type","message","MyAccountSignInContainer","containerFunctions","onSignInSuccess","bind","onSignInAttempt","containerProps","props","onFormError","handleForgotPassword","handleCreateAccount","isCheckout","setLoadingState","emailValue","handleEmailInput","prevProps","setSignInState","prevIsEmailAvailable","fields","onSignIn","defaultProps","Object","defineProperty","_MyAccountSignInContainer","value"],"mappings":"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","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { getErrorMessage } from 'Util/Request';\n\nimport MyAccountSignIn from './MyAccountSignIn.component';\n\nexport const MyAccountDispatcher = import(\n    /* webpackMode: \"lazy\", webpackChunkName: \"dispatchers\" */\n    'Store/MyAccount/MyAccount.dispatcher'\n);\n\n/** @namespace Component/MyAccountSignIn/Container/mapStateToProps */\n// eslint-disable-next-line no-unused-vars\nexport const mapStateToProps = (state) => ({\n    isEmailAvailable: state.CheckoutReducer.isEmailAvailable\n});\n\n/** @namespace Component/MyAccountSignIn/Container/mapDispatchtoProps */\n// eslint-disable-next-line no-unused-vars\nexport const mapDispatchToProps = (dispatch) => ({\n    signIn: (options) => MyAccountDispatcher.then(\n        ({ default: dispatcher }) => dispatcher.signIn(options, dispatch)\n    ),\n    showNotification: (type, message) => dispatch(showNotification(type, message))\n});\n\n/** @namespace Component/MyAccountSignIn/Container */\nexport class MyAccountSignInContainer extends PureComponent {\n    static propTypes = {\n        state: PropTypes.string.isRequired,\n        onFormError: PropTypes.func.isRequired,\n        handleForgotPassword: PropTypes.func.isRequired,\n        handleCreateAccount: PropTypes.func.isRequired,\n        isCheckout: PropTypes.bool.isRequired,\n        signIn: PropTypes.func.isRequired,\n        showNotification: PropTypes.func.isRequired,\n        onSignIn: PropTypes.func.isRequired,\n        setLoadingState: PropTypes.func.isRequired,\n        emailValue: PropTypes.string,\n        isEmailAvailable: PropTypes.bool,\n        setSignInState: PropTypes.func,\n        handleEmailInput: PropTypes.func\n    };\n\n    static defaultProps = {\n        emailValue: '',\n        isEmailAvailable: true,\n        setSignInState: () => {},\n        handleEmailInput: () => {}\n    };\n\n    containerFunctions = {\n        onSignInSuccess: this.onSignInSuccess.bind(this),\n        onSignInAttempt: this.onSignInAttempt.bind(this)\n    };\n\n    componentDidUpdate(prevProps) {\n        const { isCheckout, isEmailAvailable, setSignInState } = this.props;\n        const { isEmailAvailable: prevIsEmailAvailable } = prevProps;\n\n        if (isCheckout && isEmailAvailable && !prevIsEmailAvailable) {\n            setSignInState('');\n        }\n    }\n\n    containerProps = () => {\n        const {\n            state,\n            onFormError,\n            handleForgotPassword,\n            handleCreateAccount,\n            isCheckout,\n            setLoadingState,\n            emailValue,\n            handleEmailInput\n        } = this.props;\n\n        return {\n            state,\n            onFormError,\n            handleForgotPassword,\n            handleCreateAccount,\n            isCheckout,\n            setLoadingState,\n            emailValue,\n            handleEmailInput\n        };\n    };\n\n    async onSignInSuccess(fields) {\n        const {\n            signIn,\n            showNotification,\n            onSignIn,\n            setLoadingState\n        } = this.props;\n\n        try {\n            await signIn(fields);\n            onSignIn();\n        } catch (error) {\n            showNotification('error', getErrorMessage(error));\n        }\n\n        setLoadingState(false);\n    }\n\n    onSignInAttempt() {\n        const { setLoadingState } = this.props;\n        setLoadingState(true);\n    }\n\n    render() {\n        return (\n            <MyAccountSignIn\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MyAccountSignInContainer);\n"]},"metadata":{},"sourceType":"module"}