{"ast":null,"code":"import _objectSpread from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import BrowserDatabase from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/BrowserDatabase\";import{ONE_MONTH_IN_SECONDS}from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/Request/QueryDispatcher\";import{GET_ORDER_LIST}from\"./Order.action\";export var ORDERS='orders';/** @namespace Store/Order/Reducer/getFormattedDate */export var getFormattedDate=middleware(function(){var rawDate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var date=new Date(rawDate.replace(/\\s/,'T'));var RADIX=10;var addLeadingZero=function addLeadingZero(value){return value<RADIX?\"0\".concat(value):value;};var day=addLeadingZero(date.getDate());var month=addLeadingZero(date.getMonth()+1);return\"\".concat(date.getFullYear(),\"-\").concat(month,\"-\").concat(day);},\"Store/Order/Reducer/getFormattedDate\");/** @namespace Store/Order/Reducer/formatOrders */export var formatOrders=middleware(function(orders){return orders.reduce(function(acc,order){var base_order_info=order.base_order_info;var created_at=base_order_info.created_at;var formattedDate=getFormattedDate(created_at);return[].concat(_toConsumableArray(acc),[_objectSpread(_objectSpread({},order),{},{base_order_info:_objectSpread(_objectSpread({},order.base_order_info),{},{created_at:formattedDate})})]);},[]);},\"Store/Order/Reducer/formatOrders\");export var orderList=BrowserDatabase.getItem(ORDERS)||[];/** @namespace Store/Order/Reducer/getInitialState */export var getInitialState=middleware(function(){return{orderList:orderList,isLoading:!orderList.length};},\"Store/Order/Reducer/getInitialState\");/** @namespace Store/Order/Reducer */export var OrderReducer=middleware(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getInitialState();var action=arguments.length>1?arguments[1]:undefined;var type=action.type,orderList=action.orderList,status=action.status;switch(type){case GET_ORDER_LIST:var _orderList$items=orderList.items,items=_orderList$items===void 0?[]:_orderList$items;var formattedOrders=formatOrders(items);BrowserDatabase.setItem(formattedOrders,ORDERS,ONE_MONTH_IN_SECONDS);return _objectSpread(_objectSpread({},state),{},{isLoading:status,orderList:formattedOrders});default:return state;}},\"Store/Order/Reducer\");export default OrderReducer;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/store/Order/Order.reducer.js"],"names":["BrowserDatabase","ONE_MONTH_IN_SECONDS","GET_ORDER_LIST","ORDERS","getFormattedDate","rawDate","date","Date","replace","RADIX","addLeadingZero","value","day","getDate","month","getMonth","getFullYear","formatOrders","orders","reduce","acc","order","base_order_info","created_at","formattedDate","orderList","getItem","getInitialState","isLoading","length","OrderReducer","state","action","type","status","items","formattedOrders","setItem"],"mappings":"ySAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,MAAOA,CAAAA,eAAP,8EACA,OAASC,oBAAT,sFAEA,OAASC,cAAT,sBAEA,MAAO,IAAMC,CAAAA,MAAM,CAAG,QAAf,CAEP,sDACA,MAAO,IAAMC,CAAAA,gBAAgB,YAAG,UAAkB,IAAjBC,CAAAA,OAAiB,2DAAP,EAAO,CAC9C,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,CAASF,OAAO,CAACG,OAAR,CAAgB,IAAhB,CAAsB,GAAtB,CAAT,CAAb,CACA,GAAMC,CAAAA,KAAK,CAAG,EAAd,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,KAAD,QAAYA,CAAAA,KAAK,CAAGF,KAAR,YAAoBE,KAApB,EAA8BA,KAA1C,EAAvB,CAEA,GAAMC,CAAAA,GAAG,CAAGF,cAAc,CAACJ,IAAI,CAACO,OAAL,EAAD,CAA1B,CACA,GAAMC,CAAAA,KAAK,CAAGJ,cAAc,CAACJ,IAAI,CAACS,QAAL,GAAkB,CAAnB,CAA5B,CAEA,gBAAUT,IAAI,CAACU,WAAL,EAAV,aAAgCF,KAAhC,aAAyCF,GAAzC,EACH,CAV4B,wCAAtB,CAYP,kDACA,MAAO,IAAMK,CAAAA,YAAY,YAAG,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAACC,MAAP,CAAc,SAACC,GAAD,CAAMC,KAAN,CAAgB,IAC1DC,CAAAA,eAD0D,CACtCD,KADsC,CAC1DC,eAD0D,IAE1DC,CAAAA,UAF0D,CAE3CD,eAF2C,CAE1DC,UAF0D,CAGlE,GAAMC,CAAAA,aAAa,CAAGpB,gBAAgB,CAACmB,UAAD,CAAtC,CAEA,mCACOH,GADP,kCAGWC,KAHX,MAIQC,eAAe,gCACRD,KAAK,CAACC,eADE,MAEXC,UAAU,CAAEC,aAFD,EAJvB,KAUH,CAfuC,CAerC,EAfqC,CAAZ,EAAH,oCAAlB,CAiBP,MAAO,IAAMC,CAAAA,SAAS,CAAGzB,eAAe,CAAC0B,OAAhB,CAAwBvB,MAAxB,GAAmC,EAArD,CAEP,qDACA,MAAO,IAAMwB,CAAAA,eAAe,YAAG,iBAAO,CAClCF,SAAS,CAATA,SADkC,CAElCG,SAAS,CAAE,CAACH,SAAS,CAACI,MAFY,CAAP,EAAH,uCAArB,CAKP,qCACA,MAAO,IAAMC,CAAAA,YAAY,YAAG,UAGvB,IAFDC,CAAAA,KAEC,2DAFOJ,eAAe,EAEtB,IADDK,CAAAA,MACC,8CAEGC,CAAAA,IAFH,CAKGD,MALH,CAEGC,IAFH,CAGGR,SAHH,CAKGO,MALH,CAGGP,SAHH,CAIGS,MAJH,CAKGF,MALH,CAIGE,MAJH,CAOD,OAAQD,IAAR,EACA,IAAK/B,CAAAA,cAAL,sBAC2BuB,SAD3B,CACYU,KADZ,CACYA,KADZ,2BACoB,EADpB,kBAEI,GAAMC,CAAAA,eAAe,CAAGnB,YAAY,CAACkB,KAAD,CAApC,CAEAnC,eAAe,CAACqC,OAAhB,CAAwBD,eAAxB,CAAyCjC,MAAzC,CAAiDF,oBAAjD,EAEA,sCACO8B,KADP,MAEIH,SAAS,CAAEM,MAFf,CAGIT,SAAS,CAAEW,eAHf,GAMJ,QACI,MAAOL,CAAAA,KAAP,CAdJ,CAgBH,CA1BwB,uBAAlB,CA4BP,cAAeD,CAAAA,YAAf","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport BrowserDatabase from 'Util/BrowserDatabase';\nimport { ONE_MONTH_IN_SECONDS } from 'Util/Request/QueryDispatcher';\n\nimport { GET_ORDER_LIST } from './Order.action';\n\nexport const ORDERS = 'orders';\n\n/** @namespace Store/Order/Reducer/getFormattedDate */\nexport const getFormattedDate = (rawDate = '') => {\n    const date = new Date(rawDate.replace(/\\s/, 'T'));\n    const RADIX = 10;\n\n    const addLeadingZero = (value) => (value < RADIX ? `0${value}` : value);\n\n    const day = addLeadingZero(date.getDate());\n    const month = addLeadingZero(date.getMonth() + 1);\n\n    return `${date.getFullYear()}-${month}-${day}`;\n};\n\n/** @namespace Store/Order/Reducer/formatOrders */\nexport const formatOrders = (orders) => orders.reduce((acc, order) => {\n    const { base_order_info } = order;\n    const { created_at } = base_order_info;\n    const formattedDate = getFormattedDate(created_at);\n\n    return [\n        ...acc,\n        {\n            ...order,\n            base_order_info: {\n                ...order.base_order_info,\n                created_at: formattedDate\n            }\n        }\n    ];\n}, []);\n\nexport const orderList = BrowserDatabase.getItem(ORDERS) || [];\n\n/** @namespace Store/Order/Reducer/getInitialState */\nexport const getInitialState = () => ({\n    orderList,\n    isLoading: !orderList.length\n});\n\n/** @namespace Store/Order/Reducer */\nexport const OrderReducer = (\n    state = getInitialState(),\n    action\n) => {\n    const {\n        type,\n        orderList,\n        status\n    } = action;\n\n    switch (type) {\n    case GET_ORDER_LIST:\n        const { items = [] } = orderList;\n        const formattedOrders = formatOrders(items);\n\n        BrowserDatabase.setItem(formattedOrders, ORDERS, ONE_MONTH_IN_SECONDS);\n\n        return {\n            ...state,\n            isLoading: status,\n            orderList: formattedOrders\n        };\n\n    default:\n        return state;\n    }\n};\n\nexport default OrderReducer;\n"]},"metadata":{},"sourceType":"module"}