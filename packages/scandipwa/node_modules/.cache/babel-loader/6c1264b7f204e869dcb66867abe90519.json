{"ast":null,"code":"import _classCallCheck from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _get from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/marketihor/scandipwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable react/no-unused-state */ /**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */import{Children,createRef,PureComponent}from'react';import Draggable from\"/home/marketihor/scandipwa/packages/scandipwa/src/component/Draggable\";import{ChildrenType,MixType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Common\";import{DeviceType}from\"/home/marketihor/scandipwa/packages/scandipwa/src/type/Device\";import CSS from\"/home/marketihor/scandipwa/packages/scandipwa/src/util/CSS\";import{ACTIVE_SLIDE_PERCENT,ANIMATION_DURATION,HEIGHT_TRANSITION_SPEED_ON_MOUNT}from\"./Slider.config\";import\"./Slider.style\";/**\n * Slider component\n * @class Slider\n * @namespace Component/Slider/Component\n */var _checkBEM=require(\"babel-plugin-transform-rebem-jsx\").checkBEMProps;export var _Slider=/*#__PURE__*/function(_Extensible){_inherits(_Slider,_Extensible);var _super=_createSuper(_Slider);function _Slider(){var _this;_classCallCheck(this,_Slider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.sliderWidth=0;_this.prevPosition=0;_this.draggableRef=/*#__PURE__*/createRef();_this.sliderRef=/*#__PURE__*/createRef();_this.handleDragStart=_this.handleInteraction.bind(_assertThisInitialized(_this),_this.handleDragStart);_this.handleDrag=_this.handleInteraction.bind(_assertThisInitialized(_this),_this.handleDrag);_this.handleDragEnd=_this.handleInteraction.bind(_assertThisInitialized(_this),_this.handleDragEnd);_this.renderCrumb=_this.renderCrumb.bind(_assertThisInitialized(_this));_this.handleClick=function(state,callback,e){if(e.type==='contextmenu'){_this.handleDragEnd(state,callback);}};return _this;}_createClass(_Slider,[{key:\"__construct\",value:function __construct(props){_get(_getPrototypeOf(_Slider.prototype),\"__construct\",this).call(this,props);var activeImage=this.props.activeImage;this.state={prevActiveImage:activeImage};}},{key:\"componentDidMount\",value:function componentDidMount(){this.addWindowResizeWatcher();if(!this.getIsSlider()){return;}var sliderChildren=this.draggableRef.current.children;var sliderWidth=this.draggableRef.current.offsetWidth;this.sliderWidth=sliderWidth;if(!sliderChildren||!sliderChildren[0]){return;}this.setStyleVariablesOnMount();var sliderRef=this.getSliderRef();var sliderHeight=\"\".concat(sliderChildren[0].offsetHeight,\"px\");sliderChildren[0].onload=function(){CSS.setVariable(sliderRef,'slider-height',sliderHeight);};setTimeout(function(){CSS.setVariable(sliderRef,'slider-height',sliderHeight);},ANIMATION_DURATION);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevActiveImage=prevProps.activeImage;var activeImage=this.props.activeImage;if(activeImage!==prevActiveImage&&this.getIsSlider()){var newTranslate=-activeImage*this.getSlideWidth();this.setAnimationSpeedStyle(Math.abs((prevActiveImage-activeImage)*ANIMATION_DURATION));this.setTranlateXStyle(newTranslate);}}},{key:\"addWindowResizeWatcher\",value:function addWindowResizeWatcher(){var _this2=this;window.addEventListener('resize',function(){var activeImage=_this2.props.activeImage;var newTranslate=-activeImage*_this2.getSlideWidth();_this2.setTranlateXStyle(newTranslate);// Removed animation to avoid image movement while changing window width.\n_this2.setAnimationSpeedStyle(0);var delay=500;setTimeout(function(){_this2.setAnimationSpeedStyle();},delay);});}},{key:\"setStyleVariablesOnMount\",value:function setStyleVariablesOnMount(){var _this$props=this.props,sliderHeight=_this$props.sliderHeight,isHeightTransitionDisabledOnMount=_this$props.isHeightTransitionDisabledOnMount,activeImage=_this$props.activeImage;var sliderRef=this.getSliderRef();if(isHeightTransitionDisabledOnMount){var transitionSpeed=isHeightTransitionDisabledOnMount?0:\"\".concat(HEIGHT_TRANSITION_SPEED_ON_MOUNT,\"ms\");CSS.setVariable(sliderRef,'height-transition-speed',transitionSpeed);}if(sliderHeight){CSS.setVariable(sliderRef,'slider-height',sliderHeight);}var newTranslate=-activeImage*this.getSlideWidth();this.setTranlateXStyle(newTranslate);}},{key:\"setTranlateXStyle\",value:function setTranlateXStyle(translate){var isVertical=this.props.isVertical;CSS.setVariable(this.draggableRef,isVertical?'translateY':'translateX',\"\".concat(translate,\"px\"));}},{key:\"setAnimationSpeedStyle\",value:function setAnimationSpeedStyle(){var animationDuration=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ANIMATION_DURATION;CSS.setVariable(this.draggableRef,'animation-speed',\"\".concat(animationDuration,\"ms\"));}},{key:\"getIsSlider\",value:function getIsSlider(){var children=this.props.children;return children.length>0;}},{key:\"getSlideWidth\",value:function getSlideWidth(){var isVertical=this.props.isVertical;var _ref=this.draggableRef.current||{},_ref$offsetWidth=_ref.offsetWidth,offsetWidth=_ref$offsetWidth===void 0?0:_ref$offsetWidth,_ref$offsetHeight=_ref.offsetHeight,offsetHeight=_ref$offsetHeight===void 0?0:_ref$offsetHeight;return isVertical?offsetHeight:offsetWidth;}},{key:\"getSliderRef\",value:function getSliderRef(){var sliderRef=this.props.sliderRef;return sliderRef||this.sliderRef;}},{key:\"onClickChangeSlide\",value:function onClickChangeSlide(state,slideSize,lastTranslate,fullSliderSize){var originalX=state.originalX;var prevActiveSlider=this.state.prevActiveImage;var _this$props2=this.props,onActiveImageChange=_this$props2.onActiveImageChange,device=_this$props2.device,onClick=_this$props2.onClick;if(onClick){onClick();return-prevActiveSlider;}var fullSliderPoss=Math.round(fullSliderSize/slideSize);var elementPossitionInDOM=this.draggableRef.current.getBoundingClientRect().x;var sliderPossition=-prevActiveSlider;var realElementPossitionInDOM=elementPossitionInDOM-lastTranslate;var mousePossitionInElement=originalX-realElementPossitionInDOM;if(device.isMobile){return sliderPossition;}if(slideSize/2<mousePossitionInElement&&-fullSliderPoss<sliderPossition){var activeSlide=sliderPossition-1;onActiveImageChange(-activeSlide);return activeSlide;}if(slideSize/2>mousePossitionInElement&&lastTranslate){var _activeSlide=sliderPossition+1;onActiveImageChange(-_activeSlide);return _activeSlide;}return sliderPossition;}},{key:\"getFullSliderWidth\",value:function getFullSliderWidth(){var isVertical=this.props.isVertical;var _this$draggableRef$cu=this.draggableRef.current,fullSliderWidth=_this$draggableRef$cu.scrollWidth,scrollHeight=_this$draggableRef$cu.scrollHeight;var width=isVertical?scrollHeight:fullSliderWidth;return width-this.getSlideWidth();}},{key:\"calculateNextSlide\",value:function calculateNextSlide(state){var isVertical=this.props.isVertical;var translateX=state.translateX,translateY=state.translateY,lastTranslateX=state.lastTranslateX,lastTranslateY=state.lastTranslateY;var lastTranslate=isVertical?lastTranslateY:lastTranslateX;var translate=isVertical?translateY:translateX;var onActiveImageChange=this.props.onActiveImageChange;var slideSize=this.getSlideWidth();var fullSliderSize=this.getFullSliderWidth();var activeSlidePosition=translate/slideSize;var activeSlidePercent=Math.abs(activeSlidePosition%1);var isSlideBack=translate>lastTranslate;if(!translate){return this.onClickChangeSlide(state,slideSize,lastTranslate,fullSliderSize);}if(translate>=0){onActiveImageChange(0);return 0;}if(translate<-fullSliderSize){var _activeSlide2=Math.round(fullSliderSize/-slideSize);onActiveImageChange(-_activeSlide2);return _activeSlide2;}if(isSlideBack&&activeSlidePercent<1-ACTIVE_SLIDE_PERCENT){var _activeSlide3=Math.ceil(activeSlidePosition);onActiveImageChange(-_activeSlide3);return _activeSlide3;}if(!isSlideBack&&activeSlidePercent>ACTIVE_SLIDE_PERCENT){var _activeSlide4=Math.floor(activeSlidePosition);onActiveImageChange(-_activeSlide4);return _activeSlide4;}var activeSlide=Math.round(activeSlidePosition);onActiveImageChange(-activeSlide);return activeSlide;}},{key:\"handleDragStart\",value:function handleDragStart(){this.setAnimationSpeedStyle(0);}},{key:\"handleDrag\",value:function handleDrag(state){var isVertical=this.props.isVertical;var translateX=state.translateX,translateY=state.translateY;var translate=isVertical?translateY:translateX;var fullSliderSize=this.getFullSliderWidth();if(translate<0&&translate>-fullSliderSize){this.setTranlateXStyle(translate);}}},{key:\"handleDragEnd\",value:function handleDragEnd(state,callback){var isVertical=this.props.isVertical;var activeSlide=this.calculateNextSlide(state);var slideSize=this.getSlideWidth();var newTranslate=activeSlide*slideSize;this.setAnimationSpeedStyle();this.setTranlateXStyle(newTranslate);if(isVertical){callback({originalY:newTranslate,lastTranslateY:newTranslate});return;}callback({originalX:newTranslate,lastTranslateX:newTranslate});}},{key:\"handleInteraction\",value:function handleInteraction(callback){var isInteractionDisabled=this.props.isInteractionDisabled;if(isInteractionDisabled||!callback){return;}for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}callback.call.apply(callback,[this].concat(args));}},{key:\"changeActiveImage\",value:function changeActiveImage(activeImage){var onActiveImageChange=this.props.onActiveImageChange;onActiveImageChange(activeImage);}},{key:\"renderCrumbs\",value:function renderCrumbs(){var children=this.props.children;if(children.length<=1){return null;}return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Slider\",elem:\"Crumbs\"},Children.map(children,this.renderCrumb));}},{key:\"renderCrumb\",value:function renderCrumb(_,i){var _this3=this;var activeImage=this.props.activeImage;var isActive=i===Math.abs(-activeImage);return/*#__PURE__*/_checkBEM(React,\"button\",{block:\"Slider\",elem:\"Image\",mods:{type:'single'}// eslint-disable-next-line react/jsx-no-bind\n,onClick:function onClick(){return _this3.changeActiveImage(i);},\"aria-label\":__('Slide crumb')},/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Slider\",elem:\"Crumb\",mods:{isActive:isActive}}));}},{key:\"renderSliderContent\",value:function renderSliderContent(){var _this$props3=this.props,activeImage=_this$props3.activeImage,children=_this$props3.children,isVertical=_this$props3.isVertical;if(!this.getIsSlider()){return children;}return/*#__PURE__*/_checkBEM(React,Draggable,{mix:{block:'Slider',elem:'Wrapper',mods:{isVertical:isVertical}},draggableRef:this.draggableRef,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onDrag:this.handleDrag,onClick:this.handleClick,shiftX:-activeImage*this.getSlideWidth(),shiftY:-activeImage*this.getSlideWidth()},children);}},{key:\"render\",value:function render(){var _this$props4=this.props,showCrumbs=_this$props4.showCrumbs,mix=_this$props4.mix;return/*#__PURE__*/_checkBEM(React,\"div\",{block:\"Slider\",mix:mix,ref:this.getSliderRef()},this.renderSliderContent(),showCrumbs&&this.renderCrumbs());}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var activeImage=props.activeImage,children=props.children;var prevActiveImage=state.prevActiveImage;if(prevActiveImage!==activeImage&&children.length!==1){return{prevActiveImage:activeImage};}return null;}}]);return _Slider;}(Extensible(PureComponent));_Slider.defaultProps={activeImage:0,onActiveImageChange:function onActiveImageChange(){},showCrumbs:false,isInteractionDisabled:false,mix:{},onClick:null,isVertical:false,isHeightTransitionDisabledOnMount:false,sliderHeight:null,sliderRef:null};Object.defineProperty(_Slider,'name',{value:'Slider'});export var Slider=middleware(_Slider,\"Component/Slider/Component\");export default Slider;","map":{"version":3,"sources":["/home/marketihor/scandipwa/packages/scandipwa/src/component/Slider/Slider.component.js"],"names":["Children","createRef","PureComponent","Draggable","ChildrenType","MixType","DeviceType","CSS","ACTIVE_SLIDE_PERCENT","ANIMATION_DURATION","HEIGHT_TRANSITION_SPEED_ON_MOUNT","Slider","sliderWidth","prevPosition","draggableRef","sliderRef","handleDragStart","handleInteraction","bind","handleDrag","handleDragEnd","renderCrumb","handleClick","state","callback","e","type","props","activeImage","prevActiveImage","addWindowResizeWatcher","getIsSlider","sliderChildren","current","children","offsetWidth","setStyleVariablesOnMount","getSliderRef","sliderHeight","offsetHeight","onload","setVariable","setTimeout","prevProps","newTranslate","getSlideWidth","setAnimationSpeedStyle","Math","abs","setTranlateXStyle","window","addEventListener","delay","isHeightTransitionDisabledOnMount","transitionSpeed","translate","isVertical","animationDuration","length","slideSize","lastTranslate","fullSliderSize","originalX","prevActiveSlider","onActiveImageChange","device","onClick","fullSliderPoss","round","elementPossitionInDOM","getBoundingClientRect","x","sliderPossition","realElementPossitionInDOM","mousePossitionInElement","isMobile","activeSlide","fullSliderWidth","scrollWidth","scrollHeight","width","translateX","translateY","lastTranslateX","lastTranslateY","getFullSliderWidth","activeSlidePosition","activeSlidePercent","isSlideBack","onClickChangeSlide","ceil","floor","calculateNextSlide","originalY","isInteractionDisabled","args","call","map","_","i","isActive","changeActiveImage","__","block","elem","mods","showCrumbs","mix","renderSliderContent","renderCrumbs","defaultProps","Object","defineProperty","_Slider","value"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-unused-state */\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/base-theme\n * @link https://github.com/scandipwa/base-theme\n */\n\nimport PropTypes from 'prop-types';\nimport { Children, createRef, PureComponent } from 'react';\n\nimport Draggable from 'Component/Draggable';\nimport { ChildrenType, MixType } from 'Type/Common';\nimport { DeviceType } from 'Type/Device';\nimport CSS from 'Util/CSS';\n\nimport {\n    ACTIVE_SLIDE_PERCENT,\n    ANIMATION_DURATION,\n    HEIGHT_TRANSITION_SPEED_ON_MOUNT\n} from './Slider.config';\n\nimport './Slider.style';\n\n/**\n * Slider component\n * @class Slider\n * @namespace Component/Slider/Component\n */\nexport class Slider extends PureComponent {\n    static propTypes = {\n        showCrumbs: PropTypes.bool,\n        activeImage: PropTypes.number,\n        onActiveImageChange: PropTypes.func,\n        mix: MixType,\n        children: ChildrenType.isRequired,\n        isInteractionDisabled: PropTypes.bool,\n        device: DeviceType.isRequired,\n        onClick: PropTypes.func,\n        isVertical: PropTypes.bool,\n        isHeightTransitionDisabledOnMount: PropTypes.bool,\n        sliderHeight: PropTypes.oneOfType([\n            PropTypes.number,\n            PropTypes.string\n        ]),\n        sliderRef: PropTypes.object\n    };\n\n    static defaultProps = {\n        activeImage: 0,\n        onActiveImageChange: () => {},\n        showCrumbs: false,\n        isInteractionDisabled: false,\n        mix: {},\n        onClick: null,\n        isVertical: false,\n        isHeightTransitionDisabledOnMount: false,\n        sliderHeight: null,\n        sliderRef: null\n    };\n\n    sliderWidth = 0;\n\n    prevPosition = 0;\n\n    draggableRef = createRef();\n\n    sliderRef = createRef();\n\n    handleDragStart = this.handleInteraction.bind(this, this.handleDragStart);\n\n    handleDrag = this.handleInteraction.bind(this, this.handleDrag);\n\n    handleDragEnd = this.handleInteraction.bind(this, this.handleDragEnd);\n\n    renderCrumb = this.renderCrumb.bind(this);\n\n    __construct(props) {\n        super.__construct(props);\n\n        const { activeImage } = this.props;\n\n        this.state = {\n            prevActiveImage: activeImage\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { activeImage, children } = props;\n        const { prevActiveImage } = state;\n\n        if (prevActiveImage !== activeImage && children.length !== 1) {\n            return { prevActiveImage: activeImage };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        this.addWindowResizeWatcher();\n\n        if (!this.getIsSlider()) {\n            return;\n        }\n\n        const sliderChildren = this.draggableRef.current.children;\n        const sliderWidth = this.draggableRef.current.offsetWidth;\n        this.sliderWidth = sliderWidth;\n\n        if (!sliderChildren || !sliderChildren[0]) {\n            return;\n        }\n\n        this.setStyleVariablesOnMount();\n\n        const sliderRef = this.getSliderRef();\n        const sliderHeight = `${ sliderChildren[0].offsetHeight }px`;\n\n        sliderChildren[0].onload = () => {\n            CSS.setVariable(sliderRef, 'slider-height', sliderHeight);\n        };\n\n        setTimeout(() => {\n            CSS.setVariable(sliderRef, 'slider-height', sliderHeight);\n        }, ANIMATION_DURATION);\n    }\n\n    componentDidUpdate(prevProps) {\n        const { activeImage: prevActiveImage } = prevProps;\n        const { activeImage } = this.props;\n\n        if (activeImage !== prevActiveImage && this.getIsSlider()) {\n            const newTranslate = -activeImage * this.getSlideWidth();\n\n            this.setAnimationSpeedStyle(Math.abs((prevActiveImage - activeImage) * ANIMATION_DURATION));\n            this.setTranlateXStyle(newTranslate);\n        }\n    }\n\n    addWindowResizeWatcher() {\n        window.addEventListener('resize', () => {\n            const { activeImage } = this.props;\n            const newTranslate = -activeImage * this.getSlideWidth();\n\n            this.setTranlateXStyle(newTranslate);\n\n            // Removed animation to avoid image movement while changing window width.\n            this.setAnimationSpeedStyle(0);\n\n            const delay = 500;\n            setTimeout(() => {\n                this.setAnimationSpeedStyle();\n            }, delay);\n        });\n    }\n\n    setStyleVariablesOnMount() {\n        const { sliderHeight, isHeightTransitionDisabledOnMount, activeImage } = this.props;\n\n        const sliderRef = this.getSliderRef();\n\n        if (isHeightTransitionDisabledOnMount) {\n            const transitionSpeed = isHeightTransitionDisabledOnMount\n                ? 0\n                : `${ HEIGHT_TRANSITION_SPEED_ON_MOUNT }ms`;\n\n            CSS.setVariable(\n                sliderRef,\n                'height-transition-speed',\n                transitionSpeed\n            );\n        }\n\n        if (sliderHeight) {\n            CSS.setVariable(sliderRef, 'slider-height', sliderHeight);\n        }\n\n        const newTranslate = -activeImage * this.getSlideWidth();\n        this.setTranlateXStyle(newTranslate);\n    }\n\n    setTranlateXStyle(translate) {\n        const { isVertical } = this.props;\n\n        CSS.setVariable(this.draggableRef, isVertical ? 'translateY' : 'translateX', `${ translate }px`);\n    }\n\n    setAnimationSpeedStyle(animationDuration = ANIMATION_DURATION) {\n        CSS.setVariable(this.draggableRef, 'animation-speed', `${ animationDuration }ms`);\n    }\n\n    getIsSlider() {\n        const { children } = this.props;\n\n        return children.length > 0;\n    }\n\n    getSlideWidth() {\n        const { isVertical } = this.props;\n        const { offsetWidth = 0, offsetHeight = 0 } = this.draggableRef.current || {};\n\n        return isVertical ? offsetHeight : offsetWidth;\n    }\n\n    getSliderRef() {\n        const { sliderRef } = this.props;\n\n        return sliderRef || this.sliderRef;\n    }\n\n    onClickChangeSlide(state, slideSize, lastTranslate, fullSliderSize) {\n        const { originalX } = state;\n        const { prevActiveImage: prevActiveSlider } = this.state;\n        const { onActiveImageChange, device, onClick } = this.props;\n\n        if (onClick) {\n            onClick();\n\n            return -prevActiveSlider;\n        }\n\n        const fullSliderPoss = Math.round(fullSliderSize / slideSize);\n        const elementPossitionInDOM = this.draggableRef.current.getBoundingClientRect().x;\n\n        const sliderPossition = -prevActiveSlider;\n        const realElementPossitionInDOM = elementPossitionInDOM - lastTranslate;\n        const mousePossitionInElement = originalX - realElementPossitionInDOM;\n\n        if (device.isMobile) {\n            return sliderPossition;\n        }\n\n        if (slideSize / 2 < mousePossitionInElement && -fullSliderPoss < sliderPossition) {\n            const activeSlide = sliderPossition - 1;\n            onActiveImageChange(-activeSlide);\n            return activeSlide;\n        }\n\n        if (slideSize / 2 > mousePossitionInElement && lastTranslate) {\n            const activeSlide = sliderPossition + 1;\n            onActiveImageChange(-activeSlide);\n            return activeSlide;\n        }\n\n        return sliderPossition;\n    }\n\n    getFullSliderWidth() {\n        const { isVertical } = this.props;\n        const { scrollWidth: fullSliderWidth, scrollHeight } = this.draggableRef.current;\n\n        const width = isVertical ? scrollHeight : fullSliderWidth;\n\n        return width - this.getSlideWidth();\n    }\n\n    calculateNextSlide(state) {\n        const { isVertical } = this.props;\n        const {\n            translateX,\n            translateY,\n            lastTranslateX,\n            lastTranslateY\n        } = state;\n\n        const lastTranslate = isVertical ? lastTranslateY : lastTranslateX;\n        const translate = isVertical ? translateY : translateX;\n\n        const { onActiveImageChange } = this.props;\n\n        const slideSize = this.getSlideWidth();\n\n        const fullSliderSize = this.getFullSliderWidth();\n\n        const activeSlidePosition = translate / slideSize;\n        const activeSlidePercent = Math.abs(activeSlidePosition % 1);\n        const isSlideBack = translate > lastTranslate;\n\n        if (!translate) {\n            return this.onClickChangeSlide(state, slideSize, lastTranslate, fullSliderSize);\n        }\n\n        if (translate >= 0) {\n            onActiveImageChange(0);\n            return 0;\n        }\n\n        if (translate < -fullSliderSize) {\n            const activeSlide = Math.round(fullSliderSize / -slideSize);\n            onActiveImageChange(-activeSlide);\n            return activeSlide;\n        }\n\n        if (isSlideBack && activeSlidePercent < 1 - ACTIVE_SLIDE_PERCENT) {\n            const activeSlide = Math.ceil(activeSlidePosition);\n            onActiveImageChange(-activeSlide);\n            return activeSlide;\n        }\n\n        if (!isSlideBack && activeSlidePercent > ACTIVE_SLIDE_PERCENT) {\n            const activeSlide = Math.floor(activeSlidePosition);\n            onActiveImageChange(-activeSlide);\n            return activeSlide;\n        }\n\n        const activeSlide = Math.round(activeSlidePosition);\n        onActiveImageChange(-activeSlide);\n        return activeSlide;\n    }\n\n    handleDragStart() {\n        this.setAnimationSpeedStyle(0);\n    }\n\n    handleDrag(state) {\n        const { isVertical } = this.props;\n        const { translateX, translateY } = state;\n\n        const translate = isVertical ? translateY : translateX;\n\n        const fullSliderSize = this.getFullSliderWidth();\n\n        if (translate < 0 && translate > -fullSliderSize) {\n            this.setTranlateXStyle(translate);\n        }\n    }\n\n    handleDragEnd(state, callback) {\n        const { isVertical } = this.props;\n        const activeSlide = this.calculateNextSlide(state);\n        const slideSize = this.getSlideWidth();\n        const newTranslate = activeSlide * slideSize;\n\n        this.setAnimationSpeedStyle();\n        this.setTranlateXStyle(newTranslate);\n\n        if (isVertical) {\n            callback({\n                originalY: newTranslate,\n                lastTranslateY: newTranslate\n            });\n\n            return;\n        }\n\n        callback({\n            originalX: newTranslate,\n            lastTranslateX: newTranslate\n        });\n    }\n\n    handleClick = (state, callback, e) => {\n        if (e.type === 'contextmenu') {\n            this.handleDragEnd(state, callback);\n        }\n    };\n\n    handleInteraction(callback, ...args) {\n        const { isInteractionDisabled } = this.props;\n\n        if (isInteractionDisabled || !callback) {\n            return;\n        }\n\n        callback.call(this, ...args);\n    }\n\n    changeActiveImage(activeImage) {\n        const { onActiveImageChange } = this.props;\n        onActiveImageChange(activeImage);\n    }\n\n    renderCrumbs() {\n        const { children } = this.props;\n        if (children.length <= 1) {\n            return null;\n        }\n\n        return (\n            <div\n              block=\"Slider\"\n              elem=\"Crumbs\"\n            >\n                { Children.map(children, this.renderCrumb) }\n            </div>\n        );\n    }\n\n    renderCrumb(_, i) {\n        const { activeImage } = this.props;\n        const isActive = i === Math.abs(-activeImage);\n\n        return (\n            <button\n              block=\"Slider\"\n              elem=\"Image\"\n              mods={ { type: 'single' } }\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={ () => this.changeActiveImage(i) }\n              aria-label={ __('Slide crumb') }\n            >\n                <div\n                  block=\"Slider\"\n                  elem=\"Crumb\"\n                  mods={ { isActive } }\n                />\n            </button>\n        );\n    }\n\n    renderSliderContent() {\n        const { activeImage, children, isVertical } = this.props;\n\n        if (!this.getIsSlider()) {\n            return children;\n        }\n\n        return (\n            <Draggable\n              mix={ { block: 'Slider', elem: 'Wrapper', mods: { isVertical } } }\n              draggableRef={ this.draggableRef }\n              onDragStart={ this.handleDragStart }\n              onDragEnd={ this.handleDragEnd }\n              onDrag={ this.handleDrag }\n              onClick={ this.handleClick }\n              shiftX={ -activeImage * this.getSlideWidth() }\n              shiftY={ -activeImage * this.getSlideWidth() }\n            >\n                { children }\n            </Draggable>\n        );\n    }\n\n    render() {\n        const {\n            showCrumbs,\n            mix\n        } = this.props;\n\n        return (\n            <div\n              block=\"Slider\"\n              mix={ mix }\n              ref={ this.getSliderRef() }\n            >\n                { this.renderSliderContent() }\n                { showCrumbs && this.renderCrumbs() }\n            </div>\n        );\n    }\n}\n\nexport default Slider;\n"]},"metadata":{},"sourceType":"module"}